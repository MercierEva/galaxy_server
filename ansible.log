2023-04-18 20:42:26,784 p=78142 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:42:26,811 p=78142 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:42:27,829 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:27,847 p=78142 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:42:28,733 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:28,784 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:42:28,819 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:28,864 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:42:28,885 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:28,903 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:42:28,923 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:28,942 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:42:28,963 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:28,982 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:42:29,683 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:29,701 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:42:29,966 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:29,985 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:42:30,025 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,043 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:42:30,742 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,760 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:42:30,783 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,801 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:42:30,831 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,848 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:42:30,877 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,894 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:42:30,918 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,936 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:42:30,948 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,966 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:42:31,233 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:31,251 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:42:31,515 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:31,533 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:42:31,550 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:31,568 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:42:31,728 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:31,747 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:42:32,184 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:32,202 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:42:32,553 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:32,571 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:42:32,613 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:32,647 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:42:32,836 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:42:32,976 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:42:32,998 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:42:33,158 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:33,176 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:42:33,490 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:42:33,511 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:42:33,814 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:42:33,835 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:42:34,152 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:34,170 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:42:34,482 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:34,501 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:42:34,654 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:34,675 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:42:35,166 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,200 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:42:35,223 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:42:35,225 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,243 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:42:35,254 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,273 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:42:35,305 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:42:35,307 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,326 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:42:35,675 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:42:35,695 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:42:35,706 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,724 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:42:35,746 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,767 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:42:35,778 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,796 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:42:36,141 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:42:36,161 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:42:36,173 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:36,259 p=78142 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:42:36,275 p=78142 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:42:37,348 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:37,354 p=78142 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:42:38,088 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,094 p=78142 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:42:38,107 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,113 p=78142 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:42:38,831 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,847 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:42:38,862 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:42:38,868 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:42:38,910 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,916 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:42:38,952 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,958 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:42:38,991 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:42:39,001 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:42:39,004 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:42:39,007 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:42:39,018 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:42:39,028 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:42:39,031 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:42:39,035 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:42:39,038 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:42:39,047 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:42:39,100 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:42:39,126 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:42:39,152 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:42:39,176 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:42:39,178 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:39,184 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:42:39,252 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:42:39,291 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:42:39,324 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:42:39,332 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:42:39,371 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:39,383 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:42:39,477 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:39,484 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:42:40,020 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:40,027 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:42:40,136 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:40,143 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:42:40,434 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:42:40,586 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:42:40,594 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:42:40,770 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:42:40,919 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:42:40,927 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:42:41,005 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:41,011 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:42:41,028 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:41,034 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:42:41,055 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:41,069 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:42:41,398 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:41,404 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:42:41,736 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:42:42,045 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:42:42,348 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:42:42,655 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:42:42,663 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:42:43,006 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:42:43,300 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:42:43,596 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:42:43,893 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:42:44,194 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:42:44,492 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/datasets)
2023-04-18 20:42:44,796 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/jobs)
2023-04-18 20:42:45,115 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:42:45,415 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:42:45,736 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:42:45,745 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:42:45,772 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:45,810 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:42:47,197 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:47,204 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:42:47,301 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:47,308 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:42:48,199 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:48,205 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:42:49,153 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,160 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:42:49,260 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,266 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:42:49,278 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,284 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:42:49,296 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,302 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:42:49,332 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:49,352 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:42:49,459 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:49,472 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:42:49,892 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,899 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:42:50,101 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:50,107 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:42:50,210 p=78142 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: "[{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection':
    3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'},
    'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion':
    True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{
    galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. [{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{
    vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml',
    'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection':
    'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml',
    'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined"
2023-04-18 20:42:50,211 p=78142 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 20:42:50,211 p=78142 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=52   changed=0    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
2023-04-18 20:46:43,419 p=83787 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:46:43,445 p=83787 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:46:44,467 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:44,485 p=83787 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:46:45,348 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:45,400 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:46:45,436 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:46:45,480 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:46:45,502 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:45,520 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:46:45,540 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:45,559 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:46:45,581 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:45,600 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:46:46,313 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:46,331 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:46:46,595 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:46,614 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:46:46,653 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:46,670 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:46:47,373 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,391 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:46:47,414 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,433 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:46:47,462 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,480 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:46:47,505 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,523 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:46:47,547 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,565 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:46:47,577 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,595 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:46:47,857 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,875 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:46:48,139 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:48,157 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:46:48,174 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:48,192 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:46:48,351 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:48,369 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:46:48,788 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:48,806 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:46:49,155 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:49,174 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:46:49,217 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:46:49,251 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:46:49,431 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:46:49,581 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:46:49,602 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:46:49,768 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:49,787 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:46:50,106 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:46:50,127 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:46:50,450 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:46:50,470 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:46:50,788 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:50,807 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:46:51,116 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,134 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:46:51,289 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,307 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:46:51,780 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,816 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:46:51,838 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:46:51,841 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,859 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:46:51,870 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,888 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:46:51,922 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:46:51,924 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,943 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:46:52,304 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:46:52,323 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:46:52,334 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:52,353 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:46:52,374 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:52,392 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:46:52,403 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:52,420 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:46:52,777 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:46:52,797 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:46:52,808 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:52,894 p=83787 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:46:52,910 p=83787 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:46:53,703 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:53,709 p=83787 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:46:54,421 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:54,427 p=83787 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:46:54,439 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:54,445 p=83787 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:46:55,152 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,167 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:46:55,183 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:46:55,189 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:46:55,230 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,236 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:46:55,269 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,275 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:46:55,304 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:46:55,310 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:46:55,323 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:46:55,333 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:46:55,343 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:46:55,354 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:46:55,357 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:46:55,361 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:46:55,364 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:46:55,372 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:46:55,428 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:46:55,455 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:46:55,482 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:46:55,506 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:46:55,508 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,514 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:46:55,585 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:46:55,625 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:46:55,660 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:46:55,667 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:46:55,705 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:46:55,718 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:46:55,823 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,829 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:46:56,379 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:56,386 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:46:56,490 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:56,496 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:46:56,795 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:46:56,944 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:46:56,953 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:46:57,126 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:46:57,280 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:46:57,288 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:46:57,365 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:57,371 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:46:57,388 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:57,394 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:46:57,417 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:46:57,430 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:46:57,749 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:57,756 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:46:58,093 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:46:58,396 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:46:58,703 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:46:59,016 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:46:59,025 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:46:59,358 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:46:59,656 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:46:59,972 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:47:00,272 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:47:00,576 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:47:00,881 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/datasets)
2023-04-18 20:47:01,174 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/jobs)
2023-04-18 20:47:01,476 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:47:01,777 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:47:02,091 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:47:02,099 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:47:02,125 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:47:02,140 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:47:03,537 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:03,544 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:47:03,662 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:47:03,668 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:47:04,578 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:04,584 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:47:05,539 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:05,546 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:47:05,643 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:47:05,649 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:47:05,660 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:47:05,666 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:47:05,679 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:47:05,685 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:47:05,714 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:47:05,735 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:47:05,845 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:47:05,857 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:47:06,276 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:06,283 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:47:06,490 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:06,496 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:47:06,599 p=83787 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: "[{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection':
    3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'},
    'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion':
    True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{
    galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. [{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{
    vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml',
    'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection':
    'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml',
    'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined"
2023-04-18 20:47:06,599 p=83787 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 20:47:06,600 p=83787 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=52   changed=0    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
2023-04-18 20:53:28,460 p=91689 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:53:28,487 p=91689 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:53:29,750 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:29,768 p=91689 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:53:30,628 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:30,679 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:53:30,715 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:30,759 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:53:30,781 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:30,799 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:53:30,820 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:30,838 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:53:30,859 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:30,877 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:53:31,605 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:31,624 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:53:31,902 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:31,921 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:53:31,962 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:31,981 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:53:32,694 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,712 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:53:32,736 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,754 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:53:32,784 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,802 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:53:32,826 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,844 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:53:32,868 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,886 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:53:32,898 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,917 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:53:33,188 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:33,206 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:53:33,465 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:33,484 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:53:33,501 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:33,519 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:53:33,690 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:33,709 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:53:34,147 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:34,165 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:53:34,514 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:34,533 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:53:34,576 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:34,611 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:53:34,790 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:53:34,932 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:53:34,953 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:53:35,111 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:35,129 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:53:35,451 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:53:35,473 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:53:35,786 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:53:35,806 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:53:36,128 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:36,147 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:53:36,459 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:36,477 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:53:36,631 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:36,650 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:53:37,134 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,168 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:53:37,191 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:53:37,193 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,211 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:53:37,221 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,240 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:53:37,300 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:53:37,302 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,319 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:53:37,656 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:53:37,676 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:53:37,687 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,705 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:53:37,728 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,746 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:53:37,758 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,776 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:53:38,111 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:53:38,132 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:53:38,146 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:38,233 p=91689 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:53:38,250 p=91689 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:53:39,017 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:39,022 p=91689 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:53:39,769 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:39,777 p=91689 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:53:39,791 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:39,797 p=91689 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:53:40,512 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:40,529 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:53:40,545 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:53:40,551 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:53:40,593 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:40,599 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:53:40,633 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:40,640 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:53:40,677 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:53:40,681 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:53:40,692 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:53:40,696 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:53:40,706 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:53:40,716 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:53:40,723 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:53:40,726 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:53:40,730 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:53:40,737 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:53:40,795 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:53:40,820 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:53:40,846 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:53:40,869 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:53:40,871 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:40,877 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:53:40,947 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:53:40,984 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:53:41,017 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:53:41,025 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:53:41,067 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:41,079 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:53:41,176 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:41,182 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:53:41,705 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:41,712 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:53:41,811 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:41,817 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:53:42,100 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:53:42,259 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:53:42,267 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:53:42,451 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:53:42,600 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:53:42,609 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:53:42,686 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:42,693 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:53:42,709 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:42,715 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:53:42,735 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:42,748 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:53:43,068 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:43,075 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:53:43,409 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:53:43,723 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:53:44,028 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:53:44,327 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:53:44,335 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:53:44,677 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:53:44,971 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:53:45,266 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:53:45,572 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:53:45,868 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:53:46,166 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/datasets)
2023-04-18 20:53:46,472 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/jobs)
2023-04-18 20:53:46,775 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:53:47,079 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:53:47,384 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:53:47,393 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:53:47,420 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:47,435 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:53:48,744 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:48,750 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:53:48,848 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:48,854 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:53:49,735 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:49,741 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:53:50,674 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:50,681 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:53:50,777 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:50,783 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:53:50,795 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:50,801 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:53:50,812 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:50,818 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:53:50,847 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:50,867 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:53:50,970 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:50,982 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:53:51,378 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:51,384 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:53:51,575 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:51,582 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:53:51,688 p=91689 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: "[{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection':
    3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'},
    'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion':
    True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{
    galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. [{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{
    vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml',
    'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection':
    'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml',
    'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined"
2023-04-18 20:53:51,689 p=91689 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 20:53:51,689 p=91689 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=52   changed=0    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
2023-04-18 20:55:00,735 p=94815 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:55:00,750 p=94815 u=ubuntu n=ansible | ERROR! vars file group_vars/secret.yml was not found
Could not find file on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-04-18 20:55:41,074 p=95433 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:55:41,100 p=95433 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:55:42,074 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:42,093 p=95433 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:55:42,931 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:42,983 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:55:43,019 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:55:43,063 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:55:43,086 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:43,104 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:55:43,126 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:43,144 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:55:43,166 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:43,184 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:55:43,928 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:43,947 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:55:44,207 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:44,226 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:55:44,263 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:44,285 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:55:45,012 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,031 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:55:45,054 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,072 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:55:45,104 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,122 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:55:45,146 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,164 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:55:45,187 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,207 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:55:45,219 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,237 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:55:45,512 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,530 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:55:45,789 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,807 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:55:45,825 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,843 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:55:46,013 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:46,031 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:55:46,467 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:46,485 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:55:46,835 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:46,853 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:55:46,896 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:55:46,932 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:55:47,135 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:55:47,281 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:55:47,302 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:55:47,481 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:47,500 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:55:47,818 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:55:47,839 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:55:48,165 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:55:48,185 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:55:48,503 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:48,521 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:55:48,835 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:48,853 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:55:49,012 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,030 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:55:49,515 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,550 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:55:49,599 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:55:49,600 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,618 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:55:49,629 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,648 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:55:49,680 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:55:49,682 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,700 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:55:50,035 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:55:50,056 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:55:50,066 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:50,085 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:55:50,106 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:50,124 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:55:50,135 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:50,153 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:55:50,511 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:55:50,532 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:55:50,543 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:50,629 p=95433 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:55:50,645 p=95433 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:55:51,657 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:51,664 p=95433 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:55:52,404 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:52,410 p=95433 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:55:52,423 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:52,428 p=95433 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:55:53,131 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,146 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:55:53,162 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:55:53,168 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:55:53,209 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,215 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:55:53,246 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,252 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:55:53,280 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:55:53,287 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:55:53,299 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:55:53,302 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:55:53,309 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:55:53,320 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:55:53,323 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:55:53,328 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:55:53,331 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:55:53,339 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:55:53,392 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:55:53,417 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:55:53,443 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:55:53,465 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:55:53,468 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,474 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:55:53,544 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:55:53,582 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:55:53,614 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:55:53,621 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:55:53,658 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:55:53,675 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:55:53,776 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,782 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:55:54,306 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:54,312 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:55:54,411 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:54,417 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:55:54,710 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:55:54,864 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:55:54,872 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:55:55,050 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:55:55,200 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:55:55,208 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:55:55,285 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:55,291 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:55:55,308 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:55,314 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:55:55,334 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:55:55,347 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:55:55,671 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:55,677 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:55:56,027 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:55:56,334 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:55:56,636 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:55:56,945 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:55:56,954 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:55:57,291 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:55:57,598 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:55:57,900 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:55:58,205 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:55:58,509 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:55:58,811 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/datasets)
2023-04-18 20:55:59,117 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/jobs)
2023-04-18 20:55:59,409 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:55:59,715 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:56:00,033 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:56:00,043 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:56:00,071 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:56:00,087 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:56:01,523 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:01,530 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:56:01,624 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:56:01,631 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:56:02,515 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:02,522 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:56:03,454 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:03,461 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:56:03,560 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:56:03,566 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:56:03,579 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:56:03,585 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:56:03,597 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:56:03,603 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:56:03,632 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:56:03,653 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:56:03,760 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:56:03,773 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:56:04,178 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:04,184 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:56:04,375 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:04,381 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:56:04,481 p=95433 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: "[{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection':
    3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'},
    'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion':
    True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{
    galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. [{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{
    vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml',
    'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection':
    'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml',
    'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined"
2023-04-18 20:56:04,482 p=95433 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 20:56:04,482 p=95433 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=52   changed=0    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
2023-04-18 20:58:47,736 p=99975 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-18 20:58:47,814 p=99975 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:58:47,828 p=99975 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:58:49,043 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:49,050 p=99975 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:58:49,938 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:49,954 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:58:49,977 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:58:49,986 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:58:50,007 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:50,013 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:58:50,036 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:50,042 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:58:50,065 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:50,071 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:58:50,767 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:50,774 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:58:51,049 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,056 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:58:51,095 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,100 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:58:51,807 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,813 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:58:51,835 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,841 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:58:51,871 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,877 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:58:51,902 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,908 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:58:51,931 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,938 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:58:51,951 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,957 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:58:52,222 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:52,228 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:58:52,495 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:52,500 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:58:52,516 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:52,522 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:58:52,692 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:52,698 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:58:53,133 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:53,138 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:58:53,502 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:53,508 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:58:53,537 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:58:53,547 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:58:53,729 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:58:53,881 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:58:53,889 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:58:54,057 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:54,063 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:58:54,392 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:58:54,400 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:58:54,706 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:58:54,714 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:58:55,030 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:55,036 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:58:55,345 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:55,351 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:58:55,501 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:55,508 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:58:56,006 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,017 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:58:56,039 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:58:56,041 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,048 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:58:56,059 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,066 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:58:56,098 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:58:56,100 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,106 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:58:56,453 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:58:56,461 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:58:56,472 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,478 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:58:56,500 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,506 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:58:56,516 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,522 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:58:56,899 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:58:56,907 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:58:56,918 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,983 p=99975 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:58:57,028 p=99975 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:58:57,808 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:57,826 p=99975 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:58:58,516 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:58,534 p=99975 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:58:58,546 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:58,564 p=99975 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:58:59,253 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:59,305 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-18 20:58:59,840 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:59,859 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-18 20:58:59,878 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:59,897 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-18 20:59:00,108 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,129 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-18 20:59:00,300 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,319 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-18 20:59:00,372 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,391 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-18 20:59:00,407 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,425 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-18 20:59:00,439 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,457 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-18 20:59:00,472 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,490 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-18 20:59:00,504 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,522 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-18 20:59:00,536 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,555 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-18 20:59:00,586 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:00,619 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-18 20:59:00,631 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,649 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-18 20:59:00,685 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-18 20:59:00,699 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,734 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-18 20:59:01,130 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:01,148 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-18 20:59:01,880 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:01,915 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:59:01,931 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:59:01,950 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:59:01,992 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:02,015 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:59:02,047 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:02,067 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:59:02,101 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:59:02,111 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:59:02,114 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:59:02,118 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:59:02,129 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:59:02,132 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:59:02,142 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:59:02,146 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:59:02,149 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:59:02,169 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:59:02,227 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:59:02,257 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:59:02,287 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:59:02,315 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:59:02,317 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:02,336 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:59:02,410 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:59:02,451 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:59:02,487 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:59:02,507 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:59:02,557 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:02,592 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:59:02,693 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:02,711 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:59:03,236 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:03,255 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:59:03,357 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:03,375 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:59:03,665 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:59:03,814 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:59:03,834 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:59:04,014 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:59:04,176 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:59:04,197 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:59:04,275 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:04,293 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:59:04,311 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:04,329 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:59:04,363 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:04,400 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:59:04,724 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:04,742 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:59:05,087 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:59:05,400 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:59:05,716 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:59:06,041 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:59:06,061 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:59:06,402 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:59:06,699 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:59:06,998 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:59:07,321 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:59:07,620 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:59:07,916 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /data/datasets
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 20:59:07,918 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-18 20:59:08,216 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /data/jobs
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 20:59:08,218 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-18 20:59:08,536 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:59:08,841 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:59:09,132 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:59:09,154 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:59:09,218 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:09,257 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:59:10,549 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:10,568 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:59:10,668 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:10,686 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:59:11,571 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:11,591 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:59:12,512 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:12,532 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:59:12,630 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:12,648 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:59:12,660 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:12,678 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:59:12,690 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:12,708 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:59:12,760 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:12,804 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:59:12,925 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:12,960 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:59:13,376 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:13,394 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:59:13,597 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:13,617 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:59:14,330 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/themes.yml[0m
[0;32m[0m[0;36m@@ -0,0 +1,82 @@[0m
[0;36m[0m[0;32m+# Our Martian Theme[0m
[0;32m[0m[0;32m+mars:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+    color: "#e03e1d"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+blue:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+    color: "#2c3143"[0m
[0;32m[0m[0;32m+    text:[0m
[0;32m[0m[0;32m+      color: "#f8f9fa"[0m
[0;32m[0m[0;32m+      hover: gold[0m
[0;32m[0m[0;32m+      active: white[0m
[0;32m[0m[0;32m+    link:[0m
[0;32m[0m[0;32m+      color: transparent[0m
[0;32m[0m[0;32m+      hover: transparent[0m
[0;32m[0m[0;32m+      active: "#181a24"[0m
[0;32m[0m[0;32m+    logo:[0m
[0;32m[0m[0;32m+      img: "/static/favicon.svg"[0m
[0;32m[0m[0;32m+      img-secondary: null[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+lightblue:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+    color: "#384E77"[0m
[0;32m[0m[0;32m+    text:[0m
[0;32m[0m[0;32m+      color: white[0m
[0;32m[0m[0;32m+      hover: "#E6F9AF"[0m
[0;32m[0m[0;32m+      active: white[0m
[0;32m[0m[0;32m+    link:[0m
[0;32m[0m[0;32m+      color: transparent[0m
[0;32m[0m[0;32m+      hover: transparent[0m
[0;32m[0m[0;32m+      active: "#18314F"[0m
[0;32m[0m[0;32m+    logo:[0m
[0;32m[0m[0;32m+      img: "/static/favicon.svg"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+pride:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+      color: >[0m
[0;32m[0m[0;32m+        linear-gradient(120deg,[0m
[0;32m[0m[0;32m+          #3c476d 0px 130px,[0m
[0;32m[0m[0;32m+          #fdda0f 131px 139px,[0m
[0;32m[0m[0;32m+          #fff 140px 148px,[0m
[0;32m[0m[0;32m+          #f4b0c9 149px 157px,[0m
[0;32m[0m[0;32m+          #7ccee6 158px 166px,[0m
[0;32m[0m[0;32m+          #93540c 167px 175px,[0m
[0;32m[0m[0;32m+          #000 176px 184px,[0m
[0;32m[0m[0;32m+          transparent 185px),[0m
[0;32m[0m[0;32m+        linear-gradient(270deg,[0m
[0;32m[0m[0;32m+          #3c476d 0px 110px,[0m
[0;32m[0m[0;32m+          #3c476d00 110px),[0m
[0;32m[0m[0;32m+        linear-gradient(180deg,[0m
[0;32m[0m[0;32m+          #FE0000 16.66%,[0m
[0;32m[0m[0;32m+          #FD8C00 16.66% 33.32%,[0m
[0;32m[0m[0;32m+          #FFE500 33.32% 49.98%,[0m
[0;32m[0m[0;32m+          #119F0B 49.98% 66.64%,[0m
[0;32m[0m[0;32m+          #0644B3 66.64% 83.3%,[0m
[0;32m[0m[0;32m+          #C22EDC 83.3%)[0m
[0;32m[0m[0;32m+      text:[0m
[0;32m[0m[0;32m+        color: white[0m
[0;32m[0m[0;32m+        hover: gold[0m
[0;32m[0m[0;32m+        active: white[0m
[0;32m[0m[0;32m+      link:[0m
[0;32m[0m[0;32m+        color: "#3c476d"[0m
[0;32m[0m[0;32m+        hover: "#323a53"[0m
[0;32m[0m[0;32m+        active: "#6170a6"[0m
[0;32m[0m[0;32m+      logo:[0m
[0;32m[0m[0;32m+        img: "/static/favicon.svg"[0m
[0;32m[0m[0;32m+        img-secondary: null[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+smoky:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+    color: "#0C0F0A"[0m
[0;32m[0m[0;32m+    text:[0m
[0;32m[0m[0;32m+      color: white[0m
[0;32m[0m[0;32m+      hover: "#FBFF12"[0m
[0;32m[0m[0;32m+      active: white[0m
[0;32m[0m[0;32m+    link:[0m
[0;32m[0m[0;32m+      color: transparent[0m
[0;32m[0m[0;32m+      hover: transparent[0m
[0;32m[0m[0;32m+      active: "#FF206E"[0m
[0;32m[0m[0;32m+    logo:[0m
[0;32m[0m[0;32m+      img: "/static/favicon.svg"[0m
[0;32m[0m[0;32m+  [0m
[0;32m[0m

2023-04-18 20:59:14,332 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-18 20:59:14,357 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-18 20:59:14,940 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/welcome.html[0m
[0;32m[0m[0;36m@@ -0,0 +1,11 @@[0m
[0;36m[0m[0;32m+<!DOCTYPE html>[0m
[0;32m[0m[0;32m+<html lang="en">[0m
[0;32m[0m[0;32m+    <head>[0m
[0;32m[0m[0;32m+        <meta charset="utf-8">[0m
[0;32m[0m[0;32m+        <link href="/static/dist/base.css" rel="stylesheet" type="text/css" />[0m
[0;32m[0m[0;32m+    </head>[0m
[0;32m[0m[0;32m+    <body>[0m
[0;32m[0m[0;32m+        <h1>Welcome to the Galaxy Mars instance!</h1>[0m
[0;32m[0m[0;32m+        <p>The only Galaxy instance on mars.</p>[0m
[0;32m[0m[0;32m+    </body>[0m
[0;32m[0m[0;32m+</html>[0m
[0;32m[0m

2023-04-18 20:59:14,942 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-18 20:59:14,967 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-18 20:59:15,587 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpj23lda0i/container_resolvers_conf.yml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,12 @@[0m
[0;36m[0m[0;32m+container_resolvers:[0m
[0;32m[0m[0;32m+  - type: cached_explicit_singularity[0m
[0;32m[0m[0;32m+    cache_directory: "/srv/galaxy/var/cache/singularity/explicit/"[0m
[0;32m[0m[0;32m+  - type: cached_mulled_singularity[0m
[0;32m[0m[0;32m+    cache_directory: "/srv/galaxy/var/cache/singularity/mulled/"[0m
[0;32m[0m[0;32m+  - type: mulled_singularity[0m
[0;32m[0m[0;32m+    auto_install: False[0m
[0;32m[0m[0;32m+    cache_directory: "/srv/galaxy/var/cache/singularity/mulled/"[0m
[0;32m[0m[0;32m+  - type: build_mulled_singularity[0m
[0;32m[0m[0;32m+    auto_install: False[0m
[0;32m[0m[0;32m+    cache_directory: "/srv/galaxy/var/cache/singularity/built/"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-18 20:59:15,590 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-18 20:59:16,161 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp6ldphxze/dependency_resolvers_conf.xml[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+<dependency_resolvers>[0m
[0;32m[0m[0;32m+</dependency_resolvers>[0m
[0;32m[0m

2023-04-18 20:59:16,163 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-18 20:59:16,184 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-18 20:59:16,212 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,230 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-18 20:59:16,332 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,350 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-18 20:59:16,450 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,469 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-18 20:59:16,567 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,585 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-18 20:59:16,598 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,616 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-18 20:59:16,629 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,647 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-18 20:59:16,661 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,680 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-18 20:59:16,694 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,712 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-18 20:59:16,811 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,829 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-18 20:59:16,928 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,946 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-18 20:59:17,046 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:17,064 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-18 20:59:17,739 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmps8_wwii2/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,108 @@[0m
[0;36m[0m[0;32m+---[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+## This file is managed by Ansible.  ALL CHANGES WILL BE OVERWRITTEN.[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+gravity:[0m
[0;32m[0m[0;32m+    celery:[0m
[0;32m[0m[0;32m+        concurrency: 2[0m
[0;32m[0m[0;32m+        loglevel: DEBUG[0m
[0;32m[0m[0;32m+    galaxy_root: /srv/galaxy/server[0m
[0;32m[0m[0;32m+    galaxy_user: galaxy[0m
[0;32m[0m[0;32m+    gunicorn:[0m
[0;32m[0m[0;32m+        bind: unix:/srv/galaxy/var/config/gunicorn.sock[0m
[0;32m[0m[0;32m+        extra_args: --forwarded-allow-ips="*"[0m
[0;32m[0m[0;32m+        preload: true[0m
[0;32m[0m[0;32m+        workers: 2[0m
[0;32m[0m[0;32m+    handlers:[0m
[0;32m[0m[0;32m+        handler:[0m
[0;32m[0m[0;32m+            pools:[0m
[0;32m[0m[0;32m+            - job-handlers[0m
[0;32m[0m[0;32m+            - workflow-schedulers[0m
[0;32m[0m[0;32m+            processes: 2[0m
[0;32m[0m[0;32m+    process_manager: systemd[0m
[0;32m[0m[0;32m+    tusd:[0m
[0;32m[0m[0;32m+        enable: true[0m
[0;32m[0m[0;32m+        tusd_path: /usr/local/sbin/tusd[0m
[0;32m[0m[0;32m+        upload_dir: /data/tus[0m
[0;32m[0m[0;32m+    virtualenv: /srv/galaxy/venv[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+galaxy:[0m
[0;32m[0m[0;32m+    admin_users:[0m
[0;32m[0m[0;32m+    - admin@example.org[0m
[0;32m[0m[0;32m+    allow_path_paste: true[0m
[0;32m[0m[0;32m+    allow_user_deletion: true[0m
[0;32m[0m[0;32m+    allow_user_impersonation: true[0m
[0;32m[0m[0;32m+    brand: "Mars \U0001F680"[0m
[0;32m[0m[0;32m+    builds_file_path: /srv/galaxy/server/tool-data/shared/ucsc/builds.txt.sample[0m
[0;32m[0m[0;32m+    cleanup_job: onsuccess[0m
[0;32m[0m[0;32m+    container_resolvers_config_file: ''[0m
[0;32m[0m[0;32m+    containers_resolvers_config_file: /srv/galaxy/config/container_resolvers_conf.yml[0m
[0;32m[0m[0;32m+    data_dir: /srv/galaxy/var[0m
[0;32m[0m[0;32m+    data_manager_config_file: /srv/galaxy/server/config/data_manager_conf.xml.sample[0m
[0;32m[0m[0;32m+    database_connection: postgresql:///galaxy?host=/var/run/postgresql[0m
[0;32m[0m[0;32m+    datatypes_config_file: /srv/galaxy/server/config/datatypes_conf.xml.sample[0m
[0;32m[0m[0;32m+    dependency_resolvers_config_file: /srv/galaxy/config/dependency_resolvers_conf.xml[0m
[0;32m[0m[0;32m+    enable_per_request_sql_debugging: true[0m
[0;32m[0m[0;32m+    enable_quotas: true[0m
[0;32m[0m[0;32m+    expose_dataset_path: true[0m
[0;32m[0m[0;32m+    expose_potentially_sensitive_job_metrics: true[0m
[0;32m[0m[0;32m+    expose_user_name: true[0m
[0;32m[0m[0;32m+    external_service_type_config_file: /srv/galaxy/server/config/external_service_types_conf.xml.sample[0m
[0;32m[0m[0;32m+    file_path: /data/datasets[0m
[0;32m[0m[0;32m+    galaxy_infrastructure_url: https://gat-20.eu.galaxy.training[0m
[0;32m[0m[0;32m+    id_secret: S21ATLTHw2biuLuUEBVP9GBh5iqVO0Em[0m
[0;32m[0m[0;32m+    integrated_tool_panel_config: /srv/galaxy/var/config/integrated_tool_panel.xml[0m
[0;32m[0m[0;32m+    job_config:[0m
[0;32m[0m[0;32m+        execution:[0m
[0;32m[0m[0;32m+            default: singularity[0m
[0;32m[0m[0;32m+            environments:[0m
[0;32m[0m[0;32m+                local_env:[0m
[0;32m[0m[0;32m+                    runner: local_runner[0m
[0;32m[0m[0;32m+                    tmp_dir: true[0m
[0;32m[0m[0;32m+                singularity:[0m
[0;32m[0m[0;32m+                    env:[0m
[0;32m[0m[0;32m+                    -   name: LC_ALL[0m
[0;32m[0m[0;32m+                        value: C[0m
[0;32m[0m[0;32m+                    -   name: APPTAINER_CACHEDIR[0m
[0;32m[0m[0;32m+                        value: /tmp/singularity[0m
[0;32m[0m[0;32m+                    -   name: APPTAINER_TMPDIR[0m
[0;32m[0m[0;32m+                        value: /tmp[0m
[0;32m[0m[0;32m+                    runner: local_runner[0m
[0;32m[0m[0;32m+                    singularity_enabled: true[0m
[0;32m[0m[0;32m+        handling:[0m
[0;32m[0m[0;32m+            assign:[0m
[0;32m[0m[0;32m+            - db-skip-locked[0m
[0;32m[0m[0;32m+        runners:[0m
[0;32m[0m[0;32m+            local_runner:[0m
[0;32m[0m[0;32m+                load: galaxy.jobs.runners.local:LocalJobRunner[0m
[0;32m[0m[0;32m+                workers: 4[0m
[0;32m[0m[0;32m+        tools:[0m
[0;32m[0m[0;32m+        -   class: local[0m
[0;32m[0m[0;32m+            environment: local_env[0m
[0;32m[0m[0;32m+    job_metrics_config_file: /srv/galaxy/config/job_metrics_conf.xml[0m
[0;32m[0m[0;32m+    job_working_directory: /data/jobs[0m
[0;32m[0m[0;32m+    logo_src: https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png[0m
[0;32m[0m[0;32m+    migrated_tools_config: /srv/galaxy/var/config/migrated_tools_conf.xml[0m
[0;32m[0m[0;32m+    new_user_dataset_access_role_default_private: true[0m
[0;32m[0m[0;32m+    nginx_x_accel_redirect_base: /_x_accel_redirect[0m
[0;32m[0m[0;32m+    object_store_store_by: uuid[0m
[0;32m[0m[0;32m+    openid_config_file: /srv/galaxy/server/config/openid_conf.xml.sample[0m
[0;32m[0m[0;32m+    outputs_to_working_directory: true[0m
[0;32m[0m[0;32m+    retry_job_output_collection: 3[0m
[0;32m[0m[0;32m+    shed_data_manager_config_file: /srv/galaxy/var/config/shed_data_manager_conf.xml[0m
[0;32m[0m[0;32m+    shed_tool_config_file: /srv/galaxy/var/config/shed_tool_conf.xml[0m
[0;32m[0m[0;32m+    shed_tool_data_table_config: /srv/galaxy/var/config/shed_tool_data_table_conf.xml[0m
[0;32m[0m[0;32m+    show_welcome_with_login: true[0m
[0;32m[0m[0;32m+    slow_query_log_threshold: 5[0m
[0;32m[0m[0;32m+    themes_config_file: /srv/galaxy/config/themes.yml[0m
[0;32m[0m[0;32m+    tool_config_file: /srv/galaxy/server/config/tool_conf.xml.sample[0m
[0;32m[0m[0;32m+    tool_data_path: /srv/galaxy/var/tool_data[0m
[0;32m[0m[0;32m+    tool_data_table_config_path: /cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml[0m
[0;32m[0m[0;32m+    tool_dependency_dir: /srv/galaxy/var/dependencies[0m
[0;32m[0m[0;32m+    tool_sheds_config_file: /srv/galaxy/server/config/tool_sheds_conf.xml.sample[0m
[0;32m[0m[0;32m+    tus_upload_store: /data/tus[0m
[0;32m[0m[0;32m+    ucsc_build_sites: /srv/galaxy/server/tool-data/shared/ucsc/ucsc_build_sites.txt.sample[0m
[0;32m[0m[0;32m+    visualization_plugins_directory: config/plugins/visualizations[0m
[0;32m[0m[0;32m+    watch_job_rules: auto[0m
[0;32m[0m

2023-04-18 20:59:17,739 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 20:59:17,757 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-18 20:59:17,806 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:17,853 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:59:18,623 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:18,642 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:59:19,604 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:19,624 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-18 21:02:26,861 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:26,881 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-18 21:02:27,482 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:27,500 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-18 21:02:30,712 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:30,732 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-18 21:02:30,829 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:30,847 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-18 21:02:30,893 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:30,943 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 21:02:31,040 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:31,058 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-18 21:02:31,524 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 21:02:31,526 p=99975 u=ubuntu n=ansible | [WARNING]: Module remote_tmp /home/galaxy/.ansible/tmp did not exist and was created with a mode of 0700, this may
cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions
manually

2023-04-18 21:02:31,544 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-18 21:02:32,224 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/files/shed_data_manager_conf.xml[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+<?xml version="1.0"?>[0m
[0;32m[0m[0;32m+<data_managers>[0m
[0;32m[0m[0;32m+</data_managers>[0m
[0;32m[0m

2023-04-18 21:02:32,226 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-18 21:02:32,786 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/files/shed_tool_data_table_conf.xml[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+<?xml version="1.0"?>[0m
[0;32m[0m[0;32m+<tables>[0m
[0;32m[0m[0;32m+</tables>[0m
[0;32m[0m

2023-04-18 21:02:32,788 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-18 21:02:32,809 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-18 21:02:33,467 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpcjbpp8wb/shed_tool_conf.xml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+<?xml version="1.0"?>[0m
[0;32m[0m[0;32m+<toolbox tool_path="/srv/galaxy/var/shed_tools">[0m
[0;32m[0m[0;32m+</toolbox>[0m
[0;32m[0m

2023-04-18 21:02:33,469 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-18 21:02:34,028 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp7ea2xk05/shed_tool_conf.xml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+<?xml version="1.0"?>[0m
[0;32m[0m[0;32m+<toolbox tool_path="/srv/galaxy/var/shed_tools">[0m
[0;32m[0m[0;32m+</toolbox>[0m
[0;32m[0m

2023-04-18 21:02:34,030 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-18 21:02:34,050 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-18 21:02:34,084 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:34,136 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-18 21:02:35,488 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:35,507 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-18 21:02:36,815 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:36,834 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-18 21:02:36,934 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:36,953 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-18 21:02:37,051 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:37,069 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-18 21:02:37,138 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:37,195 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-18 21:02:37,792 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp_8zebhht[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+new-unbuilt[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-18 21:02:37,792 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:37,810 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-18 21:02:38,113 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:38,132 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-18 21:02:38,463 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:38,482 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-18 21:02:38,822 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:38,841 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-18 21:02:39,018 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:39,037 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-18 21:02:39,211 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:39,230 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-18 21:02:39,406 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => 
  msg: 'Galaxy client is out of date: new-unbuilt != 1a984f27ab755b71a817f2bb95139af9fd43c7aa'
2023-04-18 21:02:39,425 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-18 21:02:39,580 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_node_version.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:39,630 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy Node.js version file] ****************************************************
2023-04-18 21:02:39,973 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:39,992 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy Node.js version fact] ********************************************************
2023-04-18 21:02:40,179 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:40,198 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Node.js version file version] ****************************************************
2023-04-18 21:02:40,374 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  galaxy_node_version: 18.12.1
2023-04-18 21:02:40,393 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Override Galaxy Node.js version] ********************************************************
2023-04-18 21:02:40,586 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:40,605 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check whether nodeenv is available] *****************************************************
2023-04-18 21:02:40,933 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:40,952 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 21:02:41,058 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,078 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 21:02:41,179 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,199 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install nodeenv if it doesn't exist] ****************************************************
2023-04-18 21:02:41,298 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,317 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report preferred Node.js version] *******************************************************
2023-04-18 21:02:41,492 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  galaxy_node_version: 18.12.1
2023-04-18 21:02:41,511 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-18 21:02:41,821 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,840 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-18 21:02:41,940 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,959 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-18 21:02:42,283 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:42,302 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-18 21:02:48,350 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:48,370 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-18 21:02:50,303 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:50,323 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-18 21:02:50,453 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_client_build_make.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:50,499 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Build client] ***************************************************************************
2023-04-18 21:21:56,592 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:21:56,612 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Fetch client version] *******************************************************************
2023-04-18 21:21:56,969 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:21:56,989 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-18 21:21:57,169 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:21:57,189 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that client update succeeded] ****************************************************
2023-04-18 21:21:57,305 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:57,324 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-18 21:21:57,341 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:57,360 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-18 21:21:57,400 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-18 21:21:57,473 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-18 21:21:57,572 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:57,591 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-18 21:21:58,319 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpnwef99xp[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+#!/usr/bin/env sh[0m
[0;32m[0m[0;32m+export GRAVITY_CONFIG_FILE=/srv/galaxy/config/galaxy.yml[0m
[0;32m[0m[0;32m+exec /srv/galaxy/venv/bin/galaxyctl "$@"[0m
[0;32m[0m

2023-04-18 21:21:58,319 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:21:58,338 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-18 21:21:58,357 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:58,376 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-18 21:21:58,391 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:58,410 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-18 21:21:58,447 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-18 21:21:58,506 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-18 21:21:58,913 p=99975 u=ubuntu n=ansible | [0;31m--- before: /etc/cron.d/ansible_galaxy_tmpclean[0m
[0;31m[0m[0;32m+++ after: /etc/cron.d/ansible_galaxy_tmpclean[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+#Ansible: galaxy_tmpclean[0m
[0;32m[0m[0;32m+@daily galaxy /usr/sbin/tmpreaper --all --mtime --mtime-dir --runtime=72000 30d /data/jobs /srv/galaxy/var/tmp [0m
[0;32m[0m

2023-04-18 21:21:58,913 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:21:58,932 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-18 21:21:59,033 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:59,068 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-18 21:21:59,235 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:21:59,257 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-18 21:21:59,294 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.miniconda/tasks/install.yml for gat-20.eu.galaxy.training
2023-04-18 21:21:59,339 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create miniconda installer tempfile] *************************************************
2023-04-18 21:21:59,611 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:21:59,630 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda installer] *********************************************************
2023-04-18 21:22:01,161 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:22:01,180 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Run miniconda installer] *************************************************************
2023-04-18 21:22:06,083 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:22:06,102 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Remove minicoda installer] ***********************************************************
2023-04-18 21:22:06,276 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /tmp/ansible-miniconda-installer.u64xbmb4.sh
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: absent[0m
[0;32m[0m

2023-04-18 21:22:06,276 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:22:06,294 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-18 21:22:06,842 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:22:06,860 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-18 21:24:10,954 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:10,972 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-18 21:24:10,987 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,006 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-18 21:24:11,021 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,041 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-18 21:24:11,065 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,083 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-18 21:24:11,106 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,125 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-18 21:24:11,140 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,178 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-18 21:24:11,212 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:11,244 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-18 21:24:18,448 p=99975 u=ubuntu n=ansible | The following additional packages will be installed:
  libnginx-mod-http-auth-pam libnginx-mod-http-dav-ext libnginx-mod-http-echo
  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter
  libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair
  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream
  libnginx-mod-stream-geoip2 nginx-common nginx-core
Suggested packages:
  fcgiwrap nginx-doc
The following NEW packages will be installed:
  libnginx-mod-http-auth-pam libnginx-mod-http-dav-ext libnginx-mod-http-echo
  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter
  libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair
  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream
  libnginx-mod-stream-geoip2 nginx-common nginx-core nginx-full
0 upgraded, 14 newly installed, 0 to remove and 8 not upgraded.
2023-04-18 21:24:18,449 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,468 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-18 21:24:18,633 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/sites-enabled/default
[0;31m-state: link[0m
[0;31m[0m[0;32m+state: absent[0m
[0;32m[0m

2023-04-18 21:24:18,633 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,651 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-18 21:24:18,664 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,683 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-18 21:24:18,696 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,714 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-18 21:24:18,872 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,891 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-18 21:24:18,919 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,938 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-18 21:24:18,966 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,985 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-18 21:24:18,998 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,017 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-18 21:24:19,030 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,050 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-18 21:24:19,064 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,083 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-18 21:24:19,105 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,125 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-18 21:24:19,585 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp3cq1wf6q/http_options.conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,29 @@[0m
[0;36m[0m[0;32m+##[0m
[0;32m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# included into http {}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+client_max_body_size 1g;[0m
[0;32m[0m[0;32m+gzip_comp_level 6;[0m
[0;32m[0m[0;32m+gzip_min_length 128;[0m
[0;32m[0m[0;32m+gzip_proxied any;[0m
[0;32m[0m[0;32m+gzip_static on;[0m
[0;32m[0m[0;32m+gzip_types text/plain[0m
[0;32m[0m[0;32m+text/css[0m
[0;32m[0m[0;32m+text/xml[0m
[0;32m[0m[0;32m+text/javascript[0m
[0;32m[0m[0;32m+application/javascript[0m
[0;32m[0m[0;32m+application/x-javascript[0m
[0;32m[0m[0;32m+application/json[0m
[0;32m[0m[0;32m+application/xml[0m
[0;32m[0m[0;32m+application/xml+rss[0m
[0;32m[0m[0;32m+application/xhtml+xml[0m
[0;32m[0m[0;32m+application/x-font-ttf[0m
[0;32m[0m[0;32m+application/x-font-opentype[0m
[0;32m[0m[0;32m+image/png[0m
[0;32m[0m[0;32m+image/svg+xml[0m
[0;32m[0m[0;32m+image/x-icon[0m
[0;32m[0m[0;32m+;[0m
[0;32m[0m[0;32m+gzip_vary on;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-18 21:24:19,585 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,604 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-18 21:24:19,633 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,652 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-18 21:24:20,106 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpbec0l4c1/redirect-ssl.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,14 @@[0m
[0;36m[0m[0;32m+server {[0m
[0;32m[0m[0;32m+	listen 80 default_server;[0m
[0;32m[0m[0;32m+	listen [::]:80 default_server;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	server_name "gat-20.eu.galaxy.training";[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location /.well-known/ {[0m
[0;32m[0m[0;32m+		root /srv/nginx/_well-known_root;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location / {[0m
[0;32m[0m[0;32m+		return 302 https://$host$request_uri;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m

2023-04-18 21:24:20,108 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-18 21:24:20,129 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-18 21:24:20,311 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/sites-enabled/redirect-ssl
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: link[0m
[0;32m[0m

2023-04-18 21:24:20,313 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-18 21:24:20,334 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-18 21:24:20,513 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:20,532 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-18 21:24:20,610 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:20,642 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-18 21:24:20,675 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-18 21:24:20,690 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:20,709 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-18 21:24:20,725 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:20,744 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-18 21:24:20,760 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:20,780 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-18 21:24:21,779 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:21,797 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-18 21:24:22,489 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:22,524 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-18 21:24:23,000 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:23,027 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : restart nginx] ****************************************************************
2023-04-18 21:24:23,454 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:23,473 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-18 21:24:23,498 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:23,524 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl restart nginx] **************************************************
2023-04-18 21:24:23,555 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:23,580 p=99975 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-18 21:24:23,785 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-18 21:24:23,841 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:23,879 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-18 21:24:31,633 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,652 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-18 21:24:31,687 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,709 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-18 21:24:31,738 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,760 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-18 21:24:31,776 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,798 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-18 21:24:31,836 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,859 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-18 21:24:31,909 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:31,970 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-18 21:24:32,203 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /srv/nginx/_well-known_root
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 21:24:32,203 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:32,223 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-18 21:24:32,247 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:32,267 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-18 21:24:32,290 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:32,311 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-18 21:24:37,116 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:37,137 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-18 21:24:37,166 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: true
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: '0:00:04.572381'
    end: '2023-04-18 21:24:37.089788'
    failed: false
    msg: ''
    rc: 0
    start: '2023-04-18 21:24:32.517407'
    stderr: Saving debug log to /var/log/letsencrypt/letsencrypt.log
    stderr_lines:
    - Saving debug log to /var/log/letsencrypt/letsencrypt.log
    stdout: |-
      Account registered.
      Requesting a certificate for gat-20.eu.galaxy.training
  
      Successfully received certificate.
      Certificate is saved at: /etc/letsencrypt/live/gat-20.eu.galaxy.training/fullchain.pem
      Key is saved at:         /etc/letsencrypt/live/gat-20.eu.galaxy.training/privkey.pem
      This certificate expires on 2023-07-17.
      These files will be updated when the certificate renews.
      NEXT STEPS:
      - The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.
    stdout_lines:
    - Account registered.
    - Requesting a certificate for gat-20.eu.galaxy.training
    - ''
    - Successfully received certificate.
    - 'Certificate is saved at: /etc/letsencrypt/live/gat-20.eu.galaxy.training/fullchain.pem'
    - 'Key is saved at:         /etc/letsencrypt/live/gat-20.eu.galaxy.training/privkey.pem'
    - This certificate expires on 2023-07-17.
    - These files will be updated when the certificate renews.
    - 'NEXT STEPS:'
    - '- The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.'
2023-04-18 21:24:37,188 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-18 21:24:37,231 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:37,272 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-18 21:24:37,294 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:37,313 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-18 21:24:37,873 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpjdv807b7[0m
[0;32m[0m[0;36m@@ -0,0 +1,22 @@[0m
[0;36m[0m[0;32m+#!/bin/bash[0m
[0;32m[0m[0;32m+mkdir -p  /etc/ssl/private/[0m
[0;32m[0m[0;32m+# Chai[0m
[0;32m[0m[0;32m+cp /etc/letsencrypt/live/gat-20.eu.galaxy.training/fullchain.pem /etc/ssl/certs/fullchain.pem[0m
[0;32m[0m[0;32m+chmod 644           /etc/ssl/certs/fullchain.pem[0m
[0;32m[0m[0;32m+chown root: /etc/ssl/certs/fullchain.pem[0m
[0;32m[0m[0;32m+# Cert[0m
[0;32m[0m[0;32m+cp /etc/letsencrypt/live/gat-20.eu.galaxy.training/cert.pem      /etc/ssl/certs/cert.pem[0m
[0;32m[0m[0;32m+chmod 644           /etc/ssl/certs/cert.pem[0m
[0;32m[0m[0;32m+chown root: /etc/ssl/certs/cert.pem[0m
[0;32m[0m[0;32m+# Privkey[0m
[0;32m[0m[0;32m+cp /etc/letsencrypt/live/gat-20.eu.galaxy.training/privkey.pem   /etc/ssl/private/privkey.pem[0m
[0;32m[0m[0;32m+chmod 640           /etc/ssl/private/privkey.pem[0m
[0;32m[0m[0;32m+chown root: /etc/ssl/private/privkey.pem[0m
[0;32m[0m[0;32m+# For each user, create custom version[0m
[0;32m[0m[0;32m+mkdir -p /etc/ssl/user[0m
[0;32m[0m[0;32m+chmod 755 /etc/ssl/user[0m
[0;32m[0m[0;32m+chown root:root /etc/ssl/user[0m
[0;32m[0m[0;32m+cp /etc/ssl/private/privkey.pem /etc/ssl/user/privkey-www-data.pem[0m
[0;32m[0m[0;32m+chown www-data: /etc/ssl/user/privkey-www-data.pem[0m
[0;32m[0m[0;32m+# Other[0m
[0;32m[0m[0;32m+systemctl restart nginx || true[0m
[0;32m[0m

2023-04-18 21:24:37,873 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:37,892 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-18 21:24:37,926 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.certbot : Execute the certificate post-renewal script] *********************************
2023-04-18 21:24:38,190 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:38,209 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-18 21:24:38,249 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:38,292 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-18 21:24:38,542 p=99975 u=ubuntu n=ansible | [0;31m--- before: crontab for user "root"[0m
[0;31m[0m[0;32m+++ after: crontab for user "root"[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+#Ansible: Certbot automatic renewal.[0m
[0;32m[0m[0;32m+10 5 * * * /opt/certbot/bin/certbot renew --quiet --no-self-upgrade [0m
[0;32m[0m

2023-04-18 21:24:38,543 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:38,581 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-18 21:24:38,801 p=99975 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/nginx.conf (content)[0m
[0;31m[0m[0;32m+++ after: /etc/nginx/nginx.conf (content)[0m
[0;32m[0m[0;36m@@ -30,7 +30,7 @@[0m
[0;36m[0m 	##
 
 	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE
[0;31m-	ssl_prefer_server_ciphers on;[0m
[0;31m[0m[0;32m+#	ssl_prefer_server_ciphers on; # commented by Ansible[0m
[0;32m[0m 
 	##
 	# Logging Settings


2023-04-18 21:24:38,801 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:38,823 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-18 21:24:39,348 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp0m_l6p7s/ssl.conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,20 @@[0m
[0;36m[0m[0;32m+##[0m
[0;32m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Allowable SSL protocols[0m
[0;32m[0m[0;32m+ssl_protocols TLSv1.2 TLSv1.3;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Use secure ciphers[0m
[0;32m[0m[0;32m+ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA256;[0m
[0;32m[0m[0;32m+ssl_dhparam /etc/nginx/ssl/dhparams.pem;[0m
[0;32m[0m[0;32m+ssl_prefer_server_ciphers on;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Enable session reuse[0m
[0;32m[0m[0;32m+ssl_session_cache shared:SSL:8m;[0m
[0;32m[0m[0;32m+ssl_session_timeout 5m;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Cert/Key[0m
[0;32m[0m[0;32m+ssl_certificate /etc/ssl/certs/fullchain.pem;[0m
[0;32m[0m[0;32m+ssl_certificate_key /etc/ssl/user/privkey-www-data.pem;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-18 21:24:39,348 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:39,370 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-18 21:24:39,614 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/ssl
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 21:24:39,614 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:39,634 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-18 21:25:09,084 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:09,105 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-18 21:25:09,152 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:09,186 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-18 21:25:09,768 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpdz536c2_/galaxy.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,88 @@[0m
[0;36m[0m[0;32m+upstream galaxy {[0m
[0;32m[0m[0;32m+	server unix:/srv/galaxy/var/config/gunicorn.sock;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Or if you serve galaxy at a path like http(s)://fqdn/galaxy[0m
[0;32m[0m[0;32m+	# Remember to set galaxy_url_prefix in the galaxy.yml file.[0m
[0;32m[0m[0;32m+	# server unix:/srv/galaxy/var/config/gunicorn.sock:/galaxy;[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+server {[0m
[0;32m[0m[0;32m+	# Listen on port 443[0m
[0;32m[0m[0;32m+	listen        *:443 ssl default_server;[0m
[0;32m[0m[0;32m+	# The virtualhost is our domain name[0m
[0;32m[0m[0;32m+	server_name   "gat-20.eu.galaxy.training";[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Our log files will go to journalctl[0m
[0;32m[0m[0;32m+	access_log  syslog:server=unix:/dev/log;[0m
[0;32m[0m[0;32m+	error_log   syslog:server=unix:/dev/log;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# The most important location block, by default all requests are sent to gunicorn[0m
[0;32m[0m[0;32m+	# If you serve galaxy at a path like /galaxy, change that below (and all other locations!)[0m
[0;32m[0m[0;32m+	location / {[0m
[0;32m[0m[0;32m+		# This is the backend to send the requests to.[0m
[0;32m[0m[0;32m+		proxy_pass http://galaxy;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+		proxy_set_header Host $http_host;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-Proto $scheme;[0m
[0;32m[0m[0;32m+		proxy_set_header Upgrade $http_upgrade;[0m
[0;32m[0m[0;32m+   [0m
[0;32m[0m[0;32m+	location /api/upload/resumable_upload {[0m
[0;32m[0m[0;32m+		# Disable request and response buffering[0m
[0;32m[0m[0;32m+		proxy_request_buffering     off;[0m
[0;32m[0m[0;32m+		proxy_buffering             off;[0m
[0;32m[0m[0;32m+		proxy_http_version          1.1;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+		# Add X-Forwarded-* headers[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-Host   $host;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-Proto  $scheme;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+		proxy_set_header Upgrade            $http_upgrade;[0m
[0;32m[0m[0;32m+		proxy_set_header Connection         "upgrade";[0m
[0;32m[0m[0;32m+		client_max_body_size        0;[0m
[0;32m[0m[0;32m+		proxy_pass http://localhost:1080/files;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Static files can be more efficiently served by Nginx. Why send the[0m
[0;32m[0m[0;32m+	# request to Gunicorn which should be spending its time doing more useful[0m
[0;32m[0m[0;32m+	# things like serving Galaxy![0m
[0;32m[0m[0;32m+	location /static {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/server/static;[0m
[0;32m[0m[0;32m+		expires 24h;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# In Galaxy instances started with run.sh, many config files are[0m
[0;32m[0m[0;32m+	# automatically copied around. The welcome page is one of them. In[0m
[0;32m[0m[0;32m+	# production, this step is skipped, so we will manually alias that.[0m
[0;32m[0m[0;32m+	location /static/welcome.html {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/var/config/welcome.html;		[0m
[0;32m[0m[0;32m+		expires 24h;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# serve visualization and interactive environment plugin static content[0m
[0;32m[0m[0;32m+	location ~ ^/plugins/(?<plug_type>[^/]+?)/((?<vis_d>[^/_]*)_?)?(?<vis_name>[^/]*?)/static/(?<static_file>.*?)$ {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/server/config/plugins/$plug_type/;[0m
[0;32m[0m[0;32m+		try_files $vis_d/${vis_d}_${vis_name}/static/$static_file[0m
[0;32m[0m[0;32m+		          $vis_d/static/$static_file =404;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location /robots.txt {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/server/static/robots.txt;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location /favicon.ico {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/server/static/favicon.ico;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location /_x_accel_redirect {[0m
[0;32m[0m[0;32m+		internal;[0m
[0;32m[0m[0;32m+		alias /;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Support click-to-run in the GTN-in-Galaxy Webhook[0m
[0;32m[0m[0;32m+	location /training-material/ {[0m
[0;32m[0m[0;32m+		proxy_pass https://training.galaxyproject.org/training-material/;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m

2023-04-18 21:25:09,771 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 21:25:09,795 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-18 21:25:10,004 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/sites-enabled/galaxy
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: link[0m
[0;32m[0m

2023-04-18 21:25:10,006 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 21:25:10,035 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-18 21:25:10,473 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:10,492 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-18 21:25:10,514 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:10,538 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-18 21:25:10,864 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:10,900 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-18 21:25:13,387 p=99975 u=ubuntu n=ansible | >> Newly checked out 8059b3819fe0c947968f8394386b412bafb8cf9c
2023-04-18 21:25:13,388 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:13,408 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-18 21:25:13,594 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:13,619 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-18 21:25:13,861 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:13,886 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-18 21:25:14,155 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:14,175 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-18 21:25:14,411 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /usr/local/bin/gxadmin
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: link[0m
[0;32m[0m

2023-04-18 21:25:14,411 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:14,431 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-18 21:25:14,627 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /root/.config
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 21:25:14,628 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:14,647 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-18 21:25:15,169 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpyvjmqnax[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+# Gxadmin local function[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-18 21:25:15,169 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,188 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-18 21:25:15,526 p=99975 u=ubuntu n=ansible | [0;31m--- before: /root/.config/gxadmin-local.sh (content)[0m
[0;31m[0m[0;32m+++ after: /root/.config/gxadmin-local.sh (content)[0m
[0;32m[0m[0;36m@@ -1 +1,10 @@[0m
[0;36m[0m[0;31m-# Gxadmin local function[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+# Gxadmin local function[0m
[0;32m[0m[0;32m+# BEGIN ANSIBLE MANAGED BLOCK[0m
[0;32m[0m[0;32m+local_cats() { ## : Makes cat noises[0m
[0;32m[0m[0;32m+	handle_help "$@" <<-EOF[0m
[0;32m[0m[0;32m+		Here is some documentation on this function[0m
[0;32m[0m[0;32m+	EOF[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	echo "Meow"[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+# END ANSIBLE MANAGED BLOCK[0m
[0;32m[0m

2023-04-18 21:25:15,526 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,566 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-18 21:25:15,604 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,626 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-18 21:25:15,668 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,691 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-18 21:25:15,708 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,730 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-18 21:25:15,768 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,790 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-18 21:25:15,884 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:15,942 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-18 21:25:16,021 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:16,063 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-18 21:25:21,427 p=99975 u=ubuntu n=ansible | The following NEW packages will be installed:
  apt-transport-https
0 upgraded, 1 newly installed, 0 to remove and 8 not upgraded.
2023-04-18 21:25:21,427 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:21,449 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-18 21:25:22,495 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:22,524 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-18 21:25:22,547 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:22,572 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-18 21:25:28,608 p=99975 u=ubuntu n=ansible | [0;31m--- before: /dev/null[0m
[0;31m[0m[0;32m+++ after: /etc/apt/sources.list.d/cernvm.list.list[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+deb [allow-insecure=true] https://cvmrepo.web.cern.ch/cvmrepo/apt/ jammy-prod main[0m
[0;32m[0m

2023-04-18 21:25:28,608 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:28,628 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-18 21:25:28,646 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:28,669 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-18 21:25:42,799 p=99975 u=ubuntu n=ansible | The following additional packages will be installed:
  attr autofs cvmfs-config-default cvmfs-fuse3 gdb keyutils libbabeltrace1
  libboost-regex1.74.0 libc6-dbg libdebuginfod-common libdebuginfod1 libipt2
  libnfsidmap1 libossp-uuid16 libsource-highlight-common
  libsource-highlight4v5 nfs-common rpcbind uuid uuid-dev
Suggested packages:
  gdb-doc gdbserver watchdog
The following NEW packages will be installed:
  attr autofs cvmfs cvmfs-config-default cvmfs-fuse3 gdb keyutils
  libbabeltrace1 libboost-regex1.74.0 libc6-dbg libdebuginfod-common
  libdebuginfod1 libipt2 libnfsidmap1 libossp-uuid16
  libsource-highlight-common libsource-highlight4v5 nfs-common rpcbind uuid
  uuid-dev
0 upgraded, 21 newly installed, 0 to remove and 8 not upgraded.
2023-04-18 21:25:42,800 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:42,825 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-18 21:25:42,866 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:42,900 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-18 21:25:43,154 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/cvmfs/keys/galaxyproject.org
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 21:25:43,157 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-18 21:25:43,178 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-18 21:25:43,709 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp6h0zp3lt[0m
[0;32m[0m[0;36m@@ -0,0 +1,9 @@[0m
[0;36m[0m[0;32m+-----BEGIN PUBLIC KEY-----[0m
[0;32m[0m[0;32m+MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuJZTWTY3/dBfspFKifv8[0m
[0;32m[0m[0;32m+TWuuT2Zzoo1cAskKpKu5gsUAyDFbZfYBEy91qbLPC3TuUm2zdPNsjCQbbq1Liufk[0m
[0;32m[0m[0;32m+uNPZJ8Ubn5PR6kndwrdD13NVHZpXVml1+ooTSF5CL3x/KUkYiyRz94sAr9trVoSx[0m
[0;32m[0m[0;32m+THW2buV7ADUYivX7ofCvBu5T6YngbPZNIxDB4mh7cEal/UDtxV683A/5RL4wIYvt[0m
[0;32m[0m[0;32m+S5SVemmu6Yb8GkGwLGmMVLYXutuaHdMFyKzWm+qFlG5JRz4okUWERvtJ2QAJPOzL[0m
[0;32m[0m[0;32m+mAG1ceyBFowj/r3iJTa+Jcif2uAmZxg+cHkZG5KzATykF82UH1ojUzREMMDcPJi2[0m
[0;32m[0m[0;32m+dQIDAQAB[0m
[0;32m[0m[0;32m+-----END PUBLIC KEY-----[0m
[0;32m[0m

2023-04-18 21:25:43,714 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-18 21:25:43,735 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-18 21:25:44,024 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:44,050 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-18 21:25:44,393 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:44,415 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-18 21:25:45,353 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:45,373 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-18 21:25:45,871 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp09ce6pmm[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+CVMFS_SERVER_URL="http://cvmfs1-psu0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-iu0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-tacc0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-ufr0.galaxyproject.eu/cvmfs/@fqrn@;http://cvmfs1-mel0.gvl.org.au/cvmfs/@fqrn@"[0m
[0;32m[0m[0;32m+CVMFS_PUBLIC_KEY="/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub"[0m
[0;32m[0m

2023-04-18 21:25:45,871 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:45,891 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-18 21:25:46,385 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpt261lci6[0m
[0;32m[0m[0;36m@@ -0,0 +1,4 @@[0m
[0;36m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+CVMFS_CONFIG_REPOSITORY="cvmfs-config.galaxyproject.org"[0m
[0;32m[0m[0;32m+CVMFS_DEFAULT_DOMAIN="galaxyproject.org"[0m
[0;32m[0m[0;32m+CVMFS_USE_GEOAPI="no"[0m
[0;32m[0m

2023-04-18 21:25:46,385 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:46,408 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-18 21:25:46,574 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:46,595 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-18 21:25:46,609 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:46,629 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-18 21:25:47,081 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp4a7fwzw8[0m
[0;32m[0m[0;36m@@ -0,0 +1,4 @@[0m
[0;36m[0m[0;32m+CVMFS_REPOSITORIES=""[0m
[0;32m[0m[0;32m+CVMFS_HTTP_PROXY="DIRECT"[0m
[0;32m[0m[0;32m+CVMFS_QUOTA_LIMIT="500"[0m
[0;32m[0m[0;32m+CVMFS_CACHE_BASE="/var/lib/cvmfs"[0m
[0;32m[0m

2023-04-18 21:25:47,081 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,101 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-18 21:25:47,144 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:47,179 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-18 21:25:47,199 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,218 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-18 21:25:47,245 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,264 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-18 21:25:47,294 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,313 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-18 21:25:47,519 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,540 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-18 21:25:47,576 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,596 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-18 21:25:47,779 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,798 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-18 21:25:47,825 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,847 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-18 21:25:47,863 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,884 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-18 21:25:47,898 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,918 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-18 21:25:47,933 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,005 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-18 21:25:48,341 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,400 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : restart nginx] ****************************************************************
2023-04-18 21:25:48,750 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,771 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-18 21:25:48,795 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,814 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl restart nginx] **************************************************
2023-04-18 21:25:48,835 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,854 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.cvmfs : Reload autofs] ****************************************************************
2023-04-18 21:25:49,154 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:49,173 p=99975 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-18 21:25:49,379 p=99975 u=ubuntu n=ansible | [0;31m--- before: crontab for user "galaxy"[0m
[0;31m[0m[0;32m+++ after: crontab for user "galaxy"[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+#Ansible: Cleanup Old User Data[0m
[0;32m[0m[0;32m+0 0 * * * GALAXY_LOG_DIR=/tmp/gxadmin/ GALAXY_ROOT=/srv/galaxy/server /usr/local/bin/gxadmin galaxy cleanup 60[0m
[0;32m[0m

2023-04-18 21:25:49,379 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:49,420 p=99975 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 21:25:49,420 p=99975 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=182  changed=62   unreachable=0    failed=0    skipped=91   rescued=0    ignored=0   
2023-04-19 06:38:39,463 p=171727 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 06:38:39,543 p=171727 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 06:38:39,557 p=171727 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 06:38:40,735 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:40,741 p=171727 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 06:38:41,611 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:41,627 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 06:38:41,651 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:41,661 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 06:38:41,682 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:41,688 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 06:38:41,710 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:41,716 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 06:38:41,737 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:41,743 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 06:38:42,436 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:42,442 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 06:38:42,701 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:42,708 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 06:38:42,747 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:42,754 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 06:38:43,509 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,516 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 06:38:43,538 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,545 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 06:38:43,575 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,581 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 06:38:43,605 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,611 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 06:38:43,635 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,641 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 06:38:43,653 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,660 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 06:38:43,920 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,926 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 06:38:44,184 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:44,190 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 06:38:44,211 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:44,217 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 06:38:44,391 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:44,397 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 06:38:44,824 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:44,830 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 06:38:45,173 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:45,178 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 06:38:45,208 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:45,219 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 06:38:45,403 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 06:38:45,547 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 06:38:45,555 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 06:38:45,722 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:45,728 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 06:38:46,044 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 06:38:46,053 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 06:38:46,376 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 06:38:46,384 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 06:38:46,720 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:46,727 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 06:38:47,036 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,042 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 06:38:47,199 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,205 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 06:38:47,709 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,721 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 06:38:47,743 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 06:38:47,745 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,752 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 06:38:47,762 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,768 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 06:38:47,802 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 06:38:47,804 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,810 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 06:38:48,165 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:38:48,173 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 06:38:48,184 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:48,190 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 06:38:48,211 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:48,217 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 06:38:48,228 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:48,233 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 06:38:48,638 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:38:48,646 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 06:38:48,657 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:48,724 p=171727 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 06:38:48,769 p=171727 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 06:38:49,542 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:49,559 p=171727 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 06:38:50,268 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:50,288 p=171727 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 06:38:50,301 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:50,329 p=171727 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 06:38:51,028 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:51,080 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 06:38:51,662 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:51,681 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 06:38:51,700 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:51,720 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 06:38:51,936 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:51,957 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 06:38:52,138 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,156 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 06:38:52,206 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,225 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 06:38:52,238 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,257 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 06:38:52,271 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,291 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 06:38:52,306 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,329 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 06:38:52,349 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,370 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 06:38:52,385 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,403 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 06:38:52,436 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:52,469 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 06:38:52,481 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,501 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 06:38:52,535 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 06:38:52,546 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,581 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 06:38:52,973 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,991 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 06:38:53,736 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:53,772 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 06:38:53,789 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 06:38:53,807 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 06:38:53,849 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:53,868 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 06:38:53,901 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:53,920 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 06:38:53,956 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 06:38:53,970 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 06:38:53,980 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 06:38:53,984 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 06:38:53,988 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 06:38:53,995 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 06:38:54,002 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 06:38:54,005 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 06:38:54,009 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 06:38:54,029 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 06:38:54,091 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 06:38:54,121 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 06:38:54,152 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 06:38:54,179 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 06:38:54,181 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:54,200 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 06:38:54,281 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 06:38:54,316 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 06:38:54,360 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 06:38:54,385 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 06:38:54,436 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:54,472 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 06:38:54,572 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:54,590 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 06:38:55,154 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:55,173 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 06:38:55,282 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:55,301 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 06:38:55,623 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:38:55,773 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 06:38:55,795 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 06:38:55,970 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:38:56,118 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 06:38:56,139 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 06:38:56,219 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:56,237 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 06:38:56,255 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:56,273 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 06:38:56,306 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:56,343 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 06:38:56,675 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:56,693 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 06:38:57,031 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 06:38:57,326 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 06:38:57,640 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 06:38:57,958 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 06:38:57,981 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 06:38:58,311 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 06:38:58,618 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 06:38:58,934 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 06:38:59,235 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 06:38:59,541 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 06:38:59,833 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 06:39:00,127 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 06:39:00,434 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 06:39:00,735 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 06:39:01,029 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-19 06:39:01,050 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 06:39:01,111 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:01,150 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 06:39:02,546 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:02,564 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 06:39:02,660 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:02,678 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 06:39:04,369 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:04,388 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 06:39:06,088 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,107 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 06:39:06,205 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,223 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 06:39:06,236 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,254 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 06:39:06,266 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,284 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 06:39:06,337 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:06,383 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 06:39:06,505 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:06,546 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 06:39:06,957 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,975 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 06:39:07,174 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:07,192 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 06:39:07,668 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 06:39:07,688 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 06:39:08,155 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 06:39:08,175 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 06:39:08,673 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 06:39:09,119 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 06:39:09,140 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 06:39:09,168 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,186 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 06:39:09,285 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,303 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 06:39:09,405 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,424 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 06:39:09,522 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,542 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 06:39:09,557 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,576 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 06:39:09,590 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,609 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 06:39:09,622 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,640 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 06:39:09,653 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,673 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 06:39:09,772 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,790 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 06:39:09,891 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,910 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 06:39:10,008 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:10,027 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 06:39:10,604 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:10,622 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 06:39:10,673 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:10,720 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 06:39:12,297 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:12,316 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 06:39:14,007 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:14,026 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 06:39:18,920 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:18,939 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 06:39:19,506 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:19,525 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 06:39:21,106 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:21,127 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 06:39:21,225 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:21,243 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 06:39:21,291 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:21,343 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 06:39:21,440 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:21,459 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 06:39:21,957 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 06:39:21,976 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 06:39:22,405 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 06:39:22,704 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 06:39:22,726 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 06:39:23,108 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 06:39:23,408 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 06:39:23,429 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 06:39:23,464 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:23,516 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 06:39:24,898 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:24,917 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 06:39:26,195 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:26,214 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 06:39:26,314 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:26,333 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 06:39:26,430 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:26,449 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 06:39:26,517 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:26,575 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 06:39:26,912 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:26,931 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 06:39:27,252 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:27,271 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 06:39:27,606 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:27,625 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 06:39:27,977 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:27,996 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 06:39:28,173 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,192 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 06:39:28,367 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,385 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 06:39:28,483 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,502 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 06:39:28,601 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,620 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 06:39:28,722 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,740 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 06:39:28,841 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,860 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 06:39:28,963 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,982 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 06:39:29,085 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,104 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 06:39:29,207 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,227 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 06:39:29,325 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,344 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 06:39:29,358 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,376 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 06:39:29,414 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:29,485 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 06:39:29,586 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,607 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 06:39:30,214 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,234 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 06:39:30,251 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,270 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 06:39:30,282 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,303 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 06:39:30,336 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:30,395 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 06:39:30,789 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,814 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 06:39:30,925 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,960 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 06:39:31,121 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,139 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 06:39:31,154 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,172 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 06:39:31,525 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,543 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 06:39:31,576 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,594 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 06:39:31,609 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,627 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 06:39:31,640 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,661 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 06:39:31,684 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,703 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 06:39:31,725 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,743 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 06:39:31,757 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,795 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 06:39:31,833 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:31,863 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 06:39:32,568 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:32,588 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 06:39:32,758 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:32,777 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 06:39:32,790 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:32,808 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 06:39:32,822 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:32,841 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 06:39:32,996 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,015 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 06:39:33,042 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,060 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 06:39:33,088 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,109 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 06:39:33,122 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,141 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 06:39:33,154 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,172 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 06:39:33,185 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,204 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 06:39:33,227 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,246 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 06:39:33,568 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,586 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 06:39:33,615 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,634 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 06:39:33,970 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 06:39:33,991 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 06:39:34,178 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 06:39:34,198 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 06:39:34,612 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:34,630 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 06:39:34,709 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:34,745 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 06:39:34,778 p=171727 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 06:39:34,969 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 06:39:35,005 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:35,038 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 06:39:35,820 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,839 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 06:39:35,860 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,878 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 06:39:35,895 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,914 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 06:39:35,927 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,945 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 06:39:35,958 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,977 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 06:39:36,013 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:36,073 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 06:39:36,253 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,271 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 06:39:36,293 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,311 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 06:39:36,333 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,352 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 06:39:36,552 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,572 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 06:39:36,594 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 06:39:36,613 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 06:39:36,655 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:36,697 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 06:39:36,715 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,735 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 06:39:37,091 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:37,110 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 06:39:37,144 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 06:39:37,178 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:37,219 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 06:39:37,399 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:37,435 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 06:39:37,591 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:37,609 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 06:39:37,958 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:37,977 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 06:39:38,143 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:38,163 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 06:39:38,317 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:38,337 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 06:39:38,374 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:38,408 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 06:39:39,109 p=171727 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/sites-available/galaxy[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-171727w2nzu3wo/tmpkhcr35lb/galaxy.j2[0m
[0;32m[0m[0;36m@@ -26,7 +26,7 @@[0m
[0;36m[0m 		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 		proxy_set_header X-Forwarded-Proto $scheme;
 		proxy_set_header Upgrade $http_upgrade;
[0;31m-   [0m
[0;31m[0m[0;32m+	}   [0m
[0;32m[0m 	location /api/upload/resumable_upload {
 		# Disable request and response buffering
 		proxy_request_buffering     off;
[0;36m@@ -41,7 +41,6 @@[0m
[0;36m[0m 		proxy_set_header Connection         "upgrade";
 		client_max_body_size        0;
 		proxy_pass http://localhost:1080/files;
[0;31m-	}[0m
[0;31m[0m 	}
 
 	# Static files can be more efficiently served by Nginx. Why send the


2023-04-19 06:39:39,111 p=171727 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:39:39,131 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 06:39:39,316 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:39:39,336 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 06:39:39,507 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:39,525 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 06:39:39,542 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:39,560 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 06:39:39,840 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:39,875 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 06:39:40,496 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:40,515 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 06:39:40,675 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:40,693 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 06:39:40,707 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:40,725 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 06:39:40,885 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:40,907 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 06:39:41,080 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,098 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 06:39:41,256 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,276 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 06:39:41,440 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,458 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 06:39:41,713 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,748 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 06:39:41,785 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,803 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 06:39:41,838 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,857 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 06:39:41,869 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,887 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 06:39:41,924 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,942 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 06:39:42,022 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:42,082 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 06:39:42,138 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:42,170 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 06:39:42,875 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:42,894 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 06:39:43,513 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:43,532 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 06:39:43,546 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:43,565 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 06:39:43,856 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:43,874 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 06:39:43,889 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:43,908 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 06:39:44,651 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:44,669 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 06:39:44,700 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:44,735 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 06:39:44,929 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 06:39:44,951 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 06:39:45,290 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 06:39:45,313 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 06:39:45,545 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:45,564 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 06:39:45,834 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:45,853 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 06:39:45,867 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:45,886 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 06:39:46,213 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:46,232 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 06:39:46,549 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:46,568 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 06:39:46,741 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:46,760 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 06:39:46,773 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:46,791 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 06:39:47,113 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,131 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 06:39:47,163 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:47,195 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 06:39:47,208 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,227 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 06:39:47,250 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,269 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 06:39:47,293 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,312 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 06:39:47,483 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,501 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 06:39:47,525 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,543 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 06:39:47,713 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,732 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 06:39:47,755 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,773 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 06:39:47,786 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,805 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 06:39:47,818 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,837 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 06:39:47,850 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,919 p=171727 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] ***************************
2023-04-19 06:39:48,220 p=171727 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 06:39:48,238 p=171727 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] *************
2023-04-19 06:39:48,255 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:48,274 p=171727 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 06:39:48,457 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:48,493 p=171727 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 06:39:48,493 p=171727 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=151  changed=2    unreachable=0    failed=0    skipped=92   rescued=0    ignored=0   
2023-04-19 07:41:50,083 p=178383 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 07:41:50,167 p=178383 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 07:41:50,181 p=178383 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 07:41:51,203 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:51,209 p=178383 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 07:41:52,072 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:52,088 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 07:41:52,112 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 07:41:52,121 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 07:41:52,142 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:52,148 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 07:41:52,169 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:52,176 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 07:41:52,198 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:52,204 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 07:41:52,938 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:52,944 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 07:41:53,208 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:53,214 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 07:41:53,254 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:53,260 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 07:41:54,010 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,016 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 07:41:54,038 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,044 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 07:41:54,074 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,080 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 07:41:54,104 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,109 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 07:41:54,133 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,139 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 07:41:54,152 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,158 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 07:41:54,417 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,426 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 07:41:54,688 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,694 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 07:41:54,711 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,716 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 07:41:54,876 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:54,883 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 07:41:55,314 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:55,320 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 07:41:55,667 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:55,673 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 07:41:55,704 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 07:41:55,715 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 07:41:55,902 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 07:41:56,054 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 07:41:56,062 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 07:41:56,222 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:56,228 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 07:41:56,554 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 07:41:56,562 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 07:41:56,886 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 07:41:56,894 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 07:41:57,221 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:57,227 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 07:41:57,539 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:57,545 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 07:41:57,709 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:57,715 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 07:41:58,210 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:41:58,221 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 07:41:58,244 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 07:41:58,246 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:58,252 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 07:41:58,265 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:58,271 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 07:41:58,304 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 07:41:58,306 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:58,312 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 07:41:58,672 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 07:41:58,681 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 07:41:58,693 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:58,700 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 07:41:58,723 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:58,729 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 07:41:58,741 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:58,747 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 07:41:59,123 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 07:41:59,131 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 07:41:59,142 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:41:59,208 p=178383 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 07:41:59,254 p=178383 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 07:42:00,052 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:00,072 p=178383 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 07:42:00,796 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:00,814 p=178383 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 07:42:00,826 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:00,845 p=178383 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 07:42:01,571 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:01,589 p=178383 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-19 07:42:03,316 p=178383 u=ubuntu n=ansible | >> Newly checked out c778383ee59290324c63e6b8c83d1166775c329f
2023-04-19 07:42:03,316 p=178383 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 07:42:03,368 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 07:42:03,944 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:03,963 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 07:42:03,983 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:04,002 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 07:42:04,553 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:04,572 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 07:42:04,742 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:04,765 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 07:42:04,817 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:04,836 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 07:42:04,852 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:04,873 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 07:42:04,888 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:04,908 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 07:42:04,924 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:04,942 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 07:42:04,957 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:04,977 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 07:42:04,993 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:05,012 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 07:42:05,049 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:05,088 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 07:42:05,100 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:05,119 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 07:42:05,154 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 07:42:05,165 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:05,200 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 07:42:05,612 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:05,629 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 07:42:06,349 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:06,384 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 07:42:06,401 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 07:42:06,419 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 07:42:06,461 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:06,479 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 07:42:06,512 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:06,530 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 07:42:06,565 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 07:42:06,572 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 07:42:06,575 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 07:42:06,585 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 07:42:06,588 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 07:42:06,598 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 07:42:06,608 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 07:42:06,612 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 07:42:06,615 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 07:42:06,635 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 07:42:06,695 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 07:42:06,725 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 07:42:06,756 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 07:42:06,794 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 07:42:06,796 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:06,815 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 07:42:06,891 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 07:42:06,937 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 07:42:06,973 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 07:42:06,994 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 07:42:07,045 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:07,083 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 07:42:07,187 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:07,206 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 07:42:07,746 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:07,765 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 07:42:07,871 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:07,889 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 07:42:08,188 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 07:42:08,340 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 07:42:08,361 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 07:42:08,553 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 07:42:08,702 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 07:42:08,723 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 07:42:08,807 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:08,826 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 07:42:08,844 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:08,862 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 07:42:08,899 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:08,936 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 07:42:09,269 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:09,287 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 07:42:09,639 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 07:42:09,953 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 07:42:10,273 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 07:42:10,583 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 07:42:10,603 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 07:42:10,949 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 07:42:11,264 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 07:42:11,574 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 07:42:11,915 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 07:42:12,239 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 07:42:12,552 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 07:42:12,863 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 07:42:13,180 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 07:42:13,475 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 07:42:13,776 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-19 07:42:13,797 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 07:42:13,883 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:13,922 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 07:42:15,466 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:15,485 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 07:42:15,584 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:15,605 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 07:42:17,279 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:17,298 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 07:42:19,093 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:19,113 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 07:42:19,211 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:19,231 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 07:42:19,245 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:19,271 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 07:42:19,285 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:19,303 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 07:42:19,358 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:19,403 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 07:42:19,523 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:19,559 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 07:42:19,968 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:19,987 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 07:42:20,182 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:20,201 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 07:42:20,678 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 07:42:20,699 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 07:42:21,177 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 07:42:21,197 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 07:42:21,700 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 07:42:22,150 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 07:42:22,171 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 07:42:22,199 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,218 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 07:42:22,320 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,339 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 07:42:22,438 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,456 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 07:42:22,555 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,574 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 07:42:22,588 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,607 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 07:42:22,621 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,640 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 07:42:22,653 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,671 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 07:42:22,686 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,704 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 07:42:22,810 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,829 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 07:42:22,930 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:22,949 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 07:42:23,051 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:23,071 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 07:42:24,015 p=178383 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-178383f6hvjrtj/tmprgsv_pqx/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -83,6 +83,7 @@[0m
[0;36m[0m             environment: local_env
     job_metrics_config_file: /srv/galaxy/config/job_metrics_conf.xml
     job_working_directory: /data/jobs
[0;32m+    library_import_dir: /libraries/admin[0m
[0;32m[0m     logo_src: https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png
     migrated_tools_config: /srv/galaxy/var/config/migrated_tools_conf.xml
     new_user_dataset_access_role_default_private: true
[0;36m@@ -104,5 +105,6 @@[0m
[0;36m[0m     tool_sheds_config_file: /srv/galaxy/server/config/tool_sheds_conf.xml.sample
     tus_upload_store: /data/tus
     ucsc_build_sites: /srv/galaxy/server/tool-data/shared/ucsc/ucsc_build_sites.txt.sample
[0;32m+    user_library_import_dir: /libraries/user[0m
[0;32m[0m     visualization_plugins_directory: config/plugins/visualizations
     watch_job_rules: auto


2023-04-19 07:42:24,015 p=178383 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 07:42:24,034 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 07:42:24,085 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:24,133 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 07:42:25,714 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:25,734 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 07:42:27,463 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:27,485 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 07:42:32,479 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:32,498 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 07:42:33,079 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:33,098 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 07:42:34,701 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:34,720 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 07:42:34,817 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:34,836 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 07:42:34,883 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:34,937 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 07:42:35,040 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:35,086 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 07:42:35,588 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 07:42:35,611 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 07:42:36,046 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 07:42:36,361 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 07:42:36,382 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 07:42:36,784 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 07:42:37,089 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 07:42:37,112 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 07:42:37,148 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:37,201 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 07:42:38,523 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:38,542 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 07:42:39,893 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:39,912 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 07:42:40,013 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:40,032 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 07:42:40,136 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:40,154 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 07:42:40,222 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:40,279 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 07:42:40,612 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:40,631 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 07:42:40,954 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:40,974 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 07:42:41,304 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:41,322 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 07:42:41,683 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:41,702 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 07:42:41,883 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:41,902 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 07:42:42,076 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:42,097 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 07:42:42,199 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:42,219 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 07:42:42,315 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:42,334 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 07:42:42,438 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:42,457 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 07:42:42,560 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:42,579 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 07:42:42,680 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:42,698 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 07:42:42,795 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:42,814 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 07:42:42,913 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:42,933 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 07:42:43,030 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:43,049 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 07:42:43,063 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:43,081 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 07:42:43,120 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:43,191 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 07:42:43,292 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:43,311 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 07:42:43,911 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:43,930 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 07:42:43,948 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:43,967 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 07:42:43,980 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:43,999 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 07:42:44,034 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:44,096 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 07:42:44,517 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:44,545 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 07:42:44,652 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:44,692 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 07:42:44,860 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:44,881 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 07:42:44,897 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:44,915 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 07:42:45,285 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:45,304 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 07:42:45,340 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:45,359 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 07:42:45,372 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:45,393 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 07:42:45,407 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:45,425 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 07:42:45,449 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:45,467 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 07:42:45,491 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:45,509 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 07:42:45,522 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:45,558 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 07:42:45,592 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:45,624 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 07:42:46,353 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,371 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 07:42:46,544 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,565 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 07:42:46,579 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,599 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 07:42:46,614 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,634 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 07:42:46,797 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,815 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 07:42:46,843 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,861 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 07:42:46,892 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,910 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 07:42:46,924 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,942 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 07:42:46,956 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:46,974 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 07:42:46,988 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:47,006 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 07:42:47,028 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:47,046 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 07:42:47,392 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:47,410 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 07:42:47,439 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:47,459 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 07:42:47,802 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 07:42:47,822 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 07:42:48,005 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 07:42:48,026 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 07:42:48,857 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:42:48,876 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 07:42:48,956 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 07:42:48,987 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 07:42:49,020 p=178383 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *******************
2023-04-19 07:42:49,038 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:49,057 p=178383 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 07:42:49,073 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:49,092 p=178383 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 07:42:49,110 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:42:49,129 p=178383 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 07:42:49,750 p=178383 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 07:42:49,769 p=178383 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 07:43:02,637 p=178383 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 07:43:02,656 p=178383 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 07:43:02,840 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 07:43:02,886 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:02,920 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 07:43:03,815 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:03,839 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 07:43:03,859 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:03,882 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 07:43:03,913 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:03,937 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 07:43:03,953 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:03,977 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 07:43:03,994 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:04,017 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 07:43:04,072 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:04,133 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 07:43:04,355 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:04,378 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 07:43:04,402 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:04,425 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 07:43:04,450 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:04,473 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 07:43:04,711 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:04,734 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 07:43:04,760 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 07:43:04,782 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 07:43:04,829 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:04,871 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 07:43:04,891 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:04,917 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 07:43:05,308 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:05,331 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 07:43:05,366 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 07:43:05,402 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:05,449 p=178383 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 07:43:05,648 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:05,687 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 07:43:05,859 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:05,880 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 07:43:06,239 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:06,258 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 07:43:06,443 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:06,464 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 07:43:06,647 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:06,667 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 07:43:06,708 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:06,742 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 07:43:07,105 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 07:43:07,130 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 07:43:07,345 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 07:43:07,366 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 07:43:07,574 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:07,594 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 07:43:07,613 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:07,636 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 07:43:07,960 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:07,995 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 07:43:08,658 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:08,680 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 07:43:08,947 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:08,967 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 07:43:08,985 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:09,003 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 07:43:09,183 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:09,202 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 07:43:09,367 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:09,386 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 07:43:09,546 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:09,564 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 07:43:09,734 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:09,753 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 07:43:09,991 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:10,026 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 07:43:10,063 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:10,083 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 07:43:10,117 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:10,136 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 07:43:10,150 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:10,169 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 07:43:10,204 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:10,223 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 07:43:10,308 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:10,378 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 07:43:10,438 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:10,470 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 07:43:11,222 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:11,243 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 07:43:11,836 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:11,855 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 07:43:11,868 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:11,887 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 07:43:12,187 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:12,206 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 07:43:12,221 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:12,240 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 07:43:12,957 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:12,977 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 07:43:13,014 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:13,052 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 07:43:13,253 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 07:43:13,276 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 07:43:13,599 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 07:43:13,619 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 07:43:13,877 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:13,896 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 07:43:14,183 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:14,202 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 07:43:14,216 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:14,237 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 07:43:14,566 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:14,585 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 07:43:14,918 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:14,938 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 07:43:15,116 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:15,136 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 07:43:15,150 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:15,169 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 07:43:15,508 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:15,526 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 07:43:15,558 p=178383 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 07:43:15,592 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 07:43:15,604 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:15,623 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 07:43:15,647 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:15,666 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 07:43:15,690 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:15,709 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 07:43:15,891 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:15,910 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 07:43:15,935 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:15,954 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 07:43:16,131 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:16,150 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 07:43:16,176 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:16,196 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 07:43:16,210 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:16,229 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 07:43:16,242 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:16,261 p=178383 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 07:43:16,275 p=178383 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 07:43:16,344 p=178383 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 07:43:16,516 p=178383 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 07:43:16,551 p=178383 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 07:43:16,552 p=178383 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=153  changed=4    unreachable=0    failed=0    skipped=94   rescued=0    ignored=0   
2023-04-19 08:42:23,508 p=183799 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-19 08:42:23,509 p=183799 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-19 08:42:23,509 p=183799 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-19 08:42:23,509 p=183799 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-19 08:42:23,510 p=183799 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-19 08:42:23,510 p=183799 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-19 08:42:23,510 p=183799 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-19 08:42:23,510 p=183799 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-19 08:42:23,510 p=183799 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-19 08:42:23,511 p=183799 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-19 08:42:23,511 p=183799 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-19 08:42:23,646 p=183799 u=ubuntu n=ansible | - downloading role 'repos', owned by galaxyproject
2023-04-19 08:42:24,207 p=183799 u=ubuntu n=ansible | - downloading role from https://github.com/galaxyproject/ansible-repos/archive/0.0.3.tar.gz
2023-04-19 08:42:24,458 p=183799 u=ubuntu n=ansible | - extracting galaxyproject.repos to /home/ubuntu/galaxy/roles/galaxyproject.repos
2023-04-19 08:42:24,459 p=183799 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) was installed successfully
2023-04-19 08:42:24,460 p=183799 u=ubuntu n=ansible | - downloading role 'slurm', owned by galaxyproject
2023-04-19 08:42:24,859 p=183799 u=ubuntu n=ansible | - downloading role from https://github.com/galaxyproject/ansible-slurm/archive/1.0.2.tar.gz
2023-04-19 08:42:25,084 p=183799 u=ubuntu n=ansible | - extracting galaxyproject.slurm to /home/ubuntu/galaxy/roles/galaxyproject.slurm
2023-04-19 08:42:25,087 p=183799 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) was installed successfully
2023-04-19 08:44:48,927 p=183850 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 08:44:49,008 p=183850 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 08:44:49,023 p=183850 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 08:44:50,099 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:50,106 p=183850 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 08:44:50,986 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:51,003 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 08:44:51,027 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 08:44:51,036 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 08:44:51,058 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:51,063 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 08:44:51,084 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:51,090 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 08:44:51,111 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:51,117 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 08:44:51,842 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:51,849 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 08:44:52,132 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:52,139 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 08:44:52,177 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:52,184 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 08:44:52,916 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:52,922 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 08:44:52,942 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:52,948 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 08:44:52,977 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:52,983 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 08:44:53,005 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:53,011 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 08:44:53,033 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:53,039 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 08:44:53,051 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:53,057 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 08:44:53,311 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:53,317 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 08:44:53,570 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:53,576 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 08:44:53,591 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:53,597 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 08:44:53,754 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:53,760 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 08:44:54,176 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:54,182 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 08:44:54,537 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:54,543 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 08:44:54,573 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 08:44:54,584 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 08:44:54,760 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 08:44:54,911 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 08:44:54,919 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 08:44:55,086 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:55,092 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 08:44:55,404 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 08:44:55,412 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 08:44:55,720 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 08:44:55,727 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 08:44:56,046 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:56,052 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 08:44:56,363 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:56,370 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 08:44:56,525 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:56,531 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 08:44:57,026 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:57,037 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 08:44:57,058 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 08:44:57,060 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:57,066 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 08:44:57,076 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:57,083 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 08:44:57,114 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 08:44:57,116 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:57,123 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 08:44:57,478 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:44:57,486 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 08:44:57,497 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:57,503 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 08:44:57,524 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:57,530 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 08:44:57,540 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:57,547 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 08:44:57,906 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:44:57,914 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 08:44:57,924 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:57,991 p=183850 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 08:44:58,043 p=183850 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 08:44:58,822 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:58,843 p=183850 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 08:44:59,588 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:44:59,606 p=183850 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 08:44:59,619 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:44:59,637 p=183850 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 08:45:00,386 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:45:00,405 p=183850 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-19 08:45:01,167 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:45:01,221 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 08:45:01,657 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:45:01,676 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 08:45:01,695 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:45:01,714 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 08:45:01,945 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:45:01,965 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 08:45:02,139 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,159 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 08:45:02,208 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,227 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 08:45:02,240 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,259 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 08:45:02,273 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,292 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 08:45:02,307 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,326 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 08:45:02,340 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,360 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 08:45:02,376 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,394 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 08:45:02,426 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 08:45:02,462 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 08:45:02,477 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,502 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 08:45:02,537 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 08:45:02,549 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:02,584 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-19 08:45:22,885 p=183850 u=ubuntu n=ansible | [0;31m--- before: /dev/null[0m
[0;31m[0m[0;32m+++ after: /etc/apt/sources.list.d/ppa_natefoo_slurm_drmaa_jammy.list[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+deb http://ppa.launchpad.net/natefoo/slurm-drmaa/ubuntu jammy main[0m
[0;32m[0m

2023-04-19 08:45:22,885 p=183850 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:45:22,905 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-19 08:45:22,921 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:22,941 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-19 08:45:22,960 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:22,978 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-19 08:45:22,997 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:23,034 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-19 08:45:23,049 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:45:23,069 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-19 08:45:23,130 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 08:45:23,165 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-19 08:46:19,502 p=183850 u=ubuntu n=ansible | The following additional packages will be installed:
  fontconfig freeipmi-common libaec0 libb64-0d libcairo2 libdatrie1 libdbi1
  libfreeipmi17 libgraphite2-3 libharfbuzz0b libhdf5-103-1 libhdf5-hl-100
  libhwloc-plugins libhwloc15 libipmimonitoring6 libjwt0 liblua5.1-0 libmunge2
  libmysqlclient21 libpango-1.0-0 libpangocairo-1.0-0 libpangoft2-1.0-0
  libpciaccess0 libpixman-1-0 librrd8 libsz2 libthai-data libthai0
  libxcb-render0 libxcb-shm0 libxnvctrl0 libxrender1 munge mysql-common
  ocl-icd-libopencl1 slurm-client slurm-wlm-basic-plugins slurmctld slurmd
Suggested packages:
  freeipmi-tools libhwloc-contrib-plugins opencl-icd
The following NEW packages will be installed:
  fontconfig freeipmi-common libaec0 libb64-0d libcairo2 libdatrie1 libdbi1
  libfreeipmi17 libgraphite2-3 libharfbuzz0b libhdf5-103-1 libhdf5-hl-100
  libhwloc-plugins libhwloc15 libipmimonitoring6 libjwt0 liblua5.1-0 libmunge2
  libmysqlclient21 libpango-1.0-0 libpangocairo-1.0-0 libpangoft2-1.0-0
  libpciaccess0 libpixman-1-0 librrd8 libsz2 libthai-data libthai0
  libxcb-render0 libxcb-shm0 libxnvctrl0 libxrender1 munge mysql-common
  ocl-icd-libopencl1 slurm-client slurm-wlm slurm-wlm-basic-plugins slurmctld
  slurmd
0 upgraded, 40 newly installed, 0 to remove and 13 not upgraded.
2023-04-19 08:46:19,503 p=183850 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:46:19,522 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-19 08:46:19,540 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:19,558 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 08:46:19,635 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:19,653 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 08:46:19,670 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:19,689 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 08:46:19,719 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:19,750 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 08:46:19,771 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 08:46:19,776 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 08:46:19,778 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 08:46:19,780 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:19,800 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-19 08:46:19,861 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:19,896 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-19 08:46:20,704 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:20,722 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-19 08:46:20,736 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:20,755 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 08:46:20,827 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:20,847 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 08:46:20,862 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:20,883 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 08:46:20,912 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:20,944 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 08:46:20,965 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 08:46:20,970 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 08:46:20,972 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 08:46:20,974 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:20,992 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-19 08:46:21,006 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:21,025 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-19 08:46:29,752 p=183850 u=ubuntu n=ansible | The following NEW packages will be installed:
  slurm-wlm-doc
0 upgraded, 1 newly installed, 0 to remove and 13 not upgraded.
2023-04-19 08:46:29,752 p=183850 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:46:29,773 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 08:46:29,790 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:29,810 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-19 08:46:29,828 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:29,848 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-19 08:46:30,536 p=183850 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-183850xz01xiqp/tmpljzivp9b/slurm.conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,30 @@[0m
[0;36m[0m[0;32m+##[0m
[0;32m[0m[0;32m+## This file is maintained by Ansible - ALL MODIFICATIONS WILL BE REVERTED[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Default, define SlurmctldHost or ControlMachine to override[0m
[0;32m[0m[0;32m+ControlMachine=localhost[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Configuration options[0m
[0;32m[0m[0;32m+AuthType=auth/munge[0m
[0;32m[0m[0;32m+ClusterName=cluster[0m
[0;32m[0m[0;32m+CryptoType=crypto/munge[0m
[0;32m[0m[0;32m+ProctrackType=proctrack/pgid[0m
[0;32m[0m[0;32m+SelectType=select/cons_res[0m
[0;32m[0m[0;32m+SelectTypeParameters=CR_CPU_Memory[0m
[0;32m[0m[0;32m+SlurmctldLogFile=/var/log/slurm/slurmctld.log[0m
[0;32m[0m[0;32m+SlurmctldPidFile=/run/slurmctld.pid[0m
[0;32m[0m[0;32m+SlurmctldPort=6817[0m
[0;32m[0m[0;32m+SlurmdLogFile=/var/log/slurm/slurmd.log[0m
[0;32m[0m[0;32m+SlurmdParameters=config_overrides[0m
[0;32m[0m[0;32m+SlurmdPidFile=/run/slurmd.pid[0m
[0;32m[0m[0;32m+SlurmdPort=6818[0m
[0;32m[0m[0;32m+SlurmdSpoolDir=/var/lib/slurm/slurmctld[0m
[0;32m[0m[0;32m+SlurmUser=slurm[0m
[0;32m[0m[0;32m+StateSaveLocation=/var/lib/slurm/slurmctld[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Nodes[0m
[0;32m[0m[0;32m+NodeName=localhost CPUs=2[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Partitions[0m
[0;32m[0m[0;32m+PartitionName=debug Default=YES Nodes=localhost State=UP[0m
[0;32m[0m

2023-04-19 08:46:30,537 p=183850 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:46:30,558 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-19 08:46:30,595 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:30,626 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-19 08:46:30,789 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:30,809 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-19 08:46:30,830 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:30,849 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-19 08:46:31,125 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:31,143 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-19 08:46:31,156 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:31,174 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-19 08:46:31,450 p=183850 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:46:31,468 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-19 08:46:31,759 p=183850 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:46:31,795 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 08:46:32,078 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:32,100 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 08:46:32,848 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:32,883 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 08:46:32,901 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 08:46:32,922 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 08:46:32,967 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:32,985 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 08:46:33,021 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:33,039 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 08:46:33,070 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 08:46:33,080 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 08:46:33,091 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 08:46:33,101 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 08:46:33,111 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 08:46:33,120 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 08:46:33,124 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 08:46:33,128 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 08:46:33,131 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 08:46:33,152 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 08:46:33,210 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 08:46:33,239 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 08:46:33,269 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 08:46:33,297 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 08:46:33,299 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:33,319 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 08:46:33,395 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 08:46:33,436 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 08:46:33,473 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 08:46:33,494 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 08:46:33,545 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:33,588 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 08:46:33,695 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:33,714 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 08:46:34,278 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:34,297 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 08:46:34,409 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:34,428 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 08:46:34,753 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:46:34,910 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 08:46:34,933 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 08:46:35,112 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:46:35,265 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 08:46:35,286 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 08:46:35,394 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:35,413 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 08:46:35,429 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:35,448 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 08:46:35,481 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:35,519 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 08:46:35,879 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:35,898 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 08:46:36,240 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 08:46:36,555 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 08:46:36,895 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 08:46:37,231 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 08:46:37,252 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 08:46:37,598 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 08:46:37,917 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 08:46:38,216 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 08:46:38,516 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 08:46:38,852 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 08:46:39,153 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 08:46:39,463 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 08:46:39,784 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 08:46:40,097 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 08:46:40,399 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-19 08:46:40,420 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 08:46:40,484 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:40,522 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 08:46:41,886 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:41,905 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 08:46:42,001 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:42,020 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 08:46:43,727 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:43,752 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 08:46:45,502 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:45,522 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 08:46:45,620 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:45,639 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 08:46:45,651 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:45,672 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 08:46:45,686 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:45,706 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 08:46:45,761 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:45,809 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 08:46:45,935 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:45,972 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 08:46:46,395 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:46,416 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 08:46:46,612 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:46,632 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 08:46:47,146 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 08:46:47,167 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 08:46:47,635 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 08:46:47,657 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 08:46:48,163 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 08:46:48,616 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 08:46:48,638 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 08:46:48,667 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:48,687 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 08:46:48,790 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:48,809 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 08:46:48,918 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:48,937 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 08:46:49,038 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:49,057 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 08:46:49,070 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:49,090 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 08:46:49,104 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:49,123 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 08:46:49,136 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:49,154 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 08:46:49,168 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:49,187 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 08:46:49,288 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:49,308 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 08:46:49,407 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:49,426 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 08:46:49,528 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:46:49,546 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 08:46:50,119 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:50,138 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 08:46:50,188 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 08:46:50,237 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 08:46:51,847 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:51,867 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 08:46:53,661 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:53,681 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 08:46:58,717 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:58,735 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 08:46:59,331 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:46:59,350 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 08:47:00,979 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:00,997 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 08:47:01,103 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:01,122 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 08:47:01,170 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:01,222 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 08:47:01,326 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:01,345 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 08:47:01,846 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 08:47:01,867 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 08:47:02,331 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 08:47:02,636 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 08:47:02,656 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 08:47:03,075 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 08:47:03,385 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 08:47:03,405 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 08:47:03,440 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:03,492 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 08:47:04,913 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:04,933 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 08:47:06,271 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:06,290 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 08:47:06,391 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:06,410 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 08:47:06,509 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:06,527 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 08:47:06,595 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:06,651 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 08:47:06,996 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:07,017 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 08:47:07,337 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:07,356 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 08:47:07,703 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:07,724 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 08:47:08,114 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:08,136 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 08:47:08,322 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:08,341 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 08:47:08,536 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:08,555 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 08:47:08,661 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:08,679 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 08:47:08,791 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:08,810 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 08:47:08,924 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:08,951 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 08:47:09,054 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:09,075 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 08:47:09,176 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:09,196 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 08:47:09,298 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:09,318 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 08:47:09,431 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:09,450 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 08:47:09,551 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:09,571 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 08:47:09,585 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:09,604 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 08:47:09,646 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:09,723 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 08:47:09,822 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:09,843 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 08:47:10,466 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:10,486 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 08:47:10,505 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:10,525 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 08:47:10,538 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:10,558 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 08:47:10,596 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:10,664 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 08:47:11,098 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:11,118 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 08:47:11,223 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:11,264 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 08:47:11,438 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:11,459 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 08:47:11,475 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:11,495 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 08:47:11,894 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:11,916 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 08:47:11,953 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:11,972 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 08:47:11,987 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:12,006 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 08:47:12,020 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:12,040 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 08:47:12,064 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:12,084 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 08:47:12,107 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:12,129 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 08:47:12,144 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:12,182 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 08:47:12,218 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:12,251 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 08:47:13,020 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,041 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 08:47:13,219 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,239 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 08:47:13,254 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,276 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 08:47:13,291 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,311 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 08:47:13,475 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,494 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 08:47:13,525 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,544 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 08:47:13,577 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,596 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 08:47:13,610 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,632 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 08:47:13,650 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,671 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 08:47:13,689 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,709 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 08:47:13,733 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:13,752 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 08:47:14,132 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:14,152 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 08:47:14,184 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:14,204 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 08:47:14,539 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 08:47:14,560 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 08:47:14,757 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 08:47:14,778 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 08:47:14,980 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:14,999 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 08:47:15,081 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:15,113 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 08:47:15,149 p=183850 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.slurm : Restart slurmd] *************************
2023-04-19 08:47:15,437 p=183850 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:47:15,456 p=183850 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.slurm : Restart slurmctld] **********************
2023-04-19 08:47:15,838 p=183850 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:47:15,858 p=183850 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 08:47:16,055 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 08:47:16,091 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:16,127 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 08:47:16,970 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:16,989 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 08:47:17,007 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,027 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 08:47:17,048 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,067 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 08:47:17,081 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,100 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 08:47:17,114 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,134 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 08:47:17,175 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:17,239 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 08:47:17,436 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,455 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 08:47:17,478 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,497 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 08:47:17,520 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,539 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 08:47:17,740 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,759 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 08:47:17,782 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 08:47:17,800 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 08:47:17,842 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:17,883 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 08:47:17,906 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:17,925 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 08:47:18,287 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:18,306 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 08:47:18,346 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 08:47:18,382 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:18,426 p=183850 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 08:47:18,610 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:18,646 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 08:47:18,811 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:18,830 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 08:47:19,173 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:19,194 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 08:47:19,374 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:19,393 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 08:47:19,550 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:19,569 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 08:47:19,607 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:19,641 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 08:47:19,964 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:47:19,985 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 08:47:20,181 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:47:20,202 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 08:47:20,390 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:20,410 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 08:47:20,428 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:20,449 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 08:47:20,749 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:20,785 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 08:47:21,362 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:21,381 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 08:47:21,549 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:21,568 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 08:47:21,581 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:21,600 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 08:47:21,766 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:21,785 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 08:47:21,971 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:21,991 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 08:47:22,170 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:22,190 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 08:47:22,368 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:22,390 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 08:47:22,673 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:22,711 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 08:47:22,745 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:22,764 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 08:47:22,799 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:22,819 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 08:47:22,834 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:22,854 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 08:47:22,888 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:22,907 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 08:47:22,996 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:23,059 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 08:47:23,115 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:23,148 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 08:47:23,895 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:23,916 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 08:47:24,500 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:24,520 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 08:47:24,534 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:24,553 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 08:47:24,855 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:24,875 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 08:47:24,891 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:24,911 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 08:47:25,690 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:25,709 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 08:47:25,742 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:25,776 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 08:47:25,971 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 08:47:25,994 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 08:47:26,371 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 08:47:26,393 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 08:47:26,651 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:26,671 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 08:47:26,962 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:26,983 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 08:47:26,998 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:27,017 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 08:47:27,362 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:27,382 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 08:47:27,726 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:27,746 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 08:47:27,920 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:27,939 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 08:47:27,953 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:27,973 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 08:47:28,334 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:28,353 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 08:47:28,390 p=183850 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 08:47:28,427 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 08:47:28,441 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:28,463 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 08:47:28,489 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:28,508 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 08:47:28,533 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:28,552 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 08:47:28,728 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:28,750 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 08:47:28,775 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:28,794 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 08:47:28,970 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:28,989 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 08:47:29,016 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:29,036 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 08:47:29,051 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:29,070 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 08:47:29,084 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:29,103 p=183850 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 08:47:29,120 p=183850 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:47:29,189 p=183850 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 08:47:29,361 p=183850 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:47:29,398 p=183850 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 08:47:29,398 p=183850 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=167  changed=8    unreachable=0    failed=0    skipped=108  rescued=0    ignored=0   
2023-04-19 08:55:53,605 p=191553 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 08:55:53,685 p=191553 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 08:55:53,699 p=191553 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 08:55:54,677 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:54,683 p=191553 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 08:55:55,557 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:55,572 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 08:55:55,597 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 08:55:55,606 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 08:55:55,628 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:55:55,634 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 08:55:55,655 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:55:55,661 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 08:55:55,682 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:55:55,688 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 08:55:56,446 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:56,452 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 08:55:56,735 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:56,742 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 08:55:56,785 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:56,792 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 08:55:57,560 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:57,566 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 08:55:57,589 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:55:57,595 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 08:55:57,626 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:57,632 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 08:55:57,657 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:57,663 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 08:55:57,687 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:57,693 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 08:55:57,705 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:55:57,711 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 08:55:57,989 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:57,995 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 08:55:58,274 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:58,280 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 08:55:58,297 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:55:58,303 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 08:55:58,473 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:58,479 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 08:55:58,917 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:58,924 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 08:55:59,306 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:59,312 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 08:55:59,343 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 08:55:59,355 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 08:55:59,538 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 08:55:59,691 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 08:55:59,699 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 08:55:59,875 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:55:59,881 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 08:56:00,223 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 08:56:00,231 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 08:56:00,566 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 08:56:00,575 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 08:56:00,909 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:00,915 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 08:56:01,236 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:01,242 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 08:56:01,403 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:01,409 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 08:56:01,917 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:01,928 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 08:56:01,952 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 08:56:01,954 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:01,960 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 08:56:01,970 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:01,976 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 08:56:02,011 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 08:56:02,013 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:02,020 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 08:56:02,395 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:56:02,403 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 08:56:02,415 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:02,421 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 08:56:02,443 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:02,449 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 08:56:02,460 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:02,467 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 08:56:02,851 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:56:02,859 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 08:56:02,870 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:02,936 p=191553 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 08:56:03,007 p=191553 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 08:56:03,793 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:03,815 p=191553 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 08:56:04,572 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:04,591 p=191553 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 08:56:04,605 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:04,623 p=191553 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 08:56:05,335 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:05,354 p=191553 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-19 08:56:06,055 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:06,115 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 08:56:06,517 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:06,536 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 08:56:06,556 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:06,576 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 08:56:06,812 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:06,832 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 08:56:07,010 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,029 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 08:56:07,080 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,099 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 08:56:07,115 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,138 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 08:56:07,156 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,176 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 08:56:07,193 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,213 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 08:56:07,228 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,248 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 08:56:07,263 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,282 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 08:56:07,317 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:07,351 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 08:56:07,364 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,382 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 08:56:07,417 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 08:56:07,428 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,464 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-19 08:56:07,907 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,926 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-19 08:56:07,939 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,958 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-19 08:56:07,976 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:07,995 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-19 08:56:08,012 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:08,048 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-19 08:56:08,062 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:08,081 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-19 08:56:08,142 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:08,176 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-19 08:56:08,910 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:08,929 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-19 08:56:08,944 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:08,963 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 08:56:09,031 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:09,052 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 08:56:09,067 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:09,086 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 08:56:09,117 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:09,154 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 08:56:09,177 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 08:56:09,182 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 08:56:09,184 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 08:56:09,187 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:09,205 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-19 08:56:09,267 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:09,302 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-19 08:56:10,079 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:10,100 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-19 08:56:10,117 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:10,135 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 08:56:10,211 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:10,230 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 08:56:10,248 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:10,267 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 08:56:10,299 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:10,337 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 08:56:10,362 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 08:56:10,366 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 08:56:10,369 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 08:56:10,373 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:10,391 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-19 08:56:10,407 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:10,426 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-19 08:56:11,172 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:11,191 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 08:56:11,211 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:11,234 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-19 08:56:11,250 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:11,270 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-19 08:56:11,713 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:11,732 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-19 08:56:11,770 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:11,804 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-19 08:56:11,978 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:11,997 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-19 08:56:12,019 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:12,038 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-19 08:56:12,325 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:12,344 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-19 08:56:12,359 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:12,377 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-19 08:56:12,654 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:12,673 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-19 08:56:12,978 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:13,014 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 08:56:13,316 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:13,335 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 08:56:14,124 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:14,167 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 08:56:14,186 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 08:56:14,204 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 08:56:14,248 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:14,273 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 08:56:14,309 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:14,327 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 08:56:14,395 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 08:56:14,403 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 08:56:14,410 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 08:56:14,413 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 08:56:14,424 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 08:56:14,427 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 08:56:14,437 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 08:56:14,442 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 08:56:14,445 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 08:56:14,466 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 08:56:14,525 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 08:56:14,555 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 08:56:14,585 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 08:56:14,612 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 08:56:14,615 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:14,634 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 08:56:14,712 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 08:56:14,752 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 08:56:14,792 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 08:56:14,813 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 08:56:14,870 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:14,906 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 08:56:15,007 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:15,026 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 08:56:15,575 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:15,594 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 08:56:15,704 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:15,723 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 08:56:16,005 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:56:16,160 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 08:56:16,181 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 08:56:16,381 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:56:16,538 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 08:56:16,560 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 08:56:16,642 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:16,662 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 08:56:16,680 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:16,700 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 08:56:16,736 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:16,775 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 08:56:17,115 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:17,135 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 08:56:17,482 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 08:56:17,815 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 08:56:18,128 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 08:56:18,450 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 08:56:18,473 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 08:56:18,814 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 08:56:19,121 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 08:56:19,457 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 08:56:19,763 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 08:56:20,091 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 08:56:20,402 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 08:56:20,721 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 08:56:21,039 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 08:56:21,358 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 08:56:21,673 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-19 08:56:21,695 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 08:56:21,760 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:21,800 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 08:56:23,260 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:23,280 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 08:56:23,382 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:23,401 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 08:56:25,149 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:25,168 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 08:56:26,891 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:26,912 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 08:56:27,011 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:27,030 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 08:56:27,043 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:27,062 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 08:56:27,077 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:27,096 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 08:56:27,150 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:27,195 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 08:56:27,315 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:27,352 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 08:56:27,785 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:27,804 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 08:56:28,009 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:28,028 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 08:56:28,504 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 08:56:28,525 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 08:56:29,013 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 08:56:29,034 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 08:56:29,528 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 08:56:29,996 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 08:56:30,017 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 08:56:30,048 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,067 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 08:56:30,170 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,189 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 08:56:30,292 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,311 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 08:56:30,413 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,432 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 08:56:30,446 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,466 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 08:56:30,481 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,500 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 08:56:30,515 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,534 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 08:56:30,549 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,568 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 08:56:30,673 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,694 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 08:56:30,805 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,836 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 08:56:30,956 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:30,975 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 08:56:31,561 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:31,581 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 08:56:31,637 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:31,686 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 08:56:33,271 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:33,292 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 08:56:35,101 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:35,122 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 08:56:40,316 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:40,336 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 08:56:40,957 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:40,977 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 08:56:42,609 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:42,635 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 08:56:42,735 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:42,761 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 08:56:42,811 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:42,864 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 08:56:42,968 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:42,988 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 08:56:43,479 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 08:56:43,500 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 08:56:43,947 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 08:56:44,248 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 08:56:44,270 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 08:56:44,673 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 08:56:44,996 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 08:56:45,016 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 08:56:45,060 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:45,115 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 08:56:46,509 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:46,528 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 08:56:47,878 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:47,897 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 08:56:47,998 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:48,017 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 08:56:48,116 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:48,135 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 08:56:48,204 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:48,261 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 08:56:48,601 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:48,621 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 08:56:48,955 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:48,982 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 08:56:49,309 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:49,329 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 08:56:49,697 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:49,717 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 08:56:49,916 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:49,940 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 08:56:50,139 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:50,158 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 08:56:50,270 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:50,290 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 08:56:50,404 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:50,423 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 08:56:50,532 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:50,551 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 08:56:50,655 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:50,675 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 08:56:50,785 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:50,805 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 08:56:50,920 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:50,945 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 08:56:51,050 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:51,070 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 08:56:51,178 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:51,198 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 08:56:51,215 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:51,234 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 08:56:51,275 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:51,350 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 08:56:51,461 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:51,481 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 08:56:52,125 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:52,145 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 08:56:52,166 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:52,185 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 08:56:52,198 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:52,217 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 08:56:52,253 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:52,313 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 08:56:52,707 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:52,726 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 08:56:52,838 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:52,873 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 08:56:53,043 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,062 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 08:56:53,077 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,096 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 08:56:53,462 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,480 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 08:56:53,514 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,532 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 08:56:53,545 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,564 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 08:56:53,577 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,596 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 08:56:53,619 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,637 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 08:56:53,659 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,678 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 08:56:53,691 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:53,727 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 08:56:53,760 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:53,797 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 08:56:54,521 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:54,541 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 08:56:54,709 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:54,728 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 08:56:54,743 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:54,761 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 08:56:54,776 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:54,803 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 08:56:54,977 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,000 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 08:56:55,029 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,047 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 08:56:55,076 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,095 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 08:56:55,110 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,129 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 08:56:55,142 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,161 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 08:56:55,176 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,194 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 08:56:55,215 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,234 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 08:56:55,562 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,580 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 08:56:55,608 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:55,627 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 08:56:55,954 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 08:56:55,979 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 08:56:56,175 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 08:56:56,195 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 08:56:56,388 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:56,409 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 08:56:56,493 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:56,524 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 08:56:56,559 p=191553 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 08:56:56,744 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 08:56:56,781 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:56,820 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 08:56:57,654 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:57,674 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 08:56:57,694 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:57,713 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 08:56:57,734 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:57,754 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 08:56:57,770 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:57,789 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 08:56:57,808 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:57,828 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 08:56:57,875 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:57,938 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 08:56:58,125 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:58,146 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 08:56:58,170 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:58,190 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 08:56:58,214 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:58,233 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 08:56:58,444 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:58,469 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 08:56:58,493 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 08:56:58,513 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 08:56:58,555 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:58,596 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 08:56:58,616 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:56:58,635 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 08:56:58,998 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:59,018 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 08:56:59,057 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 08:56:59,092 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 08:56:59,135 p=191553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 08:56:59,322 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:59,358 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 08:56:59,523 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:59,541 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 08:56:59,900 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:56:59,920 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 08:57:00,099 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:00,119 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 08:57:00,284 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:00,303 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 08:57:00,339 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 08:57:00,373 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 08:57:00,711 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:57:00,732 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 08:57:00,911 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 08:57:00,931 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 08:57:01,127 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:01,147 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 08:57:01,165 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:01,184 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 08:57:01,468 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:01,506 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 08:57:02,095 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:02,113 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 08:57:02,278 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:02,297 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 08:57:02,311 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:02,330 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 08:57:02,496 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:02,515 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 08:57:02,680 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:02,699 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 08:57:02,861 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:02,880 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 08:57:03,051 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:03,071 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 08:57:03,343 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:03,380 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 08:57:03,412 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:03,431 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 08:57:03,467 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:03,486 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 08:57:03,499 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:03,519 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 08:57:03,552 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:03,571 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 08:57:03,652 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 08:57:03,708 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 08:57:03,761 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 08:57:03,794 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 08:57:04,554 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:04,573 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 08:57:05,125 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:05,145 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 08:57:05,159 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:05,180 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 08:57:05,475 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:05,494 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 08:57:05,508 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:05,528 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 08:57:06,242 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:06,262 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 08:57:06,294 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 08:57:06,331 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 08:57:06,532 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 08:57:06,553 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 08:57:06,883 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 08:57:06,905 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 08:57:07,159 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:07,179 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 08:57:07,453 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:07,472 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 08:57:07,488 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:07,508 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 08:57:07,841 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:07,861 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 08:57:08,204 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:08,223 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 08:57:08,389 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:08,408 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 08:57:08,421 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:08,440 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 08:57:08,768 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:08,788 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 08:57:08,821 p=191553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 08:57:08,854 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 08:57:08,866 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:08,885 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 08:57:08,908 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:08,927 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 08:57:08,950 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:08,974 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 08:57:09,158 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:09,177 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 08:57:09,201 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:09,220 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 08:57:09,394 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:09,413 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 08:57:09,436 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:09,456 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 08:57:09,470 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:09,490 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 08:57:09,506 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:09,530 p=191553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 08:57:09,543 p=191553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 08:57:09,611 p=191553 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 08:57:09,773 p=191553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 08:57:09,792 p=191553 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *****************************************************
2023-04-19 08:57:19,313 p=191553 u=ubuntu n=ansible | The following additional packages will be installed:
  libslurm37
The following NEW packages will be installed:
  libslurm37 slurm-drmaa1
0 upgraded, 2 newly installed, 0 to remove and 13 not upgraded.
2023-04-19 08:57:19,314 p=191553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 08:57:19,352 p=191553 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 08:57:19,352 p=191553 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=166  changed=1    unreachable=0    failed=0    skipped=108  rescued=0    ignored=0   
2023-04-19 09:00:01,205 p=196639 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 09:00:01,286 p=196639 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 09:00:01,303 p=196639 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 09:00:02,366 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:02,373 p=196639 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 09:00:03,416 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:03,432 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 09:00:03,461 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:03,471 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 09:00:03,498 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:03,505 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 09:00:03,540 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:03,547 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 09:00:03,573 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:03,580 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 09:00:04,562 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:04,569 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 09:00:04,890 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:04,898 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 09:00:04,955 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:04,962 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 09:00:05,756 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:05,763 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 09:00:05,790 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:05,797 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 09:00:05,831 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:05,837 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 09:00:05,867 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:05,873 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 09:00:05,900 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:05,906 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 09:00:05,921 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:05,928 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 09:00:06,230 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:06,237 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 09:00:06,548 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:06,555 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 09:00:06,577 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:06,585 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 09:00:06,767 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:06,774 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 09:00:07,241 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:07,248 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 09:00:07,633 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:07,640 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 09:00:07,675 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:07,690 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 09:00:07,889 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 09:00:08,040 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 09:00:08,049 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 09:00:08,222 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:08,228 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 09:00:08,625 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 09:00:08,634 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 09:00:08,975 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 09:00:08,985 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 09:00:09,369 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:09,377 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 09:00:09,763 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:09,770 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 09:00:09,953 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:09,961 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 09:00:10,555 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:10,569 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 09:00:10,606 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 09:00:10,608 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:10,616 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 09:00:10,631 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:10,639 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 09:00:10,678 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 09:00:10,681 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:10,689 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 09:00:11,089 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:00:11,098 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 09:00:11,115 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:11,122 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 09:00:11,152 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:11,158 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 09:00:11,174 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:11,180 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 09:00:11,580 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:00:11,593 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 09:00:11,609 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:11,679 p=196639 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 09:00:11,731 p=196639 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 09:00:12,629 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:12,648 p=196639 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 09:00:13,560 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:13,581 p=196639 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 09:00:13,596 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:13,615 p=196639 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 09:00:14,573 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:14,592 p=196639 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-19 09:00:15,368 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:15,422 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 09:00:16,066 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,087 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 09:00:16,110 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,130 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 09:00:16,366 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,386 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 09:00:16,601 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,621 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 09:00:16,675 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,695 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 09:00:16,714 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,739 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 09:00:16,758 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,779 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 09:00:16,797 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,818 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 09:00:16,837 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,862 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 09:00:16,881 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:16,901 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 09:00:16,939 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:16,973 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 09:00:16,989 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:17,007 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 09:00:17,041 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 09:00:17,056 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:17,093 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-19 09:00:17,553 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:17,572 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-19 09:00:17,592 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:17,612 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-19 09:00:17,633 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:17,653 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-19 09:00:17,673 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:17,709 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-19 09:00:17,729 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:17,752 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-19 09:00:17,824 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:17,863 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-19 09:00:18,794 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:18,814 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-19 09:00:18,834 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:18,852 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 09:00:18,924 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:18,944 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 09:00:18,962 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:18,982 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 09:00:19,017 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:19,049 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 09:00:19,075 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 09:00:19,078 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 09:00:19,080 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 09:00:19,082 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:19,101 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-19 09:00:19,165 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:19,202 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-19 09:00:20,141 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:20,171 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-19 09:00:20,191 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:20,215 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 09:00:20,339 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:20,358 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 09:00:20,377 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:20,397 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 09:00:20,431 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:20,466 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 09:00:20,496 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 09:00:20,498 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 09:00:20,500 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 09:00:20,503 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:20,523 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-19 09:00:20,543 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:20,564 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-19 09:00:21,450 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:21,470 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 09:00:21,489 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:21,510 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-19 09:00:21,528 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:21,550 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-19 09:00:22,011 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:22,031 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-19 09:00:22,072 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:22,103 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-19 09:00:22,283 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:22,304 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-19 09:00:22,333 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:22,352 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-19 09:00:22,670 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:22,690 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-19 09:00:22,708 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:22,728 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-19 09:00:23,053 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:23,074 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-19 09:00:23,383 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:23,420 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 09:00:23,736 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:23,757 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 09:00:24,615 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:24,654 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 09:00:24,677 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 09:00:24,697 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 09:00:24,750 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:24,769 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 09:00:24,808 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:24,827 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 09:00:24,867 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 09:00:24,879 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 09:00:24,885 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 09:00:24,889 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 09:00:24,894 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 09:00:24,897 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 09:00:24,909 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 09:00:24,920 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 09:00:24,924 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 09:00:24,945 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 09:00:25,009 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 09:00:25,040 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 09:00:25,071 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 09:00:25,098 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 09:00:25,100 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:25,120 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 09:00:25,200 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 09:00:25,239 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 09:00:25,274 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 09:00:25,296 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 09:00:25,355 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:25,392 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 09:00:25,505 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:25,524 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 09:00:26,119 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:26,139 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 09:00:26,246 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:26,267 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 09:00:26,621 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:00:26,789 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 09:00:26,811 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 09:00:27,014 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:00:27,171 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 09:00:27,193 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 09:00:27,276 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:27,295 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 09:00:27,316 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:27,335 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 09:00:27,375 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:27,412 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 09:00:27,779 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:27,800 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 09:00:28,162 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 09:00:28,476 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 09:00:28,799 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 09:00:29,115 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 09:00:29,138 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 09:00:29,486 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 09:00:29,806 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 09:00:30,132 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 09:00:30,481 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 09:00:30,816 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 09:00:31,118 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 09:00:31,428 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 09:00:31,747 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 09:00:32,066 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 09:00:32,393 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-19 09:00:32,416 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 09:00:32,485 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:32,524 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 09:00:33,872 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:33,893 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 09:00:34,021 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:34,041 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 09:00:35,928 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:35,949 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 09:00:37,861 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:37,882 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 09:00:37,999 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:38,018 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 09:00:38,033 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:38,052 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 09:00:38,067 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:38,087 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 09:00:38,145 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:38,191 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 09:00:38,322 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:38,358 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 09:00:38,816 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:38,835 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 09:00:39,050 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:39,069 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 09:00:39,579 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 09:00:39,600 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 09:00:40,118 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 09:00:40,141 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 09:00:40,683 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 09:00:41,161 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 09:00:41,182 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 09:00:41,214 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,234 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 09:00:41,336 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,355 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 09:00:41,457 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,475 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 09:00:41,574 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,594 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 09:00:41,609 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,632 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 09:00:41,648 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,667 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 09:00:41,684 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,705 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 09:00:41,721 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,739 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 09:00:41,841 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,860 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 09:00:41,963 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:41,982 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 09:00:42,089 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:42,108 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 09:00:43,078 p=196639 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-196639wcpa2mxv/tmpct6q9g4_/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -56,7 +56,7 @@[0m
[0;36m[0m     integrated_tool_panel_config: /srv/galaxy/var/config/integrated_tool_panel.xml
     job_config:
         execution:
[0;31m-            default: singularity[0m
[0;31m[0m[0;32m+            default: slurm[0m
[0;32m[0m             environments:
                 local_env:
                     runner: local_runner
[0;36m@@ -71,6 +71,16 @@[0m
[0;36m[0m                         value: /tmp
                     runner: local_runner
                     singularity_enabled: true
[0;32m+                slurm:[0m
[0;32m[0m[0;32m+                    env:[0m
[0;32m[0m[0;32m+                    -   name: LC_ALL[0m
[0;32m[0m[0;32m+                        value: C[0m
[0;32m[0m[0;32m+                    -   name: SINGULARITY_CACHEDIR[0m
[0;32m[0m[0;32m+                        value: /tmp/singularity[0m
[0;32m[0m[0;32m+                    -   name: SINGULARITY_TMPDIR[0m
[0;32m[0m[0;32m+                        value: /tmp[0m
[0;32m[0m[0;32m+                    runner: slurm[0m
[0;32m[0m[0;32m+                    singularity_enabled: true[0m
[0;32m[0m         handling:
             assign:
             - db-skip-locked
[0;36m@@ -78,6 +88,9 @@[0m
[0;36m[0m             local_runner:
                 load: galaxy.jobs.runners.local:LocalJobRunner
                 workers: 4
[0;32m+            slurm:[0m
[0;32m[0m[0;32m+                drmaa_library_path: /usr/lib/slurm-drmaa/lib/libdrmaa.so.1[0m
[0;32m[0m[0;32m+                load: galaxy.jobs.runners.slurm:SlurmJobRunner[0m
[0;32m[0m         tools:
         -   class: local
             environment: local_env


2023-04-19 09:00:43,078 p=196639 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 09:00:43,098 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 09:00:43,153 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:43,203 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 09:00:44,805 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:44,827 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 09:00:46,565 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:46,584 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 09:00:51,843 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:51,870 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 09:00:52,496 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:00:52,515 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 09:00:58,088 p=196639 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 09:00:58,110 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 09:00:58,224 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:58,243 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 09:00:58,294 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 09:00:58,360 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 09:00:58,465 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:00:58,485 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 09:00:59,054 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 09:00:59,076 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 09:00:59,534 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 09:00:59,853 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 09:00:59,874 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 09:01:00,289 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 09:01:00,610 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 09:01:00,631 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 09:01:00,668 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:00,722 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 09:01:02,134 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:02,153 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 09:01:03,541 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:03,561 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 09:01:03,663 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:03,683 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 09:01:03,805 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:03,824 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 09:01:03,894 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:03,950 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 09:01:04,278 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:04,297 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 09:01:04,615 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:04,634 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 09:01:04,958 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:04,977 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 09:01:05,318 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:05,337 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 09:01:05,517 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:05,535 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 09:01:05,710 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:05,729 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 09:01:05,833 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:05,852 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 09:01:05,953 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:05,971 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 09:01:06,069 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:06,088 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 09:01:06,185 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:06,204 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 09:01:06,309 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:06,328 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 09:01:06,428 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:06,448 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 09:01:06,545 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:06,564 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 09:01:06,661 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:06,679 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 09:01:06,691 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:06,710 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 09:01:06,748 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:06,824 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 09:01:06,925 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:06,944 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 09:01:07,558 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:07,577 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 09:01:07,595 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:07,614 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 09:01:07,626 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:07,645 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 09:01:07,678 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:07,739 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 09:01:08,131 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:08,149 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 09:01:08,247 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:08,281 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 09:01:08,451 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:08,470 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 09:01:08,484 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:08,502 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 09:01:08,894 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:08,913 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 09:01:08,947 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:08,965 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 09:01:08,979 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:08,997 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 09:01:09,011 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:09,030 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 09:01:09,053 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:09,071 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 09:01:09,094 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:09,112 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 09:01:09,127 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:09,162 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 09:01:09,197 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:09,227 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 09:01:09,972 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:09,991 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 09:01:10,155 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,177 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 09:01:10,193 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,213 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 09:01:10,229 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,250 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 09:01:10,421 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,441 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 09:01:10,469 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,488 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 09:01:10,516 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,534 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 09:01:10,547 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,565 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 09:01:10,578 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,596 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 09:01:10,609 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,627 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 09:01:10,648 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:10,666 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 09:01:10,994 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:11,012 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 09:01:11,042 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:11,061 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 09:01:11,446 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 09:01:11,466 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 09:01:11,648 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 09:01:11,669 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 09:01:11,857 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:11,876 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 09:01:11,961 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:11,992 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 09:01:12,025 p=196639 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *******************
2023-04-19 09:01:12,040 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:12,059 p=196639 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 09:01:12,076 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:12,095 p=196639 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 09:01:12,111 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:12,129 p=196639 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 09:01:12,737 p=196639 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 09:01:12,756 p=196639 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 09:01:25,627 p=196639 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 09:01:25,648 p=196639 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 09:01:25,882 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 09:01:25,933 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:25,971 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 09:01:26,812 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:26,834 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 09:01:26,861 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:26,880 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 09:01:26,903 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:26,927 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 09:01:26,949 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:26,972 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 09:01:26,994 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:27,017 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 09:01:27,069 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:27,132 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 09:01:27,340 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:27,362 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 09:01:27,390 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:27,409 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 09:01:27,437 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:27,457 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 09:01:27,735 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:27,756 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 09:01:27,786 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 09:01:27,806 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 09:01:27,854 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:27,898 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 09:01:27,920 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:27,943 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 09:01:28,379 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:28,401 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 09:01:28,440 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 09:01:28,485 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:28,534 p=196639 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 09:01:28,759 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:28,797 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 09:01:28,992 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:29,012 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 09:01:29,425 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:29,446 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 09:01:29,623 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:29,643 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 09:01:29,843 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:29,862 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 09:01:29,915 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:29,949 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 09:01:30,330 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:01:30,352 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 09:01:30,581 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:01:30,604 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 09:01:30,819 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:30,838 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 09:01:30,857 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:30,876 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 09:01:31,243 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:31,281 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 09:01:31,900 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:31,920 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 09:01:32,088 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:32,108 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 09:01:32,123 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:32,144 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 09:01:32,321 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:32,341 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 09:01:32,524 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:32,544 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 09:01:32,726 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:32,748 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 09:01:32,936 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:32,957 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 09:01:33,266 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:33,307 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 09:01:33,341 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:33,363 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 09:01:33,398 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:33,417 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 09:01:33,432 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:33,452 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 09:01:33,530 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:33,548 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 09:01:33,636 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:33,693 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 09:01:33,748 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:33,781 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 09:01:34,537 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:34,558 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 09:01:35,151 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:35,170 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 09:01:35,186 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:35,206 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 09:01:35,521 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:35,540 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 09:01:35,558 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:35,578 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 09:01:36,402 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:36,422 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 09:01:36,456 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:36,491 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 09:01:36,699 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 09:01:36,722 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 09:01:37,064 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 09:01:37,085 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 09:01:37,329 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:37,349 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 09:01:37,627 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:37,646 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 09:01:37,660 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:37,679 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 09:01:38,016 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:38,035 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 09:01:38,373 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:38,392 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 09:01:38,580 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:38,600 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 09:01:38,614 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:38,633 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 09:01:38,977 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:38,997 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 09:01:39,031 p=196639 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 09:01:39,064 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 09:01:39,077 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,097 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 09:01:39,123 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,143 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 09:01:39,170 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,191 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 09:01:39,368 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,388 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 09:01:39,414 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,434 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 09:01:39,616 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,637 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 09:01:39,669 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,688 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 09:01:39,703 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,722 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 09:01:39,736 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,758 p=196639 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 09:01:39,774 p=196639 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:01:39,844 p=196639 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 09:01:40,014 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:40,033 p=196639 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *****************************************************
2023-04-19 09:01:40,812 p=196639 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:01:40,849 p=196639 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 09:01:40,849 p=196639 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=168  changed=4    unreachable=0    failed=0    skipped=111  rescued=0    ignored=0   
2023-04-19 09:21:28,307 p=202402 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 09:21:28,385 p=202402 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 09:21:28,400 p=202402 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 09:21:29,373 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:29,379 p=202402 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 09:21:30,290 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:30,307 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 09:21:30,331 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:30,340 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 09:21:30,362 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:30,368 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 09:21:30,389 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:30,396 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 09:21:30,417 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:30,424 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 09:21:31,170 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:31,177 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 09:21:31,457 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:31,463 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 09:21:31,502 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:31,508 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 09:21:32,258 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,264 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 09:21:32,287 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,294 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 09:21:32,325 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,330 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 09:21:32,353 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,359 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 09:21:32,381 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,388 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 09:21:32,400 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,406 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 09:21:32,667 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,673 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 09:21:32,949 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,955 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 09:21:32,970 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:32,976 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 09:21:33,140 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:33,147 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 09:21:33,598 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:33,604 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 09:21:33,967 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:33,973 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 09:21:34,004 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:34,016 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 09:21:34,219 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 09:21:34,383 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 09:21:34,391 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 09:21:34,561 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:34,568 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 09:21:34,914 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 09:21:34,922 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 09:21:35,265 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 09:21:35,273 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 09:21:35,592 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:35,599 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 09:21:35,912 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:35,918 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 09:21:36,071 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:36,077 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 09:21:36,570 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:36,582 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 09:21:36,603 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 09:21:36,605 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:36,612 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 09:21:36,622 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:36,628 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 09:21:36,659 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 09:21:36,661 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:36,667 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 09:21:37,033 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:21:37,041 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 09:21:37,052 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:37,058 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 09:21:37,078 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:37,085 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 09:21:37,095 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:37,101 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 09:21:37,459 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:21:37,467 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 09:21:37,477 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:37,544 p=202402 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 09:21:37,593 p=202402 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 09:21:38,351 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:38,371 p=202402 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 09:21:39,098 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:39,116 p=202402 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 09:21:39,129 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:39,147 p=202402 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 09:21:39,881 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:39,900 p=202402 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-19 09:21:40,567 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:40,623 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 09:21:41,175 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,195 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 09:21:41,215 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,233 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 09:21:41,458 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,476 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 09:21:41,650 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,668 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 09:21:41,718 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,737 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 09:21:41,752 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,771 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 09:21:41,785 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,805 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 09:21:41,819 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,837 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 09:21:41,854 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,873 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 09:21:41,887 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:41,906 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 09:21:41,940 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:41,973 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 09:21:41,984 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:42,002 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 09:21:42,036 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 09:21:42,046 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:42,081 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-19 09:21:42,493 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:42,511 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-19 09:21:42,524 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:42,543 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-19 09:21:42,561 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:42,580 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-19 09:21:42,598 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:42,633 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-19 09:21:42,648 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:42,666 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-19 09:21:42,725 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:42,758 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-19 09:21:43,493 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:43,511 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-19 09:21:43,525 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:43,544 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 09:21:43,619 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:43,637 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 09:21:43,653 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:43,673 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 09:21:43,704 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:43,735 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 09:21:43,756 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 09:21:43,759 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 09:21:43,761 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 09:21:43,763 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:43,788 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-19 09:21:43,848 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:43,883 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-19 09:21:44,627 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:44,646 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-19 09:21:44,661 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:44,680 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 09:21:44,751 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:44,769 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 09:21:44,788 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:44,807 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 09:21:44,837 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:44,869 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 09:21:44,891 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 09:21:44,895 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 09:21:44,897 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 09:21:44,899 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:44,918 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-19 09:21:44,930 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:44,949 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-19 09:21:45,687 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:45,705 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 09:21:45,720 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:45,739 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-19 09:21:45,754 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:45,772 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-19 09:21:46,216 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:46,240 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-19 09:21:46,279 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:46,311 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-19 09:21:46,485 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:46,504 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-19 09:21:46,525 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:46,544 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-19 09:21:46,827 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:46,845 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-19 09:21:46,858 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:46,877 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-19 09:21:47,160 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:47,178 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-19 09:21:47,466 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:47,503 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 09:21:47,807 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:47,827 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 09:21:48,576 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:48,612 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 09:21:48,631 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 09:21:48,652 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 09:21:48,695 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:48,714 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 09:21:48,746 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:48,764 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 09:21:48,798 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 09:21:48,802 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 09:21:48,813 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 09:21:48,824 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 09:21:48,831 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 09:21:48,839 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 09:21:48,847 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 09:21:48,850 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 09:21:48,854 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 09:21:48,875 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 09:21:48,939 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 09:21:48,973 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 09:21:49,006 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 09:21:49,038 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 09:21:49,040 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:49,058 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 09:21:49,132 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 09:21:49,174 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 09:21:49,210 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 09:21:49,230 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 09:21:49,286 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:49,322 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 09:21:49,423 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:49,441 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 09:21:49,994 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:50,012 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 09:21:50,128 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:50,146 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 09:21:50,452 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:21:50,617 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 09:21:50,638 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 09:21:50,874 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:21:51,031 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 09:21:51,055 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 09:21:51,135 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:51,153 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 09:21:51,170 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:51,188 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 09:21:51,221 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:51,258 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 09:21:51,599 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:51,618 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 09:21:51,968 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 09:21:52,285 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 09:21:52,604 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 09:21:52,921 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 09:21:52,943 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 09:21:53,296 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 09:21:53,604 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 09:21:53,918 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 09:21:54,217 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 09:21:54,523 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 09:21:54,834 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 09:21:55,141 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 09:21:55,456 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 09:21:55,772 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 09:21:56,087 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-19 09:21:56,109 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 09:21:56,175 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 09:21:56,214 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 09:21:57,538 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:57,557 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 09:21:57,661 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:21:57,680 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 09:21:59,453 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:21:59,472 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 09:22:01,250 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:01,270 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 09:22:01,387 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:01,415 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 09:22:01,432 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:01,453 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 09:22:01,467 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:01,487 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 09:22:01,549 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:01,595 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 09:22:01,718 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:01,781 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 09:22:02,203 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:02,222 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 09:22:02,437 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:02,457 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 09:22:02,955 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 09:22:02,976 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 09:22:03,469 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 09:22:03,490 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 09:22:04,001 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 09:22:04,461 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 09:22:04,481 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 09:22:04,509 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:04,528 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 09:22:04,633 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:04,652 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 09:22:04,768 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:04,787 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 09:22:04,892 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:04,913 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 09:22:04,928 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:04,946 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 09:22:04,961 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:04,980 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 09:22:04,994 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:05,012 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 09:22:05,026 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:05,046 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 09:22:05,828 p=202402 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-202402qznqp6m7/tmpeir_rqq1[0m
[0;32m[0m[0;36m@@ -0,0 +1,9 @@[0m
[0;36m[0m[0;32m+---[0m
[0;32m[0m[0;32m+## This file is managed by Ansible.  ALL CHANGES WILL BE OVERWRITTEN.[0m
[0;32m[0m[0;32m+-   type: core[0m
[0;32m[0m[0;32m+-   type: cpuinfo[0m
[0;32m[0m[0;32m+-   type: meminfo[0m
[0;32m[0m[0;32m+-   type: uname[0m
[0;32m[0m[0;32m+-   type: env[0m
[0;32m[0m[0;32m+-   type: cgroup[0m
[0;32m[0m[0;32m+-   type: hostname[0m
[0;32m[0m

2023-04-19 09:22:05,828 p=202402 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 09:22:05,848 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 09:22:05,957 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:05,977 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 09:22:06,078 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:06,097 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 09:22:06,982 p=202402 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-202402qznqp6m7/tmpruk2v73b/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -94,7 +94,7 @@[0m
[0;36m[0m         tools:
         -   class: local
             environment: local_env
[0;31m-    job_metrics_config_file: /srv/galaxy/config/job_metrics_conf.xml[0m
[0;31m[0m[0;32m+    job_metrics_config_file: /srv/galaxy/config/job_metrics_conf.yml[0m
[0;32m[0m     job_working_directory: /data/jobs
     library_import_dir: /libraries/admin
     logo_src: https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png


2023-04-19 09:22:06,983 p=202402 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 09:22:07,002 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 09:22:07,056 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:07,105 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 09:22:08,734 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:08,757 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 09:22:10,588 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:10,609 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 09:22:15,591 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:15,610 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 09:22:16,185 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:16,204 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 09:22:17,802 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:17,821 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 09:22:17,922 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:17,940 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 09:22:17,987 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:18,036 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 09:22:18,136 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:18,155 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 09:22:18,633 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 09:22:18,653 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 09:22:19,084 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 09:22:19,380 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 09:22:19,400 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 09:22:19,783 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 09:22:20,111 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 09:22:20,132 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 09:22:20,166 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:20,218 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 09:22:21,607 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:21,626 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 09:22:22,956 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:22,975 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 09:22:23,074 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:23,093 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 09:22:23,192 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:23,210 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 09:22:23,276 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:23,331 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 09:22:23,684 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:23,702 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 09:22:24,018 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:24,036 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 09:22:24,364 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:24,383 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 09:22:24,734 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:24,754 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 09:22:24,943 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:24,964 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 09:22:25,148 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:25,167 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 09:22:25,267 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:25,286 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 09:22:25,394 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:25,413 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 09:22:25,516 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:25,534 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 09:22:25,637 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:25,656 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 09:22:25,757 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:25,778 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 09:22:25,882 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:25,901 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 09:22:26,014 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:26,034 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 09:22:26,134 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:26,153 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 09:22:26,168 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:26,187 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 09:22:26,227 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:26,301 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 09:22:26,407 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:26,427 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 09:22:27,016 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:27,035 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 09:22:27,055 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:27,073 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 09:22:27,088 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:27,107 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 09:22:27,145 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:27,207 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 09:22:27,623 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:27,642 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 09:22:27,741 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:27,776 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 09:22:27,961 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:27,980 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 09:22:27,996 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:28,016 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 09:22:28,418 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:28,436 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 09:22:28,471 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:28,488 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 09:22:28,503 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:28,523 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 09:22:28,538 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:28,558 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 09:22:28,583 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:28,602 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 09:22:28,626 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:28,645 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 09:22:28,660 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:28,699 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 09:22:28,734 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:28,768 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 09:22:29,558 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:29,577 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 09:22:29,754 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:29,776 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 09:22:29,790 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:29,810 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 09:22:29,824 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:29,843 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 09:22:30,026 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,045 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 09:22:30,077 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,095 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 09:22:30,128 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,146 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 09:22:30,167 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,186 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 09:22:30,202 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,221 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 09:22:30,235 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,253 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 09:22:30,273 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,292 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 09:22:30,640 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,659 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 09:22:30,688 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:30,707 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 09:22:31,023 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 09:22:31,046 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 09:22:31,235 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 09:22:31,255 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 09:22:31,436 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:31,458 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 09:22:31,539 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:31,570 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 09:22:31,604 p=202402 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *******************
2023-04-19 09:22:31,620 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:31,638 p=202402 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 09:22:31,655 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:31,673 p=202402 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 09:22:31,691 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:31,709 p=202402 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 09:22:32,315 p=202402 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 09:22:32,333 p=202402 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 09:22:44,674 p=202402 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 09:22:44,698 p=202402 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 09:22:44,932 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 09:22:44,978 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:45,012 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 09:22:45,907 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:45,929 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 09:22:45,953 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:45,976 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 09:22:46,000 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:46,020 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 09:22:46,038 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:46,060 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 09:22:46,093 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:46,113 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 09:22:46,164 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:46,226 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 09:22:46,461 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:46,480 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 09:22:46,509 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:46,537 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 09:22:46,571 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:46,593 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 09:22:46,831 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:46,855 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 09:22:46,882 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 09:22:46,905 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 09:22:46,952 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:46,995 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 09:22:47,022 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:47,044 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 09:22:47,463 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:47,485 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 09:22:47,521 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 09:22:47,568 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:47,611 p=202402 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 09:22:47,837 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:47,874 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 09:22:48,062 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:48,082 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 09:22:48,469 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:48,491 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 09:22:48,696 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:48,716 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 09:22:48,903 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:48,922 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 09:22:48,962 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:48,995 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 09:22:49,355 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:22:49,376 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 09:22:49,595 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 09:22:49,621 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 09:22:49,817 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:49,836 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 09:22:49,860 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:49,883 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 09:22:50,227 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:50,263 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 09:22:50,952 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:50,970 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 09:22:51,158 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:51,178 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 09:22:51,194 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:51,215 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 09:22:51,388 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:51,407 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 09:22:51,579 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:51,603 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 09:22:51,770 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:51,791 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 09:22:51,956 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:51,978 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 09:22:52,272 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:52,310 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 09:22:52,343 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:52,363 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 09:22:52,396 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:52,416 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 09:22:52,431 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:52,450 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 09:22:52,485 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:52,505 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 09:22:52,588 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:52,648 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 09:22:52,701 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:52,733 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 09:22:53,531 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:53,550 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 09:22:54,161 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:54,189 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 09:22:54,205 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:54,225 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 09:22:54,537 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:54,556 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 09:22:54,572 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:54,592 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 09:22:55,392 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:55,411 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 09:22:55,446 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:55,482 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 09:22:55,699 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 09:22:55,721 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 09:22:56,068 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 09:22:56,092 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 09:22:56,348 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:56,367 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 09:22:56,667 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:56,686 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 09:22:56,704 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:56,724 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 09:22:57,097 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:57,121 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 09:22:57,471 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:57,490 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 09:22:57,662 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:57,682 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 09:22:57,696 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:57,722 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 09:22:58,062 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,081 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 09:22:58,120 p=202402 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 09:22:58,155 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 09:22:58,167 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,187 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 09:22:58,211 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,231 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 09:22:58,257 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,276 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 09:22:58,455 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,476 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 09:22:58,503 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,523 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 09:22:58,699 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,719 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 09:22:58,744 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,763 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 09:22:58,777 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,796 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 09:22:58,810 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,829 p=202402 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 09:22:58,844 p=202402 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 09:22:58,915 p=202402 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 09:22:59,097 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:22:59,127 p=202402 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *****************************************************
2023-04-19 09:22:59,968 p=202402 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 09:23:00,009 p=202402 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 09:23:00,010 p=202402 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=169  changed=4    unreachable=0    failed=0    skipped=110  rescued=0    ignored=0   
2023-04-19 10:03:39,579 p=208390 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 10:03:39,659 p=208390 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 10:03:39,675 p=208390 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:03:40,821 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:40,828 p=208390 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:03:41,965 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:41,985 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:03:42,013 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:03:42,024 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 10:03:42,048 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:42,054 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 10:03:42,078 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:42,085 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 10:03:42,109 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:42,116 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 10:03:43,008 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:43,016 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 10:03:43,308 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:43,317 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:03:43,368 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:43,375 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 10:03:44,212 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:44,220 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:03:44,247 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:44,253 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 10:03:44,288 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:44,294 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 10:03:44,323 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:44,330 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 10:03:44,359 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:44,366 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:03:44,382 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:44,389 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 10:03:44,681 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:44,688 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 10:03:44,971 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:44,977 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 10:03:44,998 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:45,005 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 10:03:45,190 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:45,197 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 10:03:45,695 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:45,703 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 10:03:46,073 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:46,080 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:03:46,115 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 10:03:46,126 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 10:03:46,329 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 10:03:46,476 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 10:03:46,486 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 10:03:46,685 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:46,692 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 10:03:47,029 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 10:03:47,037 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 10:03:47,382 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 10:03:47,390 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 10:03:47,727 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:47,735 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 10:03:48,057 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:48,064 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 10:03:48,226 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:48,233 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 10:03:48,729 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:48,744 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 10:03:48,771 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 10:03:48,773 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:48,780 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 10:03:48,794 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:48,802 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 10:03:48,837 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 10:03:48,840 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:48,847 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 10:03:49,224 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:03:49,232 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 10:03:49,247 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:49,254 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 10:03:49,278 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:49,285 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 10:03:49,302 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:49,309 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 10:03:49,685 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:03:49,693 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 10:03:49,704 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:49,780 p=208390 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 10:03:49,833 p=208390 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:03:50,686 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:50,704 p=208390 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:03:51,631 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:51,649 p=208390 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 10:03:51,662 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:51,680 p=208390 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 10:03:52,413 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:52,434 p=208390 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 10:03:54,134 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:54,188 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 10:03:54,641 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:54,661 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 10:03:54,685 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:54,705 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 10:03:54,956 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:54,977 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 10:03:55,177 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,196 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 10:03:55,253 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,272 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 10:03:55,291 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,312 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 10:03:55,331 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,351 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 10:03:55,371 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,391 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 10:03:55,413 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,433 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 10:03:55,453 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,471 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 10:03:55,507 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 10:03:55,542 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 10:03:55,555 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,573 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 10:03:55,606 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 10:03:55,619 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:55,655 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 10:03:56,100 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:56,122 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 10:03:56,140 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:56,161 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 10:03:56,183 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:56,204 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 10:03:56,225 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:56,264 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 10:03:56,284 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:56,305 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 10:03:56,375 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 10:03:56,407 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 10:03:57,283 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:57,301 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 10:03:57,326 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:57,345 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:03:57,423 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:57,452 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:03:57,469 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:57,490 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:03:57,523 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:03:57,556 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:03:57,581 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:03:57,584 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:03:57,586 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:03:57,588 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:57,609 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 10:03:57,675 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 10:03:57,710 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 10:03:58,560 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:58,582 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 10:03:58,599 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:58,618 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:03:58,691 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:58,710 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:03:58,726 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:58,749 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:03:58,783 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:03:58,819 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:03:58,846 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:03:58,850 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:03:58,852 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:03:58,854 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:58,874 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 10:03:58,894 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:58,915 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 10:03:59,740 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:03:59,760 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:03:59,779 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:59,798 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 10:03:59,815 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:03:59,835 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 10:04:00,317 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:00,338 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 10:04:00,378 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:00,414 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 10:04:00,609 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:00,630 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 10:04:00,652 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:00,673 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 10:04:00,991 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:01,010 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 10:04:01,024 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:01,043 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 10:04:01,333 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:01,352 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 10:04:01,647 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:01,682 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 10:04:02,019 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:02,037 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 10:04:02,752 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:02,788 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 10:04:02,807 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 10:04:02,827 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 10:04:02,880 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:02,901 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 10:04:02,939 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:02,958 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 10:04:02,998 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 10:04:03,001 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 10:04:03,009 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 10:04:03,016 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 10:04:03,027 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 10:04:03,038 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 10:04:03,041 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 10:04:03,045 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 10:04:03,048 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 10:04:03,071 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 10:04:03,137 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 10:04:03,168 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 10:04:03,200 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 10:04:03,227 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 10:04:03,229 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:03,250 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 10:04:03,334 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 10:04:03,376 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 10:04:03,414 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 10:04:03,435 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 10:04:03,496 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:03,533 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 10:04:03,638 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:03,657 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 10:04:04,241 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:04,260 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 10:04:04,368 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:04,386 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 10:04:04,716 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:04:04,891 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:04:04,916 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 10:04:05,145 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:04:05,326 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:04:05,349 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 10:04:05,435 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:05,455 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 10:04:05,480 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:05,500 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 10:04:05,541 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:05,578 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 10:04:05,934 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:05,953 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 10:04:06,331 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 10:04:06,691 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 10:04:07,023 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 10:04:07,360 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 10:04:07,382 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 10:04:07,742 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 10:04:08,085 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:04:08,419 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 10:04:08,752 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 10:04:09,096 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 10:04:09,433 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 10:04:09,760 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 10:04:10,101 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 10:04:10,433 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 10:04:10,778 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-19 10:04:10,801 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 10:04:10,875 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:10,920 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 10:04:12,360 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:12,381 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 10:04:12,485 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:12,505 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:04:14,472 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:14,495 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:04:16,240 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:16,260 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 10:04:16,371 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:16,392 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 10:04:16,406 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:16,425 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 10:04:16,439 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:16,459 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 10:04:16,514 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:16,559 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:04:16,680 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:16,717 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 10:04:17,123 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:17,142 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 10:04:17,349 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:17,368 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 10:04:17,867 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 10:04:17,888 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 10:04:18,355 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 10:04:18,375 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 10:04:18,899 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 10:04:19,372 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 10:04:19,395 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 10:04:20,155 p=208390 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/tools/testing.xml[0m
[0;32m[0m[0;36m@@ -0,0 +1,11 @@[0m
[0;36m[0m[0;32m+<tool id="testing" name="Testing Tool">[0m
[0;32m[0m[0;32m+	<command>[0m
[0;32m[0m[0;32m+        	<![CDATA[echo "Running with '\${GALAXY_SLOTS:-1}' threads" > "$output1"]]>[0m
[0;32m[0m[0;32m+	</command>[0m
[0;32m[0m[0;32m+	<inputs>[0m
[0;32m[0m[0;32m+	        <param name="input1" type="data" format="txt" label="Input Dataset"/>[0m
[0;32m[0m[0;32m+	</inputs>[0m
[0;32m[0m[0;32m+	<outputs>[0m
[0;32m[0m[0;32m+	        <data name="output1" format="txt" />[0m
[0;32m[0m[0;32m+	</outputs>[0m
[0;32m[0m[0;32m+</tool>[0m
[0;32m[0m

2023-04-19 10:04:20,157 p=208390 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 10:04:20,177 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 10:04:20,817 p=208390 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-2083909hhq7i7h/tmpmqq0pp_9/local_tool_conf.xml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,4 @@[0m
[0;36m[0m[0;32m+<?xml version='1.0' encoding='utf-8'?>[0m
[0;32m[0m[0;32m+<toolbox monitor="true" tool_path="/srv/galaxy/local_tools">[0m
[0;32m[0m[0;32m+    <tool file="testing.xml" />[0m
[0;32m[0m[0;32m+</toolbox>[0m
[0;32m[0m

2023-04-19 10:04:20,817 p=208390 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:04:20,836 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 10:04:21,014 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:21,033 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 10:04:21,132 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:21,151 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 10:04:21,164 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:21,182 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 10:04:21,195 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:21,214 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 10:04:21,228 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:21,246 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 10:04:21,259 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:21,280 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 10:04:21,806 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:21,825 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 10:04:21,925 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:21,944 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 10:04:22,045 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:22,065 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 10:04:22,921 p=208390 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-2083909hhq7i7h/tmplkzyped6/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -111,7 +111,7 @@[0m
[0;36m[0m     show_welcome_with_login: true
     slow_query_log_threshold: 5
     themes_config_file: /srv/galaxy/config/themes.yml
[0;31m-    tool_config_file: /srv/galaxy/server/config/tool_conf.xml.sample[0m
[0;31m[0m[0;32m+    tool_config_file: /srv/galaxy/server/config/tool_conf.xml.sample,/srv/galaxy/config/local_tool_conf.xml[0m
[0;32m[0m     tool_data_path: /srv/galaxy/var/tool_data
     tool_data_table_config_path: /cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml
     tool_dependency_dir: /srv/galaxy/var/dependencies


2023-04-19 10:04:22,921 p=208390 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:04:22,945 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 10:04:22,995 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:23,046 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:04:24,635 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:24,654 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:04:26,429 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:26,449 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 10:04:31,409 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:31,430 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 10:04:32,013 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:32,032 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 10:04:33,628 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:33,647 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 10:04:33,746 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:33,765 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 10:04:33,813 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:33,875 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:04:33,978 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:33,997 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 10:04:34,481 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:04:34,501 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 10:04:34,935 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 10:04:35,229 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 10:04:35,249 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 10:04:35,633 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 10:04:35,944 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 10:04:35,964 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 10:04:35,999 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:36,052 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 10:04:37,415 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:37,434 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 10:04:38,764 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:38,784 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 10:04:38,886 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:38,905 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 10:04:39,002 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:39,021 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 10:04:39,088 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:39,144 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 10:04:39,473 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:39,491 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 10:04:39,819 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:39,838 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 10:04:40,165 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:40,184 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 10:04:40,547 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:40,565 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:04:40,747 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:40,766 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:04:40,945 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:40,980 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 10:04:41,086 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:41,105 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 10:04:41,211 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:41,231 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 10:04:41,332 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:41,352 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 10:04:41,462 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:41,483 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 10:04:41,589 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:41,608 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 10:04:41,706 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:41,725 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 10:04:41,827 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:41,846 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 10:04:41,949 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:41,968 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 10:04:41,981 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:42,000 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 10:04:42,039 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:42,112 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 10:04:42,216 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:42,235 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 10:04:42,839 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:42,857 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 10:04:42,877 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:42,895 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 10:04:42,909 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:42,928 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 10:04:42,961 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:43,025 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 10:04:43,450 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:43,471 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 10:04:43,590 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:43,626 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-19 10:04:43,794 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:43,813 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-19 10:04:43,828 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:43,846 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-19 10:04:44,228 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:44,247 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-19 10:04:44,281 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:44,300 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-19 10:04:44,314 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:44,332 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-19 10:04:44,346 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:44,365 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-19 10:04:44,388 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:44,407 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-19 10:04:44,431 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:44,450 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-19 10:04:44,466 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:44,503 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:04:44,537 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:44,568 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-19 10:04:45,319 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,338 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-19 10:04:45,509 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,529 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:04:45,543 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,563 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:04:45,577 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,597 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-19 10:04:45,757 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,776 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-19 10:04:45,804 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,823 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-19 10:04:45,850 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,868 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-19 10:04:45,881 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,901 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-19 10:04:45,914 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,933 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:04:45,946 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:45,972 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-19 10:04:45,993 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:46,011 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-19 10:04:46,356 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:46,375 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-19 10:04:46,403 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:46,422 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-19 10:04:46,755 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 10:04:46,777 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-19 10:04:46,967 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 10:04:46,987 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-19 10:04:47,176 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:04:47,195 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-19 10:04:47,274 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 10:04:47,305 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-19 10:04:47,338 p=208390 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-19 10:04:47,353 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:47,372 p=208390 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 10:04:47,389 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:47,408 p=208390 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-19 10:04:47,424 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:04:47,443 p=208390 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-19 10:04:48,066 p=208390 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:04:48,085 p=208390 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 10:05:02,312 p=208390 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:05:02,332 p=208390 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-19 10:05:02,527 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-19 10:05:02,573 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:02,608 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-19 10:05:03,535 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:03,564 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-19 10:05:03,605 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:03,631 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-19 10:05:03,665 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:03,686 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-19 10:05:03,715 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:03,741 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-19 10:05:03,771 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:03,792 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-19 10:05:03,845 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:03,916 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-19 10:05:04,139 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:04,163 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-19 10:05:04,190 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:04,213 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-19 10:05:04,241 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:04,264 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-19 10:05:04,514 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:04,539 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-19 10:05:04,565 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 10:05:04,587 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-19 10:05:04,636 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:04,678 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-19 10:05:04,709 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:04,732 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-19 10:05:05,164 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:05,185 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-19 10:05:05,219 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-19 10:05:05,260 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:05,305 p=208390 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-19 10:05:05,557 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:05,594 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-19 10:05:05,810 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:05,830 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-19 10:05:06,220 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:06,241 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-19 10:05:06,476 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:06,501 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-19 10:05:06,711 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:06,732 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-19 10:05:06,783 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:06,822 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-19 10:05:07,253 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:05:07,275 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-19 10:05:07,501 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:05:07,526 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-19 10:05:07,758 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:07,777 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-19 10:05:07,811 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:07,842 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-19 10:05:08,189 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:08,230 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-19 10:05:08,907 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:08,931 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-19 10:05:09,135 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:09,157 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-19 10:05:09,177 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:09,197 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-19 10:05:09,369 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:09,389 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-19 10:05:09,565 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:09,590 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-19 10:05:09,772 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:09,795 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-19 10:05:09,989 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:10,011 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-19 10:05:10,308 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:10,347 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 10:05:10,382 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:10,401 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 10:05:10,436 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:10,455 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 10:05:10,470 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:10,489 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 10:05:10,526 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:10,547 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 10:05:10,640 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:10,701 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 10:05:10,763 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:10,799 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 10:05:11,733 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:11,754 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 10:05:12,435 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:12,455 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:05:12,474 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:12,493 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:05:12,819 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:12,843 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:05:12,861 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:12,882 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 10:05:13,799 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:13,820 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 10:05:13,856 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:13,891 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 10:05:14,097 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 10:05:14,119 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 10:05:14,504 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 10:05:14,527 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 10:05:14,829 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:14,849 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 10:05:15,150 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:15,170 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 10:05:15,191 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:15,214 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 10:05:15,591 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:15,612 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 10:05:15,989 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:16,008 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 10:05:16,208 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:16,226 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 10:05:16,244 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:16,265 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 10:05:16,619 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:16,640 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 10:05:16,682 p=208390 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 10:05:16,718 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 10:05:16,734 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:16,756 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 10:05:16,785 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:16,806 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 10:05:16,836 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:16,857 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 10:05:17,054 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:17,075 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 10:05:17,105 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:17,126 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 10:05:17,325 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:17,345 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 10:05:17,374 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:17,394 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 10:05:17,411 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:17,430 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 10:05:17,448 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:17,468 p=208390 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 10:05:17,487 p=208390 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:05:17,558 p=208390 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-19 10:05:17,755 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:17,775 p=208390 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-19 10:05:18,592 p=208390 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:05:18,630 p=208390 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 10:05:18,631 p=208390 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=172  changed=5    unreachable=0    failed=0    skipped=107  rescued=0    ignored=0   
2023-04-19 10:11:29,636 p=214102 u=ubuntu n=ansible | ERROR! the role 'usegalaxy_eu.tpv_auto_lint' was not found in /home/ubuntu/galaxy/roles:/home/ubuntu/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/ubuntu/galaxy

The error appears to be in '/home/ubuntu/galaxy/galaxy.yml': line 42, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    - galaxyproject.galaxy
    - usegalaxy_eu.tpv_auto_lint
      ^ here

2023-04-19 10:11:45,309 p=214110 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-19 10:11:45,309 p=214110 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-19 10:11:45,309 p=214110 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-19 10:11:45,309 p=214110 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-19 10:11:45,310 p=214110 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-19 10:11:45,310 p=214110 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-19 10:11:45,310 p=214110 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-19 10:11:45,310 p=214110 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-19 10:11:45,310 p=214110 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-19 10:11:45,310 p=214110 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-19 10:11:45,311 p=214110 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-19 10:11:45,311 p=214110 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-19 10:11:45,311 p=214110 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-19 10:11:45,442 p=214110 u=ubuntu n=ansible | - downloading role 'tpv_auto_lint', owned by usegalaxy_eu
2023-04-19 10:11:45,835 p=214110 u=ubuntu n=ansible | - downloading role from https://github.com/usegalaxy-eu/ansible-tpv-lint/archive/0.4.3.tar.gz
2023-04-19 10:11:46,217 p=214110 u=ubuntu n=ansible | - extracting usegalaxy_eu.tpv_auto_lint to /home/ubuntu/galaxy/roles/usegalaxy_eu.tpv_auto_lint
2023-04-19 10:11:46,218 p=214110 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) was installed successfully
2023-04-19 10:11:50,421 p=214112 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 10:11:50,502 p=214112 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 10:11:50,517 p=214112 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:11:51,584 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:51,591 p=214112 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:11:52,479 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:52,503 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:11:52,529 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:11:52,538 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 10:11:52,561 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:52,568 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 10:11:52,590 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:52,596 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 10:11:52,619 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:52,625 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 10:11:53,379 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:53,385 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 10:11:53,657 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:53,664 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:11:53,709 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:53,716 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 10:11:54,511 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:54,517 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:11:54,541 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:54,548 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 10:11:54,582 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:54,589 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 10:11:54,617 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:54,623 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 10:11:54,651 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:54,657 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:11:54,669 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:54,675 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 10:11:54,943 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:54,949 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 10:11:55,221 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:55,227 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 10:11:55,248 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:55,254 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 10:11:55,438 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:55,444 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 10:11:55,923 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:55,929 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 10:11:56,285 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:56,291 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:11:56,323 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 10:11:56,334 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 10:11:56,520 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 10:11:56,674 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 10:11:56,684 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 10:11:56,866 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:56,873 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 10:11:57,194 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 10:11:57,202 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 10:11:57,528 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 10:11:57,536 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 10:11:57,868 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:57,875 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 10:11:58,186 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:58,192 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 10:11:58,357 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:58,364 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 10:11:58,887 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:11:58,898 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 10:11:58,921 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 10:11:58,924 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:58,930 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 10:11:58,941 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:58,949 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 10:11:58,982 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 10:11:58,985 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:58,991 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 10:11:59,345 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:11:59,353 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 10:11:59,364 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:59,370 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 10:11:59,392 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:59,400 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 10:11:59,412 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:59,418 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 10:11:59,791 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:11:59,799 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 10:11:59,811 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:11:59,879 p=214112 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 10:11:59,934 p=214112 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:12:00,774 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:00,792 p=214112 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:12:01,556 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:01,574 p=214112 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 10:12:01,589 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:01,607 p=214112 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 10:12:02,355 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:02,374 p=214112 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 10:12:03,118 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:03,174 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 10:12:03,730 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:03,750 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 10:12:03,770 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:03,790 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 10:12:04,015 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,034 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 10:12:04,214 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,232 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 10:12:04,284 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,303 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 10:12:04,318 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,337 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 10:12:04,352 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,372 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 10:12:04,387 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,406 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 10:12:04,420 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,446 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 10:12:04,462 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,480 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 10:12:04,514 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:04,547 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 10:12:04,559 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,578 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 10:12:04,613 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 10:12:04,626 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:04,661 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 10:12:05,070 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:05,089 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 10:12:05,103 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:05,122 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 10:12:05,139 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:05,157 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 10:12:05,174 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:05,215 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 10:12:05,229 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:05,248 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 10:12:05,311 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:05,346 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 10:12:06,128 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:06,147 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 10:12:06,162 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:06,181 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:12:06,255 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:06,274 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:12:06,292 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:06,311 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:12:06,343 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:06,376 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:12:06,401 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:12:06,404 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:12:06,406 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:12:06,408 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:06,426 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 10:12:06,494 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:06,529 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 10:12:07,296 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:07,315 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 10:12:07,330 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:07,349 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:12:07,426 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:07,444 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:12:07,460 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:07,482 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:12:07,515 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:07,550 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:12:07,571 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:12:07,575 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:12:07,577 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:12:07,579 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:07,598 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 10:12:07,612 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:07,631 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 10:12:08,373 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:08,392 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:12:08,408 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:08,427 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 10:12:08,443 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:08,463 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 10:12:08,909 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:08,928 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 10:12:08,965 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:08,997 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 10:12:09,158 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:09,180 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 10:12:09,203 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:09,223 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 10:12:09,511 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:09,530 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 10:12:09,546 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:09,566 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 10:12:09,850 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:09,870 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 10:12:10,144 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:10,182 p=214112 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 10:12:10,475 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:10,493 p=214112 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 10:12:11,228 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:11,265 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 10:12:11,285 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 10:12:11,303 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 10:12:11,348 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:11,367 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 10:12:11,443 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:11,461 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 10:12:11,494 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 10:12:11,501 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 10:12:11,508 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 10:12:11,522 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 10:12:11,533 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 10:12:11,543 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 10:12:11,552 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 10:12:11,556 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 10:12:11,559 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 10:12:11,580 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 10:12:11,640 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 10:12:11,671 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 10:12:11,703 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 10:12:11,731 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 10:12:11,733 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:11,753 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 10:12:11,837 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 10:12:11,884 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 10:12:11,933 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 10:12:11,953 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 10:12:12,006 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:12,042 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 10:12:12,154 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:12,173 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 10:12:12,724 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:12,743 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 10:12:12,851 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:12,870 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 10:12:13,203 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:12:13,372 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:12:13,393 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 10:12:13,573 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:12:13,737 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:12:13,759 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 10:12:13,851 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:13,870 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 10:12:13,889 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:13,909 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 10:12:13,944 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:13,982 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 10:12:14,337 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:14,356 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 10:12:14,708 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 10:12:15,035 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 10:12:15,334 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 10:12:15,640 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 10:12:15,957 p=214112 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,3 +1,3 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/var/total_perspective_vortex
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 10:12:15,959 p=214112 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 10:12:15,982 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 10:12:16,327 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 10:12:16,634 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:12:16,939 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 10:12:17,253 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 10:12:17,571 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 10:12:17,905 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 10:12:18,219 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 10:12:18,534 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 10:12:18,847 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 10:12:19,169 p=214112 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /srv/galaxy/config/TPV_DO_NOT_TOUCH
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 10:12:19,171 p=214112 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 10:12:19,192 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 10:12:19,256 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:19,295 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 10:12:20,932 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:20,951 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 10:12:21,053 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:21,072 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:12:22,846 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:22,865 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:12:24,637 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:24,659 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 10:12:24,765 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:24,784 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 10:12:24,797 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:24,816 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 10:12:24,831 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:24,850 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 10:12:24,910 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:24,956 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:12:25,077 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:25,115 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 10:12:25,543 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:25,564 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 10:12:25,784 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:25,803 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 10:12:26,296 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 10:12:26,317 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 10:12:26,782 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 10:12:26,803 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 10:12:27,312 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 10:12:27,784 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 10:12:27,804 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 10:12:28,287 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 10:12:28,308 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 10:12:28,781 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:28,802 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 10:12:28,993 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:29,013 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 10:12:29,113 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:29,132 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 10:12:29,147 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:29,166 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 10:12:29,179 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:29,199 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 10:12:29,213 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:29,232 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 10:12:29,246 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:29,265 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 10:12:29,804 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:29,822 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 10:12:29,927 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:29,946 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 10:12:30,051 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:30,070 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 10:12:30,677 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:30,696 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 10:12:30,752 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:30,803 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:12:32,386 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:32,405 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:12:34,198 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:34,217 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 10:12:39,237 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:39,257 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 10:12:39,838 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:39,858 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 10:12:41,458 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:41,477 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 10:12:41,579 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:41,599 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 10:12:41,648 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:41,702 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:12:41,808 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:41,828 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 10:12:42,333 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:12:42,355 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 10:12:42,794 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 10:12:43,090 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 10:12:43,111 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 10:12:43,497 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 10:12:43,805 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 10:12:43,826 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 10:12:43,861 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:43,915 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 10:12:45,312 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:45,331 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 10:12:46,669 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:46,688 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 10:12:46,792 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:46,811 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 10:12:46,910 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:46,929 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 10:12:46,997 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:47,057 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 10:12:47,437 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:47,455 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 10:12:47,792 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:47,815 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 10:12:48,161 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:48,184 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 10:12:48,556 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:48,575 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:12:48,760 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:48,780 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:12:48,965 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:48,984 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 10:12:49,083 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,103 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 10:12:49,201 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,220 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 10:12:49,321 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,341 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 10:12:49,446 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,464 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 10:12:49,573 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,596 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 10:12:49,696 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,716 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 10:12:49,816 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,835 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 10:12:49,940 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,963 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 10:12:49,977 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:49,996 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 10:12:50,036 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:50,114 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 10:12:50,218 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:50,237 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 10:12:50,832 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:50,851 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 10:12:50,871 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:50,889 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 10:12:50,903 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:50,922 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 10:12:50,958 p=214112 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 10:12:51,020 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 10:12:51,423 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:51,441 p=214112 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 10:12:51,541 p=214112 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:12:51,577 p=214112 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-19 10:12:51,748 p=214112 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:12:51,766 p=214112 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-19 10:12:52,321 p=214112 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-2141128y94o58b/tmpd3mweet7/tpv-lint-and-copy.sh.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,29 @@[0m
[0;36m[0m[0;32m+#!/bin/bash[0m
[0;32m[0m[0;32m+# Script that copies files to TPV config dir, only if linting is successful[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+PYTHONPATH="/srv/galaxy/server/lib"[0m
[0;32m[0m[0;32m+VENV="/srv/galaxy/venv"[0m
[0;32m[0m[0;32m+TPV_MUTABLE_DIR="/srv/galaxy/var/total_perspective_vortex"[0m
[0;32m[0m[0;32m+TPV_DIR="/srv/galaxy/config/TPV_DO_NOT_TOUCH"[0m
[0;32m[0m[0;32m+TPV_DIR_NAME="TPV_DO_NOT_TOUCH"[0m
[0;32m[0m[0;32m+JOB_CONFIG_FILE="/srv/galaxy/config/galaxy.yml"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+. $VENV/bin/activate[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+for f in "$TPV_MUTABLE_DIR"/*.yml; do[0m
[0;32m[0m[0;32m+        FNAME=$(basename "$f")[0m
[0;32m[0m[0;32m+        if PYTHONPATH=$PYTHONPATH tpv lint "$f"; then[0m
[0;32m[0m[0;32m+                echo "lint successful, checking job configuration..."[0m
[0;32m[0m[0;32m+                if grep -q "$TPV_DIR_NAME/$FNAME" "$JOB_CONFIG_FILE"; then[0m
[0;32m[0m[0;32m+                        echo "$FNAME is present in job configuration, copying..."[0m
[0;32m[0m[0;32m+                        [[ $(type -t cp) == "alias" ]] && unalias cp[0m
[0;32m[0m[0;32m+                        cp -bu "$f" "$TPV_DIR/$FNAME" && chown root:galaxy "$TPV_DIR/$FNAME" [0m
[0;32m[0m[0;32m+                else[0m
[0;32m[0m[0;32m+                        echo "$FNAME is not present in job configuration, exiting..."[0m
[0;32m[0m[0;32m+                        exit 3 && true[0m
[0;32m[0m[0;32m+                fi[0m
[0;32m[0m[0;32m+        else[0m
[0;32m[0m[0;32m+                echo "lint failed, '$FNAME' was not copied"[0m
[0;32m[0m[0;32m+                exit 3 && true[0m
[0;32m[0m[0;32m+    fi[0m
[0;32m[0m[0;32m+done[0m
[0;32m[0m

2023-04-19 10:12:52,322 p=214112 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:12:52,341 p=214112 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-19 10:12:52,504 p=214112 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  cmd:
  - /srv/galaxy/var/total_perspective_vortex/tpv-lint-and-copy.sh
  delta: '0:00:00.007033'
  end: '2023-04-19 10:12:52.485902'
  msg: non-zero return code
  rc: 3
  start: '2023-04-19 10:12:52.478869'
  stderr: '/srv/galaxy/var/total_perspective_vortex/tpv-lint-and-copy.sh: line 15: tpv: command not found'
  stderr_lines: <omitted>
  stdout: lint failed, '*.yml' was not copied
  stdout_lines: <omitted>
2023-04-19 10:12:52,505 p=214112 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 10:12:52,505 p=214112 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=109  changed=3    unreachable=0    failed=1    skipped=69   rescued=0    ignored=0   
2023-04-19 10:23:39,021 p=217674 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 10:23:39,100 p=217674 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 10:23:39,114 p=217674 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:23:40,129 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:40,135 p=217674 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:23:41,021 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:41,036 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:23:41,060 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:23:41,069 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 10:23:41,089 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:41,096 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 10:23:41,116 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:41,122 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 10:23:41,141 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:41,147 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 10:23:41,877 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:41,883 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 10:23:42,155 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:42,162 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:23:42,200 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:42,206 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 10:23:42,943 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:42,948 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:23:42,971 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:42,977 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 10:23:43,007 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:43,012 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 10:23:43,035 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:43,041 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 10:23:43,064 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:43,070 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:23:43,088 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:43,094 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 10:23:43,353 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:43,359 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 10:23:43,625 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:43,631 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 10:23:43,649 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:43,655 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 10:23:43,820 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:43,826 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 10:23:44,294 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:44,301 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 10:23:44,658 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:44,664 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:23:44,694 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 10:23:44,705 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 10:23:44,888 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 10:23:45,051 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 10:23:45,059 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 10:23:45,230 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:45,236 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 10:23:45,580 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 10:23:45,589 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 10:23:45,921 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 10:23:45,929 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 10:23:46,257 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:46,264 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 10:23:46,594 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:46,600 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 10:23:46,758 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:46,766 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 10:23:47,279 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:47,289 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 10:23:47,315 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 10:23:47,317 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:47,323 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 10:23:47,335 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:47,341 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 10:23:47,378 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 10:23:47,380 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:47,386 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 10:23:47,764 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:23:47,773 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 10:23:47,784 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:47,790 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 10:23:47,811 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:47,818 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 10:23:47,828 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:47,834 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 10:23:48,208 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:23:48,216 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 10:23:48,227 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:48,295 p=217674 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 10:23:48,375 p=217674 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:23:49,139 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:49,157 p=217674 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:23:49,897 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:49,915 p=217674 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 10:23:49,927 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:49,945 p=217674 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 10:23:50,665 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:50,683 p=217674 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 10:23:51,346 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:51,405 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 10:23:51,972 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:51,994 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 10:23:52,015 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,033 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 10:23:52,244 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,262 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 10:23:52,452 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,471 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 10:23:52,520 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,538 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 10:23:52,552 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,571 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 10:23:52,584 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,604 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 10:23:52,619 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,638 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 10:23:52,653 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,671 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 10:23:52,688 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,706 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 10:23:52,739 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 10:23:52,772 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 10:23:52,784 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,802 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 10:23:52,836 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 10:23:52,849 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:52,883 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 10:23:53,284 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:53,303 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 10:23:53,318 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:53,337 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 10:23:53,355 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:53,378 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 10:23:53,396 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:53,431 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 10:23:53,445 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:53,464 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 10:23:53,525 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 10:23:53,560 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 10:23:54,327 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:54,345 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 10:23:54,362 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:54,381 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:23:54,452 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:54,471 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:23:54,486 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:54,504 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:23:54,535 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:23:54,567 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:23:54,587 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:23:54,591 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:23:54,593 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:23:54,595 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:54,613 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 10:23:54,672 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 10:23:54,706 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 10:23:55,441 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:55,459 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 10:23:55,474 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:55,493 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:23:55,562 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:55,580 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:23:55,594 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:55,613 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:23:55,643 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:23:55,674 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:23:55,695 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:23:55,698 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:23:55,700 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:23:55,702 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:55,721 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 10:23:55,734 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:55,752 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 10:23:56,503 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:56,522 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:23:56,538 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:56,556 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 10:23:56,572 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:56,591 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 10:23:57,018 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:57,036 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 10:23:57,074 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 10:23:57,107 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 10:23:57,283 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:57,302 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 10:23:57,323 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:57,345 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 10:23:57,642 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:57,660 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 10:23:57,674 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:57,692 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 10:23:57,973 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:57,992 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 10:23:58,295 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:58,330 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 10:23:58,618 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:58,636 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 10:23:59,385 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:59,420 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 10:23:59,437 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 10:23:59,456 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 10:23:59,502 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:59,521 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 10:23:59,560 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:23:59,582 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 10:23:59,611 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 10:23:59,618 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 10:23:59,628 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 10:23:59,637 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 10:23:59,648 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 10:23:59,658 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 10:23:59,662 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 10:23:59,665 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 10:23:59,668 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 10:23:59,689 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 10:23:59,749 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 10:23:59,779 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 10:23:59,810 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 10:23:59,838 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 10:23:59,840 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:23:59,859 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 10:23:59,939 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 10:23:59,980 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 10:24:00,018 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 10:24:00,038 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 10:24:00,089 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:00,130 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 10:24:00,234 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:00,253 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 10:24:00,809 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:00,828 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 10:24:00,930 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:00,949 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 10:24:01,258 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:24:01,411 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:24:01,432 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 10:24:01,612 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:24:01,762 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:24:01,783 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 10:24:01,861 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:01,879 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 10:24:01,897 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:01,916 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 10:24:01,950 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:01,986 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 10:24:02,324 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:02,343 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 10:24:02,685 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 10:24:02,986 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 10:24:03,292 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 10:24:03,617 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 10:24:03,914 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 10:24:03,936 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 10:24:04,289 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 10:24:04,606 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:24:04,910 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 10:24:05,226 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 10:24:05,531 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 10:24:05,839 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 10:24:06,154 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 10:24:06,486 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 10:24:06,793 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 10:24:07,101 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 10:24:07,122 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 10:24:07,187 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:07,227 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 10:24:08,689 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:08,707 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 10:24:08,803 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:08,822 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:24:10,543 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:10,562 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:24:12,304 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:12,324 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 10:24:12,423 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:12,441 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 10:24:12,454 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:12,474 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 10:24:12,487 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:12,506 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 10:24:12,562 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:12,607 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:24:12,726 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:12,763 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 10:24:13,188 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:13,206 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 10:24:13,407 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:13,426 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 10:24:13,941 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 10:24:14,599 p=217674 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/config/tpv_rules_local.yml[0m
[0;32m[0m[0;36m@@ -0,0 +1,32 @@[0m
[0;36m[0m[0;32m+tools:[0m
[0;32m[0m[0;32m+  .*testing.*:[0m
[0;32m[0m[0;32m+    cores: 2[0m
[0;32m[0m[0;32m+    mem: cores * 4[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+destinations:[0m
[0;32m[0m[0;32m+  local_env:[0m
[0;32m[0m[0;32m+    runner: local_runner[0m
[0;32m[0m[0;32m+    max_accepted_cores: 1[0m
[0;32m[0m[0;32m+    params:[0m
[0;32m[0m[0;32m+      tmp_dir: true[0m
[0;32m[0m[0;32m+  singularity:[0m
[0;32m[0m[0;32m+    runner: local_runner[0m
[0;32m[0m[0;32m+    max_accepted_cores: 1[0m
[0;32m[0m[0;32m+    params:[0m
[0;32m[0m[0;32m+      singularity_enabled: true[0m
[0;32m[0m[0;32m+    env:[0m
[0;32m[0m[0;32m+      # Ensuring a consistent collation environment is good for reproducibility.[0m
[0;32m[0m[0;32m+      LC_ALL: C[0m
[0;32m[0m[0;32m+      # The cache directory holds the docker containers that get converted[0m
[0;32m[0m[0;32m+      SINGULARITY_CACHEDIR: /tmp/singularity[0m
[0;32m[0m[0;32m+      # Singularity uses a temporary directory to build the squashfs filesystem[0m
[0;32m[0m[0;32m+      SINGULARITY_TMPDIR: /tmp[0m
[0;32m[0m[0;32m+  slurm:[0m
[0;32m[0m[0;32m+    inherits: singularity[0m
[0;32m[0m[0;32m+    runner: slurm[0m
[0;32m[0m[0;32m+    max_accepted_cores: 16[0m
[0;32m[0m[0;32m+    params:[0m
[0;32m[0m[0;32m+      native_specification: --nodes=1 --ntasks=1 --cpus-per-task={cores}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  [0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-19 10:24:14,601 p=217674 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 10:24:14,629 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 10:24:15,100 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 10:24:15,121 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 10:24:15,609 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 10:24:16,043 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 10:24:16,064 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 10:24:16,550 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 10:24:16,571 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 10:24:17,055 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:17,074 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 10:24:17,250 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:17,269 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 10:24:17,366 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:17,384 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 10:24:17,397 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:17,415 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 10:24:17,428 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:17,447 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 10:24:17,460 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:17,478 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 10:24:17,490 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:17,511 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 10:24:18,041 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:18,060 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 10:24:18,157 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:18,178 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 10:24:18,277 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:18,296 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 10:24:19,125 p=217674 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-217674ffdfmtjb/tmpg3n2hd3p/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -56,31 +56,18 @@[0m
[0;36m[0m     integrated_tool_panel_config: /srv/galaxy/var/config/integrated_tool_panel.xml
     job_config:
         execution:
[0;31m-            default: slurm[0m
[0;31m[0m[0;32m+            default: tpv_dispatcher[0m
[0;32m[0m             environments:
                 local_env:
                     runner: local_runner
                     tmp_dir: true
[0;31m-                singularity:[0m
[0;31m[0m[0;31m-                    env:[0m
[0;31m[0m[0;31m-                    -   name: LC_ALL[0m
[0;31m[0m[0;31m-                        value: C[0m
[0;31m[0m[0;31m-                    -   name: APPTAINER_CACHEDIR[0m
[0;31m[0m[0;31m-                        value: /tmp/singularity[0m
[0;31m[0m[0;31m-                    -   name: APPTAINER_TMPDIR[0m
[0;31m[0m[0;31m-                        value: /tmp[0m
[0;31m[0m[0;31m-                    runner: local_runner[0m
[0;31m[0m[0;31m-                    singularity_enabled: true[0m
[0;31m[0m[0;31m-                slurm:[0m
[0;31m[0m[0;31m-                    env:[0m
[0;31m[0m[0;31m-                    -   name: LC_ALL[0m
[0;31m[0m[0;31m-                        value: C[0m
[0;31m[0m[0;31m-                    -   name: SINGULARITY_CACHEDIR[0m
[0;31m[0m[0;31m-                        value: /tmp/singularity[0m
[0;31m[0m[0;31m-                    -   name: SINGULARITY_TMPDIR[0m
[0;31m[0m[0;31m-                        value: /tmp[0m
[0;31m[0m[0;31m-                    runner: slurm[0m
[0;31m[0m[0;31m-                    singularity_enabled: true[0m
[0;31m[0m[0;32m+                tpv_dispatcher:[0m
[0;32m[0m[0;32m+                    function: map_tool_to_destination[0m
[0;32m[0m[0;32m+                    rules_module: tpv.rules[0m
[0;32m[0m[0;32m+                    runner: dynamic[0m
[0;32m[0m[0;32m+                    tpv_config_files:[0m
[0;32m[0m[0;32m+                    - /srv/galaxy/config/TPV_DO_NOT_TOUCH/tpv_rules_local.yml[0m
[0;32m[0m[0;32m+                    type: python[0m
[0;32m[0m         handling:
             assign:
             - db-skip-locked


2023-04-19 10:24:19,125 p=217674 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:24:19,143 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 10:24:19,193 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:19,242 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:24:20,810 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:20,829 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:24:22,531 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:22,553 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 10:24:27,513 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:27,532 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 10:24:28,103 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:28,122 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 10:24:30,893 p=217674 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:24:30,913 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 10:24:31,012 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:31,031 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 10:24:31,080 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:31,131 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:24:31,235 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:31,254 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 10:24:31,745 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:24:31,765 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 10:24:32,184 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 10:24:32,481 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 10:24:32,502 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 10:24:32,882 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 10:24:33,181 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 10:24:33,201 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 10:24:33,236 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:33,293 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 10:24:34,743 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:34,762 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 10:24:36,084 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:36,103 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 10:24:36,202 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:36,221 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 10:24:36,319 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:36,338 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 10:24:36,406 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:36,462 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 10:24:36,802 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:36,821 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 10:24:37,165 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:37,184 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 10:24:37,527 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:37,547 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 10:24:37,914 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:37,933 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:24:38,115 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:38,134 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:24:38,315 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:38,335 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 10:24:38,434 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:38,453 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 10:24:38,552 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:38,571 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 10:24:38,669 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:38,688 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 10:24:38,788 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:38,807 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 10:24:38,912 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:38,931 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 10:24:39,033 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:39,052 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 10:24:39,157 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:39,176 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 10:24:39,282 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:39,301 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 10:24:39,314 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:39,336 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 10:24:39,375 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:39,449 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 10:24:39,548 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:39,567 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 10:24:40,208 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:40,228 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 10:24:40,253 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:40,271 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 10:24:40,287 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:40,305 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 10:24:40,341 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:40,402 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 10:24:40,807 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:40,826 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 10:24:40,928 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:40,964 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-19 10:24:41,137 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:41,156 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-19 10:24:41,470 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:41,489 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-19 10:24:44,001 p=217674 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,039 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-19 10:24:44,209 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,228 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-19 10:24:44,245 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,264 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-19 10:24:44,631 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,649 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-19 10:24:44,685 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,706 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-19 10:24:44,720 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,739 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-19 10:24:44,754 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,773 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-19 10:24:44,796 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,815 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-19 10:24:44,838 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,856 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-19 10:24:44,870 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:44,907 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:24:44,944 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:44,976 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-19 10:24:45,771 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:45,789 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-19 10:24:45,967 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:45,993 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:24:46,008 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,027 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:24:46,041 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,062 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-19 10:24:46,225 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,245 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-19 10:24:46,275 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,294 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-19 10:24:46,324 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,343 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-19 10:24:46,357 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,378 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-19 10:24:46,392 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,411 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:24:46,426 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,445 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-19 10:24:46,469 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,487 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-19 10:24:46,825 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,844 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-19 10:24:46,874 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:46,893 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-19 10:24:47,249 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 10:24:47,271 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-19 10:24:47,494 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 10:24:47,524 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-19 10:24:47,722 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:24:47,741 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-19 10:24:47,820 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 10:24:47,852 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-19 10:24:47,885 p=217674 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-19 10:24:47,901 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:47,920 p=217674 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 10:24:47,937 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:47,957 p=217674 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-19 10:24:47,973 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:24:47,992 p=217674 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-19 10:24:48,591 p=217674 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:24:48,612 p=217674 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 10:25:01,340 p=217674 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:25:01,364 p=217674 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-19 10:25:01,570 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-19 10:25:01,618 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:01,651 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-19 10:25:02,620 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:02,640 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-19 10:25:02,660 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:02,682 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-19 10:25:02,703 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:02,726 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-19 10:25:02,745 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:02,768 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-19 10:25:02,784 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:02,807 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-19 10:25:02,850 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:02,912 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-19 10:25:03,132 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:03,155 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-19 10:25:03,180 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:03,203 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-19 10:25:03,227 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:03,250 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-19 10:25:03,484 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:03,508 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-19 10:25:03,534 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 10:25:03,556 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-19 10:25:03,602 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:03,643 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-19 10:25:03,663 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:03,687 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-19 10:25:04,110 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:04,129 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-19 10:25:04,164 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-19 10:25:04,201 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:04,245 p=217674 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-19 10:25:04,459 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:04,497 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-19 10:25:04,682 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:04,705 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-19 10:25:05,099 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:05,122 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-19 10:25:05,309 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:05,331 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-19 10:25:05,507 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:05,526 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-19 10:25:05,567 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:05,602 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-19 10:25:05,986 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:25:06,008 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-19 10:25:06,218 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:25:06,243 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-19 10:25:06,477 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:06,498 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-19 10:25:06,518 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:06,537 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-19 10:25:06,856 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:06,892 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-19 10:25:07,516 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:07,536 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-19 10:25:07,724 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:07,744 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-19 10:25:07,759 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:07,779 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-19 10:25:07,947 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:07,966 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-19 10:25:08,137 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:08,156 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-19 10:25:08,331 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:08,350 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-19 10:25:08,519 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:08,539 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-19 10:25:08,812 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:08,849 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 10:25:08,885 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:08,904 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 10:25:08,938 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:08,957 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 10:25:08,972 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:08,992 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 10:25:09,028 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:09,046 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 10:25:09,130 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:09,187 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 10:25:09,241 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:09,276 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 10:25:09,996 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:10,016 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 10:25:10,577 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:10,600 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:25:10,613 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:10,632 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:25:10,920 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:10,939 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:25:10,953 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:10,971 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 10:25:11,704 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:11,723 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 10:25:11,754 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:11,789 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 10:25:11,976 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 10:25:11,998 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 10:25:12,331 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 10:25:12,352 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 10:25:12,613 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:12,639 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 10:25:12,917 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:12,937 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 10:25:12,951 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:12,970 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 10:25:13,303 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:13,322 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 10:25:13,650 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:13,669 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 10:25:13,831 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:13,849 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 10:25:13,864 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:13,882 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 10:25:14,214 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,233 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 10:25:14,266 p=217674 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 10:25:14,304 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 10:25:14,317 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,337 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 10:25:14,363 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,382 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 10:25:14,409 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,430 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 10:25:14,610 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,630 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 10:25:14,656 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,674 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 10:25:14,852 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,872 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 10:25:14,896 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,915 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 10:25:14,928 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,949 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 10:25:14,963 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:14,982 p=217674 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 10:25:14,997 p=217674 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:25:15,065 p=217674 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-19 10:25:15,240 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:15,258 p=217674 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-19 10:25:15,970 p=217674 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:25:16,006 p=217674 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 10:25:16,007 p=217674 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=175  changed=6    unreachable=0    failed=0    skipped=107  rescued=0    ignored=0   
2023-04-19 10:35:32,549 p=223654 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 10:35:32,631 p=223654 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 10:35:32,646 p=223654 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:35:33,650 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:33,657 p=223654 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:35:34,576 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:34,591 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:35:34,615 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:34,624 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 10:35:34,645 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:34,651 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 10:35:34,672 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:34,678 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 10:35:34,698 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:34,705 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 10:35:35,488 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:35,495 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 10:35:35,766 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:35,772 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:35:35,812 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:35,818 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 10:35:36,574 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:36,580 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:35:36,609 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:36,615 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 10:35:36,651 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:36,657 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 10:35:36,684 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:36,689 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 10:35:36,714 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:36,720 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:35:36,732 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:36,738 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 10:35:37,021 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:37,028 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 10:35:37,311 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:37,317 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 10:35:37,334 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:37,340 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 10:35:37,511 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:37,517 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 10:35:37,974 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:37,980 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 10:35:38,348 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:38,354 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:35:38,385 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:38,398 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 10:35:38,593 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 10:35:38,742 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 10:35:38,754 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 10:35:38,927 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:38,933 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 10:35:39,267 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 10:35:39,276 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 10:35:39,618 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 10:35:39,629 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 10:35:39,971 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:39,978 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 10:35:40,311 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:40,317 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 10:35:40,478 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:40,484 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 10:35:41,005 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:41,016 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 10:35:41,040 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 10:35:41,042 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:41,048 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 10:35:41,060 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:41,066 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 10:35:41,101 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 10:35:41,103 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:41,109 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 10:35:41,488 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:35:41,497 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 10:35:41,509 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:41,515 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 10:35:41,537 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:41,543 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 10:35:41,554 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:41,560 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 10:35:41,940 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:35:41,948 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 10:35:41,960 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:42,027 p=223654 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 10:35:42,079 p=223654 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:35:42,914 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:42,932 p=223654 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:35:43,700 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:43,719 p=223654 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 10:35:43,732 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:43,751 p=223654 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 10:35:44,503 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:44,524 p=223654 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 10:35:45,269 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:45,326 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 10:35:45,903 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:45,922 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 10:35:45,942 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:45,961 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 10:35:46,201 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,220 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 10:35:46,404 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,423 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 10:35:46,473 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,492 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 10:35:46,508 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,527 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 10:35:46,542 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,561 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 10:35:46,576 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,595 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 10:35:46,610 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,629 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 10:35:46,645 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,665 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 10:35:46,698 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:46,731 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 10:35:46,744 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,762 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 10:35:46,797 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 10:35:46,809 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:46,845 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 10:35:47,267 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:47,286 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 10:35:47,299 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:47,318 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 10:35:47,335 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:47,355 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 10:35:47,372 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:47,407 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 10:35:47,421 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:47,439 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 10:35:47,498 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:47,537 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 10:35:48,301 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:48,321 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 10:35:48,338 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:48,358 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:35:48,430 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:48,449 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:35:48,464 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:48,483 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:35:48,519 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:48,552 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:35:48,578 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:35:48,582 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:35:48,584 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:35:48,586 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:48,605 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 10:35:48,664 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:48,699 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 10:35:49,449 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:49,467 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 10:35:49,482 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:49,500 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:35:49,573 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:49,591 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:35:49,607 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:49,627 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:35:49,658 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:49,690 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:35:49,712 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:35:49,717 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:35:49,719 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:35:49,721 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:49,740 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 10:35:49,754 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:49,774 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 10:35:50,514 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:50,534 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:35:50,551 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:50,572 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 10:35:50,589 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:50,608 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 10:35:51,047 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:51,066 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 10:35:51,101 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:51,136 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 10:35:51,301 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:51,321 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 10:35:51,343 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:51,362 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 10:35:51,655 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:51,676 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 10:35:51,691 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:51,711 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 10:35:52,015 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:52,033 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 10:35:52,315 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:52,352 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 10:35:52,670 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:52,688 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 10:35:53,438 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:53,474 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 10:35:53,494 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 10:35:53,513 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 10:35:53,561 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:53,582 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 10:35:53,617 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:53,636 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 10:35:53,673 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 10:35:53,684 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 10:35:53,694 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 10:35:53,704 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 10:35:53,715 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 10:35:53,721 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 10:35:53,725 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 10:35:53,728 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 10:35:53,732 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 10:35:53,753 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 10:35:53,815 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 10:35:53,845 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 10:35:53,881 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 10:35:53,910 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 10:35:53,912 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:53,931 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 10:35:54,017 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 10:35:54,058 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 10:35:54,094 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 10:35:54,116 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 10:35:54,170 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:54,206 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 10:35:54,309 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:54,329 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 10:35:54,897 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:54,916 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 10:35:55,027 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:35:55,047 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 10:35:55,350 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:35:55,508 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:35:55,529 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 10:35:55,719 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:35:55,879 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:35:55,899 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 10:35:55,983 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:56,001 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 10:35:56,020 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:56,038 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 10:35:56,072 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 10:35:56,111 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 10:35:56,447 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:35:56,469 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 10:35:56,823 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 10:35:57,137 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 10:35:57,457 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 10:35:57,815 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 10:35:58,133 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 10:35:58,154 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 10:35:58,498 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 10:35:58,814 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:35:59,118 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 10:35:59,430 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 10:35:59,753 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 10:36:00,064 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 10:36:00,378 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 10:36:00,691 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 10:36:01,016 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 10:36:01,333 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 10:36:01,356 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 10:36:01,422 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:01,462 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 10:36:02,954 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:02,974 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 10:36:03,092 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:03,111 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:36:04,850 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:04,869 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:36:06,660 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:06,681 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 10:36:06,789 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:06,808 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 10:36:06,821 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:06,839 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 10:36:06,852 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:06,871 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 10:36:06,925 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:06,969 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:36:07,097 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:07,134 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 10:36:07,560 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:07,580 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 10:36:07,802 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:07,821 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 10:36:08,323 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 10:36:09,153 p=223654 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/config/tpv_rules_local.yml[0m
[0;32m[0m[0;36m@@ -1,4 +1,12 @@[0m
[0;36m[0m[0;32m+global:[0m
[0;32m[0m[0;32m+  default_inherits: default[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m tools:
[0;32m+  default:[0m
[0;32m[0m[0;32m+    abstract: true[0m
[0;32m[0m[0;32m+    cores: 1[0m
[0;32m[0m[0;32m+    mem: cores * 4[0m
[0;32m[0m   .*testing.*:
     cores: 2
     mem: cores * 4
[0;36m@@ -24,7 +32,10 @@[0m
[0;36m[0m   slurm:
     inherits: singularity
     runner: slurm
[0;31m-    max_accepted_cores: 16[0m
[0;31m[0m[0;32m+    max_accepted_cores: 24[0m
[0;32m[0m[0;32m+    max_accepted_mem: 256[0m
[0;32m[0m[0;32m+    max_cores: 2[0m
[0;32m[0m[0;32m+    max_mem: 8[0m
[0;32m[0m     params:
       native_specification: --nodes=1 --ntasks=1 --cpus-per-task={cores}
 


2023-04-19 10:36:09,155 p=223654 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 10:36:09,177 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 10:36:09,680 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 10:36:09,702 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 10:36:10,227 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 10:36:10,682 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 10:36:10,703 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 10:36:11,201 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 10:36:11,224 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 10:36:11,739 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:11,758 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 10:36:11,955 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:11,975 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 10:36:12,083 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:12,104 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 10:36:12,119 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:12,139 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 10:36:12,154 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:12,174 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 10:36:12,189 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:12,208 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 10:36:12,222 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:12,241 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 10:36:12,784 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:12,803 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 10:36:12,910 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:12,929 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 10:36:13,033 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:13,054 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 10:36:13,936 p=223654 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-2236545riv076f/tmpu3dlyfn6/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -66,6 +66,7 @@[0m
[0;36m[0m                     rules_module: tpv.rules
                     runner: dynamic
                     tpv_config_files:
[0;32m+                    - https://raw.githubusercontent.com/galaxyproject/tpv-shared-database/main/tools.yml[0m
[0;32m[0m                     - /srv/galaxy/config/TPV_DO_NOT_TOUCH/tpv_rules_local.yml
                     type: python
         handling:


2023-04-19 10:36:13,936 p=223654 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:36:13,955 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 10:36:14,007 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:14,056 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:36:15,715 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:15,739 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:36:18,619 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:18,638 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 10:36:23,758 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:23,781 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 10:36:24,374 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:24,393 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 10:36:26,047 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:26,066 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 10:36:26,165 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:26,184 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 10:36:26,232 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:26,284 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:36:26,395 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:26,414 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 10:36:26,905 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:36:26,932 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 10:36:27,371 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 10:36:27,659 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 10:36:27,680 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 10:36:28,068 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 10:36:28,367 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 10:36:28,388 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 10:36:28,425 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:28,477 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 10:36:29,916 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:29,937 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 10:36:31,318 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:31,339 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 10:36:31,445 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:31,464 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 10:36:31,570 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:31,590 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 10:36:31,658 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:31,716 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 10:36:32,053 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:32,072 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 10:36:32,415 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:32,434 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 10:36:32,780 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:32,799 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 10:36:33,169 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:33,188 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:36:33,378 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:33,398 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:36:33,583 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:33,601 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 10:36:33,705 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:33,724 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 10:36:33,828 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:33,847 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 10:36:33,962 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:33,982 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 10:36:34,084 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:34,103 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 10:36:34,206 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:34,225 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 10:36:34,329 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:34,348 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 10:36:34,451 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:34,473 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 10:36:34,575 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:34,593 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 10:36:34,608 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:34,626 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 10:36:34,666 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:34,737 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 10:36:34,836 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:34,856 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 10:36:35,476 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:35,494 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 10:36:35,515 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:35,534 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 10:36:35,548 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:35,567 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 10:36:35,601 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:35,663 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 10:36:36,074 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:36,093 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 10:36:36,202 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:36,239 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-19 10:36:36,408 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:36,427 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-19 10:36:36,754 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:36,773 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-19 10:36:39,378 p=223654 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:36:39,414 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-19 10:36:39,590 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:39,609 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-19 10:36:39,624 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:39,643 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-19 10:36:40,034 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:40,053 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-19 10:36:40,088 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:40,106 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-19 10:36:40,122 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:40,141 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-19 10:36:40,156 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:40,174 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-19 10:36:40,198 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:40,216 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-19 10:36:40,240 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:40,258 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-19 10:36:40,273 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:40,309 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:36:40,344 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:40,378 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-19 10:36:41,168 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,187 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-19 10:36:41,360 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,379 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:36:41,395 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,419 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:36:41,434 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,453 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-19 10:36:41,677 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,698 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-19 10:36:41,728 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,746 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-19 10:36:41,776 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,795 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-19 10:36:41,811 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,830 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-19 10:36:41,844 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,863 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:36:41,879 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,898 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-19 10:36:41,920 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:41,940 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-19 10:36:42,310 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:42,331 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-19 10:36:42,361 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:42,383 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-19 10:36:42,764 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 10:36:42,785 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-19 10:36:43,034 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 10:36:43,059 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-19 10:36:43,250 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:43,270 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-19 10:36:43,352 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:43,385 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-19 10:36:43,418 p=223654 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-19 10:36:43,438 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:43,457 p=223654 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 10:36:43,475 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:43,494 p=223654 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-19 10:36:43,513 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:43,533 p=223654 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-19 10:36:44,223 p=223654 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:36:44,242 p=223654 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 10:36:56,989 p=223654 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:36:57,009 p=223654 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-19 10:36:57,219 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-19 10:36:57,266 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:57,300 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-19 10:36:58,172 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:58,192 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-19 10:36:58,213 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:58,233 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-19 10:36:58,256 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:58,275 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-19 10:36:58,297 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:58,318 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-19 10:36:58,341 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:58,364 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-19 10:36:58,410 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:58,471 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-19 10:36:58,719 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:58,743 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-19 10:36:58,768 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:58,792 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-19 10:36:58,818 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:58,841 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-19 10:36:59,083 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:59,107 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-19 10:36:59,133 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 10:36:59,156 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-19 10:36:59,205 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:59,250 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-19 10:36:59,279 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:36:59,300 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-19 10:36:59,728 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:36:59,753 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-19 10:36:59,787 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-19 10:36:59,827 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 10:36:59,869 p=223654 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-19 10:37:00,092 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:00,130 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-19 10:37:00,339 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:00,360 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-19 10:37:00,736 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:00,756 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-19 10:37:00,944 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:00,964 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-19 10:37:01,143 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:01,162 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-19 10:37:01,201 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 10:37:01,234 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-19 10:37:01,591 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:37:01,613 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-19 10:37:01,837 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:37:01,858 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-19 10:37:02,073 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:02,096 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-19 10:37:02,122 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:02,141 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-19 10:37:02,425 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:02,464 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-19 10:37:03,091 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:03,113 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-19 10:37:03,307 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:03,327 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-19 10:37:03,345 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:03,364 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-19 10:37:03,543 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:03,566 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-19 10:37:03,734 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:03,754 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-19 10:37:03,932 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:03,954 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-19 10:37:04,122 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:04,141 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-19 10:37:04,407 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:04,443 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 10:37:04,486 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:04,506 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 10:37:04,540 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:04,558 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 10:37:04,572 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:04,592 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 10:37:04,626 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:04,645 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 10:37:04,726 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:37:04,785 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 10:37:04,842 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:37:04,876 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 10:37:05,586 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:05,609 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 10:37:06,174 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:06,198 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:37:06,212 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:06,232 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:37:06,548 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:06,568 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:37:06,584 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:06,604 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 10:37:07,325 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:07,345 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 10:37:07,378 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 10:37:07,413 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 10:37:07,620 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 10:37:07,641 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 10:37:07,973 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 10:37:07,995 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 10:37:08,247 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:08,267 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 10:37:08,561 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:08,580 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 10:37:08,596 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:08,616 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 10:37:08,953 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:08,971 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 10:37:09,301 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:09,320 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 10:37:09,502 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:09,525 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 10:37:09,540 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:09,559 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 10:37:09,899 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:09,919 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 10:37:09,951 p=223654 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 10:37:09,985 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 10:37:09,999 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,019 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 10:37:10,044 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,063 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 10:37:10,088 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,107 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 10:37:10,284 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,303 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 10:37:10,329 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,347 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 10:37:10,537 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,558 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 10:37:10,584 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,605 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 10:37:10,621 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,639 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 10:37:10,655 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,674 p=223654 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 10:37:10,689 p=223654 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,759 p=223654 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-19 10:37:10,943 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:10,961 p=223654 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-19 10:37:11,706 p=223654 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:37:11,744 p=223654 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 10:37:11,744 p=223654 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=175  changed=5    unreachable=0    failed=0    skipped=107  rescued=0    ignored=0   
2023-04-19 10:44:06,710 p=229405 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 10:44:06,797 p=229405 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 10:44:06,814 p=229405 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:44:07,891 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:07,897 p=229405 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:44:08,813 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:08,828 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:44:08,851 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:08,860 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 10:44:08,881 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:08,887 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 10:44:08,908 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:08,916 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 10:44:08,940 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:08,947 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 10:44:09,680 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:09,686 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 10:44:09,972 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:09,979 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:44:10,021 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:10,027 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 10:44:10,779 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:10,785 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 10:44:10,807 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:10,813 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 10:44:10,843 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:10,848 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 10:44:10,872 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:10,877 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 10:44:10,901 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:10,907 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:44:10,920 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:10,926 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 10:44:11,200 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:11,207 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 10:44:11,473 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:11,479 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 10:44:11,496 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:11,503 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 10:44:11,685 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:11,692 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 10:44:12,136 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:12,142 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 10:44:12,493 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:12,499 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 10:44:12,531 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:12,542 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 10:44:12,730 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 10:44:12,875 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 10:44:12,883 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 10:44:13,046 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:13,052 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 10:44:13,372 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 10:44:13,381 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 10:44:18,729 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 10:44:18,737 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 10:44:19,078 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:19,084 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 10:44:19,397 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:19,404 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 10:44:19,565 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:19,571 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 10:44:20,094 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:20,105 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 10:44:20,128 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 10:44:20,130 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:20,137 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 10:44:20,148 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:20,154 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 10:44:20,188 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 10:44:20,190 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:20,196 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 10:44:20,564 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:44:20,572 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 10:44:20,583 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:20,589 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 10:44:20,610 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:20,616 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 10:44:20,628 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:20,634 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 10:44:21,013 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:44:21,021 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 10:44:21,034 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:21,101 p=229405 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 10:44:21,152 p=229405 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 10:44:21,947 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:21,965 p=229405 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 10:44:22,725 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:22,743 p=229405 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 10:44:22,756 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:22,775 p=229405 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 10:44:23,515 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:23,534 p=229405 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 10:44:24,254 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:24,307 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 10:44:24,876 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:24,895 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 10:44:24,914 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:24,934 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 10:44:25,156 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,175 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 10:44:25,361 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,380 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 10:44:25,429 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,447 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 10:44:25,461 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,480 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 10:44:25,496 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,516 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 10:44:25,531 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,550 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 10:44:25,565 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,583 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 10:44:25,600 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,619 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 10:44:25,652 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:25,687 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 10:44:25,700 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,725 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 10:44:25,759 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 10:44:25,771 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:25,808 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 10:44:26,232 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:26,250 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 10:44:26,264 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:26,282 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 10:44:26,300 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:26,319 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 10:44:26,336 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:26,371 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 10:44:26,384 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:26,403 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 10:44:26,462 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:26,494 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 10:44:27,249 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:27,268 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 10:44:27,283 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:27,302 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:44:27,371 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:27,390 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:44:27,405 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:27,424 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:44:27,453 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:27,484 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:44:27,505 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:44:27,508 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:44:27,510 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:44:27,512 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:27,530 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 10:44:27,588 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:27,624 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 10:44:28,374 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:28,393 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 10:44:28,408 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:28,427 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 10:44:28,496 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:28,514 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:44:28,529 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:28,549 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 10:44:28,578 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:28,610 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 10:44:28,632 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 10:44:28,637 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 10:44:28,639 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 10:44:28,641 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:28,662 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 10:44:28,676 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:28,695 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 10:44:29,433 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:29,451 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 10:44:29,467 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:29,486 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 10:44:29,500 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:29,519 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 10:44:30,004 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:30,024 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 10:44:30,061 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:30,092 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 10:44:30,273 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:30,294 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 10:44:30,316 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:30,336 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 10:44:30,616 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:30,634 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 10:44:30,648 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:30,666 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 10:44:30,949 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:30,968 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 10:44:31,245 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:31,281 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 10:44:31,566 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:31,584 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 10:44:32,330 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:32,365 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 10:44:32,382 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 10:44:32,400 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 10:44:32,441 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:32,459 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 10:44:32,492 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:32,510 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 10:44:32,544 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 10:44:32,550 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 10:44:32,554 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 10:44:32,560 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 10:44:32,570 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 10:44:32,581 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 10:44:32,588 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 10:44:32,591 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 10:44:32,594 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 10:44:32,614 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 10:44:32,672 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 10:44:32,702 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 10:44:32,732 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 10:44:32,761 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 10:44:32,763 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:32,781 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 10:44:32,860 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 10:44:32,905 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 10:44:32,943 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 10:44:32,963 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 10:44:33,016 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:33,052 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 10:44:33,166 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:33,185 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 10:44:33,750 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:33,769 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 10:44:33,875 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:33,894 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 10:44:34,200 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:44:34,354 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:44:34,375 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 10:44:34,564 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:44:34,721 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 10:44:34,742 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 10:44:34,832 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:34,850 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 10:44:34,868 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:34,886 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 10:44:34,923 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:34,962 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 10:44:35,296 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:35,314 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 10:44:35,665 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 10:44:35,986 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 10:44:36,309 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 10:44:36,614 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 10:44:36,932 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 10:44:36,957 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 10:44:37,305 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 10:44:37,615 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:44:37,909 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 10:44:38,219 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 10:44:38,514 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 10:44:38,817 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 10:44:39,132 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 10:44:39,436 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 10:44:39,730 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 10:44:40,053 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 10:44:40,074 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 10:44:40,137 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:40,175 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 10:44:41,573 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:41,592 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 10:44:41,686 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:41,705 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:44:43,481 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:43,501 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:44:45,277 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:45,296 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 10:44:45,393 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:45,411 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 10:44:45,424 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:45,442 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 10:44:45,454 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:45,473 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 10:44:45,525 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:45,569 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:44:45,688 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:45,723 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 10:44:46,139 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:46,158 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 10:44:46,348 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:46,366 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 10:44:46,834 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 10:44:47,666 p=229405 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/config/tpv_rules_local.yml[0m
[0;32m[0m[0;36m@@ -10,6 +10,14 @@[0m
[0;36m[0m   .*testing.*:
     cores: 2
     mem: cores * 4
[0;32m+    rules:[0m
[0;32m[0m[0;32m+      - id: admin_only_testing_tool[0m
[0;32m[0m[0;32m+        if: |[0m
[0;32m[0m[0;32m+          # Only allow the tool to be executed if the user is an admin[0m
[0;32m[0m[0;32m+          admin_users = app.config.admin_users[0m
[0;32m[0m[0;32m+          # last line in block must evaluate to a value - which determines whether the TPV if conditional matches or not[0m
[0;32m[0m[0;32m+          not user or user.email not in admin_users[0m
[0;32m[0m[0;32m+        fail: Unauthorized. Only admins can execute this tool.[0m
[0;32m[0m 
 destinations:
   local_env:


2023-04-19 10:44:47,668 p=229405 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 10:44:47,689 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 10:44:48,162 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 10:44:48,182 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 10:44:48,662 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 10:44:49,110 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 10:44:49,131 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 10:44:49,596 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 10:44:49,616 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 10:44:50,087 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:50,110 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 10:44:50,298 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:50,317 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 10:44:50,423 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:50,442 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 10:44:50,454 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:50,473 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 10:44:50,485 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:50,504 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 10:44:50,516 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:50,535 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 10:44:50,547 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:50,566 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 10:44:51,081 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:51,099 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 10:44:51,201 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:51,219 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 10:44:51,317 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:44:51,337 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 10:44:51,884 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:51,903 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 10:44:51,964 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 10:44:52,018 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 10:44:53,688 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:53,707 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 10:44:55,474 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:44:55,492 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 10:45:00,587 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:00,606 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 10:45:01,207 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:01,226 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 10:45:02,832 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:02,851 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 10:45:02,957 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:02,975 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 10:45:03,023 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:03,075 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 10:45:03,180 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:03,199 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 10:45:03,671 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 10:45:03,691 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 10:45:04,115 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 10:45:04,419 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 10:45:04,439 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 10:45:04,819 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 10:45:05,119 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 10:45:05,141 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 10:45:05,175 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:05,227 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 10:45:06,574 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:06,593 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 10:45:07,936 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:07,955 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 10:45:08,057 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:08,076 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 10:45:08,181 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:08,200 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 10:45:08,269 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:08,327 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 10:45:08,674 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:08,693 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 10:45:09,009 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:09,027 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 10:45:09,364 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:09,383 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 10:45:09,742 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:09,761 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:45:09,944 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:09,963 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 10:45:10,149 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:10,168 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 10:45:10,271 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:10,291 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 10:45:10,394 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:10,414 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 10:45:10,522 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:10,540 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 10:45:10,640 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:10,659 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 10:45:10,765 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:10,784 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 10:45:10,891 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:10,909 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 10:45:11,011 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:11,029 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 10:45:11,140 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:11,158 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 10:45:11,172 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:11,191 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 10:45:11,230 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:11,311 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 10:45:11,414 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:11,434 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 10:45:12,010 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:12,029 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 10:45:12,048 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:12,067 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 10:45:12,083 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:12,102 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 10:45:12,136 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:12,196 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 10:45:12,605 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:12,623 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 10:45:12,722 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:12,757 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-19 10:45:12,920 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:12,938 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-19 10:45:13,256 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:13,274 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-19 10:45:15,821 p=229405 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:45:15,856 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-19 10:45:16,019 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,038 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-19 10:45:16,053 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,072 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-19 10:45:16,453 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,472 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-19 10:45:16,508 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,526 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-19 10:45:16,541 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,559 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-19 10:45:16,573 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,592 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-19 10:45:16,615 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,633 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-19 10:45:16,656 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,674 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-19 10:45:16,688 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:16,723 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:45:16,757 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:16,790 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-19 10:45:17,524 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:17,543 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-19 10:45:17,700 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:17,719 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:45:17,732 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:17,752 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:45:17,767 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:17,785 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-19 10:45:17,942 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:17,960 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-19 10:45:17,989 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:18,007 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-19 10:45:18,036 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:18,055 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-19 10:45:18,068 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:18,087 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-19 10:45:18,101 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:18,119 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 10:45:18,133 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:18,152 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-19 10:45:18,173 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:18,192 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-19 10:45:18,548 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:18,567 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-19 10:45:18,595 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:18,614 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-19 10:45:18,952 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 10:45:18,972 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-19 10:45:19,159 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 10:45:19,179 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-19 10:45:19,358 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:19,377 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-19 10:45:19,469 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:19,501 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-19 10:45:19,540 p=229405 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-19 10:45:19,556 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:19,575 p=229405 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 10:45:19,591 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:19,611 p=229405 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 10:45:31,698 p=229405 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 10:45:31,734 p=229405 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-19 10:45:31,956 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-19 10:45:32,003 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:32,038 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-19 10:45:33,009 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,027 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-19 10:45:33,049 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,068 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-19 10:45:33,093 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,111 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-19 10:45:33,127 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,151 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-19 10:45:33,173 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,196 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-19 10:45:33,239 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:33,310 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-19 10:45:33,545 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,566 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-19 10:45:33,593 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,612 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-19 10:45:33,641 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,660 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-19 10:45:33,899 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:33,920 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-19 10:45:33,946 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 10:45:33,965 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-19 10:45:34,010 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:34,052 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-19 10:45:34,077 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:34,096 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-19 10:45:34,501 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:34,520 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-19 10:45:34,556 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-19 10:45:34,598 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:34,641 p=229405 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-19 10:45:34,841 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:34,881 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-19 10:45:35,065 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:35,085 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-19 10:45:35,461 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:35,484 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-19 10:45:35,666 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:35,685 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-19 10:45:35,854 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:35,873 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-19 10:45:35,916 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:35,950 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-19 10:45:36,307 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:45:36,333 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-19 10:45:36,538 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 10:45:36,562 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-19 10:45:36,771 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:36,793 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-19 10:45:36,813 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:36,832 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-19 10:45:37,159 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:37,200 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-19 10:45:37,843 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:37,862 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-19 10:45:38,063 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:38,082 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-19 10:45:38,097 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:38,117 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-19 10:45:38,285 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:38,315 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-19 10:45:38,479 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:38,498 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-19 10:45:38,656 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:38,676 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-19 10:45:38,844 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:38,868 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-19 10:45:39,139 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:39,178 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 10:45:39,212 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:39,231 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 10:45:39,266 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:39,285 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 10:45:39,304 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:39,323 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 10:45:39,357 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:39,376 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 10:45:39,457 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:39,513 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 10:45:39,569 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:39,601 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 10:45:40,350 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:40,369 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 10:45:40,931 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:40,951 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:45:40,964 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:40,984 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:45:41,273 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:41,293 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 10:45:41,309 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:41,329 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 10:45:42,049 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:42,071 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 10:45:42,115 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:42,152 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 10:45:42,346 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 10:45:42,367 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 10:45:42,681 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 10:45:42,702 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 10:45:42,939 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:42,958 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 10:45:43,247 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:43,267 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 10:45:43,286 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:43,306 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 10:45:43,650 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:43,669 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 10:45:44,001 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:44,020 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 10:45:44,190 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:44,209 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 10:45:44,223 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:44,245 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 10:45:44,624 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:44,643 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 10:45:44,677 p=229405 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 10:45:44,711 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 10:45:44,724 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:44,744 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 10:45:44,769 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:44,788 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 10:45:44,815 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:44,834 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 10:45:45,004 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:45,023 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 10:45:45,048 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:45,067 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 10:45:45,252 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:45,270 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 10:45:45,299 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:45,318 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 10:45:45,332 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:45,351 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 10:45:45,372 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:45,391 p=229405 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 10:45:45,405 p=229405 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 10:45:45,474 p=229405 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-19 10:45:45,648 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:45,667 p=229405 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-19 10:45:46,416 p=229405 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 10:45:46,452 p=229405 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 10:45:46,453 p=229405 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=174  changed=3    unreachable=0    failed=0    skipped=106  rescued=0    ignored=0   
2023-04-19 12:17:34,039 p=236014 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 12:17:34,118 p=236014 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 12:17:34,133 p=236014 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 12:17:35,334 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:35,340 p=236014 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 12:17:36,291 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:36,309 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:17:36,334 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:36,343 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 12:17:36,366 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:36,372 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 12:17:36,402 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:36,409 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 12:17:36,431 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:36,437 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 12:17:37,214 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:37,221 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 12:17:37,526 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:37,533 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 12:17:37,580 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:37,587 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 12:17:38,438 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:38,446 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 12:17:38,470 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:38,478 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 12:17:38,511 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:38,520 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 12:17:38,551 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:38,559 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 12:17:38,588 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:38,595 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:17:38,611 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:38,617 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 12:17:38,909 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:38,915 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 12:17:39,214 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:39,220 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 12:17:39,239 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:39,246 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 12:17:39,433 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:39,440 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 12:17:39,903 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:39,909 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 12:17:40,295 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:40,302 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:17:40,335 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:40,352 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 12:17:40,572 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 12:17:40,733 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 12:17:40,745 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 12:17:40,918 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:40,924 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 12:17:41,283 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 12:17:41,292 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 12:17:41,633 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 12:17:41,641 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 12:17:42,004 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:42,011 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 12:17:42,339 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:42,346 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 12:17:42,523 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:42,531 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 12:17:43,069 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:43,081 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 12:17:43,106 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 12:17:43,108 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:43,114 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 12:17:43,127 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:43,133 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 12:17:43,167 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 12:17:43,169 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:43,176 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 12:17:43,566 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:17:43,575 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 12:17:43,588 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:43,594 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 12:17:43,617 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:43,625 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 12:17:43,637 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:43,643 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 12:17:44,017 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:17:44,026 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 12:17:44,037 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:44,105 p=236014 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 12:17:44,178 p=236014 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 12:17:44,993 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:45,011 p=236014 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 12:17:45,784 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:45,803 p=236014 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 12:17:45,817 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:45,842 p=236014 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 12:17:46,636 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:46,654 p=236014 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-19 12:17:47,332 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:47,386 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 12:17:47,944 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:47,964 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 12:17:47,984 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,002 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 12:17:48,221 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,241 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 12:17:48,431 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,450 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 12:17:48,501 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,521 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 12:17:48,537 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,559 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 12:17:48,576 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,596 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 12:17:48,613 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,633 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 12:17:48,650 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,671 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 12:17:48,687 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,706 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 12:17:48,742 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:48,780 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 12:17:48,793 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,813 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 12:17:48,849 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 12:17:48,863 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:48,899 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-19 12:17:49,327 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:49,346 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-19 12:17:49,361 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:49,381 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-19 12:17:49,401 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:49,428 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-19 12:17:49,448 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:49,485 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-19 12:17:49,502 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:49,522 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-19 12:17:49,590 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:49,627 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-19 12:17:50,415 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:50,441 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-19 12:17:50,457 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:50,476 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 12:17:50,551 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:50,572 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:17:50,591 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:50,610 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 12:17:50,643 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:50,676 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 12:17:50,707 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 12:17:50,713 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 12:17:50,714 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 12:17:50,716 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:50,735 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-19 12:17:50,798 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:50,839 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-19 12:17:51,614 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:51,636 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-19 12:17:51,657 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:51,676 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 12:17:51,753 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:51,773 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:17:51,791 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:51,812 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 12:17:51,851 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:51,886 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 12:17:51,912 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 12:17:51,916 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 12:17:51,918 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 12:17:51,920 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:51,939 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-19 12:17:51,954 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:51,973 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-19 12:17:52,761 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:52,781 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:17:52,799 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:52,819 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-19 12:17:52,837 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:52,857 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-19 12:17:53,312 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:53,331 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-19 12:17:53,368 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:53,401 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-19 12:17:53,580 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:53,601 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-19 12:17:53,628 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:53,647 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-19 12:17:53,954 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:53,973 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-19 12:17:53,988 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:54,007 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-19 12:17:54,293 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:54,312 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-19 12:17:54,639 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:54,675 p=236014 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 12:17:54,988 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:55,007 p=236014 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 12:17:55,825 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:55,861 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 12:17:55,880 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 12:17:55,899 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 12:17:55,947 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:55,970 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 12:17:56,005 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:56,025 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 12:17:56,061 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 12:17:56,065 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 12:17:56,072 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 12:17:56,083 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 12:17:56,093 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 12:17:56,104 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 12:17:56,109 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 12:17:56,112 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 12:17:56,116 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 12:17:56,137 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 12:17:56,199 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 12:17:56,230 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 12:17:56,263 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 12:17:56,292 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 12:17:56,294 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:56,320 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 12:17:56,400 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 12:17:56,443 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 12:17:56,484 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 12:17:56,505 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 12:17:56,560 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:56,597 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 12:17:56,707 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:56,727 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 12:17:57,286 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:57,305 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 12:17:57,413 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:17:57,432 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 12:17:57,780 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:17:57,940 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 12:17:57,962 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 12:17:58,157 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:17:58,313 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 12:17:58,336 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 12:17:58,418 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:58,437 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 12:17:58,455 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:58,474 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 12:17:58,511 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 12:17:58,548 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 12:17:58,903 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:17:58,925 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 12:17:59,274 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 12:17:59,602 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 12:17:59,912 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 12:18:00,231 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 12:18:00,562 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 12:18:00,587 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 12:18:00,961 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 12:18:01,271 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 12:18:01,627 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 12:18:01,963 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 12:18:02,289 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 12:18:02,621 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 12:18:02,967 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 12:18:03,276 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 12:18:03,616 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 12:18:03,937 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 12:18:03,959 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 12:18:04,025 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 12:18:04,064 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 12:18:05,677 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:18:05,696 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 12:18:05,802 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:18:05,821 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 12:18:07,633 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:18:07,653 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 12:18:09,525 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:18:09,544 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 12:18:09,646 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:18:09,669 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 12:18:09,684 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:18:09,702 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 12:18:09,716 p=236014 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:18:09,734 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 12:18:09,791 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 12:18:09,845 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 12:18:09,964 p=236014 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 12:18:10,001 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 12:18:10,433 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:18:10,452 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 12:18:10,649 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:18:10,671 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 12:18:11,212 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 12:18:12,025 p=236014 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/config/tpv_rules_local.yml[0m
[0;32m[0m[0;36m@@ -7,6 +7,8 @@[0m
[0;36m[0m     abstract: true
     cores: 1
     mem: cores * 4
[0;32m+    params:[0m
[0;32m[0m[0;32m+      walltime: 8[0m
[0;32m[0m   .*testing.*:
     cores: 2
     mem: cores * 4
[0;36m@@ -19,6 +21,13 @@[0m
[0;36m[0m           not user or user.email not in admin_users
         fail: Unauthorized. Only admins can execute this tool.
 
[0;32m+      - id: resource_params_defined[0m
[0;32m[0m[0;32m+        if: |[0m
[0;32m[0m[0;32m+          param_dict = job.get_param_values(app)[0m
[0;32m[0m[0;32m+          param_dict.get('__job_resource', {}).get('__job_resource__select') == 'yes'[0m
[0;32m[0m[0;32m+        cores: int(job.get_param_values(app)['__job_resource']['cores'])[0m
[0;32m[0m[0;32m+        params:[0m
[0;32m[0m[0;32m+           walltime: "{int(job.get_param_values(app)['__job_resource']['time'])}"[0m
[0;32m[0m destinations:
   local_env:
     runner: local_runner
[0;36m@@ -45,7 +54,6 @@[0m
[0;36m[0m     max_cores: 2
     max_mem: 8
     params:
[0;31m-      native_specification: --nodes=1 --ntasks=1 --cpus-per-task={cores}[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;32m+      native_specification: --nodes=1 --ntasks=1 --cpus-per-task={cores} --time={params['walltime']}:00:00[0m
[0;32m[0m   
 


2023-04-19 12:18:12,027 p=236014 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 12:18:12,052 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 12:18:12,604 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 12:18:12,625 p=236014 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 12:18:13,178 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 12:18:13,644 p=236014 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 12:18:13,815 p=236014 u=ubuntu n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-04-19 12:18:13,816 p=236014 u=ubuntu n=ansible | failed: [gat-20.eu.galaxy.training] (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'}) => changed=false 
  ansible_loop_var: item
  item:
    dest: /srv/galaxy/config/job_resource_params_conf.xml
    src: templates/galaxy/config/job_resource_params_conf.xml.j2
  msg: |-
    Could not find or access 'templates/galaxy/config/job_resource_params_conf.xml.j2'
    Searched in:
            /home/ubuntu/galaxy/roles/galaxyproject.galaxy/templates/templates/galaxy/config/job_resource_params_conf.xml.j2
            /home/ubuntu/galaxy/roles/galaxyproject.galaxy/templates/galaxy/config/job_resource_params_conf.xml.j2
            /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/templates/templates/galaxy/config/job_resource_params_conf.xml.j2
            /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/templates/galaxy/config/job_resource_params_conf.xml.j2
            /home/ubuntu/galaxy/templates/templates/galaxy/config/job_resource_params_conf.xml.j2
            /home/ubuntu/galaxy/templates/galaxy/config/job_resource_params_conf.xml.j2 on the Ansible Controller.
    If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-04-19 12:18:13,819 p=236014 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 12:18:13,819 p=236014 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=77   changed=1    unreachable=0    failed=1    skipped=45   rescued=0    ignored=0   
2023-04-19 12:19:19,759 p=238632 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 12:19:19,850 p=238632 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 12:19:19,869 p=238632 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 12:19:20,991 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:20,997 p=238632 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 12:19:21,980 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:21,997 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:19:22,026 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:22,036 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 12:19:22,059 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:22,066 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 12:19:22,088 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:22,095 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 12:19:22,117 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:22,124 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 12:19:22,929 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:22,937 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 12:19:23,244 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:23,251 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 12:19:23,292 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:23,298 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 12:19:24,102 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,107 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 12:19:24,132 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,138 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 12:19:24,172 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,179 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 12:19:24,205 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,212 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 12:19:24,238 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,244 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:19:24,258 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,264 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 12:19:24,556 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,563 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 12:19:24,847 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,853 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 12:19:24,875 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:24,884 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 12:19:25,070 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:25,077 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 12:19:25,559 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:25,566 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 12:19:25,937 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:25,944 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:19:25,977 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:25,989 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 12:19:26,200 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 12:19:26,362 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 12:19:26,370 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 12:19:26,556 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:26,563 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 12:19:26,909 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 12:19:26,918 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 12:19:27,269 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 12:19:27,277 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 12:19:27,623 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:27,630 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 12:19:27,964 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:27,971 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 12:19:28,141 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:28,148 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 12:19:28,657 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:28,669 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 12:19:28,694 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 12:19:28,698 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:28,704 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 12:19:28,717 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:28,724 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 12:19:28,760 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 12:19:28,762 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:28,769 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 12:19:29,160 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:19:29,171 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 12:19:29,183 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:29,189 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 12:19:29,214 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:29,220 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 12:19:29,232 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:29,238 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 12:19:29,644 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:19:29,653 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 12:19:29,664 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:29,753 p=238632 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 12:19:29,804 p=238632 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 12:19:30,579 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:30,597 p=238632 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 12:19:31,344 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:31,363 p=238632 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 12:19:31,377 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:31,395 p=238632 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 12:19:32,160 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:32,178 p=238632 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-19 12:19:32,870 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:32,926 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 12:19:33,501 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:33,520 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 12:19:33,539 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:33,558 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 12:19:33,765 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:33,784 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 12:19:33,970 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:33,988 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 12:19:34,049 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,068 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 12:19:34,083 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,102 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 12:19:34,117 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,136 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 12:19:34,151 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,172 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 12:19:34,188 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,207 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 12:19:34,223 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,242 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 12:19:34,275 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:34,310 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 12:19:34,322 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,341 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 12:19:34,376 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 12:19:34,388 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,424 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-19 12:19:34,854 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,873 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-19 12:19:34,886 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,910 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-19 12:19:34,928 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:34,946 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-19 12:19:34,963 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:35,000 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-19 12:19:35,015 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:35,035 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-19 12:19:35,103 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:35,136 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-19 12:19:35,898 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:35,924 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-19 12:19:35,941 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:35,960 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 12:19:36,033 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:36,058 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:19:36,079 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:36,098 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 12:19:36,130 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:36,161 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 12:19:36,182 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 12:19:36,186 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 12:19:36,188 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 12:19:36,190 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:36,209 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-19 12:19:36,268 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:36,305 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-19 12:19:37,051 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:37,071 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-19 12:19:37,085 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:37,104 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 12:19:37,172 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:37,190 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:19:37,205 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:37,225 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 12:19:37,256 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:37,289 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 12:19:37,314 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 12:19:37,317 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 12:19:37,320 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 12:19:37,322 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:37,340 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-19 12:19:37,355 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:37,375 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-19 12:19:38,130 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:38,149 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:19:38,165 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:38,184 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-19 12:19:38,201 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:38,220 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-19 12:19:38,711 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:38,731 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-19 12:19:38,770 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:38,802 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-19 12:19:38,973 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:38,993 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-19 12:19:39,015 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:39,034 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-19 12:19:39,328 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:39,367 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-19 12:19:39,381 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:39,400 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-19 12:19:39,702 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:39,720 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-19 12:19:40,009 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:40,046 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 12:19:40,338 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:40,357 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 12:19:41,104 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:41,141 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 12:19:41,160 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 12:19:41,178 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 12:19:41,221 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:41,240 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 12:19:41,276 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:41,295 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 12:19:41,325 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 12:19:41,336 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 12:19:41,346 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 12:19:41,356 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 12:19:41,363 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 12:19:41,366 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 12:19:41,373 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 12:19:41,379 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 12:19:41,383 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 12:19:41,404 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 12:19:41,466 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 12:19:41,509 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 12:19:41,542 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 12:19:41,572 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 12:19:41,573 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:41,592 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 12:19:41,671 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 12:19:41,714 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 12:19:41,755 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 12:19:41,775 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 12:19:41,827 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:41,863 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 12:19:41,964 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:41,982 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 12:19:42,542 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:42,561 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 12:19:42,663 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:42,681 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 12:19:42,976 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:19:43,131 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 12:19:43,152 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 12:19:43,335 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:19:43,484 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 12:19:43,506 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 12:19:43,589 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:43,608 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 12:19:43,625 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:43,643 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 12:19:43,679 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:43,718 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 12:19:44,074 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:44,093 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 12:19:44,443 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 12:19:44,781 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 12:19:45,095 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 12:19:45,418 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 12:19:45,743 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 12:19:45,765 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 12:19:46,117 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 12:19:46,433 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 12:19:46,738 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 12:19:47,052 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 12:19:47,369 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 12:19:47,702 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 12:19:48,021 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 12:19:48,329 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 12:19:48,651 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 12:19:48,952 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 12:19:48,973 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 12:19:49,039 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:49,082 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 12:19:50,321 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:50,340 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 12:19:50,447 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:50,467 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 12:19:52,272 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:52,292 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 12:19:54,121 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:54,141 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 12:19:54,242 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:54,265 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 12:19:54,278 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:54,299 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 12:19:54,313 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:54,332 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 12:19:54,414 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:54,461 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 12:19:54,587 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 12:19:54,629 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 12:19:55,034 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:55,054 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 12:19:55,266 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:55,289 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 12:19:55,804 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 12:19:56,259 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 12:19:56,280 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 12:19:56,766 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 12:19:56,787 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 12:19:57,310 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 12:19:57,792 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 12:19:58,508 p=238632 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-238632ma4z7yx1/tmpzvbr7hv0/job_resource_params_conf.xml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,7 @@[0m
[0;36m[0m[0;32m+<parameters>[0m
[0;32m[0m[0;32m+    <param label="Cores" name="cores" type="select" help="Number of cores to run job on.">[0m
[0;32m[0m[0;32m+        <option value="1">1 (default)</option>[0m
[0;32m[0m[0;32m+        <option value="2">2</option>[0m
[0;32m[0m[0;32m+    </param>[0m
[0;32m[0m[0;32m+  <param label="Time" name="time" type="integer" size="3" min="1" max="24" value="1" help="Maximum job time in hours, 'walltime' value (1-24). Leave blank to use default value." />[0m
[0;32m[0m[0;32m+</parameters>[0m
[0;32m[0m

2023-04-19 12:19:58,510 p=238632 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-19 12:19:58,531 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 12:19:59,028 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 12:19:59,049 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 12:19:59,548 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:59,567 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 12:19:59,752 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:19:59,770 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 12:19:59,869 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:59,887 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 12:19:59,900 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:59,919 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 12:19:59,931 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:59,950 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 12:19:59,963 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:19:59,982 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 12:19:59,994 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:00,013 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 12:20:00,551 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:00,569 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 12:20:00,680 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:00,699 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 12:20:00,801 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:00,820 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 12:20:01,656 p=238632 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-238632ma4z7yx1/tmpj0mgq4hs/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -72,6 +72,13 @@[0m
[0;36m[0m         handling:
             assign:
             - db-skip-locked
[0;32m+        resources:[0m
[0;32m[0m[0;32m+            default: default[0m
[0;32m[0m[0;32m+            groups:[0m
[0;32m[0m[0;32m+                default: [][0m
[0;32m[0m[0;32m+                testing:[0m
[0;32m[0m[0;32m+                - cores[0m
[0;32m[0m[0;32m+                - time[0m
[0;32m[0m         runners:
             local_runner:
                 load: galaxy.jobs.runners.local:LocalJobRunner
[0;36m@@ -83,6 +90,7 @@[0m
[0;36m[0m         -   class: local
             environment: local_env
     job_metrics_config_file: /srv/galaxy/config/job_metrics_conf.yml
[0;32m+    job_resource_params_file: /srv/galaxy/config/job_resource_params_conf.xml[0m
[0;32m[0m     job_working_directory: /data/jobs
     library_import_dir: /libraries/admin
     logo_src: https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png


2023-04-19 12:20:01,656 p=238632 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 12:20:01,676 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 12:20:01,729 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:01,779 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 12:20:03,487 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:03,507 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 12:20:05,349 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:05,369 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 12:20:10,631 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:10,650 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 12:20:11,237 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:11,257 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 12:20:12,923 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:12,944 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 12:20:13,049 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:13,073 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 12:20:13,125 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:13,177 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 12:20:13,283 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:13,304 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 12:20:13,815 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 12:20:13,836 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 12:20:14,286 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 12:20:14,592 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 12:20:14,613 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 12:20:15,003 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 12:20:15,312 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 12:20:15,334 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 12:20:15,369 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:15,423 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 12:20:16,807 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:16,827 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 12:20:18,146 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:18,165 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 12:20:18,274 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:18,292 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 12:20:18,391 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:18,410 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 12:20:18,479 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:18,536 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 12:20:18,873 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:18,893 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 12:20:19,219 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:19,243 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 12:20:19,570 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:19,589 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 12:20:19,944 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:19,963 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 12:20:20,147 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:20,166 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 12:20:20,365 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:20,387 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 12:20:20,489 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:20,509 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 12:20:20,619 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:20,638 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 12:20:20,743 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:20,763 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 12:20:20,880 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:20,899 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 12:20:21,001 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:21,020 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 12:20:21,121 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:21,141 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 12:20:21,243 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:21,263 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 12:20:21,371 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:21,391 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 12:20:21,406 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:21,425 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 12:20:21,465 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:21,536 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 12:20:21,643 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:21,662 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 12:20:22,295 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:22,316 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 12:20:22,338 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:22,358 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 12:20:22,374 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:22,393 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 12:20:22,431 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:22,491 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 12:20:22,915 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:22,935 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 12:20:23,055 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:23,092 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] *********************
2023-04-19 12:20:23,300 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:23,320 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] **************
2023-04-19 12:20:23,666 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:23,685 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] ***********
2023-04-19 12:20:26,312 p=238632 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 12:20:26,349 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 12:20:26,547 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:26,567 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 12:20:26,590 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:26,611 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 12:20:27,084 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:27,104 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 12:20:27,148 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:27,167 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 12:20:27,186 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:27,207 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 12:20:27,226 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:27,247 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 12:20:27,276 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:27,296 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 12:20:27,326 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:27,350 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 12:20:27,369 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:27,407 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 12:20:27,447 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:27,480 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 12:20:28,380 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:28,401 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 12:20:28,596 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:28,616 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 12:20:28,631 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:28,653 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 12:20:28,671 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:28,692 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 12:20:28,877 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:28,897 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 12:20:28,930 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:28,950 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 12:20:28,985 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:29,005 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 12:20:29,023 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:29,043 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 12:20:29,060 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:29,079 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 12:20:29,097 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:29,116 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 12:20:29,142 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:29,161 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 12:20:29,520 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:29,540 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 12:20:29,571 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:29,590 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 12:20:29,952 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 12:20:29,974 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 12:20:30,173 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 12:20:30,195 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 12:20:30,394 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:30,413 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 12:20:30,495 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:30,526 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 12:20:30,559 p=238632 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *******************
2023-04-19 12:20:30,573 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:30,593 p=238632 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 12:20:30,609 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:30,629 p=238632 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 12:20:30,646 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:30,665 p=238632 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 12:20:31,336 p=238632 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 12:20:31,358 p=238632 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 12:20:48,348 p=238632 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 12:20:48,370 p=238632 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 12:20:48,564 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 12:20:48,633 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:48,667 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 12:20:49,608 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:49,629 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 12:20:49,657 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:49,678 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 12:20:49,705 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:49,730 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 12:20:49,766 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:49,789 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 12:20:49,814 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:49,840 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 12:20:49,894 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:49,959 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 12:20:50,217 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:50,238 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 12:20:50,270 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:50,291 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 12:20:50,321 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:50,347 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 12:20:50,596 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:50,619 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 12:20:50,651 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 12:20:50,672 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 12:20:50,724 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:50,765 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 12:20:50,790 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:50,810 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 12:20:51,208 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:51,228 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 12:20:51,263 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 12:20:51,302 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:51,346 p=238632 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 12:20:51,588 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:51,628 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 12:20:51,831 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:51,856 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 12:20:52,264 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:52,290 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 12:20:52,490 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:52,511 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 12:20:52,719 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:52,740 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 12:20:52,784 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:52,817 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 12:20:53,194 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:20:53,223 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 12:20:53,439 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:20:53,465 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 12:20:53,708 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:53,729 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 12:20:53,758 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:53,779 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 12:20:54,085 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:54,122 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 12:20:54,765 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:54,794 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 12:20:55,027 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:55,047 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 12:20:55,065 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:55,088 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 12:20:55,275 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:55,294 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 12:20:55,504 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:55,530 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 12:20:55,722 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:55,747 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 12:20:55,970 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:55,994 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 12:20:56,315 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:56,351 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 12:20:56,391 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:56,412 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 12:20:56,455 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:56,475 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 12:20:56,499 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:56,521 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 12:20:56,566 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:56,586 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 12:20:56,672 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:56,731 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 12:20:56,845 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:56,877 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 12:20:57,717 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:57,738 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 12:20:58,382 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:58,408 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 12:20:58,425 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:58,446 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 12:20:58,761 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:58,782 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 12:20:58,802 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:20:58,823 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 12:20:59,663 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:20:59,684 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 12:20:59,723 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 12:20:59,761 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 12:20:59,974 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 12:20:59,996 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 12:21:00,371 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 12:21:00,394 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 12:21:00,694 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:00,715 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 12:21:01,018 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:01,039 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 12:21:01,059 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:01,080 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 12:21:01,453 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:01,473 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 12:21:01,858 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:01,878 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 12:21:02,070 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:02,090 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 12:21:02,108 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:02,129 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 12:21:02,522 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:02,543 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 12:21:02,585 p=238632 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 12:21:02,621 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 12:21:02,637 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:02,659 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 12:21:02,688 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:02,708 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 12:21:02,738 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:02,757 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 12:21:02,964 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:02,984 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 12:21:03,014 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:03,034 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 12:21:03,257 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:03,277 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 12:21:03,311 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:03,330 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 12:21:03,347 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:03,368 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 12:21:03,384 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:03,404 p=238632 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 12:21:03,420 p=238632 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:21:03,496 p=238632 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 12:21:03,704 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:03,725 p=238632 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *****************************************************
2023-04-19 12:21:04,506 p=238632 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:21:04,552 p=238632 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 12:21:04,552 p=238632 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=175  changed=5    unreachable=0    failed=0    skipped=107  rescued=0    ignored=0   
2023-04-19 12:27:11,776 p=244381 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 12:27:11,856 p=244381 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 12:27:11,871 p=244381 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 12:27:12,947 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:12,954 p=244381 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 12:27:13,935 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:13,952 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:27:13,977 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:13,986 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 12:27:14,012 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:14,018 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 12:27:14,045 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:14,052 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 12:27:14,074 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:14,080 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 12:27:14,886 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:14,893 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 12:27:15,196 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:15,203 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 12:27:15,246 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:15,253 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 12:27:16,025 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,032 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 12:27:16,057 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,064 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 12:27:16,096 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,102 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 12:27:16,129 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,135 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 12:27:16,160 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,166 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:27:16,179 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,185 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 12:27:16,479 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,485 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 12:27:16,759 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,765 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 12:27:16,784 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,790 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 12:27:16,957 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:16,964 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 12:27:17,426 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:17,432 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 12:27:17,808 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:17,815 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 12:27:17,849 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:17,862 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 12:27:18,052 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 12:27:18,201 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 12:27:18,209 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 12:27:18,392 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:18,399 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 12:27:18,752 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 12:27:18,761 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 12:27:19,094 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 12:27:19,103 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 12:27:19,473 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:19,481 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 12:27:19,831 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:19,837 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 12:27:20,010 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:20,017 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 12:27:20,605 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:20,618 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 12:27:20,647 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 12:27:20,650 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:20,657 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 12:27:20,672 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:20,679 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 12:27:20,720 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 12:27:20,723 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:20,731 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 12:27:21,133 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:27:21,142 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 12:27:21,157 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:21,163 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 12:27:21,193 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:21,200 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 12:27:21,214 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:21,221 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 12:27:21,645 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:27:21,655 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 12:27:21,671 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:21,739 p=244381 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 12:27:21,793 p=244381 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 12:27:22,854 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:22,872 p=244381 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 12:27:23,775 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:23,793 p=244381 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 12:27:23,807 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:23,828 p=244381 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 12:27:24,734 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:24,754 p=244381 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-19 12:27:25,503 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:25,561 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 12:27:26,019 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,038 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 12:27:26,062 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,083 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 12:27:26,326 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,346 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 12:27:26,559 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,580 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 12:27:26,634 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,653 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 12:27:26,672 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,697 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 12:27:26,716 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,736 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 12:27:26,755 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,774 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 12:27:26,791 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,810 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 12:27:26,830 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,851 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 12:27:26,888 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:26,927 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 12:27:26,941 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:26,960 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 12:27:26,994 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 12:27:27,008 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:27,043 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-19 12:27:27,490 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:27,508 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-19 12:27:27,527 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:27,546 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-19 12:27:27,568 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:27,590 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-19 12:27:27,611 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:27,648 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-19 12:27:27,667 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:27,686 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-19 12:27:27,754 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:27,787 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-19 12:27:28,701 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:28,720 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-19 12:27:28,738 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:28,757 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 12:27:28,830 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:28,849 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:27:28,869 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:28,888 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 12:27:28,922 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:28,955 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 12:27:28,977 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 12:27:28,981 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 12:27:28,983 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 12:27:28,984 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:29,003 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-19 12:27:29,064 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:29,103 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-19 12:27:29,986 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:30,008 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-19 12:27:30,027 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:30,049 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-19 12:27:30,127 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:30,152 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:27:30,170 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:30,190 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-19 12:27:30,228 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:30,261 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-19 12:27:30,287 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 12:27:30,289 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 12:27:30,291 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 12:27:30,294 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:30,313 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-19 12:27:30,334 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:30,354 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-19 12:27:31,283 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:31,303 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-19 12:27:31,322 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:31,345 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-19 12:27:31,367 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:31,395 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-19 12:27:31,858 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:31,880 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-19 12:27:31,925 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:31,964 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-19 12:27:32,147 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:32,169 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-19 12:27:32,194 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:32,214 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-19 12:27:32,550 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:32,574 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-19 12:27:32,593 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:32,613 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-19 12:27:32,933 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:32,952 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-19 12:27:33,288 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:33,325 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 12:27:33,655 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:33,674 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 12:27:34,529 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:34,570 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 12:27:34,590 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 12:27:34,611 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 12:27:34,657 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:34,679 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 12:27:34,720 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:34,739 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 12:27:34,779 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 12:27:34,789 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 12:27:34,801 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 12:27:34,808 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 12:27:34,820 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 12:27:34,830 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 12:27:34,841 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 12:27:34,852 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 12:27:34,856 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 12:27:34,878 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 12:27:34,944 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 12:27:34,976 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 12:27:35,009 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 12:27:35,038 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 12:27:35,041 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:35,060 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 12:27:35,147 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 12:27:35,188 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 12:27:35,228 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 12:27:35,249 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 12:27:35,306 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:35,342 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 12:27:35,464 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:35,484 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 12:27:36,103 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:36,123 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 12:27:36,231 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:36,251 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 12:27:36,602 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:27:36,771 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 12:27:36,793 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 12:27:37,003 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:27:37,181 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 12:27:37,203 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 12:27:37,288 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:37,307 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 12:27:37,329 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:37,350 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 12:27:37,391 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:37,432 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 12:27:37,823 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:37,843 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 12:27:38,224 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 12:27:38,564 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 12:27:38,904 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 12:27:39,221 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 12:27:39,547 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 12:27:39,570 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 12:27:39,940 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 12:27:40,261 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 12:27:40,608 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 12:27:40,948 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 12:27:41,264 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 12:27:41,596 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 12:27:41,949 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 12:27:42,287 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 12:27:42,625 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 12:27:42,952 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 12:27:42,975 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 12:27:43,040 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:43,079 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 12:27:44,360 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:44,379 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 12:27:44,495 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:44,523 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 12:27:46,426 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:46,446 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 12:27:48,313 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:48,334 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 12:27:48,444 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:48,463 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 12:27:48,483 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:48,502 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 12:27:48,518 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:48,538 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 12:27:48,599 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:48,643 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 12:27:48,763 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:48,801 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 12:27:49,245 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:49,264 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 12:27:49,479 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:49,497 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 12:27:50,056 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 12:27:50,547 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 12:27:50,570 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 12:27:51,074 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 12:27:51,094 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 12:27:51,625 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 12:27:52,084 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 12:27:52,551 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-19 12:27:52,573 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 12:27:53,090 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 12:27:53,113 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 12:27:53,632 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:53,653 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 12:27:53,842 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:53,862 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 12:27:53,969 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:53,989 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 12:27:54,006 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:54,026 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 12:27:54,041 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:54,061 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 12:27:54,077 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:54,097 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 12:27:54,114 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:54,133 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 12:27:54,687 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:54,707 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 12:27:54,816 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:54,837 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 12:27:54,940 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:27:54,960 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 12:27:56,047 p=244381 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-244381wd9wc3yz/tmp69q1dzf6/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -89,6 +89,9 @@[0m
[0;36m[0m         tools:
         -   class: local
             environment: local_env
[0;32m+        -   environement: tpv_dispatcher[0m
[0;32m[0m[0;32m+            id: testing[0m
[0;32m[0m[0;32m+            resources: testing[0m
[0;32m[0m     job_metrics_config_file: /srv/galaxy/config/job_metrics_conf.yml
     job_resource_params_file: /srv/galaxy/config/job_resource_params_conf.xml
     job_working_directory: /data/jobs


2023-04-19 12:27:56,047 p=244381 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 12:27:56,067 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 12:27:56,123 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 12:27:56,181 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 12:27:57,918 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:57,939 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 12:27:59,865 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:27:59,886 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 12:28:05,150 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:05,169 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 12:28:05,778 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:05,798 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 12:28:07,568 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:07,588 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 12:28:07,704 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:07,726 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 12:28:07,774 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:07,827 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 12:28:07,946 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:07,965 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 12:28:08,473 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 12:28:08,495 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 12:28:08,950 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 12:28:09,259 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 12:28:09,280 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 12:28:09,700 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 12:28:10,035 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 12:28:10,062 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 12:28:10,101 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:10,163 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 12:28:11,654 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:11,674 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 12:28:13,045 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:13,064 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 12:28:13,166 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:13,186 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 12:28:13,284 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:13,303 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 12:28:13,368 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:13,423 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 12:28:13,823 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:13,843 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 12:28:14,223 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:14,243 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 12:28:14,571 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:14,590 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 12:28:14,930 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:14,952 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 12:28:15,131 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:15,150 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 12:28:15,339 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:15,357 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 12:28:15,454 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:15,474 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 12:28:15,574 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:15,593 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 12:28:15,693 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:15,712 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 12:28:15,809 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:15,829 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 12:28:15,930 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:15,949 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 12:28:16,049 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:16,069 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 12:28:16,169 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:16,189 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 12:28:16,291 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:16,311 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 12:28:16,323 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:16,342 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 12:28:16,380 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:16,451 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 12:28:16,550 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:16,569 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 12:28:17,146 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:17,165 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 12:28:17,183 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:17,202 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 12:28:17,221 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:17,240 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 12:28:17,274 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:17,337 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 12:28:17,733 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:17,757 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 12:28:17,858 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:17,895 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] *********************
2023-04-19 12:28:18,078 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:18,098 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] **************
2023-04-19 12:28:18,414 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:18,433 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] ***********
2023-04-19 12:28:21,107 p=244381 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,145 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 12:28:21,331 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,352 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 12:28:21,366 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,385 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 12:28:21,757 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,779 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 12:28:21,817 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,837 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 12:28:21,852 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,870 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 12:28:21,885 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,904 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 12:28:21,926 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,946 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 12:28:21,969 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:21,989 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 12:28:22,006 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:22,046 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 12:28:22,082 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:22,115 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 12:28:22,914 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:22,934 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 12:28:23,105 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,124 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 12:28:23,139 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,158 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 12:28:23,175 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,193 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 12:28:23,379 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,400 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 12:28:23,439 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,459 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 12:28:23,494 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,514 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 12:28:23,533 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,553 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 12:28:23,575 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,597 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 12:28:23,619 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,639 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 12:28:23,672 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:23,692 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 12:28:24,094 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:24,114 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 12:28:24,144 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:24,165 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 12:28:24,534 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 12:28:24,557 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 12:28:24,781 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 12:28:24,802 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 12:28:25,011 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:25,032 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 12:28:25,120 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:25,155 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 12:28:25,191 p=244381 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *******************
2023-04-19 12:28:25,206 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:25,225 p=244381 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 12:28:25,241 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:25,261 p=244381 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 12:28:25,285 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:25,306 p=244381 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-19 12:28:25,984 p=244381 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 12:28:26,006 p=244381 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-19 12:28:43,614 p=244381 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 12:28:43,634 p=244381 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 12:28:43,832 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 12:28:43,882 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:43,918 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 12:28:44,779 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:44,801 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 12:28:44,826 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:44,850 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 12:28:44,885 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:44,904 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 12:28:44,930 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:44,955 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 12:28:44,973 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:44,993 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 12:28:45,040 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:45,102 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 12:28:45,348 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:45,369 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 12:28:45,397 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:45,418 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 12:28:45,449 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:45,469 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 12:28:45,728 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:45,751 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 12:28:45,785 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 12:28:45,806 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 12:28:45,866 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:45,910 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 12:28:45,943 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:45,964 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 12:28:46,364 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:46,384 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 12:28:46,419 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 12:28:46,466 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:46,509 p=244381 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 12:28:46,740 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:46,779 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 12:28:46,977 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:46,997 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 12:28:47,378 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:47,398 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 12:28:47,598 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:47,618 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 12:28:47,831 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:47,852 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 12:28:47,897 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:47,933 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 12:28:48,325 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:28:48,351 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 12:28:48,613 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 12:28:48,637 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 12:28:48,863 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:48,884 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 12:28:48,907 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:48,933 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 12:28:49,391 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:49,432 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 12:28:50,313 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:50,335 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 12:28:50,540 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:50,563 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 12:28:50,581 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:50,605 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 12:28:50,792 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:50,812 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 12:28:51,007 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:51,028 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 12:28:51,227 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:51,247 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 12:28:51,451 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:51,471 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 12:28:51,810 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:51,850 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 12:28:51,891 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:51,911 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 12:28:51,951 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:51,973 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 12:28:51,991 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:52,011 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 12:28:52,063 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:52,085 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 12:28:52,174 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:52,229 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 12:28:52,288 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:52,320 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 12:28:53,176 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:53,196 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 12:28:53,789 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:53,809 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 12:28:53,829 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:53,848 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 12:28:54,177 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:54,197 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 12:28:54,215 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:54,237 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 12:28:55,091 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:55,110 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 12:28:55,155 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:55,191 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 12:28:55,415 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 12:28:55,440 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 12:28:55,798 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 12:28:55,819 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 12:28:56,115 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:56,143 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 12:28:56,459 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:56,479 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 12:28:56,496 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:56,515 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 12:28:56,881 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:56,906 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 12:28:57,292 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:57,313 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 12:28:57,501 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:57,521 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 12:28:57,541 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:57,561 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 12:28:57,933 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:57,953 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 12:28:57,991 p=244381 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 12:28:58,026 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 12:28:58,043 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,070 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 12:28:58,103 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,127 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 12:28:58,157 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,179 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 12:28:58,383 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,402 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 12:28:58,436 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,455 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 12:28:58,677 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,697 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 12:28:58,728 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,747 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 12:28:58,766 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,786 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 12:28:58,804 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,823 p=244381 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 12:28:58,842 p=244381 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 12:28:58,922 p=244381 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 12:28:59,129 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:28:59,148 p=244381 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *****************************************************
2023-04-19 12:29:00,181 p=244381 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 12:29:00,226 p=244381 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 12:29:00,226 p=244381 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=175  changed=4    unreachable=0    failed=0    skipped=107  rescued=0    ignored=0   
2023-04-19 12:51:51,926 p=250238 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-19 12:51:51,926 p=250238 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-19 12:51:51,926 p=250238 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-19 12:51:51,926 p=250238 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-19 12:51:51,926 p=250238 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-19 12:51:51,927 p=250238 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-19 12:51:51,927 p=250238 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-19 12:51:51,927 p=250238 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-19 12:51:51,927 p=250238 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-19 12:51:51,927 p=250238 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-19 12:51:51,927 p=250238 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-19 12:51:51,928 p=250238 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-19 12:51:51,928 p=250238 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-19 12:51:51,928 p=250238 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) is already installed, skipping.
2023-04-19 12:51:52,073 p=250238 u=ubuntu n=ansible | - downloading role 'docker', owned by geerlingguy
2023-04-19 12:51:52,716 p=250238 u=ubuntu n=ansible | - downloading role from https://github.com/geerlingguy/ansible-role-docker/archive/6.1.0.tar.gz
2023-04-19 12:51:52,962 p=250238 u=ubuntu n=ansible | - extracting geerlingguy.docker to /home/ubuntu/galaxy/roles/geerlingguy.docker
2023-04-19 12:51:52,965 p=250238 u=ubuntu n=ansible | - geerlingguy.docker (6.1.0) was installed successfully
2023-04-19 12:51:52,965 p=250238 u=ubuntu n=ansible | - downloading role 'rabbitmqserver', owned by usegalaxy_eu
2023-04-19 12:51:53,564 p=250238 u=ubuntu n=ansible | - downloading role from https://github.com/usegalaxy-eu/ansible-rabbitmq/archive/1.4.4.tar.gz
2023-04-19 12:51:53,808 p=250238 u=ubuntu n=ansible | - extracting usegalaxy_eu.rabbitmqserver to /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver
2023-04-19 12:51:53,812 p=250238 u=ubuntu n=ansible | - usegalaxy_eu.rabbitmqserver (1.4.4) was installed successfully
2023-04-19 12:51:53,812 p=250238 u=ubuntu n=ansible | - downloading role 'pulsar', owned by galaxyproject
2023-04-19 12:51:54,407 p=250238 u=ubuntu n=ansible | - downloading role from https://github.com/galaxyproject/ansible-pulsar/archive/1.0.10.tar.gz
2023-04-19 12:51:54,639 p=250238 u=ubuntu n=ansible | - extracting galaxyproject.pulsar to /home/ubuntu/galaxy/roles/galaxyproject.pulsar
2023-04-19 12:51:54,642 p=250238 u=ubuntu n=ansible | - galaxyproject.pulsar (1.0.10) was installed successfully
2023-04-19 13:01:10,903 p=250359 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 13:01:10,991 p=250359 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 13:01:11,007 p=250359 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 13:01:12,067 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:12,078 p=250359 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 13:01:13,094 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:13,110 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:01:13,136 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:13,144 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 13:01:13,169 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:13,175 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 13:01:13,199 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:13,205 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 13:01:13,236 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:13,243 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 13:01:14,076 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:14,084 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 13:01:14,392 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:14,403 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 13:01:14,455 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:14,467 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 13:01:15,347 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:15,353 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 13:01:15,381 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:15,388 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 13:01:15,423 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:15,430 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 13:01:15,458 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:15,465 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 13:01:15,492 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:15,499 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:01:15,514 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:15,521 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 13:01:15,807 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:15,813 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 13:01:16,115 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:16,121 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 13:01:16,143 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:16,150 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 13:01:16,333 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:16,340 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 13:01:16,815 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:16,822 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 13:01:17,222 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:17,229 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:01:17,266 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:17,277 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 13:01:17,470 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 13:01:17,627 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 13:01:17,635 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 13:01:17,802 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:17,808 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 13:01:18,147 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 13:01:18,157 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 13:01:18,530 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 13:01:18,538 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 13:01:18,889 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:18,896 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 13:01:19,224 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:19,230 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 13:01:19,399 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:19,405 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 13:01:19,916 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:19,927 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 13:01:19,953 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 13:01:19,955 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:19,963 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 13:01:19,975 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:19,981 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 13:01:20,016 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 13:01:20,018 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:20,024 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 13:01:20,392 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:01:20,401 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 13:01:20,414 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:20,420 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 13:01:20,445 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:20,451 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 13:01:20,463 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:20,469 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 13:01:20,852 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:01:20,861 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 13:01:20,877 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:20,947 p=250359 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 13:01:21,003 p=250359 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 13:01:21,800 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:21,820 p=250359 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 13:01:22,557 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:22,576 p=250359 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 13:01:22,591 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:22,609 p=250359 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 13:01:23,388 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:23,406 p=250359 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 13:01:24,079 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:24,137 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 13:01:24,704 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:24,723 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 13:01:24,742 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:24,761 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 13:01:25,015 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,034 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 13:01:25,237 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,256 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 13:01:25,310 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,330 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 13:01:25,346 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,366 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 13:01:25,382 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,401 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 13:01:25,417 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,436 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 13:01:25,452 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,471 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 13:01:25,487 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,507 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 13:01:25,551 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:25,590 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 13:01:25,603 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,622 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 13:01:25,657 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 13:01:25,670 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:25,707 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 13:01:26,156 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:26,177 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 13:01:26,192 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:26,222 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 13:01:26,240 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:26,260 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 13:01:26,278 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:26,314 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 13:01:26,329 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:26,348 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 13:01:26,413 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:26,448 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 13:01:27,206 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:27,224 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 13:01:27,240 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:27,260 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 13:01:27,332 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:27,357 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:01:27,374 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:27,394 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 13:01:27,430 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:27,462 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 13:01:27,486 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 13:01:27,489 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 13:01:27,491 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 13:01:27,493 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:27,512 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 13:01:27,575 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:27,610 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 13:01:28,385 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:28,405 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 13:01:28,420 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:28,439 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 13:01:28,510 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:28,528 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:01:28,543 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:28,562 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 13:01:28,593 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:28,626 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 13:01:28,651 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 13:01:28,655 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 13:01:28,657 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 13:01:28,659 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:28,678 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 13:01:28,694 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:28,713 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 13:01:29,481 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:29,500 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:01:29,517 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:29,536 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 13:01:29,551 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:29,570 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 13:01:30,009 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:30,030 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 13:01:30,067 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:30,099 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 13:01:30,270 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:30,290 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 13:01:30,347 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:30,366 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 13:01:30,667 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:30,686 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 13:01:30,701 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:30,720 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 13:01:31,018 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:31,037 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 13:01:31,320 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:31,355 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 13:01:31,659 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:31,678 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 13:01:32,423 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:32,463 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 13:01:32,480 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 13:01:32,499 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 13:01:32,541 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:32,559 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 13:01:32,593 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:32,613 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 13:01:32,646 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 13:01:32,655 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 13:01:32,661 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 13:01:32,672 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 13:01:32,682 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 13:01:32,692 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 13:01:32,696 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 13:01:32,699 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 13:01:32,703 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 13:01:32,724 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 13:01:32,783 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 13:01:32,814 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 13:01:32,845 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 13:01:32,873 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 13:01:32,875 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:32,894 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 13:01:32,976 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 13:01:33,019 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 13:01:33,056 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 13:01:33,077 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 13:01:33,129 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:33,168 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 13:01:33,266 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:33,285 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 13:01:33,838 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:33,857 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 13:01:33,963 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:33,983 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 13:01:34,300 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:01:34,459 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 13:01:34,483 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 13:01:34,674 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:01:34,855 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 13:01:34,877 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 13:01:34,968 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:34,989 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 13:01:35,014 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:35,033 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 13:01:35,074 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:35,114 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 13:01:35,453 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:35,474 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 13:01:35,843 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 13:01:36,182 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 13:01:36,495 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 13:01:36,826 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 13:01:37,154 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 13:01:37,176 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 13:01:37,531 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 13:01:37,847 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 13:01:38,177 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 13:01:38,497 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 13:01:38,799 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 13:01:39,112 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 13:01:39,429 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 13:01:39,747 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 13:01:40,060 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 13:01:40,371 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 13:01:40,393 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 13:01:40,459 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:40,499 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 13:01:42,400 p=250359 u=ubuntu n=ansible | diff --git a/lib/galaxy/jobs/runners/__init__.py b/lib/galaxy/jobs/runners/__init__.py
index 2ec20b6ccf..53eb9bbfa5 100644
--- a/lib/galaxy/jobs/runners/__init__.py
+++ b/lib/galaxy/jobs/runners/__init__.py
@@ -36,6 +36,7 @@ from galaxy.tool_util.deps.dependencies import (
 )
 from galaxy.tool_util.output_checker import DETECTED_JOB_STATE
 from galaxy.util import (
+    asbool,
     DATABASE_MAX_STRING_SIZE,
     ExecutionTimer,
     in_directory,
@@ -334,7 +335,7 @@ class BaseJobRunner:
         output_paths = {}
         for dataset_path in job_wrapper.job_io.get_output_fnames():
             path = dataset_path.real_path
-            if job_wrapper.get_destination_configuration("outputs_to_working_directory", False):
+            if asbool(job_wrapper.get_destination_configuration("outputs_to_working_directory", False)):
                 path = dataset_path.false_path
             output_paths[dataset_path.dataset_id] = path
 

2023-04-19 13:01:42,400 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:01:42,419 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 13:01:42,605 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => 
  msg: Galaxy version changed from '1a984f27ab755b71a817f2bb95139af9fd43c7aa' to '19a4426abb8e304bab22e8559c6dfaf57f59ad90'
2023-04-19 13:01:42,624 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 13:01:44,412 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:44,431 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 13:01:46,194 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:46,217 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 13:01:48,090 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:01:48,111 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 13:01:48,128 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:48,148 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 13:01:48,164 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:48,183 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 13:01:48,279 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:48,325 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 13:01:48,460 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:48,497 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 13:01:48,945 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:48,965 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 13:01:49,167 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:49,193 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 13:01:49,728 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 13:01:50,206 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 13:01:50,230 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 13:01:50,730 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 13:01:50,753 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 13:01:51,316 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 13:01:51,808 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 13:01:52,300 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-19 13:01:52,325 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 13:01:52,828 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 13:01:52,849 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 13:01:53,411 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:53,433 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 13:01:53,620 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:53,641 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 13:01:53,752 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:53,773 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 13:01:53,790 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:53,812 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 13:01:53,831 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:53,853 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 13:01:53,870 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:53,892 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 13:01:53,912 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:53,934 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 13:01:54,517 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:54,538 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 13:01:54,645 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:54,665 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 13:01:54,776 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:01:54,795 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 13:01:55,409 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:55,430 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 13:01:55,485 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 13:01:55,537 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 13:01:57,234 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:57,254 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 13:01:59,269 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:01:59,290 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 13:02:04,821 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:04,843 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 13:02:05,478 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:05,498 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 13:02:07,355 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:07,375 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 13:02:07,476 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:07,495 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 13:02:07,545 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 13:02:07,597 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 13:02:07,701 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:07,720 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 13:02:08,237 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 13:02:08,259 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 13:02:08,709 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 13:02:09,035 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 13:02:09,057 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 13:02:09,491 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 13:02:09,793 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 13:02:09,813 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 13:02:09,849 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 13:02:09,906 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 13:02:11,342 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:11,360 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 13:02:12,793 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:12,813 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 13:02:12,940 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:12,960 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 13:02:13,075 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:13,095 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 13:02:13,176 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 13:02:13,239 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 13:02:13,606 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:13,628 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 13:02:13,971 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:13,992 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 13:02:14,350 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:14,369 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 13:02:14,764 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:14,789 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 13:02:14,985 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:15,006 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 13:02:15,210 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:15,230 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 13:02:15,430 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => 
  msg: 'Galaxy client is out of date: 1a984f27ab755b71a817f2bb95139af9fd43c7aa != 19a4426abb8e304bab22e8559c6dfaf57f59ad90'
2023-04-19 13:02:15,452 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 13:02:15,634 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_node_version.yml for gat-20.eu.galaxy.training
2023-04-19 13:02:15,685 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy Node.js version file] ****************************************************
2023-04-19 13:02:16,040 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:16,060 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy Node.js version fact] ********************************************************
2023-04-19 13:02:16,250 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:16,269 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Node.js version file version] ****************************************************
2023-04-19 13:02:16,457 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  galaxy_node_version: 18.12.1
2023-04-19 13:02:16,479 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Override Galaxy Node.js version] ********************************************************
2023-04-19 13:02:16,690 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:16,710 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check whether nodeenv is available] *****************************************************
2023-04-19 13:02:17,071 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:17,096 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 13:02:17,217 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:17,237 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 13:02:17,347 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:17,368 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install nodeenv if it doesn't exist] ****************************************************
2023-04-19 13:02:17,471 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:17,490 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report preferred Node.js version] *******************************************************
2023-04-19 13:02:17,677 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  galaxy_node_version: 18.12.1
2023-04-19 13:02:17,698 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 13:02:18,152 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:18,173 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 13:02:18,530 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:18,550 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 13:02:18,657 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:18,677 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 13:02:18,788 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:02:18,809 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 13:02:19,841 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:02:19,860 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 13:02:19,996 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_client_build_make.yml for gat-20.eu.galaxy.training
2023-04-19 13:02:20,045 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Build client] ***************************************************************************
2023-04-19 13:05:26,183 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:05:26,215 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Fetch client version] *******************************************************************
2023-04-19 13:05:26,664 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:26,684 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 13:05:26,868 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:26,888 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that client update succeeded] ****************************************************
2023-04-19 13:05:27,010 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:27,029 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 13:05:27,045 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:27,065 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 13:05:27,109 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:27,189 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 13:05:27,287 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:27,306 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 13:05:27,939 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:27,958 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 13:05:27,980 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:28,001 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 13:05:28,016 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:28,035 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 13:05:28,075 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:28,144 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 13:05:28,639 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:28,658 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 13:05:28,767 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:28,804 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-19 13:05:28,991 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:29,013 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-19 13:05:29,383 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:29,403 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-19 13:05:34,073 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:05:34,110 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-19 13:05:34,304 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:34,324 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-19 13:05:34,340 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:34,360 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-19 13:05:34,776 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:34,801 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-19 13:05:34,842 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:34,868 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-19 13:05:34,884 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:34,908 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-19 13:05:34,926 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:34,950 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-19 13:05:34,975 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:34,998 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-19 13:05:35,022 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:35,043 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-19 13:05:35,059 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:35,099 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:05:35,141 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:35,175 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-19 13:05:36,080 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,100 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-19 13:05:36,284 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,303 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:05:36,320 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,340 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:05:36,356 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,375 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-19 13:05:36,566 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,588 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-19 13:05:36,620 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,639 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-19 13:05:36,678 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,698 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-19 13:05:36,713 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,733 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-19 13:05:36,749 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,770 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:05:36,788 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,808 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-19 13:05:36,832 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:36,866 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-19 13:05:37,249 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:37,268 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-19 13:05:37,298 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:37,318 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-19 13:05:37,662 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 13:05:37,683 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-19 13:05:37,874 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 13:05:37,898 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-19 13:05:38,144 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:38,167 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-19 13:05:38,250 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:38,282 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-19 13:05:38,316 p=250359 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-19 13:05:38,334 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:38,364 p=250359 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 13:05:38,383 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:38,403 p=250359 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 13:05:53,118 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:05:53,142 p=250359 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-19 13:05:53,353 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-19 13:05:53,400 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:53,435 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-19 13:05:54,520 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:54,545 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-19 13:05:54,570 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:54,591 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-19 13:05:54,614 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:54,637 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-19 13:05:54,661 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:54,680 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-19 13:05:54,698 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:54,722 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-19 13:05:54,773 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:54,836 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-19 13:05:55,097 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:55,126 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-19 13:05:55,156 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:55,177 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-19 13:05:55,212 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:55,241 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-19 13:05:55,511 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:55,534 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-19 13:05:55,568 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 13:05:55,589 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-19 13:05:55,639 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:55,686 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-19 13:05:55,718 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:55,741 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-19 13:05:56,667 p=250359 u=ubuntu n=ansible | [0;31m--- before: /etc/letsencrypt/renewal-hooks/post/ansible.sh[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-250359m1as346t/tmp9nmmndgz[0m
[0;32m[0m[0;36m@@ -18,5 +18,8 @@[0m
[0;36m[0m chown root:root /etc/ssl/user
 cp /etc/ssl/private/privkey.pem /etc/ssl/user/privkey-www-data.pem
 chown www-data: /etc/ssl/user/privkey-www-data.pem
[0;32m+cp /etc/ssl/private/privkey.pem /etc/ssl/user/privkey-999:999.pem[0m
[0;32m[0m[0;32m+chown 999:999 /etc/ssl/user/privkey-999:999.pem[0m
[0;32m[0m # Other
 systemctl restart nginx || true
[0;32m+docker restart rabbit_hole || true[0m
[0;32m[0m

2023-04-19 13:05:56,668 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:05:56,690 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-19 13:05:56,727 p=250359 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.certbot : Execute the certificate post-renewal script] *********************************
2023-04-19 13:05:57,054 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:05:57,077 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-19 13:05:57,114 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:57,162 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-19 13:05:57,406 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:57,453 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-19 13:05:57,660 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:57,686 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-19 13:05:58,075 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:58,097 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-19 13:05:58,319 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:58,348 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-19 13:05:58,537 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:58,559 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-19 13:05:58,603 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 13:05:58,638 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-19 13:05:59,051 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:05:59,091 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-19 13:05:59,308 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:05:59,335 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-19 13:05:59,556 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:05:59,575 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-19 13:05:59,596 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:05:59,615 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-19 13:05:59,974 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:00,012 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-19 13:06:00,229 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:00,251 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:06:00,275 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:00,298 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:06:00,354 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:06:00,394 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-19 13:06:01,014 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:01,034 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-19 13:06:01,898 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:01,922 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-19 13:06:01,944 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:01,966 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-19 13:06:02,804 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:02,826 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-19 13:06:03,259 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:06:03,281 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-19 13:06:03,309 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:03,341 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-19 13:06:03,370 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:03,394 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-19 13:06:14,943 p=250359 u=ubuntu n=ansible | [0;31m--- before: /dev/null[0m
[0;31m[0m[0;32m+++ after: /etc/apt/sources.list.d/download_docker_com_linux_ubuntu.list[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable[0m
[0;32m[0m

2023-04-19 13:06:14,943 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:06:14,963 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-19 13:06:14,980 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:15,001 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-19 13:06:38,377 p=250359 u=ubuntu n=ansible | The following additional packages will be installed:
  docker-buildx-plugin docker-compose-plugin libltdl7 libslirp0 pigz
  slirp4netns
Suggested packages:
  aufs-tools cgroupfs-mount | cgroup-lite
The following NEW packages will be installed:
  containerd.io docker-buildx-plugin docker-ce docker-ce-cli
  docker-ce-rootless-extras docker-compose-plugin libltdl7 libslirp0 pigz
  slirp4netns
0 upgraded, 10 newly installed, 0 to remove and 19 not upgraded.
2023-04-19 13:06:38,377 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:06:38,399 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-19 13:06:38,431 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:38,451 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-19 13:06:38,479 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:38,499 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-19 13:06:38,532 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:38,551 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-19 13:06:38,584 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:38,605 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-19 13:06:38,921 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:38,942 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-19 13:06:38,978 p=250359 u=ubuntu n=ansible | RUNNING HANDLER [geerlingguy.docker : restart docker] ****************************************************************
2023-04-19 13:06:40,284 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:06:40,303 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:06:40,356 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-19 13:06:40,394 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-19 13:06:40,568 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:40,587 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-19 13:06:40,631 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:40,650 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-19 13:06:40,686 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:40,706 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-19 13:06:41,748 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:06:41,770 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-19 13:06:41,804 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:41,827 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-19 13:06:41,841 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:41,861 p=250359 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:06:41,880 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:41,922 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:06:41,962 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-19 13:06:42,009 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-19 13:06:42,045 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:42,064 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-19 13:06:42,082 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:42,102 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-19 13:06:42,116 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:42,135 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-19 13:06:42,314 p=250359 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /opt/rabbitmq
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 13:06:42,315 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:06:42,334 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-19 13:06:42,824 p=250359 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-250359m1as346t/tmpjsibeahg/rabbitmq.conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,12 @@[0m
[0;36m[0m[0;32m+# disables non-TLS listeners, only TLS-enabled clients will be able to connect[0m
[0;32m[0m[0;32m+listeners.tcp = none[0m
[0;32m[0m[0;32m+listeners.ssl.default  = 5671[0m
[0;32m[0m[0;32m+ssl_options.cacertfile = /etc/ssl/certs/fullchain.pem[0m
[0;32m[0m[0;32m+ssl_options.certfile   = /etc/ssl/certs/cert.pem[0m
[0;32m[0m[0;32m+ssl_options.keyfile    = /etc/ssl/user/privkey-999:999.pem[0m
[0;32m[0m[0;32m+ssl_options.verify     = verify_peer[0m
[0;32m[0m[0;32m+ssl_options.fail_if_no_peer_cert = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+management_agent.disable_metrics_collector = false[0m
[0;32m[0m[0;32m+management.disable_stats = false[0m
[0;32m[0m[0;32m+consumer_timeout = 21600000[0m
[0;32m[0m

2023-04-19 13:06:42,827 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-19 13:06:43,285 p=250359 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-250359m1as346t/tmpo9w51se_/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+796FOujp6qYRsjMj[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-19 13:06:43,287 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-19 13:06:43,309 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:06:43,351 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-19 13:06:43,385 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-19 13:06:43,434 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:06:43,452 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-19 13:06:43,468 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:06:43,487 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-19 13:06:53,920 p=250359 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-exists: false[0m
[0;31m[0m[0;31m-running: false[0m
[0;31m[0m[0;32m+exists: true[0m
[0;32m[0m[0;32m+running: true[0m
[0;32m[0m

2023-04-19 13:06:53,921 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:06:53,944 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-19 13:06:53,964 p=250359 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-19 13:06:53,965 p=250359 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-19 13:07:13,968 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:13,988 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:07:14,141 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-19 13:07:14,179 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-19 13:07:15,364 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:15,384 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-19 13:07:18,944 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-19 13:07:18,965 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-19 13:07:19,017 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-19 13:07:19,035 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-19 13:07:19,071 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-19 13:07:19,944 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:19,962 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-19 13:07:20,799 p=250359 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 65
  stderr: |-
    Error:
    Error: failed to authenticate user "admin"
    user 'admin' - invalid credentials
  stderr_lines: <omitted>
  stdout: Authenticating user "admin" ...
  stdout_lines: <omitted>
2023-04-19 13:07:20,799 p=250359 u=ubuntu n=ansible | ...ignoring
2023-04-19 13:07:20,819 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:07:21,687 p=250359 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "admin" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "admin" ...
  stdout_lines: <omitted>
2023-04-19 13:07:21,687 p=250359 u=ubuntu n=ansible | ...ignoring
2023-04-19 13:07:21,706 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:07:22,555 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:22,576 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-19 13:07:23,461 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:23,480 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-19 13:07:24,543 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:24,563 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-19 13:07:25,543 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:25,563 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-19 13:07:26,462 p=250359 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 65
  stderr: |-
    Error:
    Error: failed to authenticate user "pulsar_au"
    user 'pulsar_au' - invalid credentials
  stderr_lines: <omitted>
  stdout: Authenticating user "pulsar_au" ...
  stdout_lines: <omitted>
2023-04-19 13:07:26,462 p=250359 u=ubuntu n=ansible | ...ignoring
2023-04-19 13:07:26,481 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:07:27,344 p=250359 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "pulsar_au" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "pulsar_au" ...
  stdout_lines: <omitted>
2023-04-19 13:07:27,344 p=250359 u=ubuntu n=ansible | ...ignoring
2023-04-19 13:07:27,365 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:07:28,449 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:28,469 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-19 13:07:29,406 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:29,425 p=250359 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-19 13:07:29,444 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:29,481 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-19 13:07:30,139 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:30,158 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-19 13:07:30,354 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:30,374 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-19 13:07:30,389 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:30,409 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-19 13:07:30,585 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:30,604 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-19 13:07:30,784 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:30,803 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-19 13:07:30,979 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:30,999 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-19 13:07:31,176 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:31,195 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-19 13:07:31,511 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:31,548 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 13:07:31,585 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:31,604 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 13:07:31,641 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:31,660 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 13:07:31,675 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:31,693 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 13:07:31,730 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:31,748 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 13:07:31,830 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 13:07:31,887 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 13:07:31,942 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:07:31,975 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 13:07:32,794 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:32,814 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 13:07:33,467 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:33,486 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:07:33,501 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:33,521 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:07:33,810 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:33,829 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:07:33,845 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:33,866 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 13:07:34,674 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:34,694 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 13:07:34,727 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 13:07:34,763 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 13:07:34,962 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 13:07:34,984 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 13:07:35,339 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 13:07:35,366 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 13:07:35,630 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:35,650 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 13:07:35,933 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:35,952 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 13:07:35,967 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:35,987 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 13:07:36,340 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:36,360 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 13:07:36,699 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:36,718 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 13:07:36,888 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:36,907 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 13:07:36,921 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:36,941 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 13:07:37,278 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:37,297 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 13:07:37,334 p=250359 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 13:07:37,371 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 13:07:37,388 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:37,408 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 13:07:37,434 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:37,457 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 13:07:37,485 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:37,504 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 13:07:37,680 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:37,699 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 13:07:37,725 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:37,744 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 13:07:37,935 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:37,954 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 13:07:37,980 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:37,999 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 13:07:38,013 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:38,033 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 13:07:38,046 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:38,066 p=250359 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 13:07:38,079 p=250359 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:07:38,153 p=250359 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-19 13:07:44,954 p=250359 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:07:44,974 p=250359 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-19 13:07:45,175 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:45,200 p=250359 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-19 13:07:46,025 p=250359 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:07:46,063 p=250359 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 13:07:46,064 p=250359 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=231  changed=31   unreachable=0    failed=0    skipped=119  rescued=0    ignored=4   
2023-04-19 13:26:19,265 p=261815 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 13:26:19,347 p=261815 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 13:26:19,367 p=261815 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 13:26:20,493 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:20,500 p=261815 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 13:26:21,415 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:21,432 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:26:21,459 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:21,469 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 13:26:21,491 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:21,499 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 13:26:21,521 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:21,528 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 13:26:21,550 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:21,557 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 13:26:22,336 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:22,343 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 13:26:22,639 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:22,646 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 13:26:22,688 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:22,695 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 13:26:23,460 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:23,468 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 13:26:23,493 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:23,500 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 13:26:23,531 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:23,537 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 13:26:23,563 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:23,570 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 13:26:23,596 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:23,606 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:26:23,621 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:23,628 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 13:26:23,898 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:23,905 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 13:26:24,187 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:24,194 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 13:26:24,212 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:24,218 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 13:26:24,383 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:24,394 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 13:26:24,850 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:24,860 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 13:26:25,230 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:25,237 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:26:25,267 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:25,278 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 13:26:25,476 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 13:26:25,623 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 13:26:25,632 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 13:26:25,810 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:25,817 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 13:26:26,160 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 13:26:26,169 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 13:26:26,521 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 13:26:26,530 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 13:26:26,863 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:26,870 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 13:26:27,199 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:27,206 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 13:26:27,368 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:27,395 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 13:26:27,883 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:27,895 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 13:26:27,920 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 13:26:27,922 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:27,929 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 13:26:27,944 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:27,951 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 13:26:27,986 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 13:26:27,988 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:27,996 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 13:26:28,362 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:26:28,370 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 13:26:28,382 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:28,389 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 13:26:28,411 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:28,418 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 13:26:28,429 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:28,440 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 13:26:28,850 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:26:28,860 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 13:26:28,872 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:28,942 p=261815 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 13:26:29,003 p=261815 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 13:26:29,862 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:29,880 p=261815 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 13:26:30,660 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:30,680 p=261815 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 13:26:30,693 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:30,712 p=261815 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 13:26:31,490 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:31,510 p=261815 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 13:26:32,235 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:32,289 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 13:26:32,863 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:32,883 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 13:26:32,905 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:32,925 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 13:26:33,152 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,172 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 13:26:33,357 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,379 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 13:26:33,430 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,449 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 13:26:33,463 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,483 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 13:26:33,498 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,518 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 13:26:33,533 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,552 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 13:26:33,568 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,589 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 13:26:33,607 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,629 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 13:26:33,663 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:33,697 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 13:26:33,709 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,729 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 13:26:33,763 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 13:26:33,775 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:33,812 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 13:26:34,235 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:34,254 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 13:26:34,269 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:34,310 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 13:26:34,329 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:34,348 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 13:26:34,366 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:34,402 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 13:26:34,418 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:34,437 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 13:26:34,497 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:34,530 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 13:26:35,308 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:35,330 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 13:26:35,350 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:35,373 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 13:26:35,449 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:35,468 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:26:35,486 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:35,505 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 13:26:35,539 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:35,574 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 13:26:35,599 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 13:26:35,602 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 13:26:35,604 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 13:26:35,606 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:35,626 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 13:26:35,694 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:35,731 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 13:26:36,567 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:36,588 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 13:26:36,607 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:36,628 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 13:26:36,713 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:36,736 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:26:36,755 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:36,778 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 13:26:36,813 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:36,849 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 13:26:36,875 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 13:26:36,878 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 13:26:36,880 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 13:26:36,882 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:36,901 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 13:26:36,920 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:36,939 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 13:26:37,774 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:37,793 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:26:37,811 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:37,831 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 13:26:37,850 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:37,870 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 13:26:38,328 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:38,348 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 13:26:38,389 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:38,423 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 13:26:38,597 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:38,618 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 13:26:38,642 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:38,664 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 13:26:38,963 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:38,982 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 13:26:38,998 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:39,017 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 13:26:39,341 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:39,361 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 13:26:39,669 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:39,708 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 13:26:40,026 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:40,048 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 13:26:40,955 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:40,995 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 13:26:41,016 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 13:26:41,037 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 13:26:41,085 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:41,105 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 13:26:41,148 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:41,174 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 13:26:41,217 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 13:26:41,231 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 13:26:41,239 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 13:26:41,242 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 13:26:41,246 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 13:26:41,249 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 13:26:41,257 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 13:26:41,260 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 13:26:41,264 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 13:26:41,285 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 13:26:41,353 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 13:26:41,385 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 13:26:41,421 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 13:26:41,453 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 13:26:41,455 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:41,474 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 13:26:41,556 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 13:26:41,601 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 13:26:41,641 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 13:26:41,664 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 13:26:41,725 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:41,763 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 13:26:41,870 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:41,891 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 13:26:42,469 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:42,491 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 13:26:42,598 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:42,619 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 13:26:42,953 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:26:43,144 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 13:26:43,166 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 13:26:43,375 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:26:43,545 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 13:26:43,569 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 13:26:43,675 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:43,695 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 13:26:43,715 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:43,734 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 13:26:43,778 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:43,816 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 13:26:44,170 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:44,189 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 13:26:44,545 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 13:26:44,868 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 13:26:45,199 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 13:26:45,545 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 13:26:45,859 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 13:26:45,882 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 13:26:46,251 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 13:26:46,590 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 13:26:46,909 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 13:26:47,246 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 13:26:47,571 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 13:26:47,921 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 13:26:48,226 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 13:26:48,549 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 13:26:48,888 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 13:26:49,213 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 13:26:49,236 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 13:26:49,311 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:49,355 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 13:26:50,631 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:50,652 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 13:26:50,752 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:50,773 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 13:26:52,645 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:52,666 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 13:26:54,533 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:54,554 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 13:26:54,663 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:54,683 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 13:26:54,699 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:54,719 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 13:26:54,734 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:26:54,755 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 13:26:54,813 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:54,859 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 13:26:54,984 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 13:26:55,022 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 13:26:55,491 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:55,511 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 13:26:55,715 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:55,736 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 13:26:56,248 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 13:26:56,705 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 13:26:56,728 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 13:26:57,216 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 13:26:57,239 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 13:26:57,784 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 13:26:58,273 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 13:26:58,781 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-19 13:26:58,804 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 13:26:59,330 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 13:26:59,353 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 13:26:59,869 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:26:59,890 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 13:27:00,086 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:00,107 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 13:27:00,214 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:00,236 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 13:27:00,257 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:00,279 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 13:27:00,300 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:00,322 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 13:27:00,342 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:00,363 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 13:27:00,381 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:00,402 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 13:27:00,961 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:00,981 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 13:27:01,088 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:01,108 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 13:27:01,222 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:01,243 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 13:27:01,842 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:01,861 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 13:27:01,914 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:01,964 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 13:27:03,641 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:03,662 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 13:27:05,548 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:05,568 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 13:27:10,696 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:10,716 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 13:27:11,337 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:11,357 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 13:27:13,037 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:13,057 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 13:27:13,179 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:13,200 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 13:27:13,256 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:13,310 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 13:27:13,416 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:13,437 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 13:27:13,959 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 13:27:13,981 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 13:27:14,456 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 13:27:14,794 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 13:27:14,816 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 13:27:15,243 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 13:27:15,565 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 13:27:15,591 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 13:27:15,632 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:15,689 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 13:27:17,259 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:17,279 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 13:27:18,621 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:18,640 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 13:27:18,742 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:18,761 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 13:27:18,863 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:18,884 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 13:27:18,958 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:19,018 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 13:27:19,381 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:19,402 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 13:27:19,751 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:19,775 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 13:27:20,126 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:20,147 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 13:27:20,536 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:20,557 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 13:27:20,742 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:20,762 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 13:27:20,956 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:20,976 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 13:27:21,091 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:21,112 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 13:27:21,217 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:21,237 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 13:27:21,336 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:21,356 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 13:27:21,458 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:21,479 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 13:27:21,582 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:21,603 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 13:27:21,710 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:21,730 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 13:27:21,841 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:21,860 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 13:27:21,959 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:21,979 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 13:27:21,994 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:22,018 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 13:27:22,066 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:22,144 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 13:27:22,261 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:22,281 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 13:27:22,897 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:22,917 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 13:27:22,941 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:22,961 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 13:27:22,980 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:23,000 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 13:27:23,043 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:23,107 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 13:27:23,541 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:23,561 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 13:27:23,675 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:23,713 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-19 13:27:23,911 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:23,930 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-19 13:27:24,301 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:24,321 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-19 13:27:27,054 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,092 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-19 13:27:27,278 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,298 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-19 13:27:27,320 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,340 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-19 13:27:27,753 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,772 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-19 13:27:27,808 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,828 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-19 13:27:27,845 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,866 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-19 13:27:27,881 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,905 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-19 13:27:27,931 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,951 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-19 13:27:27,975 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:27,994 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-19 13:27:28,010 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:28,047 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:27:28,084 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:28,116 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-19 13:27:28,953 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:28,974 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-19 13:27:29,150 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,170 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:27:29,188 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,209 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:27:29,228 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,248 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-19 13:27:29,433 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,455 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-19 13:27:29,491 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,511 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-19 13:27:29,546 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,567 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-19 13:27:29,585 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,607 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-19 13:27:29,624 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,645 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:27:29,664 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,684 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-19 13:27:29,710 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:29,731 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-19 13:27:30,085 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:30,105 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-19 13:27:30,138 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:30,159 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-19 13:27:30,515 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 13:27:30,537 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-19 13:27:30,736 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 13:27:30,759 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-19 13:27:30,962 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:30,983 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-19 13:27:31,077 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:31,111 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-19 13:27:31,147 p=261815 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-19 13:27:31,342 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-19 13:27:31,389 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:31,423 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-19 13:27:32,317 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:32,337 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-19 13:27:32,359 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:32,379 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-19 13:27:32,404 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:32,424 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-19 13:27:32,444 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:32,463 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-19 13:27:32,483 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:32,504 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-19 13:27:32,550 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:32,612 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-19 13:27:32,824 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:32,847 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-19 13:27:32,874 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:32,896 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-19 13:27:32,922 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:32,943 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-19 13:27:33,160 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:33,186 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-19 13:27:33,215 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 13:27:33,235 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-19 13:27:33,281 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:33,323 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-19 13:27:33,345 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:33,367 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-19 13:27:33,746 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:33,766 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-19 13:27:33,803 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-19 13:27:33,843 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:33,888 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-19 13:27:34,091 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:34,128 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-19 13:27:34,306 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:34,326 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-19 13:27:34,712 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:34,738 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-19 13:27:34,930 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:34,950 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-19 13:27:35,133 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:35,154 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-19 13:27:35,203 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:35,238 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-19 13:27:35,596 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:27:35,618 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-19 13:27:35,824 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:27:35,851 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-19 13:27:36,070 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:36,095 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-19 13:27:36,118 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:36,138 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-19 13:27:36,433 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:36,479 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-19 13:27:36,503 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:36,523 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:27:36,541 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:36,560 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:27:36,604 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:36,637 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-19 13:27:37,190 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:37,209 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-19 13:27:38,199 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:38,222 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-19 13:27:38,242 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:38,262 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-19 13:27:39,181 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:39,201 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-19 13:27:39,680 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:39,702 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-19 13:27:39,734 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:39,755 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-19 13:27:39,786 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:39,806 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-19 13:27:40,162 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:40,183 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-19 13:27:40,200 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:40,223 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-19 13:27:41,164 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:41,184 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-19 13:27:41,212 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:41,231 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-19 13:27:41,261 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:41,284 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-19 13:27:41,319 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:41,341 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-19 13:27:41,378 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:41,401 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-19 13:27:41,725 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:41,747 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-19 13:27:41,782 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:27:41,837 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:41,875 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-19 13:27:42,110 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,129 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-19 13:27:42,176 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,196 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-19 13:27:42,229 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,250 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-19 13:27:42,299 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,319 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-19 13:27:42,352 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,373 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-19 13:27:42,388 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,410 p=261815 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:27:42,429 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,467 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:27:42,502 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:42,555 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-19 13:27:42,578 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,597 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-19 13:27:42,616 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,636 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-19 13:27:42,653 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,673 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-19 13:27:42,861 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:42,881 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-19 13:27:43,246 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-19 13:27:43,954 p=261815 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-2618155_n3cr_o/tmpgzhjwpq0/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-796FOujp6qYRsjMj[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+ZBqRqk7WOqS7GYVP[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-19 13:27:43,957 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-19 13:27:43,979 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:27:44,014 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-19 13:27:44,047 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-19 13:27:44,106 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:44,126 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-19 13:27:44,141 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:27:44,160 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-19 13:27:44,739 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:27:44,759 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-19 13:27:44,776 p=261815 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-19 13:27:44,777 p=261815 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-19 13:28:04,781 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:04,805 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:28:04,852 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-19 13:28:04,890 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-19 13:28:05,995 p=261815 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-19 13:28:05,995 p=261815 u=ubuntu n=ansible | ...ignoring
2023-04-19 13:28:06,015 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-19 13:28:09,548 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-19 13:28:09,570 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-19 13:28:09,622 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-19 13:28:09,640 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-19 13:28:09,676 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-19 13:28:10,530 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:28:10,550 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-19 13:28:11,482 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:28:11,502 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:28:11,518 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:11,537 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:28:11,552 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:11,573 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-19 13:28:12,451 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:28:12,470 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-19 13:28:13,349 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:28:13,368 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-19 13:28:14,249 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:28:14,269 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-19 13:28:15,154 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:28:15,173 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:28:15,189 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:15,210 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:28:15,226 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:15,246 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-19 13:28:16,178 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:28:16,198 p=261815 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-19 13:28:16,217 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:16,256 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-19 13:28:16,870 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:16,890 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-19 13:28:17,078 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:17,098 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-19 13:28:17,115 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:17,134 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-19 13:28:17,300 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:17,324 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-19 13:28:17,498 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:17,518 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-19 13:28:17,699 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:17,719 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-19 13:28:17,895 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:17,919 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-19 13:28:18,169 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:18,206 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 13:28:18,243 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:18,263 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 13:28:18,300 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:18,319 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 13:28:18,335 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:18,355 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 13:28:18,393 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:18,414 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 13:28:18,497 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 13:28:18,555 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 13:28:18,610 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:28:18,643 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 13:28:19,430 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:19,450 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 13:28:20,053 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:20,073 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:28:20,090 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:20,111 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:28:20,406 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:20,426 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:28:20,442 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:20,462 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 13:28:21,257 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:21,276 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 13:28:21,314 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 13:28:21,350 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 13:28:21,544 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 13:28:21,567 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 13:28:21,905 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 13:28:21,926 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 13:28:22,220 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:22,240 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 13:28:22,537 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:22,563 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 13:28:22,581 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:22,601 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 13:28:22,941 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:22,961 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 13:28:23,306 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:23,326 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 13:28:23,514 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:23,533 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 13:28:23,548 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:23,569 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 13:28:23,906 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:23,926 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 13:28:23,962 p=261815 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 13:28:23,997 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 13:28:24,011 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,031 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 13:28:24,057 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,081 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 13:28:24,107 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,127 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 13:28:24,306 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,326 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 13:28:24,352 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,372 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 13:28:24,548 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,567 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 13:28:24,594 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,617 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 13:28:24,632 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,651 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 13:28:24,666 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,686 p=261815 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 13:28:24,701 p=261815 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:28:24,776 p=261815 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-19 13:28:31,645 p=261815 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:28:31,665 p=261815 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-19 13:28:31,872 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:31,892 p=261815 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-19 13:28:32,680 p=261815 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:28:32,720 p=261815 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 13:28:32,720 p=261815 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=207  changed=12   unreachable=0    failed=0    skipped=125  rescued=0    ignored=1   
2023-04-19 13:36:27,057 p=269566 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 13:36:27,139 p=269566 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 13:36:27,156 p=269566 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 13:36:28,247 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:28,254 p=269566 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 13:36:29,163 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:29,180 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:36:29,205 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:29,214 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 13:36:29,235 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:29,242 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 13:36:29,266 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:29,273 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 13:36:29,295 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:29,302 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 13:36:30,111 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:30,117 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 13:36:30,397 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:30,404 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 13:36:30,445 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:30,456 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 13:36:31,239 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:31,245 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 13:36:31,269 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:31,277 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 13:36:31,308 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:31,315 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 13:36:31,341 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:31,348 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 13:36:31,373 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:31,381 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:36:31,394 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:31,402 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 13:36:31,682 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:31,689 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 13:36:31,963 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:31,969 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 13:36:31,990 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:32,001 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 13:36:32,165 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:32,172 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 13:36:32,612 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:32,618 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 13:36:32,977 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:32,986 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 13:36:33,021 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:33,033 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 13:36:33,220 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 13:36:33,385 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 13:36:33,393 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 13:36:33,575 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:33,582 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 13:36:33,932 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 13:36:33,941 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 13:36:34,267 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 13:36:34,276 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 13:36:34,617 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:34,624 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 13:36:34,948 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:34,954 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 13:36:35,130 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:35,138 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 13:36:35,607 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:35,619 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 13:36:35,643 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 13:36:35,645 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:35,651 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 13:36:35,663 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:35,669 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 13:36:35,704 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 13:36:35,706 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:35,712 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 13:36:36,107 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:36:36,116 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 13:36:36,128 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:36,136 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 13:36:36,160 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:36,167 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 13:36:36,178 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:36,185 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 13:36:36,582 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:36:36,591 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 13:36:36,603 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:36,673 p=269566 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 13:36:36,729 p=269566 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 13:36:37,559 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:37,579 p=269566 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 13:36:38,333 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:38,352 p=269566 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 13:36:38,366 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:38,385 p=269566 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 13:36:39,161 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:39,182 p=269566 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 13:36:39,866 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:39,921 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 13:36:40,347 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:40,368 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 13:36:40,389 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:40,408 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 13:36:40,634 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:40,654 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 13:36:40,830 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:40,850 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 13:36:40,902 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:40,921 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 13:36:40,936 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:40,956 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 13:36:40,971 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:40,992 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 13:36:41,010 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,032 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 13:36:41,048 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,068 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 13:36:41,084 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,104 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 13:36:41,140 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:41,176 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 13:36:41,188 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,208 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 13:36:41,243 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 13:36:41,256 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,294 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 13:36:41,709 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,728 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 13:36:41,743 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,763 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 13:36:41,781 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,802 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 13:36:41,823 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,860 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 13:36:41,875 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:41,895 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 13:36:41,958 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:41,994 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 13:36:42,768 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:42,787 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 13:36:42,803 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:42,824 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 13:36:42,897 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:42,916 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:36:42,932 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:42,952 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 13:36:42,984 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:43,018 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 13:36:43,075 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 13:36:43,079 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 13:36:43,081 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 13:36:43,082 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:43,102 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 13:36:43,167 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:43,207 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 13:36:43,970 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:43,990 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 13:36:44,006 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:44,026 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 13:36:44,101 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:44,122 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:36:44,138 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:44,158 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 13:36:44,191 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:44,224 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 13:36:44,248 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 13:36:44,252 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 13:36:44,254 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 13:36:44,256 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:44,276 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 13:36:44,290 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:44,310 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 13:36:45,085 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:45,105 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 13:36:45,122 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:45,142 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 13:36:45,158 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:45,178 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 13:36:45,621 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:45,640 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 13:36:45,685 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:45,718 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 13:36:45,882 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:45,902 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 13:36:45,923 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:45,944 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 13:36:46,263 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:46,284 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 13:36:46,298 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:46,317 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 13:36:46,619 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:46,639 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 13:36:46,926 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:46,964 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 13:36:47,258 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:47,278 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 13:36:48,040 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:48,077 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 13:36:48,097 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 13:36:48,120 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 13:36:48,167 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:48,187 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 13:36:48,222 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:48,241 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 13:36:48,277 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 13:36:48,284 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 13:36:48,290 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 13:36:48,297 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 13:36:48,304 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 13:36:48,311 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 13:36:48,319 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 13:36:48,326 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 13:36:48,329 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 13:36:48,352 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 13:36:48,416 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 13:36:48,447 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 13:36:48,479 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 13:36:48,509 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 13:36:48,511 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:48,531 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 13:36:48,611 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 13:36:48,654 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 13:36:48,692 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 13:36:48,717 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 13:36:48,771 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:48,808 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 13:36:48,912 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:48,931 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 13:36:49,503 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:49,522 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 13:36:49,630 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:49,649 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 13:36:49,958 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:36:50,124 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 13:36:50,152 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 13:36:50,344 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:36:50,497 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 13:36:50,519 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 13:36:50,603 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:50,623 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 13:36:50,642 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:50,662 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 13:36:50,702 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:50,743 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 13:36:51,099 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:51,119 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 13:36:51,480 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 13:36:51,795 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 13:36:52,127 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 13:36:52,470 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 13:36:52,786 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 13:36:52,808 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 13:36:53,157 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 13:36:53,478 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 13:36:53,814 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 13:36:54,141 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 13:36:54,466 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 13:36:54,787 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 13:36:55,109 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 13:36:55,412 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 13:36:55,707 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 13:36:56,042 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 13:36:56,067 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 13:36:56,133 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 13:36:56,172 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 13:36:57,544 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:57,563 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 13:36:57,662 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:36:57,685 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 13:36:59,481 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:36:59,501 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 13:37:01,300 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:01,322 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 13:37:01,429 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:01,449 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 13:37:01,464 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:01,484 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 13:37:01,498 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:01,518 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 13:37:01,575 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:01,620 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 13:37:01,748 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:01,785 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 13:37:02,232 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:02,252 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 13:37:02,455 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:02,475 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 13:37:02,989 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 13:37:03,488 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 13:37:03,514 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 13:37:04,035 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 13:37:04,057 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 13:37:04,603 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 13:37:05,082 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 13:37:05,569 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-19 13:37:05,592 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 13:37:06,105 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 13:37:06,128 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 13:37:06,630 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:06,654 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 13:37:06,841 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:06,861 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 13:37:06,964 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:06,986 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 13:37:07,005 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:07,026 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 13:37:07,044 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:07,067 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 13:37:07,084 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:07,104 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 13:37:07,121 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:07,143 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 13:37:07,733 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:07,754 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 13:37:07,864 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:07,888 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 13:37:07,995 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:08,017 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 13:37:08,610 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:08,630 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 13:37:08,686 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:08,737 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 13:37:10,457 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:10,478 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 13:37:12,361 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:12,383 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 13:37:17,668 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:17,689 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 13:37:18,319 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:18,340 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 13:37:20,091 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:20,113 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 13:37:20,264 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:20,286 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 13:37:20,345 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:20,401 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 13:37:20,549 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:20,570 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 13:37:21,104 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 13:37:21,128 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 13:37:21,604 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 13:37:21,923 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 13:37:21,948 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 13:37:22,383 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 13:37:22,726 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 13:37:22,749 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 13:37:22,793 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:22,850 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 13:37:24,515 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:24,536 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 13:37:26,129 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:26,151 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 13:37:26,258 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:26,278 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 13:37:26,384 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:26,405 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 13:37:26,478 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:26,542 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 13:37:26,893 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:26,913 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 13:37:27,241 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:27,262 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 13:37:27,605 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:27,625 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 13:37:28,018 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:28,040 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 13:37:28,229 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:28,250 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 13:37:28,438 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:28,459 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 13:37:28,563 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:28,584 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 13:37:28,690 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:28,711 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 13:37:28,817 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:28,838 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 13:37:28,942 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:28,962 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 13:37:29,064 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:29,084 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 13:37:29,190 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:29,213 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 13:37:29,323 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:29,344 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 13:37:29,450 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:29,471 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 13:37:29,492 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:29,513 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 13:37:29,561 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:29,635 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 13:37:29,738 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:29,759 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 13:37:30,406 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:30,426 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 13:37:30,450 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:30,471 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 13:37:30,490 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:30,513 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 13:37:30,555 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:30,617 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 13:37:31,030 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:31,051 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 13:37:31,158 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:31,196 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-19 13:37:31,369 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:31,391 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-19 13:37:31,736 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:31,759 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-19 13:37:34,742 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:37:34,783 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-19 13:37:34,983 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,001 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-19 13:37:35,021 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,041 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-19 13:37:35,441 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,462 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-19 13:37:35,501 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,524 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-19 13:37:35,543 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,564 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-19 13:37:35,581 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,601 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-19 13:37:35,630 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,655 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-19 13:37:35,683 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,704 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-19 13:37:35,719 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:35,762 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:37:35,802 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:35,840 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-19 13:37:36,673 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:36,693 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-19 13:37:36,881 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:36,900 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:37:36,919 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:36,939 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:37:36,958 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:36,985 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-19 13:37:37,162 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,182 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-19 13:37:37,212 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,231 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-19 13:37:37,263 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,283 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-19 13:37:37,297 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,318 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-19 13:37:37,337 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,358 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 13:37:37,373 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,393 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-19 13:37:37,417 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,437 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-19 13:37:37,784 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,803 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-19 13:37:37,832 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:37,852 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-19 13:37:38,198 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 13:37:38,220 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-19 13:37:38,415 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 13:37:38,436 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-19 13:37:38,623 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:38,643 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-19 13:37:38,732 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:38,766 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-19 13:37:38,805 p=269566 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-19 13:37:39,003 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-19 13:37:39,041 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:39,077 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-19 13:37:39,919 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:39,939 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-19 13:37:39,959 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:39,979 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-19 13:37:40,001 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:40,030 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-19 13:37:40,046 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:40,067 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-19 13:37:40,083 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:40,104 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-19 13:37:40,144 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:40,206 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-19 13:37:40,393 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:40,413 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-19 13:37:40,436 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:40,456 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-19 13:37:40,480 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:40,501 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-19 13:37:40,718 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:40,738 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-19 13:37:40,765 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 13:37:40,785 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-19 13:37:40,828 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:40,870 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-19 13:37:40,890 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:40,910 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-19 13:37:41,285 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:41,305 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-19 13:37:41,345 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-19 13:37:41,382 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:41,426 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-19 13:37:41,627 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:41,665 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-19 13:37:41,830 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:41,851 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-19 13:37:42,218 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:42,238 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-19 13:37:42,413 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:42,433 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-19 13:37:42,596 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:42,616 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-19 13:37:42,658 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:42,696 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-19 13:37:43,464 p=269566 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/sites-available/galaxy[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-2695669wnyl9f9/tmphmfng4pw/galaxy.j2[0m
[0;32m[0m[0;36m@@ -84,4 +84,14 @@[0m
[0;36m[0m 	location /training-material/ {
 		proxy_pass https://training.galaxyproject.org/training-material/;
 	}
[0;32m+[0m
[0;32m[0m[0;32m+	location ~* /rabbitmq/(.*) {[0m
[0;32m[0m[0;32m+		rewrite ^/rabbitmq/(.*)$ /$1 break;[0m
[0;32m[0m[0;32m+		proxy_pass http://127.0.0.1:15672;[0m
[0;32m[0m[0;32m+		proxy_buffering                    off;[0m
[0;32m[0m[0;32m+		proxy_set_header Host              $http_host;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Real-IP         $remote_addr;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-Proto $scheme;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m }


2023-04-19 13:37:43,466 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:37:43,488 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-19 13:37:43,671 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 13:37:43,692 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-19 13:37:43,873 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:43,893 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-19 13:37:43,913 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:43,934 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-19 13:37:44,231 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:44,269 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-19 13:37:44,291 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:44,311 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:37:44,326 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:44,346 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:37:44,386 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:44,421 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-19 13:37:44,957 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:44,978 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-19 13:37:45,759 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:45,780 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-19 13:37:45,797 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:45,818 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-19 13:37:46,596 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:46,616 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-19 13:37:47,083 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:47,103 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-19 13:37:47,133 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:47,153 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-19 13:37:47,178 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:47,198 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-19 13:37:47,503 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:47,522 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-19 13:37:47,537 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:47,557 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-19 13:37:48,327 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:48,347 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-19 13:37:48,372 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:48,392 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-19 13:37:48,417 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:48,437 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-19 13:37:48,468 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:48,488 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-19 13:37:48,519 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:48,538 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-19 13:37:48,828 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:48,848 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-19 13:37:48,885 p=269566 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-19 13:37:49,187 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,209 p=269566 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-19 13:37:49,228 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,248 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:37:49,298 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:49,339 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-19 13:37:49,542 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,564 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-19 13:37:49,608 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,631 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-19 13:37:49,662 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,682 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-19 13:37:49,730 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,750 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-19 13:37:49,780 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,800 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-19 13:37:49,813 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,833 p=269566 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 13:37:49,850 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:49,888 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:37:49,923 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:49,966 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-19 13:37:49,993 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:50,013 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-19 13:37:50,032 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:50,052 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-19 13:37:50,068 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:50,087 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-19 13:37:50,282 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:50,302 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-19 13:37:50,652 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-19 13:37:51,237 p=269566 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-2695669wnyl9f9/tmpis8e7a2q/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-ZBqRqk7WOqS7GYVP[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+FZ1hCZltSCDeV5qp[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-19 13:37:51,239 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-19 13:37:51,260 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:37:51,297 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-19 13:37:51,331 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-19 13:37:51,386 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:51,407 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-19 13:37:51,424 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:37:51,443 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-19 13:37:52,067 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:37:52,088 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-19 13:37:52,105 p=269566 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-19 13:37:52,105 p=269566 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-19 13:38:12,109 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:12,130 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 13:38:12,165 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-19 13:38:12,202 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-19 13:38:13,368 p=269566 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-19 13:38:13,368 p=269566 u=ubuntu n=ansible | ...ignoring
2023-04-19 13:38:13,389 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-19 13:38:16,971 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-19 13:38:16,993 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-19 13:38:17,046 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-19 13:38:17,062 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-19 13:38:17,098 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-19 13:38:17,985 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:38:18,005 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-19 13:38:18,831 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:38:18,851 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:38:18,866 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:18,887 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:38:18,902 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:18,923 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-19 13:38:19,789 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:38:19,808 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-19 13:38:20,658 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:38:20,678 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-19 13:38:21,575 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:38:21,598 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-19 13:38:22,422 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:38:22,442 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:38:22,458 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:22,478 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 13:38:22,494 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:22,514 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-19 13:38:23,398 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:38:23,417 p=269566 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-19 13:38:23,437 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:23,482 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-19 13:38:24,101 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:24,122 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-19 13:38:24,360 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:24,379 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-19 13:38:24,396 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:24,415 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-19 13:38:24,607 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:24,631 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-19 13:38:24,820 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:24,840 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-19 13:38:25,021 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:25,043 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-19 13:38:25,238 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:25,260 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-19 13:38:25,504 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:25,542 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 13:38:25,575 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:25,594 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 13:38:25,628 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:25,654 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 13:38:25,668 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:25,688 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 13:38:25,729 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:25,749 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 13:38:25,833 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 13:38:25,893 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 13:38:25,947 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 13:38:25,985 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 13:38:26,767 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:26,787 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 13:38:27,368 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:27,389 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:38:27,404 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:27,425 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:38:27,721 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:27,742 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:38:27,757 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:27,780 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 13:38:28,585 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:28,605 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 13:38:28,639 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 13:38:28,676 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 13:38:28,884 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 13:38:28,907 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 13:38:29,255 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 13:38:29,279 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 13:38:29,577 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:29,598 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 13:38:29,908 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:29,928 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 13:38:29,942 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:29,967 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 13:38:30,317 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:30,337 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 13:38:30,681 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:30,701 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 13:38:30,886 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:30,907 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 13:38:30,921 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:30,941 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 13:38:31,295 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:31,317 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 13:38:31,354 p=269566 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 13:38:31,390 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 13:38:31,404 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:31,426 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 13:38:31,454 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:31,477 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 13:38:31,505 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:31,525 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 13:38:31,712 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:31,733 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 13:38:31,762 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:31,782 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 13:38:31,962 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:31,983 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 13:38:32,009 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:32,034 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 13:38:32,050 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:32,071 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 13:38:32,087 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:32,108 p=269566 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 13:38:32,122 p=269566 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 13:38:32,197 p=269566 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-19 13:38:39,053 p=269566 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 13:38:39,074 p=269566 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-19 13:38:39,277 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:39,296 p=269566 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-19 13:38:40,125 p=269566 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 13:38:40,170 p=269566 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 13:38:40,170 p=269566 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=208  changed=14   unreachable=0    failed=0    skipped=126  rescued=0    ignored=1   
2023-04-19 13:48:11,793 p=277389 u=ubuntu n=ansible | PLAY [pulsarservers] *************************************************************************************************
2023-04-19 13:48:11,818 p=277389 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 13:48:26,246 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:48:26,264 p=277389 u=ubuntu n=ansible | TASK [Install some packages] *****************************************************************************************
2023-04-19 13:48:51,422 p=277389 u=ubuntu n=ansible | The following packages were automatically installed and are no longer required:
  squashfs-tools whois
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  python3.10-venv
Suggested packages:
  libcurl4-doc libidn11-dev libkrb5-dev libldap2-dev librtmp-dev libssh2-1-dev
  pkg-config libssl-doc
The following NEW packages will be installed:
  libcurl4-openssl-dev libssl-dev python3-venv python3.10-venv
0 upgraded, 4 newly installed, 0 to remove and 10 not upgraded.
2023-04-19 13:48:51,423 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:48:51,478 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 13:48:51,514 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:48:51,533 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 13:48:51,568 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:48:51,586 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 13:48:51,600 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:48:51,628 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 13:48:51,666 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:48:51,684 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 13:48:51,765 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.oz.galaxy.training
2023-04-19 13:48:51,820 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 13:48:51,876 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.oz.galaxy.training
2023-04-19 13:48:51,908 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 13:49:02,789 p=277389 u=ubuntu n=ansible | The following packages were automatically installed and are no longer required:
  squashfs-tools whois
Use 'sudo apt autoremove' to remove them.
The following NEW packages will be installed:
  apt-transport-https
0 upgraded, 1 newly installed, 0 to remove and 10 not upgraded.
2023-04-19 13:49:02,790 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:49:02,810 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 13:49:11,216 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:49:11,235 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:49:11,256 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:49:11,276 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:49:26,752 p=277389 u=ubuntu n=ansible | [0;31m--- before: /dev/null[0m
[0;31m[0m[0;32m+++ after: /etc/apt/sources.list.d/cernvm.list.list[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+deb [allow-insecure=true] https://cvmrepo.web.cern.ch/cvmrepo/apt/ jammy-prod main[0m
[0;32m[0m

2023-04-19 13:49:26,753 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:49:26,771 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 13:49:26,792 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:49:26,811 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 13:49:58,070 p=277389 u=ubuntu n=ansible | The following packages were automatically installed and are no longer required:
  squashfs-tools whois
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  attr autofs cvmfs-config-default cvmfs-fuse3 gdb keyutils libbabeltrace1
  libboost-regex1.74.0 libc6-dbg libdebuginfod-common libdebuginfod1 libfuse2
  libipt2 libnfsidmap1 libossp-uuid16 libsource-highlight-common
  libsource-highlight4v5 nfs-common rpcbind uuid uuid-dev
Suggested packages:
  gdb-doc gdbserver watchdog
The following NEW packages will be installed:
  attr autofs cvmfs cvmfs-config-default cvmfs-fuse3 gdb keyutils
  libbabeltrace1 libboost-regex1.74.0 libc6-dbg libdebuginfod-common
  libdebuginfod1 libfuse2 libipt2 libnfsidmap1 libossp-uuid16
  libsource-highlight-common libsource-highlight4v5 nfs-common rpcbind uuid
  uuid-dev
0 upgraded, 22 newly installed, 0 to remove and 10 not upgraded.
2023-04-19 13:49:58,071 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:49:58,089 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 13:49:58,123 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.oz.galaxy.training
2023-04-19 13:49:58,166 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 13:50:04,268 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/cvmfs/keys/galaxyproject.org
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 13:50:04,271 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 13:50:04,296 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 13:50:21,140 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmp10718_j7[0m
[0;32m[0m[0;36m@@ -0,0 +1,9 @@[0m
[0;36m[0m[0;32m+-----BEGIN PUBLIC KEY-----[0m
[0;32m[0m[0;32m+MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuJZTWTY3/dBfspFKifv8[0m
[0;32m[0m[0;32m+TWuuT2Zzoo1cAskKpKu5gsUAyDFbZfYBEy91qbLPC3TuUm2zdPNsjCQbbq1Liufk[0m
[0;32m[0m[0;32m+uNPZJ8Ubn5PR6kndwrdD13NVHZpXVml1+ooTSF5CL3x/KUkYiyRz94sAr9trVoSx[0m
[0;32m[0m[0;32m+THW2buV7ADUYivX7ofCvBu5T6YngbPZNIxDB4mh7cEal/UDtxV683A/5RL4wIYvt[0m
[0;32m[0m[0;32m+S5SVemmu6Yb8GkGwLGmMVLYXutuaHdMFyKzWm+qFlG5JRz4okUWERvtJ2QAJPOzL[0m
[0;32m[0m[0;32m+mAG1ceyBFowj/r3iJTa+Jcif2uAmZxg+cHkZG5KzATykF82UH1ojUzREMMDcPJi2[0m
[0;32m[0m[0;32m+dQIDAQAB[0m
[0;32m[0m[0;32m+-----END PUBLIC KEY-----[0m
[0;32m[0m

2023-04-19 13:50:21,142 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 13:50:21,163 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 13:50:27,470 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:50:27,489 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 13:50:33,809 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:50:33,827 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 13:50:40,290 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:50:40,309 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 13:50:56,859 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmpvquza05e[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+CVMFS_SERVER_URL="http://cvmfs1-psu0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-iu0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-tacc0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-ufr0.galaxyproject.eu/cvmfs/@fqrn@;http://cvmfs1-mel0.gvl.org.au/cvmfs/@fqrn@"[0m
[0;32m[0m[0;32m+CVMFS_PUBLIC_KEY="/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub"[0m
[0;32m[0m

2023-04-19 13:50:56,860 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:50:56,879 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 13:51:13,184 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmpzkvwioqq[0m
[0;32m[0m[0;36m@@ -0,0 +1,4 @@[0m
[0;36m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+CVMFS_CONFIG_REPOSITORY="cvmfs-config.galaxyproject.org"[0m
[0;32m[0m[0;32m+CVMFS_DEFAULT_DOMAIN="galaxyproject.org"[0m
[0;32m[0m[0;32m+CVMFS_USE_GEOAPI="no"[0m
[0;32m[0m

2023-04-19 13:51:13,185 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:51:13,203 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 13:51:18,666 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:51:18,686 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 13:51:18,701 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:18,721 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 13:51:35,036 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmpxa0p4nl4[0m
[0;32m[0m[0;36m@@ -0,0 +1,4 @@[0m
[0;36m[0m[0;32m+CVMFS_REPOSITORIES=""[0m
[0;32m[0m[0;32m+CVMFS_HTTP_PROXY="DIRECT"[0m
[0;32m[0m[0;32m+CVMFS_QUOTA_LIMIT="500"[0m
[0;32m[0m[0;32m+CVMFS_CACHE_BASE="/var/lib/cvmfs"[0m
[0;32m[0m

2023-04-19 13:51:35,037 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:51:35,059 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 13:51:35,093 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.oz.galaxy.training
2023-04-19 13:51:35,128 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 13:51:35,144 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:35,164 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 13:51:35,193 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:35,214 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 13:51:35,242 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:35,265 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 13:51:41,007 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:51:41,026 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 13:51:41,054 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:41,075 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 13:51:46,811 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:51:46,831 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 13:51:46,855 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:46,873 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 13:51:46,887 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:46,907 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 13:51:46,923 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:46,943 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 13:51:46,958 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:46,995 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Set privilege separation default variables] *********************************************
2023-04-19 13:51:47,043 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:51:47,063 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Include user creation tasks] ************************************************************
2023-04-19 13:51:47,116 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.pulsar/tasks/user.yml for gat-20.oz.galaxy.training
2023-04-19 13:51:47,146 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create pulsar group] ********************************************************************
2023-04-19 13:51:47,252 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:47,273 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create pulsar user] *********************************************************************
2023-04-19 13:51:56,796 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:51:56,814 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create pulsar privilege separation user] ************************************************
2023-04-19 13:51:56,922 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:51:56,942 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Include path management tasks] **********************************************************
2023-04-19 13:51:56,983 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.pulsar/tasks/paths.yml for gat-20.oz.galaxy.training
2023-04-19 13:51:57,015 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Get group IDs for pulsar users] *********************************************************
2023-04-19 13:52:03,021 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item=pulsar)
2023-04-19 13:52:08,610 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item=root)
2023-04-19 13:52:08,631 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Get group names for pulsar users] *******************************************************
2023-04-19 13:52:14,278 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item=pulsar)
2023-04-19 13:52:19,894 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item=root)
2023-04-19 13:52:19,915 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Set pulsar user facts] ******************************************************************
2023-04-19 13:52:20,161 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:52:20,179 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Determine whether to restrict to group permissions] *************************************
2023-04-19 13:52:20,360 p=277389 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-19 13:52:20,379 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create pulsar_root] *********************************************************************
2023-04-19 13:52:26,265 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /mnt/pulsar
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 13:52:26,266 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:52:26,286 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create Pulsar privilege separation user-owned directories] ******************************
2023-04-19 13:52:31,920 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /mnt/pulsar/config
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 13:52:31,922 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=/mnt/pulsar/config)
2023-04-19 13:52:31,943 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create Pulsar user-owned directories] ***************************************************
2023-04-19 13:52:37,580 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /mnt/pulsar/deps
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 13:52:37,583 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=/mnt/pulsar/deps)
2023-04-19 13:52:43,189 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /mnt/pulsar/files/persisted_data
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 13:52:43,192 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=/mnt/pulsar/files/persisted_data)
2023-04-19 13:52:48,791 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /mnt/pulsar/files/staging
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-19 13:52:48,793 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=/mnt/pulsar/files/staging)
2023-04-19 13:52:48,813 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Include virtualenv setup tasks] *********************************************************
2023-04-19 13:52:48,846 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.pulsar/tasks/virtualenv.yml for gat-20.oz.galaxy.training
2023-04-19 13:52:48,881 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create Pulsar virtualenv] ***************************************************************
2023-04-19 13:53:06,644 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:53:06,664 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Ensure pip is the latest release] *******************************************************
2023-04-19 13:53:15,050 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:53:15,069 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Install Pulsar] *************************************************************************
2023-04-19 13:53:30,858 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:53:30,877 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Install Pulsar dependencies (optional)] *************************************************
2023-04-19 13:53:55,082 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:53:55,100 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Include config files tasks] *************************************************************
2023-04-19 13:53:55,133 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.pulsar/tasks/configure.yml for gat-20.oz.galaxy.training
2023-04-19 13:53:55,171 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create Pulsar app configuration file] ***************************************************
2023-04-19 13:54:12,171 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmpo7kxv4zf/app.yml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,18 @@[0m
[0;36m[0m[0;32m+---[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+amqp_publish_retry: true[0m
[0;32m[0m[0;32m+amqp_publish_retry_interval_max: 60[0m
[0;32m[0m[0;32m+amqp_publish_retry_interval_start: 10[0m
[0;32m[0m[0;32m+amqp_publish_retry_interval_step: 10[0m
[0;32m[0m[0;32m+amqp_publish_retry_max_retries: 5[0m
[0;32m[0m[0;32m+dependency_resolution:[0m
[0;32m[0m[0;32m+    resolvers:[0m
[0;32m[0m[0;32m+    -   auto_init: true[0m
[0;32m[0m[0;32m+        auto_install: true[0m
[0;32m[0m[0;32m+        type: conda[0m
[0;32m[0m[0;32m+job_metrics_config_file: job_metrics_conf.yml[0m
[0;32m[0m[0;32m+message_queue_url: pyamqp://pulsar_au:3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N@gat-20.eu.galaxy.training:5671//pulsar/pulsar_au?ssl=1[0m
[0;32m[0m[0;32m+min_polling_interval: 0.5[0m
[0;32m[0m[0;32m+persistence_directory: /mnt/pulsar/files/persisted_data[0m
[0;32m[0m[0;32m+staging_directory: /mnt/pulsar/files/staging[0m
[0;32m[0m[0;32m+tool_dependency_dir: /mnt/pulsar/deps[0m
[0;32m[0m

2023-04-19 13:54:12,172 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:54:12,199 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create Pulsar job metrics configuration file] *******************************************
2023-04-19 13:54:28,704 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmpuzeahe0o/plugin_config.yml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,12 @@[0m
[0;36m[0m[0;32m+---[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+## This file is managed by Ansible.  ALL CHANGES WILL BE OVERWRITTEN.[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+-   type: core[0m
[0;32m[0m[0;32m+-   type: cpuinfo[0m
[0;32m[0m[0;32m+-   type: meminfo[0m
[0;32m[0m[0;32m+-   type: uname[0m
[0;32m[0m[0;32m+-   type: env[0m
[0;32m[0m[0;32m+-   type: cgroup[0m
[0;32m[0m[0;32m+-   type: hostname[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-19 13:54:28,704 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:54:28,723 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create additional Pulsar config files] **************************************************
2023-04-19 13:54:45,185 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmpy8hag32z/server.ini.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,84 @@[0m
[0;36m[0m[0;32m+### server:main section used by paster web server. More advanced,[0m
[0;32m[0m[0;32m+### Python3 compatible circus setup configured using sections after[0m
[0;32m[0m[0;32m+### app:main (circus, watcher:web, socket:web).[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[server:main][0m
[0;32m[0m[0;32m+use = egg:Paste#http[0m
[0;32m[0m[0;32m+## To use chaussette w/paster deploy (no circus), use follwoing: [0m
[0;32m[0m[0;32m+# use = egg:chaussette#main[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## The port on which to listen.[0m
[0;32m[0m[0;32m+port = 8913[0m
[0;32m[0m[0;32m+## The hostname or IP address of the server.[0m
[0;32m[0m[0;32m+host = localhost[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## pem file to use to enable SSL. Set to * to generate one[0m
[0;32m[0m[0;32m+## automatically.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[app:main][0m
[0;32m[0m[0;32m+paste.app_factory = pulsar.web.wsgi:app_factory[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+app_config=/mnt/pulsar/config/app.yml[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## Configure uWSGI (if used).[0m
[0;32m[0m[0;32m+[uwsgi][0m
[0;32m[0m[0;32m+master = True[0m
[0;32m[0m[0;32m+paste-logger = True[0m
[0;32m[0m[0;32m+http = localhost:8913[0m
[0;32m[0m[0;32m+processes = 1[0m
[0;32m[0m[0;32m+enable-threads = True[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## Configure circus and chaussette (if used).[0m
[0;32m[0m[0;32m+[circus][0m
[0;32m[0m[0;32m+endpoint = tcp://127.0.0.1:5555[0m
[0;32m[0m[0;32m+pubsub_endpoint = tcp://127.0.0.1:5556[0m
[0;32m[0m[0;32m+#stats_endpoint = tcp://127.0.0.1:5557                                                                                    [0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[watcher:web][0m
[0;32m[0m[0;32m+cmd = chaussette --fd $(circus.sockets.web) paste:server.ini[0m
[0;32m[0m[0;32m+use_sockets = True[0m
[0;32m[0m[0;32m+# Pulsar must be single-process for now...[0m
[0;32m[0m[0;32m+numprocesses = 1[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[socket:web][0m
[0;32m[0m[0;32m+host = localhost[0m
[0;32m[0m[0;32m+port = 8913[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## Configure Python loggers.[0m
[0;32m[0m[0;32m+[loggers][0m
[0;32m[0m[0;32m+keys = root,pulsar,galaxy[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[handlers][0m
[0;32m[0m[0;32m+keys = console[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[formatters][0m
[0;32m[0m[0;32m+keys = generic[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[logger_root][0m
[0;32m[0m[0;32m+level = INFO[0m
[0;32m[0m[0;32m+handlers = console[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[logger_pulsar][0m
[0;32m[0m[0;32m+level = DEBUG[0m
[0;32m[0m[0;32m+handlers = console[0m
[0;32m[0m[0;32m+qualname = pulsar[0m
[0;32m[0m[0;32m+propagate = 0[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[logger_galaxy][0m
[0;32m[0m[0;32m+level = DEBUG[0m
[0;32m[0m[0;32m+handlers = console[0m
[0;32m[0m[0;32m+qualname = galaxy[0m
[0;32m[0m[0;32m+propagate = 0[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[handler_console][0m
[0;32m[0m[0;32m+class = StreamHandler[0m
[0;32m[0m[0;32m+args = (sys.stderr,)[0m
[0;32m[0m[0;32m+level = DEBUG[0m
[0;32m[0m[0;32m+formatter = generic[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[formatter_generic][0m
[0;32m[0m[0;32m+format = %(asctime)s %(levelname)-5.5s [%(name)s][%(threadName)s] %(message)s[0m
[0;32m[0m

2023-04-19 13:54:45,187 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=server.ini)
2023-04-19 13:55:01,616 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmpaaeg97v9/local_env.sh.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,14 @@[0m
[0;36m[0m[0;32m+## Place local configuration variables used by Pulsar and run.sh in here. For example[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## If using the drmaa queue manager, you will need to set the DRMAA_LIBRARY_PATH variable,[0m
[0;32m[0m[0;32m+## you may also need to update LD_LIBRARY_PATH for underlying library as well.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## If you wish to use a variety of Galaxy tools that depend on galaxy.eggs being defined,[0m
[0;32m[0m[0;32m+## set GALAXY_HOME to point to a copy of Galaxy.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## Uncomment to verify GALAXY_HOME is set properly before starting Pulsar.[0m
[0;32m[0m[0;32m+#export TEST_GALAXY_LIBS=1[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+## If using a manager that runs jobs as real users, be sure to load your Python[0m
[0;32m[0m[0;32m+## environement in here as well.[0m
[0;32m[0m[0;32m+# . .venv/bin/activate[0m
[0;32m[0m

2023-04-19 13:55:01,618 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=local_env.sh)
2023-04-19 13:55:01,638 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : include_tasks] **************************************************************************
2023-04-19 13:55:01,672 p=277389 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.pulsar/tasks/systemd.yml for gat-20.oz.galaxy.training
2023-04-19 13:55:01,709 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : Create Pulsar systemd unit file] ********************************************************
2023-04-19 13:55:18,180 p=277389 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-277389nmkl9t19/tmp0_ypyc_n/pulsar.service.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,23 @@[0m
[0;36m[0m[0;32m+[Unit][0m
[0;32m[0m[0;32m+Description=Pulsar[0m
[0;32m[0m[0;32m+After=network.target[0m
[0;32m[0m[0;32m+After=time-sync.target[0m
[0;32m[0m[0;32m+After=syslog.target[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[Service][0m
[0;32m[0m[0;32m+UMask=022[0m
[0;32m[0m[0;32m+Type=simple[0m
[0;32m[0m[0;32m+User=pulsar[0m
[0;32m[0m[0;32m+Group=pulsar[0m
[0;32m[0m[0;32m+TimeoutStartSec=30[0m
[0;32m[0m[0;32m+Environment=PULSAR_VIRTUALENV=/mnt/pulsar/venv[0m
[0;32m[0m[0;32m+ExecStart=/mnt/pulsar/venv/bin/pulsar -c /mnt/pulsar/config -m webless[0m
[0;32m[0m[0;32m+MemoryLimit=6G[0m
[0;32m[0m[0;32m+Restart=always[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+MemoryAccounting=yes[0m
[0;32m[0m[0;32m+CPUAccounting=yes[0m
[0;32m[0m[0;32m+BlockIOAccounting=yes[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[Install][0m
[0;32m[0m[0;32m+WantedBy=multi-user.target[0m
[0;32m[0m

2023-04-19 13:55:18,181 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:55:18,198 p=277389 u=ubuntu n=ansible | TASK [galaxyproject.pulsar : systemd daemon-reload and enable/start service] *****************************************
2023-04-19 13:55:24,875 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:55:24,944 p=277389 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.cvmfs : Reload autofs] ****************************************************************
2023-04-19 13:55:34,384 p=277389 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-19 13:55:34,403 p=277389 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.pulsar : default restart pulsar handler] **********************************************
2023-04-19 13:55:34,416 p=277389 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-19 13:55:34,451 p=277389 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 13:55:34,451 p=277389 u=ubuntu n=ansible | gat-20.oz.galaxy.training  : ok=48   changed=25   unreachable=0    failed=0    skipped=15   rescued=0    ignored=0   
2023-04-19 14:07:37,445 p=278818 u=ubuntu n=ansible | PLAY [pulsarservers] *************************************************************************************************
2023-04-19 14:07:37,470 p=278818 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 14:07:37,696 p=278818 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-19 14:07:55,936 p=278867 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-19 14:07:56,020 p=278867 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-19 14:07:56,037 p=278867 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 14:07:57,159 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:07:57,166 p=278867 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 14:07:58,122 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:07:58,140 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 14:07:58,165 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 14:07:58,174 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-19 14:07:58,198 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:07:58,204 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-19 14:07:58,226 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:07:58,233 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-19 14:07:58,255 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:07:58,261 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-19 14:07:59,060 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:07:59,068 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-19 14:07:59,348 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:07:59,355 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 14:07:59,397 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:07:59,404 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-19 14:08:00,237 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:00,243 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-19 14:08:00,274 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:00,281 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-19 14:08:00,316 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:00,323 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-19 14:08:00,348 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:00,355 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-19 14:08:00,380 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:00,386 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 14:08:00,399 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:00,405 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-19 14:08:00,681 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:00,688 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-19 14:08:00,981 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:00,987 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-19 14:08:01,005 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:01,012 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-19 14:08:01,180 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:01,187 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-19 14:08:01,637 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:01,644 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-19 14:08:02,011 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:02,018 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-19 14:08:02,050 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:02,062 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-19 14:08:02,265 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 14:08:02,414 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 14:08:02,423 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-19 14:08:02,593 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:02,602 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-19 14:08:02,943 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 14:08:02,952 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-19 14:08:03,284 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 14:08:03,293 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-19 14:08:03,635 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:03,641 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-19 14:08:03,965 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:03,972 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-19 14:08:04,145 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:04,152 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-19 14:08:04,641 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:04,653 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-19 14:08:04,677 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 14:08:04,680 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:04,687 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-19 14:08:04,701 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:04,708 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-19 14:08:04,741 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 14:08:04,743 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:04,750 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-19 14:08:05,104 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 14:08:05,113 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-19 14:08:05,124 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:05,131 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-19 14:08:05,158 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:05,166 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-19 14:08:05,176 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:05,183 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-19 14:08:05,540 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 14:08:05,550 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-19 14:08:05,561 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:05,631 p=278867 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-19 14:08:05,687 p=278867 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-19 14:08:06,538 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:06,557 p=278867 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-19 14:08:07,328 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:07,348 p=278867 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-19 14:08:07,361 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:07,380 p=278867 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-19 14:08:08,156 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:08,176 p=278867 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-19 14:08:09,050 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:09,104 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-19 14:08:09,494 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:09,514 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-19 14:08:09,536 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:09,556 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-19 14:08:09,776 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:09,796 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-19 14:08:09,980 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,002 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-19 14:08:10,054 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,073 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-19 14:08:10,089 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,109 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-19 14:08:10,124 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,144 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-19 14:08:10,159 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,181 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-19 14:08:10,199 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,219 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-19 14:08:10,234 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,254 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-19 14:08:10,289 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:10,324 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-19 14:08:10,337 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,356 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-19 14:08:10,392 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-19 14:08:10,405 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,442 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-19 14:08:10,890 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,911 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-19 14:08:10,927 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,946 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-19 14:08:10,965 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:10,985 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-19 14:08:11,003 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:11,046 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-19 14:08:11,061 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:11,081 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-19 14:08:11,142 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:11,177 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-19 14:08:11,973 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:11,993 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-19 14:08:12,010 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:12,032 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 14:08:12,103 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:12,122 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 14:08:12,138 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:12,157 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 14:08:12,190 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:12,222 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 14:08:12,244 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 14:08:12,248 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 14:08:12,250 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 14:08:12,252 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:12,271 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-19 14:08:12,332 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:12,368 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-19 14:08:13,129 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:13,147 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-19 14:08:13,163 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:13,182 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-19 14:08:13,255 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:13,275 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 14:08:13,293 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:13,313 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-19 14:08:13,347 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:13,381 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-19 14:08:13,408 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-19 14:08:13,410 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-19 14:08:13,412 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-19 14:08:13,414 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:13,433 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-19 14:08:13,447 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:13,467 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-19 14:08:14,242 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:14,261 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-19 14:08:14,278 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:14,298 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-19 14:08:14,315 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:14,335 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-19 14:08:14,787 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:14,807 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-19 14:08:14,847 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:14,880 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-19 14:08:15,047 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:15,066 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-19 14:08:15,090 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:15,110 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-19 14:08:15,397 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:15,416 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-19 14:08:15,430 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:15,449 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-19 14:08:15,731 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:15,750 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-19 14:08:16,066 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:16,104 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-19 14:08:16,407 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:16,427 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-19 14:08:17,213 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:17,253 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-19 14:08:17,271 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 14:08:17,290 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-19 14:08:17,336 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:17,355 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-19 14:08:17,390 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:17,409 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-19 14:08:17,441 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 14:08:17,452 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 14:08:17,459 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 14:08:17,472 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 14:08:17,479 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 14:08:17,492 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 14:08:17,502 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 14:08:17,510 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 14:08:17,514 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 14:08:17,535 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 14:08:17,600 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 14:08:17,633 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 14:08:17,665 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 14:08:17,695 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 14:08:17,697 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:17,716 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 14:08:17,797 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 14:08:17,843 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 14:08:17,886 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 14:08:17,907 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-19 14:08:17,961 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:17,998 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-19 14:08:18,107 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:18,127 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-19 14:08:18,691 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:18,710 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-19 14:08:18,816 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:18,837 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-19 14:08:19,162 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 14:08:19,317 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 14:08:19,347 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-19 14:08:19,607 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 14:08:19,770 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 14:08:19,791 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-19 14:08:19,873 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:19,894 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-19 14:08:19,914 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:19,934 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-19 14:08:19,971 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:20,009 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-19 14:08:20,358 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:20,377 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-19 14:08:20,726 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 14:08:21,069 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 14:08:21,389 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 14:08:21,699 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 14:08:22,025 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-19 14:08:22,048 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-19 14:08:22,400 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 14:08:22,709 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 14:08:23,016 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 14:08:23,331 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 14:08:23,633 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 14:08:23,932 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 14:08:24,263 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 14:08:24,590 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 14:08:24,895 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 14:08:25,214 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-19 14:08:25,236 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-19 14:08:25,299 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:25,339 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-19 14:08:26,607 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:26,626 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-19 14:08:26,731 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:26,750 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 14:08:28,498 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:28,518 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 14:08:30,358 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:30,378 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-19 14:08:30,492 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:30,511 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-19 14:08:30,523 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:30,543 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-19 14:08:30,557 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:30,576 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-19 14:08:30,632 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:30,677 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 14:08:30,806 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:30,844 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-19 14:08:31,282 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:31,302 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-19 14:08:31,510 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:31,529 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-19 14:08:32,021 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 14:08:32,870 p=278867 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/config/tpv_rules_local.yml[0m
[0;32m[0m[0;36m@@ -28,6 +28,15 @@[0m
[0;36m[0m         cores: int(job.get_param_values(app)['__job_resource']['cores'])
         params:
            walltime: "{int(job.get_param_values(app)['__job_resource']['time'])}"
[0;32m+  .*/bwa/.*:[0m
[0;32m[0m[0;32m+    scheduling:[0m
[0;32m[0m[0;32m+      require:[0m
[0;32m[0m[0;32m+        - pulsar[0m
[0;32m[0m[0;32m+  .*/bwa_mem/.*:[0m
[0;32m[0m[0;32m+    scheduling:[0m
[0;32m[0m[0;32m+      require:[0m
[0;32m[0m[0;32m+        - pulsar[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m destinations:
   local_env:
     runner: local_runner
[0;36m@@ -56,4 +65,18 @@[0m
[0;36m[0m     params:
       native_specification: --nodes=1 --ntasks=1 --cpus-per-task={cores} --time={params['walltime']}:00:00
   
[0;32m+  pulsar:[0m
[0;32m[0m[0;32m+    runner: pulsar_runner[0m
[0;32m[0m[0;32m+    params:[0m
[0;32m[0m[0;32m+      default_file_action: remote_transfer[0m
[0;32m[0m[0;32m+      dependency_resolution: remote[0m
[0;32m[0m[0;32m+      jobs_directory: /mnt/pulsar/files/staging[0m
[0;32m[0m[0;32m+      persistence_directory: /mnt/pulsar/files/persisted_data[0m
[0;32m[0m[0;32m+      remote_metadata: false[0m
[0;32m[0m[0;32m+      rewrite_parameters: true[0m
[0;32m[0m[0;32m+      transport: curl[0m
[0;32m[0m[0;32m+      outputs_to_working_directory: false[0m
[0;32m[0m[0;32m+    scheduling:[0m
[0;32m[0m[0;32m+      require:[0m
[0;32m[0m[0;32m+        - pulsar[0m
[0;32m[0m 


2023-04-19 14:08:32,872 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-19 14:08:32,896 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-19 14:08:33,394 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 14:08:33,415 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-19 14:08:33,965 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 14:08:34,448 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 14:08:34,914 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-19 14:08:34,936 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-19 14:08:35,433 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-19 14:08:35,454 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-19 14:08:35,941 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:35,961 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-19 14:08:36,148 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:36,167 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-19 14:08:36,270 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:36,290 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-19 14:08:36,304 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:36,324 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-19 14:08:36,338 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:36,358 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-19 14:08:36,372 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:36,392 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-19 14:08:36,405 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:36,425 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-19 14:08:36,980 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:37,000 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-19 14:08:37,108 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:37,128 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-19 14:08:37,237 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:37,256 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-19 14:08:38,120 p=278867 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-278867tdjj4t2f/tmps4d6ssrw/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -83,6 +83,16 @@[0m
[0;36m[0m             local_runner:
                 load: galaxy.jobs.runners.local:LocalJobRunner
                 workers: 4
[0;32m+            pulsar_runner:[0m
[0;32m[0m[0;32m+                amqp_ack_republish_time: 1200[0m
[0;32m[0m[0;32m+                amqp_acknowledge: true[0m
[0;32m[0m[0;32m+                amqp_consumer_timeout: 2[0m
[0;32m[0m[0;32m+                amqp_publish_retry: true[0m
[0;32m[0m[0;32m+                amqp_publish_retry_max_retries: 60[0m
[0;32m[0m[0;32m+                amqp_url: pyamqp://pulsar_au:3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N@localhost:5671//pulsar/pulsar_au?ssl=1[0m
[0;32m[0m[0;32m+                galaxy_url: https://gat-20.eu.galaxy.training[0m
[0;32m[0m[0;32m+                load: galaxy.jobs.runners.pulsar:PulsarMQJobRunner[0m
[0;32m[0m[0;32m+                manager: _default_[0m
[0;32m[0m             slurm:
                 drmaa_library_path: /usr/lib/slurm-drmaa/lib/libdrmaa.so.1
                 load: galaxy.jobs.runners.slurm:SlurmJobRunner


2023-04-19 14:08:38,120 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:08:38,140 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-19 14:08:38,196 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:38,248 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-19 14:08:39,922 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:39,942 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-19 14:08:41,739 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:41,759 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-19 14:08:46,915 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:46,935 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-19 14:08:47,536 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:47,556 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-19 14:08:49,186 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:49,205 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-19 14:08:49,318 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:49,337 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-19 14:08:49,385 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:49,437 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-19 14:08:49,538 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:49,557 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-19 14:08:50,049 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 14:08:50,070 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-19 14:08:50,529 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 14:08:50,848 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 14:08:50,869 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-19 14:08:51,273 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 14:08:51,573 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 14:08:51,595 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-19 14:08:51,633 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:51,687 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-19 14:08:53,116 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:53,135 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-19 14:08:54,520 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:54,541 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-19 14:08:54,642 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:54,663 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-19 14:08:54,763 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:54,787 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-19 14:08:54,860 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:54,917 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-19 14:08:55,259 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:55,278 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-19 14:08:55,614 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:55,634 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-19 14:08:55,971 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:55,992 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-19 14:08:56,341 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:56,366 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 14:08:56,546 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:56,568 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-19 14:08:56,753 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:56,773 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-19 14:08:56,874 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:56,894 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-19 14:08:56,996 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:57,016 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-19 14:08:57,120 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:57,140 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-19 14:08:57,243 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:57,263 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-19 14:08:57,371 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:57,393 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-19 14:08:57,497 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:57,518 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-19 14:08:57,620 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:57,640 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-19 14:08:57,749 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:57,769 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-19 14:08:57,784 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:57,805 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-19 14:08:57,853 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:57,927 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-19 14:08:58,030 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:58,050 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-19 14:08:58,700 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:58,720 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-19 14:08:58,740 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:58,760 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-19 14:08:58,775 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:58,795 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-19 14:08:58,835 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 14:08:58,897 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-19 14:08:59,311 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:59,330 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-19 14:08:59,438 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:08:59,476 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-19 14:08:59,652 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:08:59,673 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-19 14:09:00,016 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:00,036 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-19 14:09:02,740 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:09:02,778 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-19 14:09:02,955 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:02,976 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-19 14:09:02,991 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:03,011 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-19 14:09:03,384 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:03,404 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-19 14:09:03,442 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:03,461 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-19 14:09:03,487 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:03,508 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-19 14:09:03,526 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:03,545 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-19 14:09:03,570 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:03,590 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-19 14:09:03,618 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:03,639 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-19 14:09:03,654 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:03,691 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 14:09:03,729 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:03,761 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-19 14:09:04,501 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:04,522 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-19 14:09:04,713 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:04,734 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 14:09:04,750 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:04,771 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 14:09:04,786 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:04,806 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-19 14:09:04,977 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,000 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-19 14:09:05,032 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,053 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-19 14:09:05,086 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,106 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-19 14:09:05,120 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,139 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-19 14:09:05,154 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,173 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-19 14:09:05,187 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,206 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-19 14:09:05,228 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,249 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-19 14:09:05,597 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,618 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-19 14:09:05,648 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:05,667 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-19 14:09:06,007 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 14:09:06,029 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-19 14:09:06,226 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 14:09:06,247 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-19 14:09:06,431 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:06,450 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-19 14:09:06,538 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:06,571 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-19 14:09:06,605 p=278867 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-19 14:09:06,622 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:06,643 p=278867 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 14:09:06,660 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:06,681 p=278867 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-19 14:09:06,699 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:06,719 p=278867 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-19 14:09:07,352 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:09:07,372 p=278867 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-19 14:09:22,060 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:09:22,083 p=278867 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-19 14:09:22,293 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-19 14:09:22,350 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:22,386 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-19 14:09:23,364 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:23,385 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-19 14:09:23,409 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:23,429 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-19 14:09:23,452 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:23,476 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-19 14:09:23,498 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:23,521 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-19 14:09:23,537 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:23,560 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-19 14:09:23,608 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:23,673 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-19 14:09:23,903 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:23,929 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-19 14:09:23,956 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:23,980 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-19 14:09:24,010 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:24,034 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-19 14:09:24,275 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:24,301 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-19 14:09:24,327 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 14:09:24,351 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-19 14:09:24,398 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:24,440 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-19 14:09:24,465 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:24,485 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-19 14:09:24,860 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:24,880 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-19 14:09:24,918 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-19 14:09:24,974 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:25,035 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-19 14:09:25,250 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:25,295 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-19 14:09:25,508 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:25,530 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-19 14:09:25,924 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:25,945 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-19 14:09:26,187 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:26,206 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-19 14:09:26,419 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:26,444 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-19 14:09:26,486 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:26,520 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-19 14:09:26,892 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 14:09:26,915 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-19 14:09:27,138 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 14:09:27,163 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-19 14:09:27,422 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:27,442 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-19 14:09:27,467 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:27,488 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-19 14:09:27,813 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:27,853 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-19 14:09:27,878 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:27,903 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 14:09:27,921 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:27,942 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 14:09:27,990 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:28,024 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-19 14:09:28,679 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:28,706 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-19 14:09:29,585 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:29,606 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-19 14:09:29,624 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:29,644 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-19 14:09:30,515 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:30,538 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-19 14:09:30,973 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:31,003 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-19 14:09:31,030 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:31,052 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-19 14:09:31,081 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:31,103 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-19 14:09:31,440 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:31,460 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-19 14:09:31,478 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:31,498 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-19 14:09:32,293 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:32,315 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-19 14:09:32,342 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:32,362 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-19 14:09:32,389 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:32,409 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-19 14:09:32,439 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:32,460 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-19 14:09:32,494 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:32,514 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-19 14:09:32,845 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:32,866 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-19 14:09:32,904 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 14:09:32,961 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:33,000 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-19 14:09:33,236 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,255 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-19 14:09:33,301 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,321 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-19 14:09:33,353 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,374 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-19 14:09:33,424 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,444 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-19 14:09:33,481 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,502 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-19 14:09:33,516 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,536 p=278867 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-19 14:09:33,555 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,592 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 14:09:33,629 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:33,677 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-19 14:09:33,700 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,720 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-19 14:09:33,739 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,758 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-19 14:09:33,773 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:33,792 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-19 14:09:33,981 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:34,006 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-19 14:09:34,365 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-19 14:09:34,954 p=278867 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-278867tdjj4t2f/tmpy6vmse3l/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-FZ1hCZltSCDeV5qp[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+YsnTY7BbREqCIKOj[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-19 14:09:34,956 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-19 14:09:34,979 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 14:09:35,019 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:35,054 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-19 14:09:35,109 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:35,130 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-19 14:09:35,147 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:09:35,169 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-19 14:09:35,770 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:35,791 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-19 14:09:35,808 p=278867 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-19 14:09:35,809 p=278867 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-19 14:09:55,812 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:09:55,833 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-19 14:09:55,869 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-19 14:09:55,906 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-19 14:09:57,028 p=278867 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-19 14:09:57,028 p=278867 u=ubuntu n=ansible | ...ignoring
2023-04-19 14:09:57,049 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-19 14:10:00,305 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-19 14:10:00,326 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-19 14:10:00,377 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-19 14:10:00,397 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-19 14:10:00,433 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-19 14:10:01,296 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:10:01,315 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-19 14:10:02,159 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:10:02,180 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 14:10:02,193 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:02,214 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 14:10:02,229 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:02,248 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-19 14:10:03,121 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:10:03,142 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-19 14:10:04,040 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:10:04,060 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-19 14:10:05,129 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:10:05,150 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-19 14:10:06,123 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:10:06,143 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 14:10:06,158 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:06,179 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-19 14:10:06,194 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:06,214 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-19 14:10:07,127 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:10:07,146 p=278867 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-19 14:10:07,167 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:07,205 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-19 14:10:07,852 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:07,872 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-19 14:10:08,054 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:08,074 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-19 14:10:08,091 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:08,110 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-19 14:10:08,278 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:08,298 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-19 14:10:08,477 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:08,497 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-19 14:10:08,674 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:08,694 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-19 14:10:08,868 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:08,888 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-19 14:10:09,188 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:09,225 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-19 14:10:09,261 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:09,282 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-19 14:10:09,319 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:09,339 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-19 14:10:09,352 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:09,373 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-19 14:10:09,408 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:09,427 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-19 14:10:09,513 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 14:10:09,572 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-19 14:10:09,630 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 14:10:09,664 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-19 14:10:10,445 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:10,465 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-19 14:10:11,065 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:11,086 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 14:10:11,106 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:11,126 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 14:10:11,434 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:11,454 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-19 14:10:11,472 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:11,492 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-19 14:10:12,271 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:12,292 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-19 14:10:12,328 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 14:10:12,364 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-19 14:10:12,567 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 14:10:12,588 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-19 14:10:12,951 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 14:10:12,972 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-19 14:10:13,231 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:13,251 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-19 14:10:13,539 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:13,559 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-19 14:10:13,577 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:13,597 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-19 14:10:13,951 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:13,971 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-19 14:10:14,327 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:14,348 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-19 14:10:14,526 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:14,546 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-19 14:10:14,559 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:14,582 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-19 14:10:14,923 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:14,943 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-19 14:10:14,981 p=278867 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 14:10:15,019 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 14:10:15,031 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,052 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-19 14:10:15,077 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,097 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-19 14:10:15,124 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,145 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-19 14:10:15,331 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,353 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-19 14:10:15,380 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,399 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-19 14:10:15,593 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,613 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-19 14:10:15,647 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,667 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-19 14:10:15,683 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,703 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-19 14:10:15,717 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,737 p=278867 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-19 14:10:15,752 p=278867 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 14:10:15,829 p=278867 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-19 14:10:22,739 p=278867 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 14:10:22,760 p=278867 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-19 14:10:23,031 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:23,055 p=278867 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-19 14:10:23,906 p=278867 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 14:10:23,948 p=278867 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-19 14:10:23,948 p=278867 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=209  changed=16   unreachable=0    failed=0    skipped=128  rescued=0    ignored=1   
2023-04-20 08:06:49,092 p=344173 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-20 08:06:49,093 p=344173 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-20 08:06:49,093 p=344173 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-20 08:06:49,093 p=344173 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-20 08:06:49,093 p=344173 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-20 08:06:49,094 p=344173 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-20 08:06:49,094 p=344173 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-20 08:06:49,094 p=344173 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-20 08:06:49,094 p=344173 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-20 08:06:49,095 p=344173 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-20 08:06:49,095 p=344173 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-20 08:06:49,095 p=344173 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-20 08:06:49,095 p=344173 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-20 08:06:49,095 p=344173 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) is already installed, skipping.
2023-04-20 08:06:49,097 p=344173 u=ubuntu n=ansible | - geerlingguy.docker (6.1.0) is already installed, skipping.
2023-04-20 08:06:49,099 p=344173 u=ubuntu n=ansible | - usegalaxy_eu.rabbitmqserver (1.4.4) is already installed, skipping.
2023-04-20 08:06:49,100 p=344173 u=ubuntu n=ansible | - galaxyproject.pulsar (1.0.10) is already installed, skipping.
2023-04-20 08:06:49,239 p=344173 u=ubuntu n=ansible | - downloading role 'redis', owned by geerlingguy
2023-04-20 08:06:49,658 p=344173 u=ubuntu n=ansible | - downloading role from https://github.com/geerlingguy/ansible-role-redis/archive/1.8.0.tar.gz
2023-04-20 08:06:49,988 p=344173 u=ubuntu n=ansible | - extracting geerlingguy.redis to /home/ubuntu/galaxy/roles/geerlingguy.redis
2023-04-20 08:06:49,991 p=344173 u=ubuntu n=ansible | - geerlingguy.redis (1.8.0) was installed successfully
2023-04-20 08:06:49,991 p=344173 u=ubuntu n=ansible | - downloading role 'flower', owned by usegalaxy_eu
2023-04-20 08:06:50,386 p=344173 u=ubuntu n=ansible | - downloading role from https://github.com/usegalaxy-eu/flower-ansible-role/archive/1.0.2.tar.gz
2023-04-20 08:06:50,724 p=344173 u=ubuntu n=ansible | - extracting usegalaxy_eu.flower to /home/ubuntu/galaxy/roles/usegalaxy_eu.flower
2023-04-20 08:06:50,726 p=344173 u=ubuntu n=ansible | - usegalaxy_eu.flower (1.0.2) was installed successfully
2023-04-20 08:16:55,148 p=344841 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 08:16:55,245 p=344841 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 08:16:55,275 p=344841 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 08:16:56,433 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:56,440 p=344841 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 08:16:57,409 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:57,426 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:16:57,450 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:16:57,459 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 08:16:57,482 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:16:57,489 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 08:16:57,511 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:16:57,517 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 08:16:57,539 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:16:57,546 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 08:16:58,389 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:58,397 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 08:16:58,690 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:58,697 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 08:16:58,745 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:58,752 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 08:16:59,575 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:59,581 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 08:16:59,605 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:16:59,612 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 08:16:59,647 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:59,654 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 08:16:59,681 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:59,688 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 08:16:59,714 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:59,721 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:16:59,734 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:16:59,741 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 08:16:59,984 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:16:59,990 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 08:17:00,246 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:00,253 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 08:17:00,272 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:00,280 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 08:17:00,462 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:00,469 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 08:17:00,907 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:00,914 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 08:17:01,297 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:01,304 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:17:01,337 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:01,350 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 08:17:01,554 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 08:17:01,724 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 08:17:01,733 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 08:17:01,913 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:01,921 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 08:17:02,254 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 08:17:02,263 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 08:17:02,608 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 08:17:02,616 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 08:17:02,966 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:02,973 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 08:17:03,294 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:03,301 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 08:17:03,468 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:03,475 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 08:17:04,011 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:04,024 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 08:17:04,047 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 08:17:04,049 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:04,056 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 08:17:04,066 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:04,073 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 08:17:04,107 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 08:17:04,109 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:04,116 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 08:17:04,536 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:17:04,545 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 08:17:04,558 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:04,565 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 08:17:04,590 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:04,600 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 08:17:04,613 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:04,620 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 08:17:05,015 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:17:05,024 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 08:17:05,036 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:05,107 p=344841 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 08:17:05,170 p=344841 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 08:17:06,035 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:06,054 p=344841 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 08:17:06,885 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:06,904 p=344841 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 08:17:06,917 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:06,937 p=344841 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 08:17:07,729 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:07,749 p=344841 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 08:17:08,594 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:08,649 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 08:17:09,327 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:09,351 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 08:17:09,372 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:09,392 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 08:17:09,630 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:09,652 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 08:17:09,838 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:09,858 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 08:17:09,909 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:09,929 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 08:17:09,944 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:09,964 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 08:17:09,981 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,002 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 08:17:10,019 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,039 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 08:17:10,055 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,075 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 08:17:10,091 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,111 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 08:17:10,147 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:10,182 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 08:17:10,194 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,214 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 08:17:10,251 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 08:17:10,264 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,302 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 08:17:10,741 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,761 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 08:17:10,777 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,796 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 08:17:10,815 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,834 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 08:17:10,853 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,889 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 08:17:10,905 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:10,925 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 08:17:10,989 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:11,023 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 08:17:11,891 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:11,911 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 08:17:11,927 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:11,946 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 08:17:12,020 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:12,039 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:17:12,055 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:12,074 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 08:17:12,106 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:12,143 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 08:17:12,166 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 08:17:12,169 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 08:17:12,171 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 08:17:12,173 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:12,192 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 08:17:12,255 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:12,294 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 08:17:13,117 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:13,137 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 08:17:13,154 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:13,174 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 08:17:13,250 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:13,273 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:17:13,290 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:13,310 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 08:17:13,343 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:13,382 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 08:17:13,406 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 08:17:13,409 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 08:17:13,411 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 08:17:13,413 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:13,432 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 08:17:13,449 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:13,470 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 08:17:14,317 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:14,339 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:17:14,356 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:14,376 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 08:17:14,393 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:14,413 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 08:17:14,873 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:14,893 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 08:17:14,933 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:14,966 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 08:17:15,133 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:15,153 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 08:17:15,177 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:15,197 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 08:17:15,489 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:15,509 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 08:17:15,528 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:15,558 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 08:17:15,855 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:15,875 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 08:17:16,179 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:16,217 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 08:17:16,542 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:16,561 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 08:17:17,347 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:17,387 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 08:17:17,405 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 08:17:17,452 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 08:17:17,498 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:17,517 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 08:17:17,555 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:17,575 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 08:17:17,610 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 08:17:17,616 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 08:17:17,622 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 08:17:17,631 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 08:17:17,642 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 08:17:17,652 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 08:17:17,656 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 08:17:17,659 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 08:17:17,663 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 08:17:17,685 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 08:17:17,749 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 08:17:17,783 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 08:17:17,822 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 08:17:17,852 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 08:17:17,855 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:17,874 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 08:17:17,953 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 08:17:17,998 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 08:17:18,036 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 08:17:18,058 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 08:17:18,119 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:18,164 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 08:17:18,266 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:18,286 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 08:17:18,885 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:18,906 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 08:17:19,010 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:19,030 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 08:17:19,361 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:17:19,537 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 08:17:19,560 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 08:17:19,753 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:17:19,974 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 08:17:19,998 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 08:17:20,081 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:20,102 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 08:17:20,120 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:20,140 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 08:17:20,178 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:20,215 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 08:17:20,570 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:20,589 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 08:17:20,956 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 08:17:21,289 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 08:17:21,619 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 08:17:21,956 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 08:17:22,278 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 08:17:22,301 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 08:17:22,655 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 08:17:22,986 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 08:17:23,300 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 08:17:23,640 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 08:17:23,973 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 08:17:24,306 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 08:17:24,629 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 08:17:24,960 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 08:17:25,277 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 08:17:25,624 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 08:17:25,648 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 08:17:25,715 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:25,762 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 08:17:28,652 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:28,673 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 08:17:28,780 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:28,805 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 08:17:31,678 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:31,698 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 08:17:33,742 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:33,764 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 08:17:33,869 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:33,889 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 08:17:33,904 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:33,924 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 08:17:33,938 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:33,958 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 08:17:34,022 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:34,071 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 08:17:34,196 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:34,235 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 08:17:34,685 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:34,707 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 08:17:34,910 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:34,931 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 08:17:35,427 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 08:17:35,890 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 08:17:35,913 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 08:17:36,447 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 08:17:36,468 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 08:17:37,027 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 08:17:37,514 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 08:17:38,019 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 08:17:38,046 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 08:17:38,582 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 08:17:38,604 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 08:17:39,140 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:39,161 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 08:17:39,362 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:39,383 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 08:17:39,488 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:39,507 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 08:17:39,522 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:39,541 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 08:17:39,557 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:39,577 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 08:17:39,592 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:39,612 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 08:17:39,627 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:39,647 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 08:17:40,194 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:40,214 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 08:17:40,318 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:40,339 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 08:17:40,457 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:40,478 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 08:17:41,483 p=344841 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-344841s6hh0464/tmp3v7k_fcp/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -6,7 +6,12 @@[0m
[0;36m[0m gravity:
     celery:
         concurrency: 2
[0;32m+        enable: true[0m
[0;32m[0m[0;32m+        enable_beat: true[0m
[0;32m[0m         loglevel: DEBUG
[0;32m+        memory_limit: 2[0m
[0;32m[0m[0;32m+        pool: threads[0m
[0;32m[0m[0;32m+        queues: celery,galaxy.internal,galaxy.external[0m
[0;32m[0m     galaxy_root: /srv/galaxy/server
     galaxy_user: galaxy
     gunicorn:
[0;36m@@ -34,8 +39,11 @@[0m
[0;36m[0m     allow_path_paste: true
     allow_user_deletion: true
     allow_user_impersonation: true
[0;32m+    amqp_internal_connection: pyamqp://galaxy:hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat@localhost:5671/galaxy_internal?ssl=1[0m
[0;32m[0m     brand: "Mars \U0001F680"
     builds_file_path: /srv/galaxy/server/tool-data/shared/ucsc/builds.txt.sample
[0;32m+    celery_conf:[0m
[0;32m[0m[0;32m+        result_backend: redis://localhost:6379/0[0m
[0;32m[0m     cleanup_job: onsuccess
     container_resolvers_config_file: ''
     containers_resolvers_config_file: /srv/galaxy/config/container_resolvers_conf.yml
[0;36m@@ -44,6 +52,7 @@[0m
[0;36m[0m     database_connection: postgresql:///galaxy?host=/var/run/postgresql
     datatypes_config_file: /srv/galaxy/server/config/datatypes_conf.xml.sample
     dependency_resolvers_config_file: /srv/galaxy/config/dependency_resolvers_conf.xml
[0;32m+    enable_celery_tasks: true[0m
[0;32m[0m     enable_per_request_sql_debugging: true
     enable_quotas: true
     expose_dataset_path: true


2023-04-20 08:17:41,483 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:17:41,503 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 08:17:41,555 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:41,610 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 08:17:43,329 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:43,350 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 08:17:45,205 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:45,225 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 08:17:50,395 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:50,416 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 08:17:51,086 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:51,107 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 08:17:52,853 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:52,874 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 08:17:55,185 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:17:55,206 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 08:17:55,254 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:55,309 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 08:17:55,418 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:17:55,439 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 08:17:55,958 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 08:17:55,981 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 08:17:56,438 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 08:17:56,757 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 08:17:56,778 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 08:17:57,182 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 08:17:57,485 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 08:17:57,509 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 08:17:57,551 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 08:17:57,607 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 08:17:59,186 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:17:59,205 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 08:18:00,653 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:00,673 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 08:18:00,774 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:00,794 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 08:18:00,907 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:00,926 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 08:18:01,000 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:01,061 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 08:18:01,457 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:01,476 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 08:18:01,825 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:01,845 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 08:18:02,193 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:02,213 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 08:18:02,580 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:02,599 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 08:18:02,799 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:02,818 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 08:18:03,008 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:03,028 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 08:18:03,131 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:03,152 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 08:18:03,255 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:03,277 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 08:18:03,382 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:03,402 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 08:18:03,515 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:03,535 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 08:18:03,652 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:03,671 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 08:18:03,780 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:03,800 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 08:18:03,904 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:03,924 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 08:18:04,038 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:04,059 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 08:18:04,075 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:04,094 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 08:18:04,136 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:04,210 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 08:18:04,317 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:04,337 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 08:18:04,964 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:04,984 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 08:18:05,005 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:05,024 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 08:18:05,039 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:05,064 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 08:18:05,100 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:05,163 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 08:18:05,584 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:05,605 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 08:18:05,712 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:05,752 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 08:18:05,931 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:05,953 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 08:18:06,272 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:06,291 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 08:18:09,145 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:09,191 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 08:18:09,410 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:09,430 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 08:18:09,446 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:09,466 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 08:18:10,034 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,056 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 08:18:10,091 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,112 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 08:18:10,128 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,151 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 08:18:10,167 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,190 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 08:18:10,214 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,236 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 08:18:10,260 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,283 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 08:18:10,299 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,341 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 08:18:10,359 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,382 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 08:18:10,410 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,434 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 08:18:10,619 p=344841 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/redis
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 08:18:10,619 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:10,638 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 08:18:11,127 p=344841 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-344841s6hh0464/tmpp0sk2c84/redis.conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,39 @@[0m
[0;36m[0m[0;32m+# Ansible managed[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+daemonize yes[0m
[0;32m[0m[0;32m+pidfile /var/run/redis/redis-server.pid[0m
[0;32m[0m[0;32m+port 6379[0m
[0;32m[0m[0;32m+bind 127.0.0.1[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+timeout 300[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+loglevel notice[0m
[0;32m[0m[0;32m+logfile /var/log/redis/redis-server.log[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# To enable logging to the system logger, just set 'syslog-enabled' to yes,[0m
[0;32m[0m[0;32m+# and optionally update the other syslog parameters to suit your needs.[0m
[0;32m[0m[0;32m+# syslog-enabled no[0m
[0;32m[0m[0;32m+# syslog-ident redis[0m
[0;32m[0m[0;32m+# syslog-facility local0[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+databases 16[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+save 900 1[0m
[0;32m[0m[0;32m+save 300 10[0m
[0;32m[0m[0;32m+save 60 10000[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+rdbcompression yes[0m
[0;32m[0m[0;32m+dbfilename dump.rdb[0m
[0;32m[0m[0;32m+dir /var/lib/redis[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# maxclients 128[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+appendonly no[0m
[0;32m[0m[0;32m+appendfsync everysec[0m
[0;32m[0m[0;32m+no-appendfsync-on-rewrite no[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-20 08:18:11,127 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:11,151 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:18:11,168 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:11,191 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:18:11,235 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:11,274 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 08:18:17,934 p=344841 u=ubuntu n=ansible | The following additional packages will be installed:
  libjemalloc2 liblzf1 lua-bitop lua-cjson redis-tools
Suggested packages:
  ruby-redis
The following NEW packages will be installed:
  libjemalloc2 liblzf1 lua-bitop lua-cjson redis-server redis-tools
0 upgraded, 6 newly installed, 0 to remove and 8 not upgraded.
2023-04-20 08:18:17,934 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:17,965 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:18:17,986 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:18,023 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 08:18:18,375 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:18,415 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 08:18:18,732 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:18,753 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 08:18:19,053 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:19,082 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 08:18:19,448 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:19,472 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 08:18:19,503 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:19,526 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 08:18:19,722 p=344841 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,7 +1,7 @@[0m
[0;36m[0m[0;31m-atime: 1681978699.693959[0m
[0;31m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-mode: '0644'[0m
[0;31m[0m[0;31m-mtime: 1681978699.693959[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+atime: 1681978699.6985571[0m
[0;32m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+mode: '0755'[0m
[0;32m[0m[0;32m+mtime: 1681978699.6985571[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 08:18:19,723 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:19,745 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 08:18:19,964 p=344841 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/flower
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 08:18:19,965 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:19,994 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 08:18:20,979 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:21,000 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 08:18:22,284 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:22,306 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 08:18:22,495 p=344841 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 08:18:22,496 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:22,517 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 08:18:24,723 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:24,743 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 08:18:25,210 p=344841 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-344841s6hh0464/tmpzjl097i5/flowerconfig.py.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,10 @@[0m
[0;36m[0m[0;32m+# Ansible managed[0m
[0;32m[0m[0;32m+#[0m
[0;32m[0m[0;32m+# Log related options are passed directly via the command line[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+address    = "0.0.0.0"[0m
[0;32m[0m[0;32m+port       = "5555"[0m
[0;32m[0m[0;32m+broker_api = "https://flower:dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd@localhost:5671/api/"[0m
[0;32m[0m[0;32m+persistent = True[0m
[0;32m[0m[0;32m+basic_auth = [ "admin:L6FpTX/gOXUOqes4XRGogxGOPtJYR+kQ", ][0m
[0;32m[0m[0;32m+db         = "/srv/galaxy/var/flower.db"[0m
[0;32m[0m

2023-04-20 08:18:25,210 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:25,230 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 08:18:25,749 p=344841 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-344841s6hh0464/tmpj1xe1et8/flower.service.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,27 @@[0m
[0;36m[0m[0;32m+[Unit][0m
[0;32m[0m[0;32m+Description=Galaxy Celery[0m
[0;32m[0m[0;32m+After=network.target[0m
[0;32m[0m[0;32m+After=time-sync.target[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[Service][0m
[0;32m[0m[0;32m+UMask=022[0m
[0;32m[0m[0;32m+Type=simple[0m
[0;32m[0m[0;32m+User=galaxy[0m
[0;32m[0m[0;32m+Group=galaxy[0m
[0;32m[0m[0;32m+TimeoutStartSec=10[0m
[0;32m[0m[0;32m+WorkingDirectory=/srv/galaxy[0m
[0;32m[0m[0;32m+ExecStart=/srv/galaxy/venv/bin/celery --broker=amqp://flower:dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd@localhost:5671/galaxy_internal?ssl=true -A galaxy.celery flower --conf=/etc/flower/flowerconfig.py --log_file_prefix=/var/log/flower  --url_prefix=/flower [0m
[0;32m[0m[0;32m+Environment=GALAXY_CONFIG_FILE=/srv/galaxy/config/galaxy.yml[0m
[0;32m[0m[0;32m+Environment=PYTHONPATH=/srv/galaxy/server/lib[0m
[0;32m[0m[0;32m+Environment=GALAXY_CONFIG_FILE=/srv/galaxy/config/galaxy.yml[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+MemoryLimit=2G[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+Restart=always[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+MemoryAccounting=yes[0m
[0;32m[0m[0;32m+CPUAccounting=yes[0m
[0;32m[0m[0;32m+BlockIOAccounting=yes[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[Install][0m
[0;32m[0m[0;32m+WantedBy=multi-user.target[0m
[0;32m[0m

2023-04-20 08:18:25,750 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:25,770 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 08:18:26,516 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:26,556 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:18:26,606 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:26,640 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 08:18:27,576 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:27,596 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 08:18:27,777 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:27,799 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:18:27,814 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:27,838 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:18:27,854 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:27,876 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 08:18:28,051 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,075 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 08:18:28,113 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,135 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 08:18:28,174 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,195 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 08:18:28,212 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,233 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 08:18:28,257 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,278 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:18:28,294 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,316 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 08:18:28,348 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,369 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 08:18:28,731 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,753 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 08:18:28,784 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:28,806 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 08:18:29,269 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 08:18:29,292 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 08:18:29,507 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 08:18:29,533 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 08:18:29,781 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:29,815 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 08:18:29,929 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:29,966 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 08:18:30,005 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-20 08:18:30,023 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:30,054 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 08:18:30,078 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:30,102 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 08:18:30,123 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:30,147 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 08:18:31,122 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:31,146 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 08:18:51,224 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:51,254 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [geerlingguy.redis : restart redis] ******************************************************************
2023-04-20 08:18:51,832 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:18:51,865 p=344841 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 08:18:52,089 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 08:18:52,131 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:52,168 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 08:18:53,178 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:53,202 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 08:18:53,231 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:53,269 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 08:18:53,298 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:53,327 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 08:18:53,351 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:53,379 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 08:18:53,405 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:53,425 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 08:18:53,476 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:53,541 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 08:18:53,806 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:53,827 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 08:18:53,861 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:53,883 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 08:18:53,917 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:53,943 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 08:18:54,169 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:54,190 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 08:18:54,217 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 08:18:54,241 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 08:18:54,301 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:54,362 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 08:18:54,384 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:54,405 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 08:18:54,831 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:54,859 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 08:18:54,907 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 08:18:54,950 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:54,995 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 08:18:55,223 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:55,261 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 08:18:55,450 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:55,471 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 08:18:55,876 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:55,897 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 08:18:56,217 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:56,236 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 08:18:56,436 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:56,459 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 08:18:56,505 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:56,541 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 08:18:57,347 p=344841 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/sites-available/galaxy[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-344841s6hh0464/tmppnf3rv_0/galaxy.j2[0m
[0;32m[0m[0;36m@@ -94,4 +94,14 @@[0m
[0;36m[0m 		proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for;
 		proxy_set_header X-Forwarded-Proto $scheme;
 	}
[0;32m+[0m
[0;32m[0m[0;32m+	location /flower {[0m
[0;32m[0m[0;32m+		proxy_pass http://localhost:5555;[0m
[0;32m[0m[0;32m+		proxy_set_header Host $host;[0m
[0;32m[0m[0;32m+		proxy_redirect off;[0m
[0;32m[0m[0;32m+		proxy_http_version 1.1;[0m
[0;32m[0m[0;32m+		proxy_set_header Upgrade $http_upgrade;[0m
[0;32m[0m[0;32m+		proxy_set_header Connection "upgrade";[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m }


2023-04-20 08:18:57,349 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:18:57,374 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 08:18:57,699 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:18:57,721 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 08:18:57,930 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:57,964 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 08:18:57,985 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:58,009 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 08:18:58,415 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:58,478 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 08:18:58,505 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:58,541 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:18:58,558 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:18:58,583 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:18:58,629 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:18:58,665 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 08:18:59,254 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:18:59,282 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 08:19:00,285 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:00,314 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 08:19:00,334 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:00,359 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 08:19:01,334 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:01,353 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 08:19:01,862 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:01,883 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 08:19:01,917 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:01,940 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 08:19:01,983 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:02,016 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 08:19:02,406 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:02,426 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 08:19:02,445 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:02,468 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 08:19:03,403 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:03,424 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 08:19:03,453 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:03,476 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 08:19:03,505 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:03,528 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 08:19:03,563 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:03,585 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 08:19:03,619 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:03,642 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 08:19:04,051 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:04,075 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 08:19:04,119 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-20 08:19:04,535 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:04,566 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-20 08:19:04,591 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:04,619 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:19:04,678 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 08:19:04,719 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 08:19:05,031 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,056 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 08:19:05,113 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,135 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 08:19:05,181 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,203 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 08:19:05,273 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,295 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 08:19:05,340 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,373 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 08:19:05,387 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,409 p=344841 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:19:05,430 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,470 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:19:05,511 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 08:19:05,556 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 08:19:05,579 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,600 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 08:19:05,623 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,644 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 08:19:05,677 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,699 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 08:19:05,887 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:05,910 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 08:19:06,412 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 08:19:07,224 p=344841 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-344841s6hh0464/tmpe1phzzua/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-YsnTY7BbREqCIKOj[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+YOH4Vs3e8AwEdWyC[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 08:19:07,226 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 08:19:07,251 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:19:07,296 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 08:19:07,331 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 08:19:07,388 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:07,412 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 08:19:07,434 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:07,457 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 08:19:08,173 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:08,203 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 08:19:08,221 p=344841 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 08:19:08,221 p=344841 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 08:19:28,224 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:19:28,254 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:19:28,294 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 08:19:28,331 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 08:19:30,519 p=344841 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 08:19:30,519 p=344841 u=ubuntu n=ansible | ...ignoring
2023-04-20 08:19:30,549 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 08:19:37,811 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 08:19:37,834 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 08:19:37,909 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 08:19:37,965 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 08:19:37,983 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 08:19:38,000 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 08:19:38,036 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:19:39,931 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:39,953 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:19:41,514 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:41,538 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:19:41,563 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:41,584 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:19:41,605 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:41,627 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:19:43,604 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:43,634 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:19:45,618 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:45,646 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:19:47,159 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:47,180 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:19:48,664 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:48,692 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:19:48,713 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:48,734 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:19:48,752 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:48,777 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:19:50,459 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:50,487 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:19:50,518 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:50,547 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:19:52,042 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:52,066 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:19:53,773 p=344841 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 65
  stderr: |-
    Error:
    Error: failed to authenticate user "galaxy"
    user 'galaxy' - invalid credentials
  stderr_lines: <omitted>
  stdout: Authenticating user "galaxy" ...
  stdout_lines: <omitted>
2023-04-20 08:19:53,775 p=344841 u=ubuntu n=ansible | ...ignoring
2023-04-20 08:19:53,807 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:19:55,483 p=344841 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "galaxy" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "galaxy" ...
  stdout_lines: <omitted>
2023-04-20 08:19:55,483 p=344841 u=ubuntu n=ansible | ...ignoring
2023-04-20 08:19:55,517 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:19:57,333 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:57,357 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:19:58,844 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:19:58,866 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:19:58,890 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:19:58,916 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:20:00,257 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:20:00,292 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:20:01,766 p=344841 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 65
  stderr: |-
    Error:
    Error: failed to authenticate user "flower"
    user 'flower' - invalid credentials
  stderr_lines: <omitted>
  stdout: Authenticating user "flower" ...
  stdout_lines: <omitted>
2023-04-20 08:20:01,766 p=344841 u=ubuntu n=ansible | ...ignoring
2023-04-20 08:20:01,791 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:20:03,181 p=344841 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "flower" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "flower" ...
  stdout_lines: <omitted>
2023-04-20 08:20:03,181 p=344841 u=ubuntu n=ansible | ...ignoring
2023-04-20 08:20:03,205 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:20:04,366 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:20:04,390 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:20:05,560 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:20:05,584 p=344841 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:20:06,595 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:20:06,633 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 08:20:07,368 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:07,388 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 08:20:07,580 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:07,602 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 08:20:07,618 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:07,637 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 08:20:07,814 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:07,835 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 08:20:08,018 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:08,040 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 08:20:08,217 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:08,237 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 08:20:08,412 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:08,435 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 08:20:08,736 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:08,775 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 08:20:08,810 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:08,830 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 08:20:08,877 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:08,897 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 08:20:08,912 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:08,933 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 08:20:08,968 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:08,988 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 08:20:09,073 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 08:20:09,130 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 08:20:09,187 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:20:09,219 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 08:20:10,074 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:10,094 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 08:20:10,742 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:10,763 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:20:10,780 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:10,801 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:20:11,149 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:11,169 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:20:11,186 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:11,207 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 08:20:12,016 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:12,036 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 08:20:12,073 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 08:20:12,110 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 08:20:12,308 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 08:20:12,332 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 08:20:12,668 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 08:20:12,693 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 08:20:12,982 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:13,001 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 08:20:13,292 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:13,312 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 08:20:13,328 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:13,349 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 08:20:13,705 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:13,726 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 08:20:14,070 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:14,090 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 08:20:14,279 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:14,299 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 08:20:14,313 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:14,333 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 08:20:14,676 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:14,696 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 08:20:14,731 p=344841 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 08:20:14,765 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 08:20:14,780 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:14,803 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 08:20:14,829 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:14,851 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 08:20:14,876 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:14,896 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 08:20:15,080 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:15,102 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 08:20:15,130 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:15,151 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 08:20:15,341 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:15,361 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 08:20:15,388 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:15,408 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 08:20:15,423 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:15,442 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 08:20:15,457 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:15,477 p=344841 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 08:20:15,492 p=344841 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:20:15,563 p=344841 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 08:20:22,528 p=344841 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:20:22,548 p=344841 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 08:20:22,747 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:22,767 p=344841 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 08:20:23,718 p=344841 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:20:23,757 p=344841 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 08:20:23,757 p=344841 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=244  changed=41   unreachable=0    failed=0    skipped=132  rescued=0    ignored=5   
2023-04-20 08:41:27,125 p=357286 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 08:41:27,206 p=357286 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 08:41:27,223 p=357286 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 08:41:28,309 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:28,317 p=357286 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 08:41:29,369 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:29,389 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:41:29,415 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:29,426 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 08:41:29,455 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:29,467 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 08:41:29,490 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:29,503 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 08:41:29,527 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:29,537 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 08:41:30,366 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:30,373 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 08:41:30,651 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:30,658 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 08:41:30,699 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:30,706 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 08:41:31,549 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:31,555 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 08:41:31,580 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:31,592 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 08:41:31,625 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:31,632 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 08:41:31,658 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:31,666 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 08:41:31,696 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:31,703 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:41:31,718 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:31,724 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 08:41:31,984 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:31,991 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 08:41:32,241 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:32,249 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 08:41:32,267 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:32,276 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 08:41:32,461 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:32,472 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 08:41:32,934 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:32,942 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 08:41:33,300 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:33,307 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:41:33,340 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:33,351 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 08:41:33,545 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 08:41:33,701 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 08:41:33,710 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 08:41:33,888 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:33,895 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 08:41:34,225 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 08:41:34,234 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 08:41:34,568 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 08:41:34,577 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 08:41:34,921 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:34,928 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 08:41:35,268 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:35,275 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 08:41:35,440 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:35,447 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 08:41:35,955 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:35,968 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 08:41:35,992 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 08:41:35,994 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:36,001 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 08:41:36,014 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:36,022 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 08:41:36,056 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 08:41:36,058 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:36,065 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 08:41:36,447 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:41:36,457 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 08:41:36,470 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:36,481 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 08:41:36,505 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:36,511 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 08:41:36,522 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:36,529 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 08:41:36,911 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:41:36,919 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 08:41:36,931 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:37,004 p=357286 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 08:41:37,066 p=357286 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 08:41:37,904 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:37,923 p=357286 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 08:41:38,731 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:38,750 p=357286 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 08:41:38,765 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:38,784 p=357286 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 08:41:39,590 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:39,608 p=357286 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 08:41:40,265 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:40,322 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 08:41:40,760 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:40,781 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 08:41:40,802 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:40,825 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 08:41:41,071 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,091 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 08:41:41,289 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,309 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 08:41:41,366 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,386 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 08:41:41,409 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,428 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 08:41:41,445 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,465 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 08:41:41,481 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,501 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 08:41:41,517 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,537 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 08:41:41,558 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,577 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 08:41:41,613 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:41,649 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 08:41:41,662 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,682 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 08:41:41,717 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 08:41:41,730 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:41,767 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 08:41:42,215 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:42,237 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 08:41:42,252 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:42,273 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 08:41:42,293 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:42,313 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 08:41:42,334 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:42,371 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 08:41:42,388 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:42,408 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 08:41:42,474 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:42,509 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 08:41:43,379 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:43,402 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 08:41:43,418 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:43,440 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 08:41:43,513 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:43,534 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:41:43,551 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:43,574 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 08:41:43,608 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:43,642 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 08:41:43,664 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 08:41:43,668 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 08:41:43,670 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 08:41:43,672 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:43,691 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 08:41:43,752 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:43,791 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 08:41:44,605 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:44,624 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 08:41:44,640 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:44,661 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 08:41:44,733 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:44,752 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:41:44,768 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:44,790 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 08:41:44,821 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:44,854 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 08:41:44,875 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 08:41:44,879 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 08:41:44,881 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 08:41:44,883 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:44,902 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 08:41:44,915 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:44,936 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 08:41:45,762 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:45,783 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:41:45,798 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:45,818 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 08:41:45,833 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:45,853 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 08:41:46,308 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:46,330 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 08:41:46,367 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:46,402 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 08:41:46,576 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:46,597 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 08:41:46,623 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:46,647 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 08:41:46,957 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:46,979 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 08:41:46,996 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:47,016 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 08:41:47,319 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:47,339 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 08:41:47,651 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:47,688 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 08:41:47,984 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:48,004 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 08:41:48,839 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:48,877 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 08:41:48,896 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 08:41:48,915 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 08:41:48,960 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:48,979 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 08:41:49,020 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:49,039 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 08:41:49,079 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 08:41:49,089 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 08:41:49,096 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 08:41:49,104 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 08:41:49,114 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 08:41:49,126 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 08:41:49,132 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 08:41:49,136 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 08:41:49,139 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 08:41:49,161 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 08:41:49,227 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 08:41:49,297 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 08:41:49,334 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 08:41:49,367 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 08:41:49,369 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:49,388 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 08:41:49,472 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 08:41:49,519 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 08:41:49,562 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 08:41:49,584 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 08:41:49,675 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:49,712 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 08:41:49,822 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:49,843 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 08:41:50,449 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:50,470 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 08:41:50,579 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:50,601 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 08:41:50,908 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:41:51,089 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 08:41:51,113 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 08:41:51,302 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:41:51,491 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 08:41:51,515 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 08:41:51,603 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:51,626 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 08:41:51,645 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:51,666 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 08:41:51,706 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:51,745 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 08:41:52,095 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:52,116 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 08:41:52,488 p=357286 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 08:41:52,492 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 08:41:52,820 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 08:41:53,161 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 08:41:53,491 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 08:41:53,823 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 08:41:53,845 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 08:41:54,201 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 08:41:54,514 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 08:41:54,844 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 08:41:55,154 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 08:41:55,479 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 08:41:55,797 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 08:41:56,132 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 08:41:56,465 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 08:41:56,795 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 08:41:57,133 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 08:41:57,158 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 08:41:57,228 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 08:41:57,270 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 08:41:58,908 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:41:58,928 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 08:41:59,033 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:41:59,053 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 08:42:00,988 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:01,009 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 08:42:02,909 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:02,932 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 08:42:03,039 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:03,067 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 08:42:03,084 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:03,104 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 08:42:03,119 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:03,139 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 08:42:03,201 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:03,248 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 08:42:03,378 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:03,417 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 08:42:03,872 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:03,892 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 08:42:04,094 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:04,114 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 08:42:04,644 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 08:42:05,148 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 08:42:05,170 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 08:42:05,727 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 08:42:05,750 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 08:42:06,294 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 08:42:06,778 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 08:42:07,238 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 08:42:07,944 p=357286 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-357286l3hz77z2/tmpcxjbhe5j/reports.yml[0m
[0;32m[0m[0;36m@@ -0,0 +1,4 @@[0m
[0;36m[0m[0;32m+reports:[0m
[0;32m[0m[0;32m+    database_connection: "postgresql:///galaxy?host=/var/run/postgresql"[0m
[0;32m[0m[0;32m+    file_path: "/data/datasets"  [0m
[0;32m[0m[0;32m+    template_cache_path: "/srv/galaxy/var/compiled_templates/reports/"[0m
[0;32m[0m

2023-04-20 08:42:07,946 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 08:42:07,969 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 08:42:08,480 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 08:42:08,501 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 08:42:09,003 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:09,023 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 08:42:09,212 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:09,231 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 08:42:09,338 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:09,358 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 08:42:09,373 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:09,393 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 08:42:09,407 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:09,427 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 08:42:09,441 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:09,460 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 08:42:09,476 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:09,495 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 08:42:10,026 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:10,045 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 08:42:10,150 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:10,170 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 08:42:10,278 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:10,299 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 08:42:11,196 p=357286 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-357286l3hz77z2/tmpdh6m6i37/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -26,6 +26,11 @@[0m
[0;36m[0m             - workflow-schedulers
             processes: 2
     process_manager: systemd
[0;32m+    reports:[0m
[0;32m[0m[0;32m+        bind: unix:/srv/galaxy/var/config/reports.sock[0m
[0;32m[0m[0;32m+        config_file: /srv/galaxy/config/reports.yml[0m
[0;32m[0m[0;32m+        enable: true[0m
[0;32m[0m[0;32m+        url_prefix: /reports[0m
[0;32m[0m     tusd:
         enable: true
         tusd_path: /usr/local/sbin/tusd


2023-04-20 08:42:11,196 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:42:11,216 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 08:42:11,271 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:11,334 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 08:42:13,168 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:13,188 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 08:42:15,042 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:15,067 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 08:42:20,746 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:20,767 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 08:42:21,396 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:21,417 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 08:42:23,220 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:23,250 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 08:42:24,969 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:24,994 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 08:42:25,046 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:25,101 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 08:42:25,219 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:25,240 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 08:42:25,761 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 08:42:25,784 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 08:42:26,292 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 08:42:26,645 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 08:42:26,668 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 08:42:27,114 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 08:42:27,474 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 08:42:27,497 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 08:42:27,539 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:27,596 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 08:42:29,100 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:29,120 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 08:42:30,531 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:30,552 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 08:42:30,660 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:30,680 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 08:42:30,783 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:30,803 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 08:42:30,903 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:30,964 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 08:42:31,334 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:31,354 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 08:42:31,695 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:31,715 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 08:42:32,084 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:32,105 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 08:42:32,486 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:32,507 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 08:42:32,701 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:32,721 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 08:42:32,904 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:32,926 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 08:42:33,026 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,050 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 08:42:33,154 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,175 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 08:42:33,277 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,297 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 08:42:33,405 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,426 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 08:42:33,535 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,555 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 08:42:33,664 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,685 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 08:42:33,792 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,812 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 08:42:33,922 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,942 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 08:42:33,956 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:33,977 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 08:42:34,018 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:34,093 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 08:42:34,195 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:34,214 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 08:42:34,872 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:34,892 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 08:42:34,914 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:34,934 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 08:42:34,949 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:34,969 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 08:42:35,006 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:35,071 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 08:42:35,507 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:35,526 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 08:42:35,640 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:35,682 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 08:42:35,850 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:35,870 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 08:42:36,199 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:36,218 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 08:42:38,996 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,034 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 08:42:39,213 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,233 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 08:42:39,249 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,269 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 08:42:39,647 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,667 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 08:42:39,703 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,723 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 08:42:39,738 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,757 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 08:42:39,771 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,790 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 08:42:39,814 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,833 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 08:42:39,857 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,876 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 08:42:39,891 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,928 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 08:42:39,947 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:39,967 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 08:42:39,994 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:40,014 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 08:42:40,190 p=357286 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '02770'[0m
[0;31m[0m[0;32m+mode: '0755'[0m
[0;32m[0m path: /etc/redis


2023-04-20 08:42:40,191 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:42:40,210 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 08:42:40,540 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:40,559 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:42:40,573 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:40,598 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:42:40,633 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:40,666 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 08:42:41,525 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:41,545 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:42:41,561 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:41,583 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 08:42:41,897 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:41,938 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 08:42:42,254 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:42,274 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 08:42:42,492 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:42,513 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 08:42:42,822 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:42,843 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 08:42:42,874 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:42,895 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 08:42:43,084 p=357286 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1681978699.693959[0m
[0;31m[0m[0;31m-mtime: 1681979429.3620942[0m
[0;31m[0m[0;32m+atime: 1681980163.0602624[0m
[0;32m[0m[0;32m+mtime: 1681980163.0602624[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 08:42:43,084 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:42:43,105 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 08:42:43,285 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:43,306 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 08:42:44,197 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:44,216 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 08:42:45,331 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:45,352 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 08:42:45,522 p=357286 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 08:42:45,523 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:42:45,542 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 08:42:47,093 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:47,112 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 08:42:47,470 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:47,490 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 08:42:47,845 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:47,866 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 08:42:48,405 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:48,445 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:42:48,488 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:48,521 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 08:42:49,336 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:49,356 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 08:42:49,536 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:49,556 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:42:49,571 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:49,591 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:42:49,607 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:49,627 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 08:42:49,808 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:49,829 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 08:42:49,861 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:49,881 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 08:42:49,912 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:49,931 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 08:42:49,946 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:49,970 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 08:42:49,984 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:50,004 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:42:50,017 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:50,044 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 08:42:50,066 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:50,085 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 08:42:50,441 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:50,465 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 08:42:50,497 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:50,518 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 08:42:50,866 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 08:42:50,887 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 08:42:51,071 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 08:42:51,092 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 08:42:51,280 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:42:51,299 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 08:42:51,379 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 08:42:51,411 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 08:42:51,447 p=357286 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-20 08:42:51,463 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:51,486 p=357286 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 08:42:51,506 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:51,526 p=357286 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 08:42:51,544 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:42:51,564 p=357286 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 08:42:52,595 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:42:52,615 p=357286 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 08:43:08,959 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:08,979 p=357286 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 08:43:09,177 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 08:43:09,227 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:09,263 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 08:43:10,231 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:10,256 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 08:43:10,278 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:10,302 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 08:43:10,324 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:10,349 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 08:43:10,366 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:10,391 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 08:43:10,414 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:10,438 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 08:43:10,484 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:10,546 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 08:43:10,779 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:10,804 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 08:43:10,831 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:10,855 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 08:43:10,881 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:10,905 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 08:43:11,147 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:11,171 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 08:43:11,197 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 08:43:11,220 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 08:43:11,269 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:11,311 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 08:43:11,331 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:11,355 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 08:43:11,762 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:11,783 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 08:43:11,821 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 08:43:11,866 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:11,912 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 08:43:12,154 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:12,192 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 08:43:12,418 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:12,440 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 08:43:12,967 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:12,995 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 08:43:13,208 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:13,231 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 08:43:13,423 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:13,448 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 08:43:13,493 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:13,527 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 08:43:14,258 p=357286 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/sites-available/galaxy[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-357286l3hz77z2/tmp_tw58t4y/galaxy.j2[0m
[0;32m[0m[0;36m@@ -104,4 +104,9 @@[0m
[0;36m[0m 		proxy_set_header Connection "upgrade";
 	}
 
[0;32m+[0m
[0;32m[0m[0;32m+	location /reports/ {[0m
[0;32m[0m[0;32m+		proxy_pass http://unix:unix:/srv/galaxy/var/config/reports.sock:/;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m }


2023-04-20 08:43:14,261 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:43:14,286 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 08:43:14,566 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:43:14,593 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 08:43:14,824 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:14,845 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 08:43:14,869 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:14,889 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 08:43:15,229 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:15,273 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 08:43:15,297 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:15,321 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:43:15,342 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:15,367 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:43:15,421 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:15,458 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 08:43:16,134 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:16,154 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 08:43:17,145 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:17,170 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 08:43:17,189 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:17,214 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 08:43:18,077 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:18,103 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 08:43:18,575 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:18,600 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 08:43:18,628 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:18,648 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 08:43:18,678 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:18,698 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 08:43:19,008 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:19,029 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 08:43:19,046 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:19,068 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 08:43:19,950 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:19,974 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 08:43:20,004 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:20,024 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 08:43:20,052 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:20,074 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 08:43:20,107 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:20,128 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 08:43:20,163 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:20,183 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 08:43:20,488 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:20,510 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 08:43:20,549 p=357286 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-20 08:43:20,867 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:20,887 p=357286 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-20 08:43:20,906 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:20,927 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:43:20,981 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:21,021 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 08:43:21,238 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,263 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 08:43:21,308 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,330 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 08:43:21,363 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,383 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 08:43:21,433 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,453 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 08:43:21,484 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,505 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 08:43:21,519 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,538 p=357286 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:43:21,556 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,593 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:43:21,628 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:21,672 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 08:43:21,694 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,714 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 08:43:21,733 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,752 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 08:43:21,766 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,787 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 08:43:21,956 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:21,975 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 08:43:22,319 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 08:43:22,894 p=357286 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-357286l3hz77z2/tmpsivrj6s1/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-YOH4Vs3e8AwEdWyC[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+vAehEUgi5NNwvRTe[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 08:43:22,896 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 08:43:22,918 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:43:22,954 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:22,988 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 08:43:23,037 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:23,056 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 08:43:23,072 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:23,092 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 08:43:23,686 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:23,707 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 08:43:23,723 p=357286 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 08:43:23,723 p=357286 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 08:43:43,726 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:43:43,748 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:43:43,783 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 08:43:43,819 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 08:43:44,955 p=357286 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 08:43:44,955 p=357286 u=ubuntu n=ansible | ...ignoring
2023-04-20 08:43:44,975 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 08:43:48,304 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 08:43:48,326 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 08:43:48,394 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 08:43:48,411 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 08:43:48,429 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 08:43:48,447 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 08:43:48,487 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:43:49,337 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:49,357 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:43:50,241 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:50,264 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:43:50,279 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:50,301 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:43:50,318 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:50,338 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:43:51,172 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:51,192 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:43:52,089 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:52,109 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:43:52,954 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:52,975 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:43:53,845 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:53,865 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:43:53,882 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:53,902 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:43:53,917 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:53,937 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:43:54,845 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:54,865 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:43:54,884 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:54,905 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:43:55,717 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:55,739 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:43:56,582 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:56,603 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:43:56,619 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:56,639 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:43:56,653 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:56,674 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:43:57,535 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:57,555 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:43:57,574 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:57,596 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:43:58,458 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:58,478 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:43:59,339 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:43:59,360 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:43:59,377 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:59,398 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:43:59,414 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:43:59,435 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:44:00,257 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:44:00,278 p=357286 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:44:01,199 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:44:01,238 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 08:44:01,829 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:01,849 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 08:44:02,016 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:02,036 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 08:44:02,051 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:02,072 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 08:44:02,238 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:02,258 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 08:44:02,432 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:02,452 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 08:44:02,622 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:02,642 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 08:44:02,830 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:02,851 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 08:44:03,144 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:03,181 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 08:44:03,216 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:03,236 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 08:44:03,271 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:03,292 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 08:44:03,306 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:03,325 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 08:44:03,360 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:03,380 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 08:44:03,463 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 08:44:03,521 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 08:44:03,578 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:44:03,612 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 08:44:04,471 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:04,491 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 08:44:05,086 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:05,107 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:44:05,127 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:05,153 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:44:05,451 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:05,471 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:44:05,487 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:05,507 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 08:44:06,341 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:06,362 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 08:44:06,397 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 08:44:06,433 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 08:44:06,629 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 08:44:06,651 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 08:44:06,997 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 08:44:07,018 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 08:44:07,286 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:07,306 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 08:44:07,593 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:07,612 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 08:44:07,627 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:07,647 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 08:44:07,987 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:08,007 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 08:44:08,339 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:08,359 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 08:44:08,539 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:08,559 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 08:44:08,573 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:08,593 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 08:44:08,927 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:08,946 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 08:44:08,980 p=357286 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 08:44:09,015 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 08:44:09,028 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,048 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 08:44:09,074 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,093 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 08:44:09,120 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,139 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 08:44:09,321 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,341 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 08:44:09,367 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,389 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 08:44:09,563 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,582 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 08:44:09,609 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,629 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 08:44:09,643 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,663 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 08:44:09,677 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,698 p=357286 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 08:44:09,712 p=357286 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:44:09,785 p=357286 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 08:44:16,685 p=357286 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:44:16,705 p=357286 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 08:44:16,901 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:16,921 p=357286 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 08:44:17,796 p=357286 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:44:17,840 p=357286 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 08:44:17,841 p=357286 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=239  changed=29   unreachable=0    failed=0    skipped=136  rescued=0    ignored=1   
2023-04-20 08:45:55,159 p=366510 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 08:45:55,244 p=366510 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 08:45:55,261 p=366510 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 08:45:56,407 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:45:56,414 p=366510 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 08:45:57,631 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:45:57,649 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:45:57,680 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:45:57,689 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 08:45:57,719 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:45:57,726 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 08:45:57,752 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:45:57,759 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 08:45:57,786 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:45:57,793 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 08:45:58,880 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:45:58,888 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 08:45:59,210 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:45:59,219 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 08:45:59,267 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:45:59,278 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 08:46:00,250 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:00,258 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 08:46:00,289 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:00,297 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 08:46:00,333 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:00,340 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 08:46:00,370 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:00,377 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 08:46:00,405 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:00,413 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:46:00,430 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:00,438 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 08:46:00,772 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:00,779 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 08:46:01,070 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:01,078 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 08:46:01,102 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:01,110 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 08:46:01,323 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:01,331 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 08:46:01,829 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:01,836 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 08:46:02,263 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:02,270 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 08:46:02,309 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:02,325 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 08:46:02,556 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 08:46:02,741 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 08:46:02,752 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 08:46:02,959 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:02,967 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 08:46:03,355 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 08:46:03,367 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 08:46:03,777 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 08:46:03,788 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 08:46:04,184 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:04,192 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 08:46:04,581 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:04,588 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 08:46:04,792 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:04,802 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 08:46:05,440 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:05,454 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 08:46:05,483 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 08:46:05,485 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:05,494 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 08:46:05,509 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:05,517 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 08:46:05,564 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 08:46:05,567 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:05,575 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 08:46:06,033 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:46:06,043 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 08:46:06,059 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:06,066 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 08:46:06,095 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:06,103 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 08:46:06,121 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:06,128 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 08:46:06,581 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:46:06,592 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 08:46:06,609 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:06,689 p=366510 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 08:46:06,757 p=366510 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 08:46:07,764 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:07,785 p=366510 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 08:46:08,798 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:08,818 p=366510 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 08:46:08,835 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:08,856 p=366510 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 08:46:10,059 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:10,080 p=366510 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 08:46:10,874 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:10,929 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 08:46:11,559 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:11,583 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 08:46:11,611 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:11,633 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 08:46:11,901 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:11,921 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 08:46:12,147 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,169 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 08:46:12,233 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,256 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 08:46:12,279 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,301 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 08:46:12,322 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,343 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 08:46:12,366 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,391 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 08:46:12,413 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,438 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 08:46:12,460 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,487 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 08:46:12,530 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:12,568 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 08:46:12,586 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,612 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 08:46:12,648 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 08:46:12,664 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:12,701 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 08:46:13,182 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:13,203 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 08:46:13,223 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:13,248 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 08:46:13,272 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:13,293 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 08:46:13,316 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:13,354 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 08:46:13,379 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:13,400 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 08:46:13,471 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:13,523 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 08:46:14,623 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:14,646 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 08:46:14,668 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:14,690 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 08:46:14,767 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:14,789 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:46:14,811 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:14,833 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 08:46:14,871 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:14,908 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 08:46:14,936 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 08:46:14,939 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 08:46:14,941 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 08:46:14,943 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:14,964 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 08:46:15,035 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:15,076 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 08:46:16,091 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:16,112 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 08:46:16,130 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:16,151 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 08:46:16,228 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:16,248 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:46:16,269 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:16,291 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 08:46:16,326 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:16,360 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 08:46:16,388 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 08:46:16,391 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 08:46:16,393 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 08:46:16,395 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:16,420 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 08:46:16,439 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:16,463 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 08:46:17,549 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:17,572 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 08:46:17,594 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:17,615 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 08:46:17,636 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:17,657 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 08:46:18,136 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:18,158 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 08:46:18,203 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:18,239 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 08:46:18,447 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:18,468 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 08:46:18,497 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:18,518 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 08:46:18,864 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:18,886 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 08:46:18,907 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:18,931 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 08:46:19,247 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:19,270 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 08:46:19,582 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:19,628 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 08:46:19,973 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:19,993 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 08:46:20,997 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:21,041 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 08:46:21,065 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 08:46:21,088 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 08:46:21,145 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:21,168 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 08:46:21,210 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:21,231 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 08:46:21,272 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 08:46:21,276 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 08:46:21,291 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 08:46:21,296 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 08:46:21,310 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 08:46:21,318 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 08:46:21,327 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 08:46:21,334 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 08:46:21,338 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 08:46:21,361 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 08:46:21,444 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 08:46:21,536 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 08:46:21,573 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 08:46:21,607 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 08:46:21,611 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:21,636 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 08:46:21,729 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 08:46:21,775 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 08:46:21,851 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 08:46:21,873 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 08:46:21,935 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:21,973 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 08:46:22,089 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:22,112 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 08:46:22,760 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:22,781 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 08:46:22,910 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:22,930 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 08:46:23,248 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:46:23,420 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 08:46:23,444 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 08:46:23,645 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:46:23,830 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 08:46:23,854 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 08:46:23,945 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:23,966 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 08:46:23,987 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:24,007 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 08:46:24,048 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:24,087 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 08:46:24,462 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:24,483 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 08:46:24,855 p=366510 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 08:46:24,858 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 08:46:25,177 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 08:46:25,502 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 08:46:25,842 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 08:46:26,161 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 08:46:26,185 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 08:46:26,575 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 08:46:26,907 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 08:46:27,222 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 08:46:27,583 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 08:46:27,931 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 08:46:28,255 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 08:46:28,580 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 08:46:28,899 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 08:46:29,202 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 08:46:29,507 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 08:46:29,532 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 08:46:29,610 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:29,652 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 08:46:30,931 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:30,953 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 08:46:31,056 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:31,077 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 08:46:32,997 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:33,018 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 08:46:34,886 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:34,920 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 08:46:35,026 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:35,047 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 08:46:35,066 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:35,087 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 08:46:35,106 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:35,128 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 08:46:35,190 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:35,236 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 08:46:35,376 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:35,414 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 08:46:35,933 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:35,957 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 08:46:36,176 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:36,196 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 08:46:36,748 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 08:46:37,252 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 08:46:37,276 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 08:46:37,773 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 08:46:37,798 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 08:46:38,435 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 08:46:38,955 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 08:46:39,455 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 08:46:39,962 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 08:46:39,985 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 08:46:40,501 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 08:46:40,524 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 08:46:41,061 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:41,082 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 08:46:41,267 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:41,288 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 08:46:41,393 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:41,414 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 08:46:41,433 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:41,454 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 08:46:41,471 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:41,494 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 08:46:41,512 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:41,532 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 08:46:41,551 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:41,572 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 08:46:42,149 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:42,170 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 08:46:42,275 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:42,296 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 08:46:42,406 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:42,426 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 08:46:43,057 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:43,078 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 08:46:43,137 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:43,190 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 08:46:44,916 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:44,939 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 08:46:46,882 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:46,904 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 08:46:52,342 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:52,365 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 08:46:53,048 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:53,069 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 08:46:54,871 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:54,894 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 08:46:56,604 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:46:56,625 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 08:46:56,688 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:56,745 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 08:46:56,858 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:46:56,885 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 08:46:57,460 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 08:46:57,484 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 08:46:57,992 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 08:46:58,352 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 08:46:58,375 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 08:46:58,801 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 08:46:59,149 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 08:46:59,181 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 08:46:59,225 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 08:46:59,282 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 08:47:00,806 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:00,827 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 08:47:02,340 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:02,361 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 08:47:02,474 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:02,495 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 08:47:02,603 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:02,624 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 08:47:02,703 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:02,761 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 08:47:03,155 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:03,176 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 08:47:03,522 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:03,543 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 08:47:03,898 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:03,923 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 08:47:04,317 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:04,341 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 08:47:04,535 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:04,559 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 08:47:04,742 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:04,764 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 08:47:04,869 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:04,891 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 08:47:04,993 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:05,014 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 08:47:05,115 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:05,135 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 08:47:05,249 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:05,269 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 08:47:05,374 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:05,394 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 08:47:05,515 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:05,535 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 08:47:05,658 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:05,678 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 08:47:05,797 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:05,817 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 08:47:05,835 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:05,855 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 08:47:05,899 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:05,980 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 08:47:06,084 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:06,106 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 08:47:06,768 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:06,788 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 08:47:06,810 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:06,831 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 08:47:06,846 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:06,865 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 08:47:06,902 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:06,965 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 08:47:07,402 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:07,422 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 08:47:07,534 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:07,572 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 08:47:07,758 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:07,779 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 08:47:08,119 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:08,141 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 08:47:10,957 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:47:10,997 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 08:47:11,187 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:11,207 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 08:47:11,230 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:11,250 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 08:47:11,733 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:11,755 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 08:47:11,801 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:11,823 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 08:47:11,844 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:11,866 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 08:47:11,885 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:11,904 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 08:47:11,931 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:11,952 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 08:47:11,981 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:12,001 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 08:47:12,019 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:12,058 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 08:47:12,080 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:12,100 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 08:47:12,132 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:12,151 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 08:47:12,364 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:12,386 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 08:47:12,725 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:12,746 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:47:12,764 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:12,785 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:47:12,824 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:12,863 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 08:47:13,717 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:13,737 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 08:47:13,755 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:13,776 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 08:47:14,103 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:14,140 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 08:47:14,465 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:14,485 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 08:47:14,723 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:14,743 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 08:47:15,047 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:15,068 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 08:47:15,101 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:15,122 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 08:47:15,337 p=366510 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1681980163.0586584[0m
[0;31m[0m[0;31m-mtime: 1681980265.061637[0m
[0;31m[0m[0;32m+atime: 1681980435.280072[0m
[0;32m[0m[0;32m+mtime: 1681980435.280072[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 08:47:15,337 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:47:15,356 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 08:47:15,535 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:15,557 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 08:47:16,399 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:16,421 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 08:47:17,522 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:17,549 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 08:47:17,728 p=366510 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 08:47:17,728 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:47:17,750 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 08:47:19,280 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:19,301 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 08:47:19,665 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:19,689 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 08:47:20,069 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:20,089 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 08:47:20,638 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:20,677 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:47:20,716 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:20,750 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 08:47:21,568 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:21,590 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 08:47:21,768 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:21,790 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:47:21,810 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:21,832 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:47:21,851 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:21,874 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 08:47:22,055 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,078 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 08:47:22,113 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,135 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 08:47:22,169 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,189 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 08:47:22,207 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,227 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 08:47:22,244 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,264 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 08:47:22,284 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,304 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 08:47:22,329 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,349 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 08:47:22,726 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,747 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 08:47:22,778 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:22,800 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 08:47:23,166 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 08:47:23,188 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 08:47:23,395 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 08:47:23,417 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 08:47:23,622 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:23,642 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 08:47:23,726 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:23,758 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 08:47:23,794 p=366510 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 08:47:23,992 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 08:47:24,030 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:24,072 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 08:47:24,979 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,000 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 08:47:25,024 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,045 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 08:47:25,070 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,090 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 08:47:25,107 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,127 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 08:47:25,142 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,164 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 08:47:25,207 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:25,273 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 08:47:25,508 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,530 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 08:47:25,561 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,582 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 08:47:25,611 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,632 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 08:47:25,875 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:25,898 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 08:47:25,929 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 08:47:25,951 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 08:47:26,000 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:26,046 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 08:47:26,068 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:26,088 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 08:47:26,499 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:26,520 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 08:47:26,561 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 08:47:26,606 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:26,654 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 08:47:26,859 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:26,904 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 08:47:27,084 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:27,109 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 08:47:27,508 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:27,532 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 08:47:27,733 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:27,753 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 08:47:27,953 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:27,976 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 08:47:28,020 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:28,056 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 08:47:28,856 p=366510 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/sites-available/galaxy[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-366510m4g4tg3j/tmp69fatnuh/galaxy.j2[0m
[0;32m[0m[0;36m@@ -106,7 +106,7 @@[0m
[0;36m[0m 
 
 	location /reports/ {
[0;31m-		proxy_pass http://unix:unix:/srv/galaxy/var/config/reports.sock:/;[0m
[0;31m[0m[0;32m+		proxy_pass http://unix:/srv/galaxy/var/config/reports.sock:/;[0m
[0;32m[0m 	}
 
 }


2023-04-20 08:47:28,859 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:47:28,884 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 08:47:29,109 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 08:47:29,133 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 08:47:29,331 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:29,352 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 08:47:29,375 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:29,395 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 08:47:29,724 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:29,763 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 08:47:29,784 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:29,805 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:47:29,819 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:29,839 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:47:29,879 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:29,918 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 08:47:30,509 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:30,530 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 08:47:31,369 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:31,390 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 08:47:31,409 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:31,428 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 08:47:32,374 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:32,396 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 08:47:32,864 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:32,885 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 08:47:32,915 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:32,936 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 08:47:32,965 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:32,988 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 08:47:33,334 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:33,354 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 08:47:33,371 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:33,392 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 08:47:34,374 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:34,395 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 08:47:34,426 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:34,447 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 08:47:34,477 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:34,497 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 08:47:34,532 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:34,553 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 08:47:34,590 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:34,610 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 08:47:34,923 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:34,944 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 08:47:34,981 p=366510 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-20 08:47:35,320 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:47:35,343 p=366510 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-20 08:47:35,367 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:35,391 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:47:35,446 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:35,484 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 08:47:35,716 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:35,738 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 08:47:35,790 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:35,811 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 08:47:35,848 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:35,869 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 08:47:35,922 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:35,946 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 08:47:35,987 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:36,008 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 08:47:36,026 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:36,049 p=366510 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 08:47:36,072 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:36,114 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:47:36,156 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:36,201 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 08:47:36,229 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:36,249 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 08:47:36,273 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:36,293 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 08:47:36,314 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:36,335 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 08:47:36,526 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:36,553 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 08:47:36,944 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 08:47:37,610 p=366510 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-366510m4g4tg3j/tmpw1cwmjsx/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-vAehEUgi5NNwvRTe[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+9pe0biwkiP2DvFNk[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 08:47:37,612 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 08:47:37,636 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:47:37,680 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:37,721 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 08:47:37,778 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:37,806 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 08:47:37,825 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:47:37,845 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 08:47:38,497 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:38,519 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 08:47:38,540 p=366510 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 08:47:38,540 p=366510 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 08:47:58,544 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:47:58,568 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 08:47:58,608 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 08:47:58,647 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 08:47:59,812 p=366510 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 08:47:59,812 p=366510 u=ubuntu n=ansible | ...ignoring
2023-04-20 08:47:59,833 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 08:48:03,856 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 08:48:03,880 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 08:48:03,946 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 08:48:03,963 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 08:48:03,980 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 08:48:03,997 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 08:48:04,042 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:48:04,981 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:05,002 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:48:05,913 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:05,934 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:48:05,953 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:05,974 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:48:05,997 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:06,019 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:48:07,012 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:07,033 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:48:07,925 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:07,947 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:48:08,845 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:08,865 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:48:09,772 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:09,792 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:48:09,809 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:09,830 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:48:09,850 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:09,870 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:48:10,797 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:10,818 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:48:10,840 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:10,861 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:48:11,806 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:11,828 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:48:12,695 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:12,717 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:48:12,734 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:12,756 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:48:12,774 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:12,795 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:48:13,696 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:13,721 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:48:13,743 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:13,764 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 08:48:14,706 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:14,728 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 08:48:15,693 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:15,714 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:48:15,737 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:15,763 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 08:48:15,781 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:15,802 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 08:48:16,768 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:16,790 p=366510 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 08:48:17,697 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:17,737 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 08:48:18,390 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:18,410 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 08:48:18,594 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:18,622 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 08:48:18,639 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:18,662 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 08:48:18,854 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:18,874 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 08:48:19,062 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:19,082 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 08:48:19,260 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:19,281 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 08:48:19,474 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:19,494 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 08:48:19,802 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:19,841 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 08:48:19,881 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:19,902 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 08:48:19,942 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:19,963 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 08:48:19,988 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:20,011 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 08:48:20,054 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:20,074 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 08:48:20,166 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 08:48:20,225 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 08:48:20,283 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 08:48:20,316 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 08:48:21,205 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:21,225 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 08:48:21,837 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:21,857 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:48:21,875 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:21,894 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:48:22,211 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:22,237 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 08:48:22,256 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:22,281 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 08:48:23,153 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:23,173 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 08:48:23,207 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 08:48:23,244 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 08:48:23,445 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 08:48:23,468 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 08:48:23,816 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 08:48:23,837 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 08:48:24,112 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:24,132 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 08:48:24,418 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:24,437 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 08:48:24,455 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:24,476 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 08:48:24,834 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:24,854 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 08:48:25,201 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:25,223 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 08:48:25,398 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:25,419 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 08:48:25,434 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:25,455 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 08:48:25,811 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:25,832 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 08:48:25,871 p=366510 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 08:48:25,906 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 08:48:25,919 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:25,940 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 08:48:25,966 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:25,987 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 08:48:26,012 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:26,033 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 08:48:26,214 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:26,234 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 08:48:26,260 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:26,280 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 08:48:26,457 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:26,477 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 08:48:26,503 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:26,524 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 08:48:26,538 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:26,559 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 08:48:26,574 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:26,594 p=366510 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 08:48:26,609 p=366510 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 08:48:26,681 p=366510 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 08:48:33,529 p=366510 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 08:48:33,550 p=366510 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 08:48:33,738 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:33,758 p=366510 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 08:48:34,640 p=366510 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 08:48:34,679 p=366510 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 08:48:34,679 p=366510 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=237  changed=24   unreachable=0    failed=0    skipped=133  rescued=0    ignored=1   
2023-04-20 08:54:28,387 p=375413 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-20 08:54:28,387 p=375413 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-20 08:54:28,387 p=375413 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-20 08:54:28,388 p=375413 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-20 08:54:28,388 p=375413 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-20 08:54:28,388 p=375413 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-20 08:54:28,388 p=375413 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-20 08:54:28,388 p=375413 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-20 08:54:28,388 p=375413 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-20 08:54:28,389 p=375413 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-20 08:54:28,389 p=375413 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-20 08:54:28,389 p=375413 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-20 08:54:28,389 p=375413 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-20 08:54:28,389 p=375413 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) is already installed, skipping.
2023-04-20 08:54:28,389 p=375413 u=ubuntu n=ansible | - geerlingguy.docker (6.1.0) is already installed, skipping.
2023-04-20 08:54:28,389 p=375413 u=ubuntu n=ansible | - usegalaxy_eu.rabbitmqserver (1.4.4) is already installed, skipping.
2023-04-20 08:54:28,390 p=375413 u=ubuntu n=ansible | - galaxyproject.pulsar (1.0.10) is already installed, skipping.
2023-04-20 08:54:28,390 p=375413 u=ubuntu n=ansible | - geerlingguy.redis (1.8.0) is already installed, skipping.
2023-04-20 08:54:28,390 p=375413 u=ubuntu n=ansible | - usegalaxy_eu.flower (1.0.2) is already installed, skipping.
2023-04-20 08:54:28,390 p=375413 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-20 09:47:07,408 p=378824 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-20 09:47:07,408 p=378824 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-20 09:47:07,409 p=378824 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-20 09:47:07,409 p=378824 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-20 09:47:07,409 p=378824 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-20 09:47:07,409 p=378824 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-20 09:47:07,410 p=378824 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-20 09:47:07,410 p=378824 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-20 09:47:07,410 p=378824 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-20 09:47:07,410 p=378824 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-20 09:47:07,411 p=378824 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-20 09:47:07,411 p=378824 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-20 09:47:07,411 p=378824 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-20 09:47:07,411 p=378824 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) is already installed, skipping.
2023-04-20 09:47:07,412 p=378824 u=ubuntu n=ansible | - geerlingguy.docker (6.1.0) is already installed, skipping.
2023-04-20 09:47:07,412 p=378824 u=ubuntu n=ansible | - usegalaxy_eu.rabbitmqserver (1.4.4) is already installed, skipping.
2023-04-20 09:47:07,412 p=378824 u=ubuntu n=ansible | - galaxyproject.pulsar (1.0.10) is already installed, skipping.
2023-04-20 09:47:07,413 p=378824 u=ubuntu n=ansible | - geerlingguy.redis (1.8.0) is already installed, skipping.
2023-04-20 09:47:07,413 p=378824 u=ubuntu n=ansible | - usegalaxy_eu.flower (1.0.2) is already installed, skipping.
2023-04-20 09:47:07,563 p=378824 u=ubuntu n=ansible | - downloading role 'influxdb', owned by usegalaxy_eu
2023-04-20 09:47:08,190 p=378824 u=ubuntu n=ansible | - downloading role from https://github.com/usegalaxy-eu/ansible-influxdb/archive/v6.0.7.tar.gz
2023-04-20 09:47:08,374 p=378824 u=ubuntu n=ansible | - extracting usegalaxy_eu.influxdb to /home/ubuntu/galaxy/roles/usegalaxy_eu.influxdb
2023-04-20 09:47:08,379 p=378824 u=ubuntu n=ansible | - usegalaxy_eu.influxdb (v6.0.7) was installed successfully
2023-04-20 09:48:06,971 p=378881 u=ubuntu n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. See 
https://docs.ansible.com/ansible-core/2.14/user_guide/playbooks_reuse_includes.html for details. This feature will be
 removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 09:48:07,040 p=378881 u=ubuntu n=ansible | PLAY [monitoring] ****************************************************************************************************
2023-04-20 09:48:07,061 p=378881 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 09:48:08,209 p=378881 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:08,226 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create influxdb group] *****************************************************************
2023-04-20 09:48:08,509 p=378881 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:08,516 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create influxdb user] ******************************************************************
2023-04-20 09:48:08,928 p=378881 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:08,935 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Add influxdb to ssl-cert] **************************************************************
2023-04-20 09:48:08,965 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:08,972 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create collectd typesdb if needed] *****************************************************
2023-04-20 09:48:08,991 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:08,998 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Check collectd types.db existence] *****************************************************
2023-04-20 09:48:09,014 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:09,022 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Get collectd types.db from github] *****************************************************
2023-04-20 09:48:09,037 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:09,044 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install ca-certificates] ***************************************************************
2023-04-20 09:48:09,059 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:09,066 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Download version when python >= 2.7.9] *************************************************
2023-04-20 09:48:09,084 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:09,091 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install curl when python < 2.7.9] ******************************************************
2023-04-20 09:48:09,109 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:09,118 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Download version when python < 2.7.9] **************************************************
2023-04-20 09:48:09,137 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:09,145 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install package] ***********************************************************************
2023-04-20 09:48:09,160 p=378881 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:09,167 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install any necessary dependency] ******************************************************
2023-04-20 09:48:15,138 p=378881 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:15,145 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Import InfluxData GPG signing key] *****************************************************
2023-04-20 09:48:16,105 p=378881 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:48:16,112 p=378881 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Add InfluxData repository] *************************************************************
2023-04-20 09:48:55,496 p=378881 u=ubuntu n=ansible | fatal: [gat-20.eu.training.galaxyproject.eu]: FAILED! => changed=false 
  msg: 'Failed to update apt cache: W:http://ppa.launchpad.net/apptainer/ppa/ubuntu/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details., W:GPG error: https://repos.influxdata.com/ubuntu jammy InRelease: The following signatures couldn''t be verified because the public key is not available: NO_PUBKEY D8FF8E1F7DF8B07E, E:The repository ''https://repos.influxdata.com/ubuntu jammy InRelease'' is not signed., W:Updating from such a repository can''t be done securely, and is therefore disabled by default., W:See apt-secure(8) manpage for repository creation and user configuration details., W:http://ppa.launchpad.net/natefoo/slurm-drmaa/ubuntu/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details., W:https://cvmrepo.web.cern.ch/cvmrepo/apt/dists/jammy-prod/Release.gpg: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg),
    see the DEPRECATION section in apt-key(8) for details.'
2023-04-20 09:48:55,497 p=378881 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 09:48:55,497 p=378881 u=ubuntu n=ansible | gat-20.eu.training.galaxyproject.eu : ok=5    changed=3    unreachable=0    failed=1    skipped=9    rescued=0    ignored=0   
2023-04-20 09:54:21,671 p=384581 u=ubuntu n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. See 
https://docs.ansible.com/ansible-core/2.14/user_guide/playbooks_reuse_includes.html for details. This feature will be
 removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 09:54:21,742 p=384581 u=ubuntu n=ansible | PLAY [monitoring] ****************************************************************************************************
2023-04-20 09:54:21,764 p=384581 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 09:54:22,417 p=384581 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 09:55:20,837 p=384955 u=ubuntu n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. See 
https://docs.ansible.com/ansible-core/2.14/user_guide/playbooks_reuse_includes.html for details. This feature will be
 removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 09:55:20,906 p=384955 u=ubuntu n=ansible | PLAY [monitoring] ****************************************************************************************************
2023-04-20 09:55:20,926 p=384955 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 09:55:22,014 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,032 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create influxdb group] *****************************************************************
2023-04-20 09:55:22,291 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,298 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create influxdb user] ******************************************************************
2023-04-20 09:55:22,635 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,642 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Add influxdb to ssl-cert] **************************************************************
2023-04-20 09:55:22,664 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,672 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create collectd typesdb if needed] *****************************************************
2023-04-20 09:55:22,685 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,693 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Check collectd types.db existence] *****************************************************
2023-04-20 09:55:22,707 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,714 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Get collectd types.db from github] *****************************************************
2023-04-20 09:55:22,728 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,736 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install ca-certificates] ***************************************************************
2023-04-20 09:55:22,751 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,758 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Download version when python >= 2.7.9] *************************************************
2023-04-20 09:55:22,771 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,778 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install curl when python < 2.7.9] ******************************************************
2023-04-20 09:55:22,792 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,799 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Download version when python < 2.7.9] **************************************************
2023-04-20 09:55:22,817 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,824 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install package] ***********************************************************************
2023-04-20 09:55:22,839 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,848 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install any necessary dependency] ******************************************************
2023-04-20 09:55:22,865 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,872 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Import InfluxData GPG signing key] *****************************************************
2023-04-20 09:55:22,887 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,894 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Add InfluxData repository] *************************************************************
2023-04-20 09:55:22,909 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,918 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install InfluxDB package] **************************************************************
2023-04-20 09:55:22,933 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,942 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Enable EPEL] ***************************************************************************
2023-04-20 09:55:22,957 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,967 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Add yum repository | RedHat] ***********************************************************
2023-04-20 09:55:22,983 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:22,990 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install telegraf package | RedHat] *****************************************************
2023-04-20 09:55:23,005 p=384955 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:23,011 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create data and config directories] ****************************************************
2023-04-20 09:55:23,309 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/data)
2023-04-20 09:55:23,478 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/meta)
2023-04-20 09:55:23,632 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/wal)
2023-04-20 09:55:23,786 p=384955 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,3 +1,3 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 1001[0m
[0;32m[0m[0;32m+owner: 1001[0m
[0;32m[0m path: /etc/influxdb


2023-04-20 09:55:23,788 p=384955 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu] => (item=/etc/influxdb)
2023-04-20 09:55:23,798 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Write config] **************************************************************************
2023-04-20 09:55:24,551 p=384955 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-3849556dqvwbbh/tmpgp1kp4nv/conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,403 @@[0m
[0;36m[0m[0;32m+#[0m
[0;32m[0m[0;32m+# GENERATED BY ANSIBLE[0m
[0;32m[0m[0;32m+#[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# The values in this file override the default values used by the system if[0m
[0;32m[0m[0;32m+# a config option is not specified.  The commented out lines are the the configuration[0m
[0;32m[0m[0;32m+# field and the default value used.  Uncommentting a line and changing the value[0m
[0;32m[0m[0;32m+# will change the value used at runtime when the process is restarted.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Once every 24 hours InfluxDB will report usage data to usage.influxdata.com[0m
[0;32m[0m[0;32m+# The data includes a random ID, os, arch, version, the number of series and other[0m
[0;32m[0m[0;32m+# usage data. No data from user databases is ever transmitted.[0m
[0;32m[0m[0;32m+# Change this option to true to disable reporting.[0m
[0;32m[0m[0;32m+# reporting-disabled = false[0m
[0;32m[0m[0;32m+reporting-disabled = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# we'll try to get the hostname automatically, but if it the os returns something[0m
[0;32m[0m[0;32m+# that isn't resolvable by other servers in the cluster, use this option to[0m
[0;32m[0m[0;32m+# manually set the hostname[0m
[0;32m[0m[0;32m+# hostname = "localhost"[0m
[0;32m[0m[0;32m+hostname = "gat-20.eu.galaxy.training"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [meta][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls the parameters for the Raft consensus group that stores metadata[0m
[0;32m[0m[0;32m+### about the InfluxDB cluster.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[meta][0m
[0;32m[0m[0;32m+  # Where the metadata/raft database is stored[0m
[0;32m[0m[0;32m+  dir = "/var/lib/influxdb/meta"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Automatically create a default retention policy when creating a database.[0m
[0;32m[0m[0;32m+  # retention-autocreate = true[0m
[0;32m[0m[0;32m+  retention-autocreate = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # If log messages are printed for the meta service[0m
[0;32m[0m[0;32m+  # logging-enabled = true[0m
[0;32m[0m[0;32m+  logging-enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [data][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls where the actual shard data for InfluxDB lives and how it is[0m
[0;32m[0m[0;32m+### flushed from the WAL. "dir" may need to be changed to a suitable place[0m
[0;32m[0m[0;32m+### for your system, but the WAL settings are an advanced configuration. The[0m
[0;32m[0m[0;32m+### defaults should work for most systems.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[data][0m
[0;32m[0m[0;32m+  # The directory where the TSM storage engine stores TSM files.[0m
[0;32m[0m[0;32m+  dir = "/var/lib/influxdb/data"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The directory where the TSM storage engine stores WAL files.[0m
[0;32m[0m[0;32m+  wal-dir = "/var/lib/influxdb/wal"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Trace logging provides more verbose output around the tsm engine. Turning[0m
[0;32m[0m[0;32m+  # this on can provide more useful output for debugging tsm engine issues.[0m
[0;32m[0m[0;32m+  # trace-logging-enabled = false[0m
[0;32m[0m[0;32m+  trace-logging-enabled = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Whether queries should be logged before execution. Very useful for troubleshooting, but will[0m
[0;32m[0m[0;32m+  # log any sensitive data contained within a query.[0m
[0;32m[0m[0;32m+  # query-log-enabled = true[0m
[0;32m[0m[0;32m+  query-log-enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Settings for the TSM engine[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # CacheMaxMemorySize is the maximum size a shard's cache can[0m
[0;32m[0m[0;32m+  # reach before it starts rejecting writes.[0m
[0;32m[0m[0;32m+  # cache-max-memory-size = 1048576000[0m
[0;32m[0m[0;32m+  cache-max-memory-size = 1048576000[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # CacheSnapshotMemorySize is the size at which the engine will[0m
[0;32m[0m[0;32m+  # snapshot the cache and write it to a TSM file, freeing up memory[0m
[0;32m[0m[0;32m+  # cache-snapshot-memory-size = 26214400[0m
[0;32m[0m[0;32m+  cache-snapshot-memory-size = 26214400[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # CacheSnapshotWriteColdDuration is the length of time at[0m
[0;32m[0m[0;32m+  # which the engine will snapshot the cache and write it to[0m
[0;32m[0m[0;32m+  # a new TSM file if the shard hasn't received writes or deletes[0m
[0;32m[0m[0;32m+  # cache-snapshot-write-cold-duration = "10m"[0m
[0;32m[0m[0;32m+  cache-snapshot-write-cold-duration = "10m"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # CompactFullWriteColdDuration is the duration at which the engine[0m
[0;32m[0m[0;32m+  # will compact all TSM files in a shard if it hasn't received a[0m
[0;32m[0m[0;32m+  # write or delete[0m
[0;32m[0m[0;32m+  # compact-full-write-cold-duration = "4h"[0m
[0;32m[0m[0;32m+  compact-full-write-cold-duration = "4h"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maximum series allowed per database before writes are dropped.  This limit can prevent[0m
[0;32m[0m[0;32m+  # high cardinality issues at the database level.  This limit can be disabled by setting it to[0m
[0;32m[0m[0;32m+  # 0.[0m
[0;32m[0m[0;32m+  # max-series-per-database = 1000000[0m
[0;32m[0m[0;32m+  max-series-per-database = 1000000[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maximum number of tag values per tag that are allowed before writes are dropped.  This limit[0m
[0;32m[0m[0;32m+  # can prevent high cardinality tag values from being written to a measurement.  This limit can be[0m
[0;32m[0m[0;32m+  # disabled by setting it to 0.[0m
[0;32m[0m[0;32m+  # max-values-per-tag = 100000[0m
[0;32m[0m[0;32m+  max-values-per-tag = 100000[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [coordinator][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls the clustering service configuration.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[coordinator][0m
[0;32m[0m[0;32m+  # The default time a write request will wait until a "timeout" error is returned to the caller.[0m
[0;32m[0m[0;32m+  # write-timeout = "10s"[0m
[0;32m[0m[0;32m+  write-timeout = "10s"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maximum number of concurrent queries allowed to be executing at one time.  If a query is[0m
[0;32m[0m[0;32m+  # executed and exceeds this limit, an error is returned to the caller.  This limit can be disabled[0m
[0;32m[0m[0;32m+  # by setting it to 0.[0m
[0;32m[0m[0;32m+  # max-concurrent-queries = 0[0m
[0;32m[0m[0;32m+  max-concurrent-queries = 0[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maximum time a query will is allowed to execute before being killed by the system.  This limit[0m
[0;32m[0m[0;32m+  # can help prevent run away queries.  Setting the value to 0 disables the limit.[0m
[0;32m[0m[0;32m+  # query-timeout = "0s"[0m
[0;32m[0m[0;32m+  query-timeout = "0s"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The the time threshold when a query will be logged as a slow query.  This limit can be set to help[0m
[0;32m[0m[0;32m+  # discover slow or resource intensive queries.  Setting the value to 0 disables the slow query logging.[0m
[0;32m[0m[0;32m+  # log-queries-after = "0s"[0m
[0;32m[0m[0;32m+  log-queries-after = "0s"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maximum number of points a SELECT can process.  A value of 0 will make the maximum[0m
[0;32m[0m[0;32m+  # point count unlimited.[0m
[0;32m[0m[0;32m+  # max-select-point = 0[0m
[0;32m[0m[0;32m+  max-select-point = 0[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maximum number of series a SELECT can run.  A value of 0 will make the maximum series[0m
[0;32m[0m[0;32m+  # count unlimited.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maximum number of series a SELECT can run. A value of zero will make the maximum series[0m
[0;32m[0m[0;32m+  # count unlimited.[0m
[0;32m[0m[0;32m+  # max-select-series = 0[0m
[0;32m[0m[0;32m+  max-select-series = 0[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maxium number of group by time bucket a SELECt can create.  A value of zero will max the maximum[0m
[0;32m[0m[0;32m+  # number of buckets unlimited.[0m
[0;32m[0m[0;32m+  # max-select-buckets = 0[0m
[0;32m[0m[0;32m+  max-select-buckets = 0[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [retention][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls the enforcement of retention policies for evicting old data.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[retention][0m
[0;32m[0m[0;32m+  # Determines whether retention policy enforcment enabled.[0m
[0;32m[0m[0;32m+  # enabled = true[0m
[0;32m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The interval of time when retention policy enforcement checks run.[0m
[0;32m[0m[0;32m+  # check-interval = "30m"[0m
[0;32m[0m[0;32m+  check-interval = "30m"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [shard-precreation][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls the precreation of shards, so they are available before data arrives.[0m
[0;32m[0m[0;32m+### Only shards that, after creation, will have both a start- and end-time in the[0m
[0;32m[0m[0;32m+### future, will ever be created. Shards are never precreated that would be wholly[0m
[0;32m[0m[0;32m+### or partially in the past.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[shard-precreation][0m
[0;32m[0m[0;32m+  # Determines whether shard pre-creation service is enabled.[0m
[0;32m[0m[0;32m+  # enabled = true[0m
[0;32m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The interval of time when the check to pre-create new shards runs.[0m
[0;32m[0m[0;32m+  # check-interval = "10m"[0m
[0;32m[0m[0;32m+  check-interval = "10m"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The default period ahead of the endtime of a shard group that its successor[0m
[0;32m[0m[0;32m+  # group is created.[0m
[0;32m[0m[0;32m+  # advance-period = "30m"[0m
[0;32m[0m[0;32m+  advance-period = "30m"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls the system self-monitoring, statistics and diagnostics.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### The internal database for monitoring data is created automatically if[0m
[0;32m[0m[0;32m+### if it does not already exist. The target retention within this database[0m
[0;32m[0m[0;32m+### is called 'monitor' and is also created with a retention period of 7 days[0m
[0;32m[0m[0;32m+### and a replication factor of 1, if it does not exist. In all cases the[0m
[0;32m[0m[0;32m+### this retention policy is configured as the default for the database.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[monitor][0m
[0;32m[0m[0;32m+  # Whether to record statistics internally.[0m
[0;32m[0m[0;32m+  # store-enabled = true[0m
[0;32m[0m[0;32m+  store-enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The destination database for recorded statistics[0m
[0;32m[0m[0;32m+  # store-database = "_internal"[0m
[0;32m[0m[0;32m+  store-database = "_internal"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The interval at which to record statistics[0m
[0;32m[0m[0;32m+  # store-interval = "10s"[0m
[0;32m[0m[0;32m+  store-interval = "10s"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [admin][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls the availability of the built-in, web-based admin interface. If HTTPS is[0m
[0;32m[0m[0;32m+### enabled for the admin interface, HTTPS must also be enabled on the [http] service.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### NOTE: This interface is deprecated as of 1.1.0 and will be removed in a future release.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[admin][0m
[0;32m[0m[0;32m+  # Determines whether the admin service is enabled.[0m
[0;32m[0m[0;32m+  # enabled = false[0m
[0;32m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The default bind address used by the admin service.[0m
[0;32m[0m[0;32m+  # bind-address = ":8083"[0m
[0;32m[0m[0;32m+  bind-address = ":8083"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Whether the admin service should use HTTPS.[0m
[0;32m[0m[0;32m+  # https-enabled = false[0m
[0;32m[0m[0;32m+  https-enabled = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The SSL certificate used when HTTPS is enabled.[0m
[0;32m[0m[0;32m+  # https-certificate = "/etc/ssl/influxdb.pem"[0m
[0;32m[0m[0;32m+  https-certificate = "/etc/ssl/influxdb.pem"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [http][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls how the HTTP endpoints are configured. These are the primary[0m
[0;32m[0m[0;32m+### mechanism for getting data into and out of InfluxDB.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[http][0m
[0;32m[0m[0;32m+  # Determines whether HTTP endpoint is enabled.[0m
[0;32m[0m[0;32m+  # enabled = true[0m
[0;32m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The bind address used by the HTTP service.[0m
[0;32m[0m[0;32m+  # bind-address = ":8086"[0m
[0;32m[0m[0;32m+  bind-address = ":8086"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Determines whether HTTP authentication is enabled.[0m
[0;32m[0m[0;32m+  # auth-enabled = false[0m
[0;32m[0m[0;32m+  auth-enabled = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The default realm sent back when issuing a basic auth challenge.[0m
[0;32m[0m[0;32m+  # realm = "InfluxDB"[0m
[0;32m[0m[0;32m+  realm = "InfluxDB"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Determines whether HTTP request logging is enable.d[0m
[0;32m[0m[0;32m+  # log-enabled = true[0m
[0;32m[0m[0;32m+  log-enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Determines whether detailed write logging is enabled.[0m
[0;32m[0m[0;32m+  # write-tracing = false[0m
[0;32m[0m[0;32m+  write-tracing = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Determines whether the pprof endpoint is enabled.  This endpoint is used for[0m
[0;32m[0m[0;32m+  # troubleshooting and monitoring.[0m
[0;32m[0m[0;32m+  # pprof-enabled = true[0m
[0;32m[0m[0;32m+  pprof-enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Determines whether HTTPS is enabled.[0m
[0;32m[0m[0;32m+  # https-enabled = false[0m
[0;32m[0m[0;32m+  https-enabled = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The SSL certificate to use when HTTPS is enabled.[0m
[0;32m[0m[0;32m+  # https-certificate = "/etc/ssl/influxdb.pem"[0m
[0;32m[0m[0;32m+  https-certificate = "/etc/ssl/influxdb.pem"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Use a separate private key location.[0m
[0;32m[0m[0;32m+  # https-private-key = ""[0m
[0;32m[0m[0;32m+  https-private-key = ""[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The JWT auth shared secret to validate requests using JSON web tokens.[0m
[0;32m[0m[0;32m+  # shared-sercret = ""[0m
[0;32m[0m[0;32m+  shared-sercret = ""[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The default chunk size for result sets that should be chunked.[0m
[0;32m[0m[0;32m+  # max-row-limit = 10000[0m
[0;32m[0m[0;32m+  max-row-limit = 10000[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The maximum number of HTTP connections that may be open at once.  New connections that[0m
[0;32m[0m[0;32m+  # would exceed this limit are dropped.  Setting this value to 0 disables the limit.[0m
[0;32m[0m[0;32m+  # max-connection-limit = 0[0m
[0;32m[0m[0;32m+  max-connection-limit = 0[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Enable http service over unix domain socket[0m
[0;32m[0m[0;32m+  # unix-socket-enabled = false[0m
[0;32m[0m[0;32m+  unix-socket-enabled = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The path of the unix domain socket.[0m
[0;32m[0m[0;32m+  # bind-socket = "/var/run/influxdb.sock"[0m
[0;32m[0m[0;32m+  bind-socket = "/var/run/influxdb.sock"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [subscriber][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls the subscriptions, which can be used to fork a copy of all data[0m
[0;32m[0m[0;32m+### received by the InfluxDB host.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[subscriber][0m
[0;32m[0m[0;32m+  # Determines whether the subscriber service is enabled.[0m
[0;32m[0m[0;32m+  # enabled = true[0m
[0;32m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The default timeout for HTTP writes to subscribers.[0m
[0;32m[0m[0;32m+  # http-timeout = "30s"[0m
[0;32m[0m[0;32m+  http-timeout = "30s"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Allows insecure HTTPS connections to subscribers.  This is useful when testing with self-[0m
[0;32m[0m[0;32m+  # signed certificates.[0m
[0;32m[0m[0;32m+  # insecure-skip-verify = false[0m
[0;32m[0m[0;32m+  insecure-skip-verify = false[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The path to the PEM encoded CA certs file. If the empty string, the default system certs will be used[0m
[0;32m[0m[0;32m+  # ca-certs = ""[0m
[0;32m[0m[0;32m+  ca-certs = ""[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The number of writer goroutines processing the write channel.[0m
[0;32m[0m[0;32m+  # write-concurrency = 40[0m
[0;32m[0m[0;32m+  write-concurrency = 40[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # The number of in-flight writes buffered in the write channel.[0m
[0;32m[0m[0;32m+  # write-buffer-size = 1000[0m
[0;32m[0m[0;32m+  write-buffer-size = 1000[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [[graphite]][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls one or many listeners for Graphite data.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[[graphite]][0m
[0;32m[0m[0;32m+  # Determines whether the graphite endpoint is enabled.[0m
[0;32m[0m[0;32m+  # enabled = false[0m
[0;32m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  [0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [[collectd]][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls one or many listeners for collectd data.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[[collectd]][0m
[0;32m[0m[0;32m+  # enabled = false[0m
[0;32m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  [0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [[opentsdb]][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls one or many listeners for OpenTSDB data.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[[opentsdb]][0m
[0;32m[0m[0;32m+  # enabled = false[0m
[0;32m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  [0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [[udp]][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls the listeners for InfluxDB line protocol data via UDP.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[[udp]][0m
[0;32m[0m[0;32m+  # enabled = false[0m
[0;32m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  [0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [continuous_queries][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### Controls how continuous queries are run within InfluxDB.[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[continuous_queries][0m
[0;32m[0m[0;32m+  # Determiens whether the continuous query service is enabled.[0m
[0;32m[0m[0;32m+  # enabled = true[0m
[0;32m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # Controls whether queries are logged when executed by the CQ service.[0m
[0;32m[0m[0;32m+  # log-enabled = true[0m
[0;32m[0m[0;32m+  log-enabled = true[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+  # interval for how often continuous queries will be checked if they need to run[0m
[0;32m[0m[0;32m+  # run-interval = "1s"[0m
[0;32m[0m[0;32m+  run-interval = "1s"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+### [logging][0m
[0;32m[0m[0;32m+###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[logging][0m
[0;32m[0m[0;32m+  format = "auto"[0m
[0;32m[0m[0;32m+  level = "info"[0m
[0;32m[0m[0;32m+  suppress-logo = false[0m
[0;32m[0m

2023-04-20 09:55:24,551 p=384955 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:24,557 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Run config update] *********************************************************************
2023-04-20 09:55:24,847 p=384955 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:24,855 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Write merged config] *******************************************************************
2023-04-20 09:55:25,593 p=384955 u=ubuntu n=ansible | [0;31m--- before: /etc/influxdb/influxdb.conf[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-3849556dqvwbbh/tmp3sjt8oh8[0m
[0;32m[0m[0;36m@@ -1,556 +1,151 @@[0m
[0;36m[0m[0;31m-### Welcome to the InfluxDB configuration file.[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-# The values in this file override the default values used by the system if[0m
[0;31m[0m[0;31m-# a config option is not specified. The commented out lines are the configuration[0m
[0;31m[0m[0;31m-# field and the default value used. Uncommenting a line and changing the value[0m
[0;31m[0m[0;31m-# will change the value used at runtime when the process is restarted.[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-# Once every 24 hours InfluxDB will report usage data to usage.influxdata.com[0m
[0;31m[0m[0;31m-# The data includes a random ID, os, arch, version, the number of series and other[0m
[0;31m[0m[0;31m-# usage data. No data from user databases is ever transmitted.[0m
[0;31m[0m[0;31m-# Change this option to true to enable reporting.[0m
[0;31m[0m reporting-enabled = false
[0;31m-[0m
[0;31m[0m[0;31m-# Bind address to use for the RPC service for backup and restore.[0m
[0;31m[0m[0;31m-# bind-address = "127.0.0.1:8088"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [meta][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls the parameters for the Raft consensus group that stores metadata[0m
[0;31m[0m[0;31m-### about the InfluxDB cluster.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+bind-address = "127.0.0.1:8088"[0m
[0;32m[0m 
 [meta]
[0;31m-  # Where the metadata/raft database is stored[0m
[0;31m[0m   dir = "/var/lib/influxdb/meta"
[0;31m-[0m
[0;31m[0m[0;31m-  # Automatically create a default retention policy when creating a database.[0m
[0;31m[0m[0;31m-  # retention-autocreate = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # If log messages are printed for the meta service[0m
[0;31m[0m[0;31m-  # logging-enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [data][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls where the actual shard data for InfluxDB lives and how it is[0m
[0;31m[0m[0;31m-### flushed from the WAL. "dir" may need to be changed to a suitable place[0m
[0;31m[0m[0;31m-### for your system, but the WAL settings are an advanced configuration. The[0m
[0;31m[0m[0;31m-### defaults should work for most systems.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  retention-autocreate = true[0m
[0;32m[0m[0;32m+  logging-enabled = true[0m
[0;32m[0m 
 [data]
[0;31m-  # The directory where the TSM storage engine stores TSM files.[0m
[0;31m[0m   dir = "/var/lib/influxdb/data"
[0;31m-[0m
[0;31m[0m[0;31m-  # The directory where the TSM storage engine stores WAL files.[0m
[0;31m[0m[0;32m+  index-version = "inmem"[0m
[0;32m[0m   wal-dir = "/var/lib/influxdb/wal"
[0;31m-[0m
[0;31m[0m[0;31m-  # The amount of time that a write will wait before fsyncing.  A duration[0m
[0;31m[0m[0;31m-  # greater than 0 can be used to batch up multiple fsync calls.  This is useful for slower[0m
[0;31m[0m[0;31m-  # disks or when WAL write contention is seen.  A value of 0s fsyncs every write to the WAL.[0m
[0;31m[0m[0;31m-  # Values in the range of 0-100ms are recommended for non-SSD disks.[0m
[0;31m[0m[0;31m-  # wal-fsync-delay = "0s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The type of shard index to use for new shards.  The default is an in-memory index that is[0m
[0;31m[0m[0;31m-  # recreated at startup.  A value of "tsi1" will use a disk based index that supports higher[0m
[0;31m[0m[0;31m-  # cardinality datasets.[0m
[0;31m[0m[0;31m-  # index-version = "inmem"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Trace logging provides more verbose output around the tsm engine. Turning[0m
[0;31m[0m[0;31m-  # this on can provide more useful output for debugging tsm engine issues.[0m
[0;31m[0m[0;31m-  # trace-logging-enabled = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Whether queries should be logged before execution. Very useful for troubleshooting, but will[0m
[0;31m[0m[0;31m-  # log any sensitive data contained within a query.[0m
[0;31m[0m[0;31m-  # query-log-enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Settings for the TSM engine[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # CacheMaxMemorySize is the maximum size a shard's cache can[0m
[0;31m[0m[0;31m-  # reach before it starts rejecting writes.[0m
[0;31m[0m[0;31m-  # Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).[0m
[0;31m[0m[0;31m-  # Values without a size suffix are in bytes.[0m
[0;31m[0m[0;31m-  # cache-max-memory-size = "1g"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # CacheSnapshotMemorySize is the size at which the engine will[0m
[0;31m[0m[0;31m-  # snapshot the cache and write it to a TSM file, freeing up memory[0m
[0;31m[0m[0;31m-  # Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).[0m
[0;31m[0m[0;31m-  # Values without a size suffix are in bytes.[0m
[0;31m[0m[0;31m-  # cache-snapshot-memory-size = "25m"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # CacheSnapshotWriteColdDuration is the length of time at[0m
[0;31m[0m[0;31m-  # which the engine will snapshot the cache and write it to[0m
[0;31m[0m[0;31m-  # a new TSM file if the shard hasn't received writes or deletes[0m
[0;31m[0m[0;31m-  # cache-snapshot-write-cold-duration = "10m"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # CompactFullWriteColdDuration is the duration at which the engine[0m
[0;31m[0m[0;31m-  # will compact all TSM files in a shard if it hasn't received a[0m
[0;31m[0m[0;31m-  # write or delete[0m
[0;31m[0m[0;31m-  # compact-full-write-cold-duration = "4h"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum number of concurrent full and level compactions that can run at one time.  A[0m
[0;31m[0m[0;31m-  # value of 0 results in 50% of runtime.GOMAXPROCS(0) used at runtime.  Any number greater[0m
[0;31m[0m[0;31m-  # than 0 limits compactions to that value.  This setting does not apply[0m
[0;31m[0m[0;31m-  # to cache snapshotting.[0m
[0;31m[0m[0;31m-  # max-concurrent-compactions = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The threshold, in bytes, when an index write-ahead log file will compact[0m
[0;31m[0m[0;31m-  # into an index file. Lower sizes will cause log files to be compacted more[0m
[0;31m[0m[0;31m-  # quickly and result in lower heap usage at the expense of write throughput.[0m
[0;31m[0m[0;31m-  # Higher sizes will be compacted less frequently, store more series in-memory,[0m
[0;31m[0m[0;31m-  # and provide higher write throughput.[0m
[0;31m[0m[0;31m-  # Valid size suffixes are k, m, or g (case insensitive, 1024 = 1k).[0m
[0;31m[0m[0;31m-  # Values without a size suffix are in bytes.[0m
[0;31m[0m[0;31m-  # max-index-log-file-size = "1m"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum series allowed per database before writes are dropped.  This limit can prevent[0m
[0;31m[0m[0;31m-  # high cardinality issues at the database level.  This limit can be disabled by setting it to[0m
[0;31m[0m[0;31m-  # 0.[0m
[0;31m[0m[0;31m-  # max-series-per-database = 1000000[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum number of tag values per tag that are allowed before writes are dropped.  This limit[0m
[0;31m[0m[0;31m-  # can prevent high cardinality tag values from being written to a measurement.  This limit can be[0m
[0;31m[0m[0;31m-  # disabled by setting it to 0.[0m
[0;31m[0m[0;31m-  # max-values-per-tag = 100000[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # If true, then the mmap advise value MADV_WILLNEED will be provided to the kernel with respect to[0m
[0;31m[0m[0;31m-  # TSM files. This setting has been found to be problematic on some kernels, and defaults to off.[0m
[0;31m[0m[0;31m-  # It might help users who have slow disks in some cases.[0m
[0;31m[0m[0;31m-  # tsm-use-madv-willneed = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [coordinator][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls the clustering service configuration.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  wal-fsync-delay = "0s"[0m
[0;32m[0m[0;32m+  query-log-enabled = true[0m
[0;32m[0m[0;32m+  cache-max-memory-size = 1048576000[0m
[0;32m[0m[0;32m+  cache-snapshot-memory-size = 26214400[0m
[0;32m[0m[0;32m+  cache-snapshot-write-cold-duration = "10m0s"[0m
[0;32m[0m[0;32m+  compact-full-write-cold-duration = "4h0m0s"[0m
[0;32m[0m[0;32m+  max-series-per-database = 1000000[0m
[0;32m[0m[0;32m+  max-values-per-tag = 100000[0m
[0;32m[0m[0;32m+  max-concurrent-compactions = 0[0m
[0;32m[0m[0;32m+  max-index-log-file-size = 1048576[0m
[0;32m[0m[0;32m+  trace-logging-enabled = false[0m
[0;32m[0m[0;32m+  tsm-use-madv-willneed = false[0m
[0;32m[0m 
 [coordinator]
[0;31m-  # The default time a write request will wait until a "timeout" error is returned to the caller.[0m
[0;31m[0m[0;31m-  # write-timeout = "10s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum number of concurrent queries allowed to be executing at one time.  If a query is[0m
[0;31m[0m[0;31m-  # executed and exceeds this limit, an error is returned to the caller.  This limit can be disabled[0m
[0;31m[0m[0;31m-  # by setting it to 0.[0m
[0;31m[0m[0;31m-  # max-concurrent-queries = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum time a query will is allowed to execute before being killed by the system.  This limit[0m
[0;31m[0m[0;31m-  # can help prevent run away queries.  Setting the value to 0 disables the limit.[0m
[0;31m[0m[0;31m-  # query-timeout = "0s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The time threshold when a query will be logged as a slow query.  This limit can be set to help[0m
[0;31m[0m[0;31m-  # discover slow or resource intensive queries.  Setting the value to 0 disables the slow query logging.[0m
[0;31m[0m[0;31m-  # log-queries-after = "0s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum number of points a SELECT can process.  A value of 0 will make[0m
[0;31m[0m[0;31m-  # the maximum point count unlimited.  This will only be checked every second so queries will not[0m
[0;31m[0m[0;31m-  # be aborted immediately when hitting the limit.[0m
[0;31m[0m[0;31m-  # max-select-point = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum number of series a SELECT can run.  A value of 0 will make the maximum series[0m
[0;31m[0m[0;31m-  # count unlimited.[0m
[0;31m[0m[0;31m-  # max-select-series = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maxium number of group by time bucket a SELECT can create.  A value of zero will max the maximum[0m
[0;31m[0m[0;31m-  # number of buckets unlimited.[0m
[0;31m[0m[0;31m-  # max-select-buckets = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [retention][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls the enforcement of retention policies for evicting old data.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  write-timeout = "10s"[0m
[0;32m[0m[0;32m+  max-concurrent-queries = 0[0m
[0;32m[0m[0;32m+  query-timeout = "0s"[0m
[0;32m[0m[0;32m+  log-queries-after = "0s"[0m
[0;32m[0m[0;32m+  max-select-point = 0[0m
[0;32m[0m[0;32m+  max-select-series = 0[0m
[0;32m[0m[0;32m+  max-select-buckets = 0[0m
[0;32m[0m 
 [retention]
[0;31m-  # Determines whether retention policy enforcement enabled.[0m
[0;31m[0m[0;31m-  # enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The interval of time when retention policy enforcement checks run.[0m
[0;31m[0m[0;31m-  # check-interval = "30m"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [shard-precreation][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls the precreation of shards, so they are available before data arrives.[0m
[0;31m[0m[0;31m-### Only shards that, after creation, will have both a start- and end-time in the[0m
[0;31m[0m[0;31m-### future, will ever be created. Shards are never precreated that would be wholly[0m
[0;31m[0m[0;31m-### or partially in the past.[0m
[0;31m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+  check-interval = "30m0s"[0m
[0;32m[0m 
 [shard-precreation]
[0;31m-  # Determines whether shard pre-creation service is enabled.[0m
[0;31m[0m[0;31m-  # enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The interval of time when the check to pre-create new shards runs.[0m
[0;31m[0m[0;31m-  # check-interval = "10m"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The default period ahead of the endtime of a shard group that its successor[0m
[0;31m[0m[0;31m-  # group is created.[0m
[0;31m[0m[0;31m-  # advance-period = "30m"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls the system self-monitoring, statistics and diagnostics.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### The internal database for monitoring data is created automatically if[0m
[0;31m[0m[0;31m-### if it does not already exist. The target retention within this database[0m
[0;31m[0m[0;31m-### is called 'monitor' and is also created with a retention period of 7 days[0m
[0;31m[0m[0;31m-### and a replication factor of 1, if it does not exist. In all cases the[0m
[0;31m[0m[0;31m-### this retention policy is configured as the default for the database.[0m
[0;31m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+  check-interval = "10m0s"[0m
[0;32m[0m[0;32m+  advance-period = "30m0s"[0m
[0;32m[0m 
 [monitor]
[0;31m-  # Whether to record statistics internally.[0m
[0;31m[0m[0;31m-  # store-enabled = true[0m
[0;31m[0m[0;32m+  store-enabled = true[0m
[0;32m[0m[0;32m+  store-database = "_internal"[0m
[0;32m[0m[0;32m+  store-interval = "10s"[0m
[0;32m[0m 
[0;31m-  # The destination database for recorded statistics[0m
[0;31m[0m[0;31m-  # store-database = "_internal"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The interval at which to record statistics[0m
[0;31m[0m[0;31m-  # store-interval = "10s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [http][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls how the HTTP endpoints are configured. These are the primary[0m
[0;31m[0m[0;31m-### mechanism for getting data into and out of InfluxDB.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+[subscriber][0m
[0;32m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+  http-timeout = "30s"[0m
[0;32m[0m[0;32m+  insecure-skip-verify = false[0m
[0;32m[0m[0;32m+  ca-certs = ""[0m
[0;32m[0m[0;32m+  write-concurrency = 40[0m
[0;32m[0m[0;32m+  write-buffer-size = 1000[0m
[0;32m[0m 
 [http]
[0;31m-  # Determines whether HTTP endpoint is enabled.[0m
[0;31m[0m[0;31m-  # enabled = true[0m
[0;31m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+  bind-address = ":8086"[0m
[0;32m[0m[0;32m+  auth-enabled = false[0m
[0;32m[0m[0;32m+  log-enabled = true[0m
[0;32m[0m[0;32m+  suppress-write-log = false[0m
[0;32m[0m[0;32m+  write-tracing = false[0m
[0;32m[0m[0;32m+  pprof-enabled = true[0m
[0;32m[0m[0;32m+  debug-pprof-enabled = false[0m
[0;32m[0m[0;32m+  https-enabled = false[0m
[0;32m[0m[0;32m+  https-certificate = "/etc/ssl/influxdb.pem"[0m
[0;32m[0m[0;32m+  https-private-key = ""[0m
[0;32m[0m[0;32m+  max-row-limit = 10000[0m
[0;32m[0m[0;32m+  max-connection-limit = 0[0m
[0;32m[0m[0;32m+  shared-secret = ""[0m
[0;32m[0m[0;32m+  realm = "InfluxDB"[0m
[0;32m[0m[0;32m+  unix-socket-enabled = false[0m
[0;32m[0m[0;32m+  unix-socket-permissions = "0777"[0m
[0;32m[0m[0;32m+  bind-socket = "/var/run/influxdb.sock"[0m
[0;32m[0m[0;32m+  max-body-size = 25000000[0m
[0;32m[0m[0;32m+  access-log-path = ""[0m
[0;32m[0m[0;32m+  max-concurrent-write-limit = 0[0m
[0;32m[0m[0;32m+  max-enqueued-write-limit = 0[0m
[0;32m[0m[0;32m+  enqueued-write-timeout = 30000000000[0m
[0;32m[0m 
[0;31m-  # The bind address used by the HTTP service.[0m
[0;31m[0m[0;31m-  # bind-address = ":8086"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Determines whether user authentication is enabled over HTTP/HTTPS.[0m
[0;31m[0m[0;31m-  # auth-enabled = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The default realm sent back when issuing a basic auth challenge.[0m
[0;31m[0m[0;31m-  # realm = "InfluxDB"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Determines whether HTTP request logging is enabled.[0m
[0;31m[0m[0;31m-  # log-enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Determines whether the HTTP write request logs should be suppressed when the log is enabled.[0m
[0;31m[0m[0;31m-  # suppress-write-log = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # When HTTP request logging is enabled, this option specifies the path where[0m
[0;31m[0m[0;31m-  # log entries should be written. If unspecified, the default is to write to stderr, which[0m
[0;31m[0m[0;31m-  # intermingles HTTP logs with internal InfluxDB logging.[0m
[0;31m[0m[0;31m-  #[0m
[0;31m[0m[0;31m-  # If influxd is unable to access the specified path, it will log an error and fall back to writing[0m
[0;31m[0m[0;31m-  # the request log to stderr.[0m
[0;31m[0m[0;31m-  # access-log-path = ""[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Determines whether detailed write logging is enabled.[0m
[0;31m[0m[0;31m-  # write-tracing = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Determines whether the pprof endpoint is enabled.  This endpoint is used for[0m
[0;31m[0m[0;31m-  # troubleshooting and monitoring.[0m
[0;31m[0m[0;31m-  # pprof-enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Enables a pprof endpoint that binds to localhost:6060 immediately on startup.[0m
[0;31m[0m[0;31m-  # This is only needed to debug startup issues.[0m
[0;31m[0m[0;31m-  # debug-pprof-enabled = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Determines whether HTTPS is enabled.[0m
[0;31m[0m[0;31m-  # https-enabled = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The SSL certificate to use when HTTPS is enabled.[0m
[0;31m[0m[0;31m-  # https-certificate = "/etc/ssl/influxdb.pem"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Use a separate private key location.[0m
[0;31m[0m[0;31m-  # https-private-key = ""[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The JWT auth shared secret to validate requests using JSON web tokens.[0m
[0;31m[0m[0;31m-  # shared-secret = ""[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The default chunk size for result sets that should be chunked.[0m
[0;31m[0m[0;31m-  # max-row-limit = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum number of HTTP connections that may be open at once.  New connections that[0m
[0;31m[0m[0;31m-  # would exceed this limit are dropped.  Setting this value to 0 disables the limit.[0m
[0;31m[0m[0;31m-  # max-connection-limit = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Enable http service over unix domain socket[0m
[0;31m[0m[0;31m-  # unix-socket-enabled = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The path of the unix domain socket.[0m
[0;31m[0m[0;31m-  # bind-socket = "/var/run/influxdb.sock"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum size of a client request body, in bytes. Setting this value to 0 disables the limit.[0m
[0;31m[0m[0;31m-  # max-body-size = 25000000[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum number of writes processed concurrently.[0m
[0;31m[0m[0;31m-  # Setting this to 0 disables the limit.[0m
[0;31m[0m[0;31m-  # max-concurrent-write-limit = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum number of writes queued for processing.[0m
[0;31m[0m[0;31m-  # Setting this to 0 disables the limit.[0m
[0;31m[0m[0;31m-  # max-enqueued-write-limit = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The maximum duration for a write to wait in the queue to be processed.[0m
[0;31m[0m[0;31m-  # Setting this to 0 or setting max-concurrent-write-limit to 0 disables the limit.[0m
[0;31m[0m[0;31m-  # enqueued-write-timeout = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [ifql][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Configures the ifql RPC API.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+[logging][0m
[0;32m[0m[0;32m+  format = "auto"[0m
[0;32m[0m[0;32m+  level = "info"[0m
[0;32m[0m[0;32m+  suppress-logo = false[0m
[0;32m[0m 
 [ifql]
[0;31m-  # Determines whether the RPC service is enabled.[0m
[0;31m[0m[0;31m-  # enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Determines whether additional logging is enabled.[0m
[0;31m[0m[0;31m-  # log-enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The bind address used by the ifql RPC service.[0m
[0;31m[0m[0;31m-  # bind-address = ":8082"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [logging][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls how the logger emits logs to the output.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-[logging][0m
[0;31m[0m[0;31m-  # Determines which log encoder to use for logs. Available options[0m
[0;31m[0m[0;31m-  # are auto, logfmt, and json. auto will use a more a more user-friendly[0m
[0;31m[0m[0;31m-  # output format if the output terminal is a TTY, but the format is not as[0m
[0;31m[0m[0;31m-  # easily machine-readable. When the output is a non-TTY, auto will use[0m
[0;31m[0m[0;31m-  # logfmt.[0m
[0;31m[0m[0;31m-  # format = "auto"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Determines which level of logs will be emitted. The available levels[0m
[0;31m[0m[0;31m-  # are error, warn, info, and debug. Logs that are equal to or above the[0m
[0;31m[0m[0;31m-  # specified level will be emitted.[0m
[0;31m[0m[0;31m-  # level = "info"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Suppresses the logo output that is printed when the program is started.[0m
[0;31m[0m[0;31m-  # The logo is always suppressed if STDOUT is not a TTY.[0m
[0;31m[0m[0;31m-  # suppress-logo = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [subscriber][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls the subscriptions, which can be used to fork a copy of all data[0m
[0;31m[0m[0;31m-### received by the InfluxDB host.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-[subscriber][0m
[0;31m[0m[0;31m-  # Determines whether the subscriber service is enabled.[0m
[0;31m[0m[0;31m-  # enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The default timeout for HTTP writes to subscribers.[0m
[0;31m[0m[0;31m-  # http-timeout = "30s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Allows insecure HTTPS connections to subscribers.  This is useful when testing with self-[0m
[0;31m[0m[0;31m-  # signed certificates.[0m
[0;31m[0m[0;31m-  # insecure-skip-verify = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The path to the PEM encoded CA certs file. If the empty string, the default system certs will be used[0m
[0;31m[0m[0;31m-  # ca-certs = ""[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The number of writer goroutines processing the write channel.[0m
[0;31m[0m[0;31m-  # write-concurrency = 40[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # The number of in-flight writes buffered in the write channel.[0m
[0;31m[0m[0;31m-  # write-buffer-size = 1000[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [[graphite]][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls one or many listeners for Graphite data.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  log-enabled = true[0m
[0;32m[0m[0;32m+  bind-address = ":8082"[0m
[0;32m[0m 
 [[graphite]]
[0;31m-  # Determines whether the graphite endpoint is enabled.[0m
[0;31m[0m[0;31m-  # enabled = false[0m
[0;31m[0m[0;31m-  # database = "graphite"[0m
[0;31m[0m[0;31m-  # retention-policy = ""[0m
[0;31m[0m[0;31m-  # bind-address = ":2003"[0m
[0;31m[0m[0;31m-  # protocol = "tcp"[0m
[0;31m[0m[0;31m-  # consistency-level = "one"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # These next lines control how batching works. You should have this enabled[0m
[0;31m[0m[0;31m-  # otherwise you could get dropped metrics or poor performance. Batching[0m
[0;31m[0m[0;31m-  # will buffer points in memory if you have many coming in.[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Flush if this many points get buffered[0m
[0;31m[0m[0;31m-  # batch-size = 5000[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # number of batches that may be pending in memory[0m
[0;31m[0m[0;31m-  # batch-pending = 10[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Flush at least this often even if we haven't hit buffer limit[0m
[0;31m[0m[0;31m-  # batch-timeout = "1s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # UDP Read buffer size, 0 means OS default. UDP listener will fail if set above OS max.[0m
[0;31m[0m[0;31m-  # udp-read-buffer = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  ### This string joins multiple matching 'measurement' values providing more control over the final measurement name.[0m
[0;31m[0m[0;31m-  # separator = "."[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  ### Default tags that will be added to all metrics.  These can be overridden at the template level[0m
[0;31m[0m[0;31m-  ### or by tags extracted from metric[0m
[0;31m[0m[0;31m-  # tags = ["region=us-east", "zone=1c"][0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  ### Each template line requires a template pattern.  It can have an optional[0m
[0;31m[0m[0;31m-  ### filter before the template and separated by spaces.  It can also have optional extra[0m
[0;31m[0m[0;31m-  ### tags following the template.  Multiple tags should be separated by commas and no spaces[0m
[0;31m[0m[0;31m-  ### similar to the line protocol format.  There can be only one default template.[0m
[0;31m[0m[0;31m-  # templates = [[0m
[0;31m[0m[0;31m-  #   "*.app env.service.resource.measurement",[0m
[0;31m[0m[0;31m-  #   # Default template[0m
[0;31m[0m[0;31m-  #   "server.*",[0m
[0;31m[0m[0;31m-  # ][0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [collectd][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls one or many listeners for collectd data.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  bind-address = ":2003"[0m
[0;32m[0m[0;32m+  database = "graphite"[0m
[0;32m[0m[0;32m+  retention-policy = ""[0m
[0;32m[0m[0;32m+  protocol = "tcp"[0m
[0;32m[0m[0;32m+  batch-size = 5000[0m
[0;32m[0m[0;32m+  batch-pending = 10[0m
[0;32m[0m[0;32m+  batch-timeout = "1s"[0m
[0;32m[0m[0;32m+  consistency-level = "one"[0m
[0;32m[0m[0;32m+  separator = "."[0m
[0;32m[0m[0;32m+  udp-read-buffer = 0[0m
[0;32m[0m 
 [[collectd]]
[0;31m-  # enabled = false[0m
[0;31m[0m[0;31m-  # bind-address = ":25826"[0m
[0;31m[0m[0;31m-  # database = "collectd"[0m
[0;31m[0m[0;31m-  # retention-policy = ""[0m
[0;31m[0m[0;31m-  #[0m
[0;31m[0m[0;31m-  # The collectd service supports either scanning a directory for multiple types[0m
[0;31m[0m[0;31m-  # db files, or specifying a single db file.[0m
[0;31m[0m[0;31m-  # typesdb = "/usr/local/share/collectd"[0m
[0;31m[0m[0;31m-  #[0m
[0;31m[0m[0;31m-  # security-level = "none"[0m
[0;31m[0m[0;31m-  # auth-file = "/etc/collectd/auth_file"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # These next lines control how batching works. You should have this enabled[0m
[0;31m[0m[0;31m-  # otherwise you could get dropped metrics or poor performance. Batching[0m
[0;31m[0m[0;31m-  # will buffer points in memory if you have many coming in.[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Flush if this many points get buffered[0m
[0;31m[0m[0;31m-  # batch-size = 5000[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Number of batches that may be pending in memory[0m
[0;31m[0m[0;31m-  # batch-pending = 10[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Flush at least this often even if we haven't hit buffer limit[0m
[0;31m[0m[0;31m-  # batch-timeout = "10s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # UDP Read buffer size, 0 means OS default. UDP listener will fail if set above OS max.[0m
[0;31m[0m[0;31m-  # read-buffer = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Multi-value plugins can be handled two ways.[0m
[0;31m[0m[0;31m-  # "split" will parse and store the multi-value plugin data into separate measurements[0m
[0;31m[0m[0;31m-  # "join" will parse and store the multi-value plugin as a single multi-value measurement.[0m
[0;31m[0m[0;31m-  # "split" is the default behavior for backward compatability with previous versions of influxdb.[0m
[0;31m[0m[0;31m-  # parse-multivalue-plugin = "split"[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [opentsdb][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls one or many listeners for OpenTSDB data.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  bind-address = ":25826"[0m
[0;32m[0m[0;32m+  database = "collectd"[0m
[0;32m[0m[0;32m+  retention-policy = ""[0m
[0;32m[0m[0;32m+  batch-size = 5000[0m
[0;32m[0m[0;32m+  batch-pending = 10[0m
[0;32m[0m[0;32m+  batch-timeout = "10s"[0m
[0;32m[0m[0;32m+  read-buffer = 0[0m
[0;32m[0m[0;32m+  typesdb = "/usr/share/collectd/types.db"[0m
[0;32m[0m[0;32m+  security-level = "none"[0m
[0;32m[0m[0;32m+  auth-file = "/etc/collectd/auth_file"[0m
[0;32m[0m[0;32m+  parse-multivalue-plugin = "split"[0m
[0;32m[0m 
 [[opentsdb]]
[0;31m-  # enabled = false[0m
[0;31m[0m[0;31m-  # bind-address = ":4242"[0m
[0;31m[0m[0;31m-  # database = "opentsdb"[0m
[0;31m[0m[0;31m-  # retention-policy = ""[0m
[0;31m[0m[0;31m-  # consistency-level = "one"[0m
[0;31m[0m[0;31m-  # tls-enabled = false[0m
[0;31m[0m[0;31m-  # certificate= "/etc/ssl/influxdb.pem"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Log an error for every malformed point.[0m
[0;31m[0m[0;31m-  # log-point-errors = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # These next lines control how batching works. You should have this enabled[0m
[0;31m[0m[0;31m-  # otherwise you could get dropped metrics or poor performance. Only points[0m
[0;31m[0m[0;31m-  # metrics received over the telnet protocol undergo batching.[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Flush if this many points get buffered[0m
[0;31m[0m[0;31m-  # batch-size = 1000[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Number of batches that may be pending in memory[0m
[0;31m[0m[0;31m-  # batch-pending = 5[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Flush at least this often even if we haven't hit buffer limit[0m
[0;31m[0m[0;31m-  # batch-timeout = "1s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [[udp]][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls the listeners for InfluxDB line protocol data via UDP.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  bind-address = ":4242"[0m
[0;32m[0m[0;32m+  database = "opentsdb"[0m
[0;32m[0m[0;32m+  retention-policy = ""[0m
[0;32m[0m[0;32m+  consistency-level = "one"[0m
[0;32m[0m[0;32m+  tls-enabled = false[0m
[0;32m[0m[0;32m+  certificate = "/etc/ssl/influxdb.pem"[0m
[0;32m[0m[0;32m+  batch-size = 1000[0m
[0;32m[0m[0;32m+  batch-pending = 5[0m
[0;32m[0m[0;32m+  batch-timeout = "1s"[0m
[0;32m[0m[0;32m+  log-point-errors = true[0m
[0;32m[0m 
 [[udp]]
[0;31m-  # enabled = false[0m
[0;31m[0m[0;31m-  # bind-address = ":8089"[0m
[0;31m[0m[0;31m-  # database = "udp"[0m
[0;31m[0m[0;31m-  # retention-policy = ""[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # InfluxDB precision for timestamps on received points ("" or "n", "u", "ms", "s", "m", "h")[0m
[0;31m[0m[0;31m-  # precision = ""[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # These next lines control how batching works. You should have this enabled[0m
[0;31m[0m[0;31m-  # otherwise you could get dropped metrics or poor performance. Batching[0m
[0;31m[0m[0;31m-  # will buffer points in memory if you have many coming in.[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Flush if this many points get buffered[0m
[0;31m[0m[0;31m-  # batch-size = 5000[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Number of batches that may be pending in memory[0m
[0;31m[0m[0;31m-  # batch-pending = 10[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Will flush at least this often even if we haven't hit buffer limit[0m
[0;31m[0m[0;31m-  # batch-timeout = "1s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # UDP Read buffer size, 0 means OS default. UDP listener will fail if set above OS max.[0m
[0;31m[0m[0;31m-  # read-buffer = 0[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [continuous_queries][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Controls how continuous queries are run within InfluxDB.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  enabled = false[0m
[0;32m[0m[0;32m+  bind-address = ":8089"[0m
[0;32m[0m[0;32m+  database = "udp"[0m
[0;32m[0m[0;32m+  retention-policy = ""[0m
[0;32m[0m[0;32m+  batch-size = 5000[0m
[0;32m[0m[0;32m+  batch-pending = 10[0m
[0;32m[0m[0;32m+  read-buffer = 0[0m
[0;32m[0m[0;32m+  batch-timeout = "1s"[0m
[0;32m[0m[0;32m+  precision = ""[0m
[0;32m[0m 
 [continuous_queries]
[0;31m-  # Determines whether the continuous query service is enabled.[0m
[0;31m[0m[0;31m-  # enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Controls whether queries are logged when executed by the CQ service.[0m
[0;31m[0m[0;31m-  # log-enabled = true[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Controls whether queries are logged to the self-monitoring data store.[0m
[0;31m[0m[0;31m-  # query-stats-enabled = false[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # interval for how often continuous queries will be checked if they need to run[0m
[0;31m[0m[0;31m-  # run-interval = "1s"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### [tls][0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;31m-### Global configuration settings for TLS in InfluxDB.[0m
[0;31m[0m[0;31m-###[0m
[0;31m[0m[0;32m+  log-enabled = true[0m
[0;32m[0m[0;32m+  enabled = true[0m
[0;32m[0m[0;32m+  query-stats-enabled = false[0m
[0;32m[0m[0;32m+  run-interval = "1s"[0m
[0;32m[0m 
 [tls]
[0;31m-  # Determines the available set of cipher suites. See https://golang.org/pkg/crypto/tls/#pkg-constants[0m
[0;31m[0m[0;31m-  # for a list of available ciphers, which depends on the version of Go (use the query[0m
[0;31m[0m[0;31m-  # SHOW DIAGNOSTICS to see the version of Go used to build InfluxDB). If not specified, uses[0m
[0;31m[0m[0;31m-  # the default settings from Go's crypto/tls package.[0m
[0;31m[0m[0;31m-  # ciphers = [[0m
[0;31m[0m[0;31m-  #   "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305",[0m
[0;31m[0m[0;31m-  #   "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",[0m
[0;31m[0m[0;31m-  # ][0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Minimum version of the tls protocol that will be negotiated. If not specified, uses the[0m
[0;31m[0m[0;31m-  # default settings from Go's crypto/tls package.[0m
[0;31m[0m[0;31m-  # min-version = "tls1.2"[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-  # Maximum version of the tls protocol that will be negotiated. If not specified, uses the[0m
[0;31m[0m[0;31m-  # default settings from Go's crypto/tls package.[0m
[0;31m[0m[0;31m-  # max-version = "tls1.2"[0m
[0;31m[0m[0;32m+  min-version = ""[0m
[0;32m[0m[0;32m+  max-version = ""[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 09:55:25,593 p=384955 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:25,600 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Ensure directories have correct permissions] *******************************************
2023-04-20 09:55:25,781 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/meta)
2023-04-20 09:55:25,938 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/data)
2023-04-20 09:55:26,091 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/wal)
2023-04-20 09:55:26,101 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Write init.d script] *******************************************************************
2023-04-20 09:55:26,578 p=384955 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-3849556dqvwbbh/tmpuho8s7y0/init.d.influxd.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,219 @@[0m
[0;36m[0m[0;32m+#! /usr/bin/env bash[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+### BEGIN INIT INFO[0m
[0;32m[0m[0;32m+# Provides:          influxd[0m
[0;32m[0m[0;32m+# Required-Start:    $all[0m
[0;32m[0m[0;32m+# Required-Stop:     $remote_fs $syslog[0m
[0;32m[0m[0;32m+# Default-Start:     2 3 4 5[0m
[0;32m[0m[0;32m+# Default-Stop:      0 1 6[0m
[0;32m[0m[0;32m+# Short-Description: Start influxd at boot time[0m
[0;32m[0m[0;32m+### END INIT INFO[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# If you modify this, please make sure to also edit influxdb.service[0m
[0;32m[0m[0;32m+# this init script supports three different variations:[0m
[0;32m[0m[0;32m+#  1. New lsb that define start-stop-daemon[0m
[0;32m[0m[0;32m+#  2. Old lsb that don't have start-stop-daemon but define, log, pidofproc and killproc[0m
[0;32m[0m[0;32m+#  3. Centos installations without lsb-core installed[0m
[0;32m[0m[0;32m+#[0m
[0;32m[0m[0;32m+# In the third case we have to define our own functions which are very dumb[0m
[0;32m[0m[0;32m+# and expect the args to be positioned correctly.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Command-line options that can be set in /etc/default/influxdb.  These will override[0m
[0;32m[0m[0;32m+# any config file values. Example: "-join http://1.2.3.4:8086"[0m
[0;32m[0m[0;32m+DEFAULT=/etc/default/influxdb[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Daemon options[0m
[0;32m[0m[0;32m+INFLUXD_OPTS=""[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Process name ( For display )[0m
[0;32m[0m[0;32m+NAME=influxdb[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# User and group[0m
[0;32m[0m[0;32m+USER=influxdb[0m
[0;32m[0m[0;32m+GROUP=influxdb[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Daemon name, where is the actual executable[0m
[0;32m[0m[0;32m+# If the daemon is not there, then exit.[0m
[0;32m[0m[0;32m+DAEMON=/usr/bin/influxd[0m
[0;32m[0m[0;32m+[ -x $DAEMON ] || exit 5[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Configuration file[0m
[0;32m[0m[0;32m+CONFIG=/etc/influxdb/influxdb.conf[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# PID file for the daemon[0m
[0;32m[0m[0;32m+PIDFILE=/var/run/influxdb/influxd.pid[0m
[0;32m[0m[0;32m+PIDDIR=`dirname $PIDFILE`[0m
[0;32m[0m[0;32m+if [ ! -d "$PIDDIR" ]; then[0m
[0;32m[0m[0;32m+    mkdir -p $PIDDIR[0m
[0;32m[0m[0;32m+    chown $USER:$GROUP $PIDDIR[0m
[0;32m[0m[0;32m+fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Max open files[0m
[0;32m[0m[0;32m+OPEN_FILE_LIMIT=65536[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+if [ -r /lib/lsb/init-functions ]; then[0m
[0;32m[0m[0;32m+    source /lib/lsb/init-functions[0m
[0;32m[0m[0;32m+fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Logging[0m
[0;32m[0m[0;32m+if [ -z "$STDOUT" ]; then[0m
[0;32m[0m[0;32m+    STDOUT=/dev/null[0m
[0;32m[0m[0;32m+fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+if [ ! -f "$STDOUT" ]; then[0m
[0;32m[0m[0;32m+    mkdir -p $(dirname $STDOUT)[0m
[0;32m[0m[0;32m+fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+if [ -z "$STDERR" ]; then[0m
[0;32m[0m[0;32m+    STDERR=/var/log/influxdb/influxd.log[0m
[0;32m[0m[0;32m+fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+if [ ! -f "$STDERR" ]; then[0m
[0;32m[0m[0;32m+    mkdir -p $(dirname $STDERR)[0m
[0;32m[0m[0;32m+fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Overwrite init script variables with /etc/default/influxdb values[0m
[0;32m[0m[0;32m+if [ -r $DEFAULT ]; then[0m
[0;32m[0m[0;32m+    source $DEFAULT[0m
[0;32m[0m[0;32m+fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+function pidofproc() {[0m
[0;32m[0m[0;32m+    if [ $# -ne 3 ]; then[0m
[0;32m[0m[0;32m+        echo "Expected three arguments, e.g. $0 -p pidfile daemon-name"[0m
[0;32m[0m[0;32m+    fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    PID=`pgrep -f $3`[0m
[0;32m[0m[0;32m+    local PIDFILE=`cat $2`[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    if [ "x$PIDFILE" == "x" ]; then[0m
[0;32m[0m[0;32m+        return 1[0m
[0;32m[0m[0;32m+    fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    if [ "x$PID" != "x" -a "$PIDFILE" == "$PID" ]; then[0m
[0;32m[0m[0;32m+        return 0[0m
[0;32m[0m[0;32m+    fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    return 1[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+function killproc() {[0m
[0;32m[0m[0;32m+    if [ $# -ne 3 ]; then[0m
[0;32m[0m[0;32m+        echo "Expected three arguments, e.g. $0 -p pidfile signal"[0m
[0;32m[0m[0;32m+    fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    PID=`cat $2`[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    /bin/kill -s $3 $PID[0m
[0;32m[0m[0;32m+    while true; do[0m
[0;32m[0m[0;32m+        pidof `basename $DAEMON` >/dev/null[0m
[0;32m[0m[0;32m+        if [ $? -ne 0 ]; then[0m
[0;32m[0m[0;32m+            return 0[0m
[0;32m[0m[0;32m+        fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+        sleep 1[0m
[0;32m[0m[0;32m+        n=$(expr $n + 1)[0m
[0;32m[0m[0;32m+        if [ $n -eq 30 ]; then[0m
[0;32m[0m[0;32m+            /bin/kill -s SIGKILL $PID[0m
[0;32m[0m[0;32m+            return 0[0m
[0;32m[0m[0;32m+        fi[0m
[0;32m[0m[0;32m+    done[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+function log_failure_msg() {[0m
[0;32m[0m[0;32m+    echo "$@" "[ FAILED ]"[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+function log_success_msg() {[0m
[0;32m[0m[0;32m+    echo "$@" "[ OK ]"[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+case $1 in[0m
[0;32m[0m[0;32m+    start)[0m
[0;32m[0m[0;32m+        # Check if config file exist[0m
[0;32m[0m[0;32m+        if [ ! -r $CONFIG ]; then[0m
[0;32m[0m[0;32m+            log_failure_msg "config file doesn't exist (or you don't have permission to view)"[0m
[0;32m[0m[0;32m+            exit 4[0m
[0;32m[0m[0;32m+        fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+        # Checked the PID file exists and check the actual status of process[0m
[0;32m[0m[0;32m+        if [ -e $PIDFILE ]; then[0m
[0;32m[0m[0;32m+	    PID="$(pgrep -f $PIDFILE)"[0m
[0;32m[0m[0;32m+	    if test ! -z $PID && kill -0 "$PID" &>/dev/null; then[0m
[0;32m[0m[0;32m+		# If the status is SUCCESS then don't need to start again.[0m
[0;32m[0m[0;32m+                log_failure_msg "$NAME process is running"[0m
[0;32m[0m[0;32m+                exit 0 # Exit[0m
[0;32m[0m[0;32m+            fi[0m
[0;32m[0m[0;32m+        # if PID file does not exist, check if writable[0m
[0;32m[0m[0;32m+        else[0m
[0;32m[0m[0;32m+            su -s /bin/sh -c "touch $PIDFILE" $USER > /dev/null 2>&1[0m
[0;32m[0m[0;32m+            if [ $? -ne 0 ]; then[0m
[0;32m[0m[0;32m+                log_failure_msg "$PIDFILE not writable, check permissions"[0m
[0;32m[0m[0;32m+                exit 5[0m
[0;32m[0m[0;32m+            fi[0m
[0;32m[0m[0;32m+        fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+        # Bump the file limits, before launching the daemon. These will carry over to[0m
[0;32m[0m[0;32m+        # launched processes.[0m
[0;32m[0m[0;32m+        ulimit -n $OPEN_FILE_LIMIT[0m
[0;32m[0m[0;32m+        if [ $? -ne 0 ]; then[0m
[0;32m[0m[0;32m+            log_failure_msg "set open file limit to $OPEN_FILE_LIMIT"[0m
[0;32m[0m[0;32m+            exit 1[0m
[0;32m[0m[0;32m+        fi[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+        log_success_msg "Starting the process" "$NAME"[0m
[0;32m[0m[0;32m+        if which start-stop-daemon > /dev/null 2>&1; then[0m
[0;32m[0m[0;32m+            start-stop-daemon --chuid $GROUP:$USER --start --quiet --pidfile $PIDFILE --exec $DAEMON -- -pidfile $PIDFILE -config $CONFIG $INFLUXD_OPTS >>$STDOUT 2>>$STDERR &[0m
[0;32m[0m[0;32m+        else[0m
[0;32m[0m[0;32m+            su -s /bin/sh -c "nohup $DAEMON -pidfile $PIDFILE -config $CONFIG $INFLUXD_OPTS >>$STDOUT 2>>$STDERR &" $USER[0m
[0;32m[0m[0;32m+        fi[0m
[0;32m[0m[0;32m+        log_success_msg "$NAME process was started"[0m
[0;32m[0m[0;32m+        ;;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    stop)[0m
[0;32m[0m[0;32m+        # Stop the daemon.[0m
[0;32m[0m[0;32m+        if [ -e $PIDFILE ]; then[0m
[0;32m[0m[0;32m+	    PID="$(pgrep -f $PIDFILE)"[0m
[0;32m[0m[0;32m+	    if test ! -z $PID && kill -0 "$PID" &>/dev/null; then[0m
[0;32m[0m[0;32m+                if killproc -p $PIDFILE SIGTERM && /bin/rm -rf $PIDFILE; then[0m
[0;32m[0m[0;32m+                    log_success_msg "$NAME process was stopped"[0m
[0;32m[0m[0;32m+                else[0m
[0;32m[0m[0;32m+                    log_failure_msg "$NAME failed to stop service"[0m
[0;32m[0m[0;32m+                fi[0m
[0;32m[0m[0;32m+            fi[0m
[0;32m[0m[0;32m+        else[0m
[0;32m[0m[0;32m+            log_failure_msg "$NAME process is not running"[0m
[0;32m[0m[0;32m+        fi[0m
[0;32m[0m[0;32m+        ;;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    restart)[0m
[0;32m[0m[0;32m+        # Restart the daemon.[0m
[0;32m[0m[0;32m+        $0 stop && sleep 2 && $0 start[0m
[0;32m[0m[0;32m+        ;;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    status)[0m
[0;32m[0m[0;32m+        # Check the status of the process.[0m
[0;32m[0m[0;32m+        if [ -e $PIDFILE ]; then[0m
[0;32m[0m[0;32m+	    PID="$(pgrep -f $PIDFILE)"[0m
[0;32m[0m[0;32m+	    if test ! -z $PID && test -d "/proc/$PID" &>/dev/null; then[0m
[0;32m[0m[0;32m+                log_success_msg "$NAME Process is running"[0m
[0;32m[0m[0;32m+                exit 0[0m
[0;32m[0m[0;32m+            else[0m
[0;32m[0m[0;32m+                log_failure_msg "$NAME Process is not running"[0m
[0;32m[0m[0;32m+                exit 1[0m
[0;32m[0m[0;32m+            fi[0m
[0;32m[0m[0;32m+        else[0m
[0;32m[0m[0;32m+            log_failure_msg "$NAME Process is not running"[0m
[0;32m[0m[0;32m+            exit 3[0m
[0;32m[0m[0;32m+        fi[0m
[0;32m[0m[0;32m+        ;;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    version)[0m
[0;32m[0m[0;32m+        $DAEMON version[0m
[0;32m[0m[0;32m+        ;;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+    *)[0m
[0;32m[0m[0;32m+        # For invalid arguments, print the usage message.[0m
[0;32m[0m[0;32m+        echo "Usage: $0 {start|stop|restart|status|version}"[0m
[0;32m[0m[0;32m+        exit 2[0m
[0;32m[0m[0;32m+        ;;[0m
[0;32m[0m[0;32m+esac[0m
[0;32m[0m

2023-04-20 09:55:26,579 p=384955 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:26,585 p=384955 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Start influxdb service] ****************************************************************
2023-04-20 09:55:27,079 p=384955 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:27,101 p=384955 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.influxdb : restart influxdb] ***********************************************************
2023-04-20 09:55:27,397 p=384955 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 09:55:27,410 p=384955 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 09:55:27,410 p=384955 u=ubuntu n=ansible | gat-20.eu.training.galaxyproject.eu : ok=11   changed=6    unreachable=0    failed=0    skipped=16   rescued=0    ignored=0   
2023-04-20 10:02:37,426 p=386324 u=ubuntu n=ansible | ERROR! the role 'cloudalchemy.grafana' was not found in /home/ubuntu/galaxy/roles:/home/ubuntu/.ansible/roles:/usr/share/ansible/roles:/etc/ansible/roles:/home/ubuntu/galaxy

The error appears to be in '/home/ubuntu/galaxy/monitoring.yml': line 7, column 7, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

    - usegalaxy_eu.influxdb
    - cloudalchemy.grafana
      ^ here

2023-04-20 10:02:59,933 p=386364 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-20 10:02:59,934 p=386364 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-20 10:02:59,934 p=386364 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-20 10:02:59,934 p=386364 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-20 10:02:59,934 p=386364 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-20 10:02:59,935 p=386364 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-20 10:02:59,935 p=386364 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-20 10:02:59,935 p=386364 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-20 10:02:59,935 p=386364 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-20 10:02:59,935 p=386364 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-20 10:02:59,935 p=386364 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-20 10:02:59,936 p=386364 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-20 10:02:59,936 p=386364 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-20 10:02:59,936 p=386364 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) is already installed, skipping.
2023-04-20 10:02:59,936 p=386364 u=ubuntu n=ansible | - geerlingguy.docker (6.1.0) is already installed, skipping.
2023-04-20 10:02:59,936 p=386364 u=ubuntu n=ansible | - usegalaxy_eu.rabbitmqserver (1.4.4) is already installed, skipping.
2023-04-20 10:02:59,936 p=386364 u=ubuntu n=ansible | - galaxyproject.pulsar (1.0.10) is already installed, skipping.
2023-04-20 10:02:59,937 p=386364 u=ubuntu n=ansible | - geerlingguy.redis (1.8.0) is already installed, skipping.
2023-04-20 10:02:59,937 p=386364 u=ubuntu n=ansible | - usegalaxy_eu.flower (1.0.2) is already installed, skipping.
2023-04-20 10:02:59,937 p=386364 u=ubuntu n=ansible | - usegalaxy_eu.influxdb (v6.0.7) is already installed, skipping.
2023-04-20 10:03:00,072 p=386364 u=ubuntu n=ansible | - downloading role 'grafana', owned by cloudalchemy
2023-04-20 10:03:01,298 p=386364 u=ubuntu n=ansible | - downloading role from https://github.com/cloudalchemy/ansible-grafana/archive/0.14.2.tar.gz
2023-04-20 10:03:01,476 p=386364 u=ubuntu n=ansible | - extracting cloudalchemy.grafana to /home/ubuntu/galaxy/roles/cloudalchemy.grafana
2023-04-20 10:03:01,481 p=386364 u=ubuntu n=ansible | - cloudalchemy.grafana (0.14.2) was installed successfully
2023-04-20 10:03:03,938 p=386367 u=ubuntu n=ansible | [DEPRECATION WARNING]: "include" is deprecated, use include_tasks/import_tasks instead. See 
https://docs.ansible.com/ansible-core/2.14/user_guide/playbooks_reuse_includes.html for details. This feature will be
 removed in version 2.16. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 10:03:04,089 p=386367 u=ubuntu n=ansible | PLAY [monitoring] ****************************************************************************************************
2023-04-20 10:03:04,138 p=386367 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 10:03:05,281 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:05,298 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create influxdb group] *****************************************************************
2023-04-20 10:03:05,587 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:05,593 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create influxdb user] ******************************************************************
2023-04-20 10:03:05,932 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:05,940 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Add influxdb to ssl-cert] **************************************************************
2023-04-20 10:03:05,962 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:05,970 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create collectd typesdb if needed] *****************************************************
2023-04-20 10:03:05,987 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:05,994 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Check collectd types.db existence] *****************************************************
2023-04-20 10:03:06,009 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,016 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Get collectd types.db from github] *****************************************************
2023-04-20 10:03:06,031 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,037 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install ca-certificates] ***************************************************************
2023-04-20 10:03:06,051 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,058 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Download version when python >= 2.7.9] *************************************************
2023-04-20 10:03:06,072 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,079 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install curl when python < 2.7.9] ******************************************************
2023-04-20 10:03:06,096 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,103 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Download version when python < 2.7.9] **************************************************
2023-04-20 10:03:06,120 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,127 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install package] ***********************************************************************
2023-04-20 10:03:06,141 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,148 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install any necessary dependency] ******************************************************
2023-04-20 10:03:06,163 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,170 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Import InfluxData GPG signing key] *****************************************************
2023-04-20 10:03:06,185 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,193 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Add InfluxData repository] *************************************************************
2023-04-20 10:03:06,209 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,220 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install InfluxDB package] **************************************************************
2023-04-20 10:03:06,235 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,242 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Enable EPEL] ***************************************************************************
2023-04-20 10:03:06,255 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,262 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Add yum repository | RedHat] ***********************************************************
2023-04-20 10:03:06,276 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,283 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Install telegraf package | RedHat] *****************************************************
2023-04-20 10:03:06,298 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:06,305 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Create data and config directories] ****************************************************
2023-04-20 10:03:06,598 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/data)
2023-04-20 10:03:06,765 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/meta)
2023-04-20 10:03:06,929 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/wal)
2023-04-20 10:03:07,096 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/etc/influxdb)
2023-04-20 10:03:07,105 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Write config] **************************************************************************
2023-04-20 10:03:07,585 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:07,593 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Run config update] *********************************************************************
2023-04-20 10:03:07,615 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:07,623 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Write merged config] *******************************************************************
2023-04-20 10:03:07,644 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:07,651 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Ensure directories have correct permissions] *******************************************
2023-04-20 10:03:07,847 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/meta)
2023-04-20 10:03:08,019 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/data)
2023-04-20 10:03:08,181 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/influxdb/wal)
2023-04-20 10:03:08,190 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Write init.d script] *******************************************************************
2023-04-20 10:03:08,545 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:08,556 p=386367 u=ubuntu n=ansible | TASK [usegalaxy_eu.influxdb : Start influxdb service] ****************************************************************
2023-04-20 10:03:10,104 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,119 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Gather variables for each operating system] *********************************************
2023-04-20 10:03:10,201 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/home/ubuntu/galaxy/roles/cloudalchemy.grafana/vars/debian.yml)
2023-04-20 10:03:10,213 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Check variable types] *******************************************************************
2023-04-20 10:03:10,255 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => changed=false 
  msg: All assertions passed
2023-04-20 10:03:10,263 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail on unsupported system architectures] ***********************************************
2023-04-20 10:03:10,285 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,294 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail when datasources aren't configured when dashboards are set to be installed] ********
2023-04-20 10:03:10,313 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,321 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail when grafana admin user isn't set] *************************************************
2023-04-20 10:03:10,352 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,363 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail when grafana admin password isn't set] *********************************************
2023-04-20 10:03:10,399 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,409 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail on incorrect variable types in datasource definitions] *****************************
2023-04-20 10:03:10,460 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu] => (item={'name': 'Galaxy', 'type': 'influxdb', 'access': 'proxy', 'url': 'http://127.0.0.1:8086', 'isDefault': True, 'version': 1, 'editable': False, 'database': 'telegraf'}) 
2023-04-20 10:03:10,463 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,470 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail on bad database configuration] *****************************************************
2023-04-20 10:03:10,527 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,534 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail when grafana domain isn't properly configured] *************************************
2023-04-20 10:03:10,557 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,564 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail when grafana_api_keys uses invalid role names] *************************************
2023-04-20 10:03:10,579 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,587 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail when grafana_ldap isn't set when grafana_auth.ldap is] *****************************
2023-04-20 10:03:10,602 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,611 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Force grafana_use_provisioning to false if grafana_version is < 5.0 ( grafana_version is set to 'latest' )] ***
2023-04-20 10:03:10,625 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,633 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Fail if grafana_port is lower than 1024 and grafana_cap_net_bind_service is not true] ***
2023-04-20 10:03:10,647 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:10,657 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Install dependencies] *******************************************************************
2023-04-20 10:03:11,856 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:11,863 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Remove conflicting grafana packages] ****************************************************
2023-04-20 10:03:12,568 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:12,575 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Clean apt cache] ************************************************************************
2023-04-20 10:03:12,597 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:12,604 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Add Grafana repository file [RHEL/CentOS]] **********************************************
2023-04-20 10:03:12,622 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:12,630 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Import Grafana GPG signing key [Debian/Ubuntu]] *****************************************
2023-04-20 10:03:13,841 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:13,849 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Add Grafana repository [Debian/Ubuntu]] *************************************************
2023-04-20 10:03:19,960 p=386367 u=ubuntu n=ansible | [0;31m--- before: /dev/null[0m
[0;31m[0m[0;32m+++ after: /etc/apt/sources.list.d/packages_grafana_com_oss_deb.list[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+deb https://packages.grafana.com/oss/deb stable main[0m
[0;32m[0m

2023-04-20 10:03:19,961 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:19,969 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Install Grafana] ************************************************************************
2023-04-20 10:03:40,339 p=386367 u=ubuntu n=ansible | The following NEW packages will be installed:
  grafana
0 upgraded, 1 newly installed, 0 to remove and 11 not upgraded.
2023-04-20 10:03:40,340 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:40,348 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Ensure grafana configuration directories exist] *****************************************
2023-04-20 10:03:40,553 p=386367 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 128[0m
[0;32m[0m path: /etc/grafana


2023-04-20 10:03:40,556 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu] => (item=/etc/grafana)
2023-04-20 10:03:40,731 p=386367 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,3 +1,3 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 128[0m
[0;32m[0m path: /etc/grafana/datasources
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 10:03:40,734 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu] => (item=/etc/grafana/datasources)
2023-04-20 10:03:40,929 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/etc/grafana/provisioning)
2023-04-20 10:03:41,113 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/etc/grafana/provisioning/datasources)
2023-04-20 10:03:41,123 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create grafana main configuration file] *************************************************
2023-04-20 10:03:42,166 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:42,174 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create grafana LDAP configuration file] *************************************************
2023-04-20 10:03:42,192 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:42,199 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create grafana directories] *************************************************************
2023-04-20 10:03:42,393 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/log/grafana)
2023-04-20 10:03:42,572 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/grafana)
2023-04-20 10:03:42,736 p=386367 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 128[0m
[0;32m[0m[0;32m+owner: 122[0m
[0;32m[0m path: /var/lib/grafana/dashboards
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 10:03:42,738 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/grafana/dashboards)
2023-04-20 10:03:42,929 p=386367 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 128[0m
[0;32m[0m[0;32m+owner: 122[0m
[0;32m[0m path: /var/lib/grafana/plugins
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 10:03:42,931 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu] => (item=/var/lib/grafana/plugins)
2023-04-20 10:03:42,950 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Enable grafana to ports lower than port 1024] *******************************************
2023-04-20 10:03:42,969 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:42,978 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Enable and start Grafana systemd unit] **************************************************
2023-04-20 10:03:44,321 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:44,330 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Check which plugins are installed] ******************************************************
2023-04-20 10:03:44,347 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:44,355 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Install plugins] ************************************************************************
2023-04-20 10:03:44,390 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:44,397 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Restart grafana before configuring datasources and dashboards] **************************
2023-04-20 10:03:44,408 p=386367 u=ubuntu n=ansible | RUNNING HANDLER [cloudalchemy.grafana : restart grafana] *************************************************************
2023-04-20 10:03:44,745 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:44,752 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Wait for grafana to start] **************************************************************
2023-04-20 10:03:53,154 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,164 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Ensure grafana key directory exists] ****************************************************
2023-04-20 10:03:53,208 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,217 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Check api key list] *********************************************************************
2023-04-20 10:03:53,258 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,266 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create grafana api keys] ****************************************************************
2023-04-20 10:03:53,285 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,296 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create api keys file to allow the keys to be seen and used by other automation] *********
2023-04-20 10:03:53,315 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,324 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Ensure datasources exist (via API)] *****************************************************
2023-04-20 10:03:53,349 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu] => (item={'name': 'Galaxy', 'type': 'influxdb', 'access': 'proxy', 'url': 'http://127.0.0.1:8086', 'isDefault': True, 'version': 1, 'editable': False, 'database': 'telegraf'}) 
2023-04-20 10:03:53,352 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,361 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create/Update datasources file (provisioning)] ******************************************
2023-04-20 10:03:53,883 p=386367 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-386367epxp6apf/tmpgpjxlj1v[0m
[0;32m[0m[0;36m@@ -0,0 +1,11 @@[0m
[0;36m[0m[0;32m+apiVersion: 1[0m
[0;32m[0m[0;32m+deleteDatasources: [][0m
[0;32m[0m[0;32m+datasources:[0m
[0;32m[0m[0;32m+-   access: proxy[0m
[0;32m[0m[0;32m+    database: telegraf[0m
[0;32m[0m[0;32m+    editable: false[0m
[0;32m[0m[0;32m+    isDefault: true[0m
[0;32m[0m[0;32m+    name: Galaxy[0m
[0;32m[0m[0;32m+    type: influxdb[0m
[0;32m[0m[0;32m+    url: http://127.0.0.1:8086[0m
[0;32m[0m[0;32m+    version: 1[0m
[0;32m[0m

2023-04-20 10:03:53,883 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,891 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Check alert notifications list] *********************************************************
2023-04-20 10:03:53,925 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,933 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create grafana alert notification channels] *********************************************
2023-04-20 10:03:53,950 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:53,967 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Check if there are any dashboards in dashboards] ****************************************
2023-04-20 10:03:54,286 p=386367 u=ubuntu n=ansible | [WARNING]: Skipped 'dashboards' path due to this access issue: 'dashboards' is not a directory

2023-04-20 10:03:54,286 p=386367 u=ubuntu n=ansible | ok: [gat-20.eu.training.galaxyproject.eu -> localhost]
2023-04-20 10:03:54,298 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create local grafana dashboard directory] ***********************************************
2023-04-20 10:03:54,339 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,348 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : download grafana dashboard from grafana.net to local directory] *************************
2023-04-20 10:03:54,363 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,371 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Set the correct data source name in the dashboard] **************************************
2023-04-20 10:03:54,387 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,395 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Import grafana dashboards through API] **************************************************
2023-04-20 10:03:54,438 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,447 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Create/Update dashboards file (provisioning)] *******************************************
2023-04-20 10:03:54,486 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,494 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Register previously copied dashboards] **************************************************
2023-04-20 10:03:54,538 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,546 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Import grafana dashboards] **************************************************************
2023-04-20 10:03:54,585 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,594 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Get dashboard lists] ********************************************************************
2023-04-20 10:03:54,632 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,641 p=386367 u=ubuntu n=ansible | TASK [cloudalchemy.grafana : Remove dashbards not present on deployer machine (synchronize)] *************************
2023-04-20 10:03:54,682 p=386367 u=ubuntu n=ansible | skipping: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:54,708 p=386367 u=ubuntu n=ansible | RUNNING HANDLER [cloudalchemy.grafana : restart grafana] *************************************************************
2023-04-20 10:03:55,070 p=386367 u=ubuntu n=ansible | changed: [gat-20.eu.training.galaxyproject.eu]
2023-04-20 10:03:55,083 p=386367 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 10:03:55,084 p=386367 u=ubuntu n=ansible | gat-20.eu.training.galaxyproject.eu : ok=24   changed=10   unreachable=0    failed=0    skipped=51   rescued=0    ignored=0   
2023-04-20 10:04:10,305 p=389456 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 10:04:10,399 p=389456 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 10:04:10,416 p=389456 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 10:04:11,526 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:11,534 p=389456 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 10:04:12,574 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:12,593 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 10:04:12,624 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:12,635 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 10:04:12,659 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:12,667 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 10:04:12,690 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:12,698 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 10:04:12,722 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:12,730 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 10:04:13,567 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:13,576 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 10:04:13,914 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:13,922 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 10:04:13,973 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:13,982 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 10:04:14,906 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:14,913 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 10:04:14,940 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:14,948 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 10:04:14,984 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:14,992 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 10:04:15,025 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:15,033 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 10:04:15,070 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:15,079 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 10:04:15,097 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:15,140 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 10:04:15,420 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:15,427 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 10:04:15,696 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:15,704 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 10:04:15,727 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:15,736 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 10:04:15,933 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:15,940 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 10:04:16,422 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:16,429 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 10:04:16,826 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:16,833 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 10:04:16,878 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:16,890 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 10:04:17,095 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 10:04:17,277 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 10:04:17,287 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 10:04:17,477 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:17,484 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 10:04:17,837 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 10:04:17,847 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 10:04:18,208 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 10:04:18,216 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 10:04:18,581 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:18,588 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 10:04:18,954 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:18,963 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 10:04:19,133 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:19,140 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 10:04:19,694 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:19,707 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 10:04:19,738 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 10:04:19,740 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:19,748 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 10:04:19,763 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:19,770 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 10:04:19,809 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 10:04:19,811 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:19,819 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 10:04:20,310 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:04:20,321 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 10:04:20,337 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:20,345 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 10:04:20,373 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:20,382 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 10:04:20,399 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:20,406 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 10:04:20,826 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:04:20,836 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 10:04:20,852 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:20,933 p=389456 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 10:04:20,999 p=389456 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 10:04:21,937 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:21,958 p=389456 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 10:04:22,845 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:22,865 p=389456 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 10:04:22,881 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:22,902 p=389456 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 10:04:23,783 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:23,803 p=389456 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 10:04:24,536 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:24,622 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 10:04:25,032 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,053 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 10:04:25,084 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,105 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 10:04:25,365 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,385 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 10:04:25,586 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,607 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 10:04:25,665 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,685 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 10:04:25,703 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,723 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 10:04:25,743 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,765 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 10:04:25,784 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,805 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 10:04:25,826 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,846 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 10:04:25,867 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:25,893 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 10:04:25,936 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:25,975 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 10:04:25,992 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:26,014 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 10:04:26,051 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 10:04:26,068 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:26,108 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 10:04:26,585 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:26,605 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 10:04:26,624 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:26,644 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 10:04:26,666 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:26,685 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 10:04:26,706 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:26,743 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 10:04:26,762 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:26,782 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 10:04:26,850 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:26,887 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 10:04:27,679 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:27,701 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 10:04:27,723 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:27,746 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 10:04:27,831 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:27,852 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 10:04:27,872 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:27,893 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 10:04:27,929 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:27,962 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 10:04:27,990 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 10:04:27,993 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 10:04:27,995 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 10:04:27,997 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:28,016 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 10:04:28,084 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:28,121 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 10:04:28,938 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:28,960 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 10:04:28,987 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:29,008 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 10:04:29,086 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:29,107 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 10:04:29,128 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:29,149 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 10:04:29,187 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:29,223 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 10:04:29,250 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 10:04:29,254 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 10:04:29,257 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 10:04:29,261 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:29,283 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 10:04:29,301 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:29,323 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 10:04:30,179 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:30,201 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 10:04:30,221 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:30,242 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 10:04:30,261 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:30,282 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 10:04:30,756 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:30,776 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 10:04:30,819 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:30,853 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 10:04:31,034 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:31,055 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 10:04:31,081 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:31,106 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 10:04:31,410 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:31,430 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 10:04:31,448 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:31,467 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 10:04:31,776 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:31,796 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 10:04:32,092 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:32,131 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 10:04:32,437 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:32,458 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 10:04:33,247 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:33,288 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 10:04:33,309 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 10:04:33,328 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 10:04:33,378 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:33,397 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 10:04:33,436 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:33,455 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 10:04:33,491 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 10:04:33,497 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 10:04:33,504 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 10:04:33,512 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 10:04:33,520 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 10:04:33,527 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 10:04:33,533 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 10:04:33,540 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 10:04:33,544 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 10:04:33,567 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 10:04:33,637 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 10:04:33,669 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 10:04:33,703 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 10:04:33,738 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 10:04:33,742 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:33,762 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 10:04:33,850 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 10:04:33,901 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 10:04:33,946 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 10:04:33,968 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 10:04:34,027 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:34,064 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 10:04:34,171 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:34,193 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 10:04:34,775 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:34,797 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 10:04:34,903 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:34,924 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 10:04:35,260 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:04:35,439 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 10:04:35,461 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 10:04:35,662 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:04:35,840 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 10:04:35,863 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 10:04:35,945 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:35,965 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 10:04:35,984 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:36,005 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 10:04:36,042 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:36,081 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 10:04:36,433 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:36,453 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 10:04:36,810 p=389456 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 10:04:36,813 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 10:04:37,150 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 10:04:37,486 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 10:04:37,819 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 10:04:38,133 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 10:04:38,157 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 10:04:38,510 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 10:04:38,841 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 10:04:39,162 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 10:04:39,482 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 10:04:39,823 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 10:04:40,153 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 10:04:40,487 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 10:04:40,799 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 10:04:41,107 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 10:04:41,430 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 10:04:41,454 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 10:04:41,524 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:41,564 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 10:04:43,097 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:43,118 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 10:04:43,218 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:43,239 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 10:04:45,081 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:45,102 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 10:04:47,059 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:47,080 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 10:04:47,185 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:47,205 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 10:04:47,220 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:47,240 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 10:04:47,254 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:47,274 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 10:04:47,331 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:47,377 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 10:04:47,501 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:47,539 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 10:04:47,978 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:48,000 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 10:04:48,204 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:48,225 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 10:04:48,770 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 10:04:49,227 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 10:04:49,252 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 10:04:49,755 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 10:04:49,777 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 10:04:50,338 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 10:04:50,820 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 10:04:51,304 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 10:04:51,783 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 10:04:51,806 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 10:04:52,302 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 10:04:52,323 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 10:04:52,855 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:52,875 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 10:04:53,057 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:53,107 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 10:04:53,214 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:53,234 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 10:04:53,251 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:53,271 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 10:04:53,286 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:53,306 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 10:04:53,321 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:53,342 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 10:04:53,357 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:53,377 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 10:04:53,929 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:53,949 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 10:04:54,055 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:54,076 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 10:04:54,182 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:04:54,202 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 10:04:54,778 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:54,798 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 10:04:54,854 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 10:04:54,908 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 10:04:56,553 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:56,573 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 10:04:58,402 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:04:58,422 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 10:05:03,579 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:03,599 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 10:05:04,234 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:04,261 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 10:05:05,906 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:05,927 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 10:05:07,589 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:07,610 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 10:05:07,663 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:07,719 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 10:05:07,821 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:07,841 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 10:05:08,349 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 10:05:08,373 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 10:05:08,829 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 10:05:09,151 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 10:05:09,174 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 10:05:09,620 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 10:05:09,939 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 10:05:09,963 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 10:05:10,003 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:10,061 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 10:05:11,640 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:11,661 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 10:05:13,072 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:13,092 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 10:05:13,204 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:13,226 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 10:05:13,335 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:13,355 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 10:05:13,427 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:13,485 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 10:05:13,844 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:13,864 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 10:05:14,219 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:14,240 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 10:05:14,588 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:14,609 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 10:05:14,966 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:14,987 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 10:05:15,180 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:15,200 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 10:05:15,428 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:15,448 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 10:05:15,553 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:15,574 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 10:05:15,679 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:15,699 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 10:05:15,807 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:15,828 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 10:05:15,933 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:15,954 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 10:05:16,058 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:16,078 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 10:05:16,183 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:16,204 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 10:05:16,312 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:16,334 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 10:05:16,438 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:16,460 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 10:05:16,476 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:16,496 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 10:05:16,539 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:16,617 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 10:05:16,722 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:16,743 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 10:05:17,400 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:17,420 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 10:05:17,441 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:17,461 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 10:05:17,477 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:17,497 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 10:05:17,535 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:17,599 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 10:05:18,019 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:18,041 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 10:05:18,145 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:18,185 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 10:05:18,360 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:18,380 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 10:05:18,709 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:18,730 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 10:05:21,515 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:05:21,553 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 10:05:21,739 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:21,759 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 10:05:21,776 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:21,796 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 10:05:22,183 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,203 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 10:05:22,243 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,263 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 10:05:22,280 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,300 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 10:05:22,315 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,337 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 10:05:22,363 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,388 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 10:05:22,414 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,434 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 10:05:22,451 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,488 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 10:05:22,507 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,526 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 10:05:22,554 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,575 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 10:05:22,760 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:22,780 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 10:05:23,106 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:23,126 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 10:05:23,143 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:23,163 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 10:05:23,200 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:23,235 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 10:05:24,054 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:24,074 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 10:05:24,090 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:24,112 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 10:05:24,430 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:24,471 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 10:05:24,782 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:24,803 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 10:05:25,022 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:25,043 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 10:05:25,359 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:25,380 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 10:05:25,409 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:25,433 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 10:05:25,617 p=389456 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1681980435.2759356[0m
[0;31m[0m[0;31m-mtime: 1681980521.9590707[0m
[0;31m[0m[0;32m+atime: 1681985125.593984[0m
[0;32m[0m[0;32m+mtime: 1681985125.593984[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 10:05:25,617 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:05:25,638 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 10:05:25,811 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:25,831 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 10:05:26,690 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:26,711 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 10:05:27,769 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:27,788 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 10:05:27,980 p=389456 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 10:05:27,980 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:05:28,000 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 10:05:29,485 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:29,507 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 10:05:29,846 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:29,865 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 10:05:30,212 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:30,232 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 10:05:30,767 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:30,806 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 10:05:30,850 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:30,886 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 10:05:31,938 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:31,960 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 10:05:32,139 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,160 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 10:05:32,178 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,198 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 10:05:32,217 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,238 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 10:05:32,422 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,442 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 10:05:32,476 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,497 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 10:05:32,532 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,552 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 10:05:32,567 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,586 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 10:05:32,601 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,620 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 10:05:32,636 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,659 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 10:05:32,687 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:32,708 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 10:05:33,079 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:33,101 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 10:05:33,136 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:33,159 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 10:05:33,529 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 10:05:33,552 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 10:05:33,761 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 10:05:33,784 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 10:05:34,011 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:34,033 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 10:05:34,122 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:34,155 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 10:05:34,190 p=389456 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 10:05:34,389 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 10:05:34,438 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:34,479 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 10:05:35,328 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:35,353 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 10:05:35,375 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:35,399 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 10:05:35,424 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:35,444 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 10:05:35,463 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:35,484 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 10:05:35,500 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:35,520 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 10:05:35,565 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:35,628 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 10:05:35,831 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:35,851 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 10:05:35,876 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:35,896 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 10:05:35,921 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:35,941 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 10:05:36,174 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:36,195 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 10:05:36,221 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 10:05:36,241 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 10:05:36,289 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:36,334 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 10:05:36,356 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:36,377 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 10:05:36,755 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:36,776 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 10:05:36,812 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 10:05:36,849 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:36,893 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 10:05:37,093 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:37,132 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 10:05:37,329 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:37,349 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 10:05:37,709 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:37,730 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 10:05:37,908 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:37,929 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 10:05:38,101 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:38,121 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 10:05:38,161 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:38,197 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 10:05:39,023 p=389456 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/sites-available/galaxy[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-389456vurxtpxi/tmp3wwn2jdd/galaxy.j2[0m
[0;32m[0m[0;36m@@ -109,4 +109,9 @@[0m
[0;36m[0m 		proxy_pass http://unix:/srv/galaxy/var/config/reports.sock:/;
 	}
 
[0;32m+	location /grafana/ {[0m
[0;32m[0m[0;32m+		proxy_pass http://127.0.0.1:3000/;[0m
[0;32m[0m[0;32m+		proxy_set_header Host $http_host;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m }


2023-04-20 10:05:39,025 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:05:39,049 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 10:05:39,263 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:05:39,285 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 10:05:39,500 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:39,521 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 10:05:39,542 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:39,561 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 10:05:39,870 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:39,908 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 10:05:39,931 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:39,950 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 10:05:39,967 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:39,986 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 10:05:40,032 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:40,065 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 10:05:40,690 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:40,710 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 10:05:41,709 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:41,730 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 10:05:41,748 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:41,769 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 10:05:42,652 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:42,680 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 10:05:43,126 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:43,147 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 10:05:43,181 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:43,202 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 10:05:43,235 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:43,257 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 10:05:43,598 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:43,619 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 10:05:43,638 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:43,659 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 10:05:44,547 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:44,566 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 10:05:44,596 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:44,616 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 10:05:44,647 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:44,666 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 10:05:44,704 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:44,724 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 10:05:44,760 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:44,780 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 10:05:45,091 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:45,111 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 10:05:45,146 p=389456 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-20 10:05:45,473 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:05:45,494 p=389456 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-20 10:05:45,516 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:45,536 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 10:05:45,590 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:45,627 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 10:05:45,851 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:45,874 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 10:05:45,923 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:45,945 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 10:05:45,980 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,001 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 10:05:46,050 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,070 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 10:05:46,102 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,121 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 10:05:46,136 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,156 p=389456 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 10:05:46,179 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,215 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 10:05:46,252 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:46,297 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 10:05:46,326 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,352 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 10:05:46,375 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,397 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 10:05:46,415 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,440 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 10:05:46,615 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:46,637 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 10:05:46,992 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 10:05:47,612 p=389456 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-389456vurxtpxi/tmp87v2bmv2/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-9pe0biwkiP2DvFNk[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+qpVKnfFBhqhthL5X[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 10:05:47,614 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 10:05:47,637 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 10:05:47,674 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 10:05:47,708 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 10:05:47,763 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:47,784 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 10:05:47,804 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:05:47,826 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 10:05:48,521 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:05:48,543 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 10:05:48,564 p=389456 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 10:05:48,564 p=389456 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 10:06:08,567 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:08,588 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 10:06:08,624 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 10:06:08,659 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 10:06:09,740 p=389456 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 10:06:09,740 p=389456 u=ubuntu n=ansible | ...ignoring
2023-04-20 10:06:09,761 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 10:06:13,576 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 10:06:13,599 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 10:06:13,664 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 10:06:13,681 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 10:06:13,700 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 10:06:13,719 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 10:06:13,756 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 10:06:14,630 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:14,653 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 10:06:15,672 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:15,695 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:06:15,713 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:15,737 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:06:15,756 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:15,779 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 10:06:16,750 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:16,773 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 10:06:17,695 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:17,717 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 10:06:18,597 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:18,621 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 10:06:19,532 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:19,556 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:06:19,572 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:19,593 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:06:19,609 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:19,630 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 10:06:20,592 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:20,613 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 10:06:20,634 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:20,655 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 10:06:21,667 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:21,689 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 10:06:22,582 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:22,602 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:06:22,618 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:22,639 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:06:22,654 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:22,673 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 10:06:23,662 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:23,683 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 10:06:23,704 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:23,725 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 10:06:24,658 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:24,678 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 10:06:25,647 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:25,667 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:06:25,685 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:25,705 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:06:25,727 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:25,747 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 10:06:26,746 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:26,767 p=389456 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 10:06:27,748 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:27,788 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 10:06:28,435 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:28,456 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 10:06:28,647 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:28,667 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 10:06:28,684 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:28,704 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 10:06:28,881 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:28,904 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 10:06:29,084 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:29,105 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 10:06:29,295 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:29,316 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 10:06:29,520 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:29,541 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 10:06:29,871 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:29,910 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 10:06:29,946 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:29,966 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 10:06:30,009 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:30,034 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 10:06:30,052 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:30,072 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 10:06:30,117 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:30,139 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 10:06:30,227 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 10:06:30,285 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 10:06:30,342 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:06:30,380 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 10:06:31,181 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:31,201 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 10:06:31,859 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:31,882 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 10:06:31,901 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:31,923 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 10:06:32,242 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:32,264 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 10:06:32,283 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:32,303 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 10:06:33,232 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:33,255 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 10:06:33,293 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 10:06:33,330 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 10:06:33,569 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 10:06:33,592 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 10:06:33,965 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 10:06:33,988 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 10:06:34,327 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:34,355 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 10:06:34,679 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:34,700 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 10:06:34,719 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:34,740 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 10:06:35,128 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:35,150 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 10:06:35,522 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:35,544 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 10:06:35,755 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:35,776 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 10:06:35,795 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:35,815 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 10:06:36,199 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:36,220 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 10:06:36,261 p=389456 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 10:06:36,297 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 10:06:36,321 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:36,345 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 10:06:36,374 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:36,398 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 10:06:36,429 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:36,456 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 10:06:36,665 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:36,686 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 10:06:36,718 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:36,740 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 10:06:36,932 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:36,954 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 10:06:36,994 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:37,014 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 10:06:37,032 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:37,054 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 10:06:37,071 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:37,092 p=389456 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 10:06:37,112 p=389456 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:06:37,186 p=389456 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 10:06:44,167 p=389456 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:06:44,189 p=389456 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 10:06:44,388 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:44,412 p=389456 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 10:06:45,312 p=389456 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:06:45,355 p=389456 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 10:06:45,355 p=389456 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=237  changed=24   unreachable=0    failed=0    skipped=133  rescued=0    ignored=1   
2023-04-20 10:13:18,306 p=398374 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-20 10:13:18,307 p=398374 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-20 10:13:18,307 p=398374 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-20 10:13:18,307 p=398374 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-20 10:13:18,307 p=398374 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-20 10:13:18,307 p=398374 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-20 10:13:18,308 p=398374 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-20 10:13:18,308 p=398374 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-20 10:13:18,308 p=398374 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-20 10:13:18,308 p=398374 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-20 10:13:18,308 p=398374 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-20 10:13:18,308 p=398374 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-20 10:13:18,309 p=398374 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-20 10:13:18,309 p=398374 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) is already installed, skipping.
2023-04-20 10:13:18,309 p=398374 u=ubuntu n=ansible | - geerlingguy.docker (6.1.0) is already installed, skipping.
2023-04-20 10:13:18,309 p=398374 u=ubuntu n=ansible | - usegalaxy_eu.rabbitmqserver (1.4.4) is already installed, skipping.
2023-04-20 10:13:18,310 p=398374 u=ubuntu n=ansible | - galaxyproject.pulsar (1.0.10) is already installed, skipping.
2023-04-20 10:13:18,310 p=398374 u=ubuntu n=ansible | - geerlingguy.redis (1.8.0) is already installed, skipping.
2023-04-20 10:13:18,310 p=398374 u=ubuntu n=ansible | - usegalaxy_eu.flower (1.0.2) is already installed, skipping.
2023-04-20 10:13:18,310 p=398374 u=ubuntu n=ansible | - usegalaxy_eu.influxdb (v6.0.7) is already installed, skipping.
2023-04-20 10:13:18,310 p=398374 u=ubuntu n=ansible | - cloudalchemy.grafana (0.14.2) is already installed, skipping.
2023-04-20 10:13:19,118 p=398374 u=ubuntu n=ansible | - extracting dj-wasabi.telegraf to /home/ubuntu/galaxy/roles/dj-wasabi.telegraf
2023-04-20 10:13:19,122 p=398374 u=ubuntu n=ansible | - dj-wasabi.telegraf (6f6fdf7f5ead491560783d52528b79e9e088bd5b) was installed successfully
2023-04-20 10:15:47,291 p=398534 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 10:15:47,503 p=398534 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 10:15:47,521 p=398534 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 10:15:48,617 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:48,624 p=398534 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 10:15:49,620 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:49,638 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 10:15:49,664 p=398534 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:15:49,673 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 10:15:49,697 p=398534 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:15:49,704 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 10:15:49,726 p=398534 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:15:49,733 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 10:15:49,757 p=398534 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:15:49,765 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 10:15:50,631 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:50,638 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 10:15:50,892 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:50,900 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 10:15:50,945 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:50,953 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 10:15:51,747 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:51,753 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 10:15:51,778 p=398534 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:15:51,785 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 10:15:51,818 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:51,826 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 10:15:51,852 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:51,860 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 10:15:51,889 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:51,897 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 10:15:51,912 p=398534 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:15:51,919 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 10:15:52,225 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:52,232 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 10:15:52,513 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:52,520 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 10:15:52,544 p=398534 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:15:52,552 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 10:15:52,722 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:52,729 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 10:15:53,206 p=398534 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:15:53,213 p=398534 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 10:15:53,549 p=398534 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 10:16:27,628 p=399005 u=ubuntu n=ansible | ERROR! the playbook: files does not appear to be a file
2023-04-20 10:16:30,616 p=399007 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 10:16:30,816 p=399007 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 10:16:30,833 p=399007 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 10:16:31,854 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:31,861 p=399007 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 10:16:32,789 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:32,809 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 10:16:32,834 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:32,844 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 10:16:32,869 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:32,875 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 10:16:32,899 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:32,906 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 10:16:32,929 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:32,936 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 10:16:33,767 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:33,775 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 10:16:34,033 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:34,040 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 10:16:34,080 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:34,087 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 10:16:34,893 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:34,899 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 10:16:34,922 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:34,929 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 10:16:34,959 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:34,965 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 10:16:34,990 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:34,996 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 10:16:35,020 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:35,027 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 10:16:35,040 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:35,047 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 10:16:35,330 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:35,337 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 10:16:35,637 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:35,644 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 10:16:35,668 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:35,674 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 10:16:35,849 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:35,856 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 10:16:36,303 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:36,310 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 10:16:36,678 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:36,684 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 10:16:36,717 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:36,728 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 10:16:36,917 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 10:16:37,069 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 10:16:37,078 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 10:16:37,252 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:37,259 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 10:16:37,599 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 10:16:37,609 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 10:16:37,952 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 10:16:37,960 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 10:16:38,302 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:38,309 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 10:16:38,667 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:38,675 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 10:16:38,865 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:38,872 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 10:16:39,383 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:39,399 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 10:16:39,423 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 10:16:39,425 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:39,433 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 10:16:39,445 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:39,453 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 10:16:39,488 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 10:16:39,491 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:39,498 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 10:16:39,889 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:16:39,898 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 10:16:39,909 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:39,916 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 10:16:39,939 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:39,947 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 10:16:39,959 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:39,966 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 10:16:40,366 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:16:40,375 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 10:16:40,389 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:40,461 p=399007 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 10:16:40,525 p=399007 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 10:16:41,363 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:41,382 p=399007 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 10:16:42,151 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:42,170 p=399007 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 10:16:42,185 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:42,206 p=399007 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 10:16:42,970 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:42,990 p=399007 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 10:16:43,700 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:43,764 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 10:16:44,197 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,217 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 10:16:44,238 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,257 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 10:16:44,488 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,508 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 10:16:44,696 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,716 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 10:16:44,768 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,788 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 10:16:44,804 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,824 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 10:16:44,841 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,861 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 10:16:44,877 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,896 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 10:16:44,912 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,931 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 10:16:44,947 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:44,966 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 10:16:45,001 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:45,035 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 10:16:45,047 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:45,067 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 10:16:45,106 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 10:16:45,118 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:45,155 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 10:16:45,596 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:45,616 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 10:16:45,631 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:45,650 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 10:16:45,669 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:45,689 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 10:16:45,709 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:45,751 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 10:16:45,769 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:45,788 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 10:16:45,850 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:45,883 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 10:16:46,681 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:46,701 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 10:16:46,719 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:46,738 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 10:16:46,817 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:46,837 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 10:16:46,854 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:46,875 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 10:16:46,910 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:46,944 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 10:16:46,967 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 10:16:46,970 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 10:16:46,972 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 10:16:46,974 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:46,995 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 10:16:47,060 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:47,097 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 10:16:47,906 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:47,927 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 10:16:47,943 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:47,964 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 10:16:48,041 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:48,061 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 10:16:48,078 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:48,098 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 10:16:48,131 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:48,164 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 10:16:48,186 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 10:16:48,189 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 10:16:48,191 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 10:16:48,194 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:48,216 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 10:16:48,231 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:48,252 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 10:16:49,028 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:49,048 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 10:16:49,066 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:49,086 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 10:16:49,102 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:49,122 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 10:16:49,595 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:49,619 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 10:16:49,659 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:49,693 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 10:16:49,871 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:49,891 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 10:16:49,916 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:49,937 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 10:16:50,242 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:50,262 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 10:16:50,278 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:50,298 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 10:16:50,617 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:50,636 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 10:16:50,934 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:50,977 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 10:16:51,282 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:51,302 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 10:16:52,075 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:52,114 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 10:16:52,134 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 10:16:52,154 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 10:16:52,202 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:52,222 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 10:16:52,258 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:52,278 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 10:16:52,314 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 10:16:52,318 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 10:16:52,328 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 10:16:52,331 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 10:16:52,335 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 10:16:52,346 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 10:16:52,353 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 10:16:52,360 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 10:16:52,364 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 10:16:52,388 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 10:16:52,456 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 10:16:52,492 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 10:16:52,527 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 10:16:52,558 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 10:16:52,561 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:52,580 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 10:16:52,662 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 10:16:52,707 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 10:16:52,749 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 10:16:52,769 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 10:16:52,835 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:52,875 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 10:16:52,980 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:52,999 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 10:16:53,576 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:53,597 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 10:16:53,716 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:16:53,738 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 10:16:54,067 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:16:54,249 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 10:16:54,272 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 10:16:54,510 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:16:54,685 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 10:16:54,710 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 10:16:54,798 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:54,819 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 10:16:54,849 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:54,874 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 10:16:54,913 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 10:16:54,952 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 10:16:55,320 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:16:55,341 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 10:16:55,728 p=399007 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 10:16:55,730 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 10:16:56,068 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 10:16:56,388 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 10:16:56,731 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 10:16:57,070 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 10:16:57,095 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 10:16:57,454 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 10:16:57,787 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 10:16:58,136 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 10:16:58,458 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 10:16:58,795 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 10:16:59,127 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 10:16:59,474 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 10:16:59,803 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 10:17:00,139 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 10:17:00,501 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 10:17:00,528 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 10:17:00,602 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:00,643 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 10:17:02,220 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:02,240 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 10:17:02,346 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:02,366 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 10:17:04,288 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:04,308 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 10:17:06,148 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:06,169 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 10:17:06,281 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:06,302 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 10:17:06,318 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:06,338 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 10:17:06,353 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:06,373 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 10:17:06,431 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:06,477 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 10:17:06,605 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:06,643 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 10:17:07,082 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:07,103 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 10:17:07,305 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:07,325 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 10:17:07,831 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 10:17:08,302 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 10:17:08,324 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 10:17:08,834 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 10:17:08,855 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 10:17:09,414 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 10:17:09,880 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 10:17:10,347 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 10:17:10,824 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 10:17:10,847 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 10:17:11,377 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 10:17:11,400 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 10:17:11,950 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:11,970 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 10:17:12,158 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:12,178 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 10:17:12,282 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:12,302 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 10:17:12,317 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:12,338 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 10:17:12,354 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:12,373 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 10:17:12,388 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:12,408 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 10:17:12,422 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:12,443 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 10:17:12,995 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:13,015 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 10:17:13,135 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:13,155 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 10:17:13,259 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:13,283 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 10:17:14,325 p=399007 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-399007llb4zm4g/tmppz8s23gb/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -133,6 +133,8 @@[0m
[0;36m[0m     shed_tool_data_table_config: /srv/galaxy/var/config/shed_tool_data_table_conf.xml
     show_welcome_with_login: true
     slow_query_log_threshold: 5
[0;32m+    statsd_host: localhost[0m
[0;32m[0m[0;32m+    statsd_influxdb: true[0m
[0;32m[0m     themes_config_file: /srv/galaxy/config/themes.yml
     tool_config_file: /srv/galaxy/server/config/tool_conf.xml.sample,/srv/galaxy/config/local_tool_conf.xml
     tool_data_path: /srv/galaxy/var/tool_data


2023-04-20 10:17:14,325 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:17:14,345 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 10:17:14,405 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:14,457 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 10:17:16,152 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:16,173 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 10:17:18,011 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:18,031 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 10:17:23,276 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:23,304 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 10:17:23,917 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:23,938 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 10:17:26,672 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:17:26,694 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 10:17:28,378 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:28,400 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 10:17:28,451 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:28,504 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 10:17:28,612 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:28,632 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 10:17:29,171 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 10:17:29,202 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 10:17:29,673 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 10:17:30,005 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 10:17:30,030 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 10:17:30,447 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 10:17:30,789 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 10:17:30,811 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 10:17:30,850 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:30,904 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 10:17:32,438 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:32,462 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 10:17:33,874 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:33,896 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 10:17:34,002 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:34,025 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 10:17:34,165 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:34,192 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 10:17:34,289 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:34,362 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 10:17:34,747 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:34,769 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 10:17:35,108 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:35,130 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 10:17:35,483 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:35,507 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 10:17:35,890 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:35,911 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 10:17:36,094 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:36,118 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 10:17:36,298 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:36,321 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 10:17:36,423 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:36,446 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 10:17:36,562 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:36,583 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 10:17:36,704 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:36,725 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 10:17:36,846 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:36,867 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 10:17:36,987 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:37,010 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 10:17:37,117 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:37,140 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 10:17:37,244 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:37,267 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 10:17:37,370 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:37,392 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 10:17:37,409 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:37,431 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 10:17:37,479 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:37,565 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 10:17:37,681 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:37,701 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 10:17:38,374 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:38,394 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 10:17:38,416 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:38,436 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 10:17:38,453 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:38,473 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 10:17:38,513 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:38,587 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 10:17:39,038 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:39,059 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 10:17:39,168 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:39,209 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 10:17:39,397 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:39,419 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 10:17:39,783 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:39,803 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 10:17:42,560 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:17:42,603 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 10:17:42,781 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:42,807 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 10:17:42,824 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:42,844 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 10:17:43,235 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,254 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 10:17:43,289 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,310 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 10:17:43,328 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,348 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 10:17:43,364 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,386 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 10:17:43,409 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,429 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 10:17:43,453 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,473 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 10:17:43,490 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,528 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 10:17:43,547 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,567 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 10:17:43,595 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,615 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 10:17:43,797 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:43,818 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 10:17:44,136 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:44,155 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 10:17:44,170 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:44,190 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 10:17:44,226 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:44,258 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 10:17:45,095 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:45,115 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 10:17:45,129 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:45,150 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 10:17:45,442 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:45,520 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 10:17:45,782 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:45,802 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 10:17:46,019 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:46,039 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 10:17:46,280 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:46,300 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 10:17:46,327 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:46,347 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 10:17:46,532 p=399007 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1681985125.5895374[0m
[0;31m[0m[0;31m-mtime: 1681985212.484695[0m
[0;31m[0m[0;32m+atime: 1681985866.5076814[0m
[0;32m[0m[0;32m+mtime: 1681985866.5076814[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 10:17:46,532 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:17:46,552 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 10:17:46,740 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:46,761 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 10:17:47,560 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:47,580 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 10:17:48,650 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:48,670 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 10:17:48,848 p=399007 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 10:17:48,848 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:17:48,868 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 10:17:50,401 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:50,421 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 10:17:50,759 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:50,779 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 10:17:51,149 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:51,170 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 10:17:51,746 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:51,784 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 10:17:51,826 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:51,859 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 10:17:52,692 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:52,713 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 10:17:52,894 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:52,914 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 10:17:52,931 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:52,952 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 10:17:52,969 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:52,990 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 10:17:53,158 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,178 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 10:17:53,210 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,230 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 10:17:53,262 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,282 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 10:17:53,299 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,319 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 10:17:53,335 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,356 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 10:17:53,372 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,393 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 10:17:53,418 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,439 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 10:17:53,802 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,824 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 10:17:53,856 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:53,876 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 10:17:54,211 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 10:17:54,234 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 10:17:54,435 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 10:17:54,458 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 10:17:54,668 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:17:54,690 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 10:17:54,790 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 10:17:54,824 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 10:17:54,862 p=399007 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-20 10:17:54,880 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:54,900 p=399007 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 10:17:54,919 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:54,939 p=399007 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 10:17:54,958 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:17:54,978 p=399007 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 10:17:55,610 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:17:55,630 p=399007 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 10:18:12,195 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:12,219 p=399007 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 10:18:12,436 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 10:18:12,481 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:12,519 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 10:18:13,537 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:13,561 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 10:18:13,584 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:13,609 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 10:18:13,631 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:13,655 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 10:18:13,672 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:13,696 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 10:18:13,712 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:13,736 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 10:18:13,780 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:13,843 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 10:18:14,093 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:14,117 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 10:18:14,149 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:14,172 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 10:18:14,205 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:14,227 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 10:18:14,504 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:14,530 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 10:18:14,562 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 10:18:14,585 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 10:18:14,639 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:14,686 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 10:18:14,709 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:14,790 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 10:18:15,216 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:15,238 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 10:18:15,280 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 10:18:15,325 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:15,370 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 10:18:15,601 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:15,640 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 10:18:15,832 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:15,854 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 10:18:16,233 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:16,256 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 10:18:16,466 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:16,491 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 10:18:16,691 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:16,712 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 10:18:16,756 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:16,792 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 10:18:17,206 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:18:17,229 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 10:18:17,432 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 10:18:17,455 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 10:18:17,722 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:17,742 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 10:18:17,769 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:17,789 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 10:18:18,128 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:18,179 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 10:18:18,213 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:18,237 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 10:18:18,273 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:18,295 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 10:18:18,346 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:18,395 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 10:18:19,171 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:19,195 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 10:18:20,084 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:20,109 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 10:18:20,129 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:20,151 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 10:18:20,991 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:21,012 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 10:18:21,486 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:21,507 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 10:18:21,544 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:21,566 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 10:18:21,603 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:21,623 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 10:18:21,949 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:21,970 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 10:18:21,987 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:22,007 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 10:18:22,868 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:22,889 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 10:18:22,918 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:22,938 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 10:18:22,967 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:22,988 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 10:18:23,022 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:23,042 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 10:18:23,073 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:23,093 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 10:18:23,441 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:23,463 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 10:18:23,501 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 10:18:23,556 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:23,594 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 10:18:23,817 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:23,838 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 10:18:23,885 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:23,906 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 10:18:23,939 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:23,960 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 10:18:24,013 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:24,034 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 10:18:24,069 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:24,089 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 10:18:24,103 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:24,123 p=399007 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 10:18:24,147 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:24,188 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 10:18:24,224 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:24,268 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 10:18:24,296 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:24,317 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 10:18:24,338 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:24,358 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 10:18:24,378 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:24,401 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 10:18:24,584 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:24,607 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 10:18:24,953 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 10:18:25,553 p=399007 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-399007llb4zm4g/tmp5j22m63x/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-qpVKnfFBhqhthL5X[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+4Eir9VCMivpQJnA9[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 10:18:25,555 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 10:18:25,578 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 10:18:25,615 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:25,648 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 10:18:25,698 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:25,718 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 10:18:25,736 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:25,756 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 10:18:26,397 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:26,424 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 10:18:26,445 p=399007 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 10:18:26,445 p=399007 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 10:18:46,449 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:18:46,471 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 10:18:46,508 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 10:18:46,546 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 10:18:47,706 p=399007 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 10:18:47,706 p=399007 u=ubuntu n=ansible | ...ignoring
2023-04-20 10:18:47,728 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 10:18:51,488 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 10:18:51,516 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 10:18:51,589 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 10:18:51,606 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 10:18:51,624 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 10:18:51,641 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 10:18:51,676 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 10:18:52,541 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:52,561 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 10:18:53,465 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:53,488 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:18:53,505 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:53,526 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:18:53,541 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:53,561 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 10:18:54,483 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:54,503 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 10:18:55,358 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:55,378 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 10:18:56,303 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:56,324 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 10:18:57,150 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:57,170 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:18:57,185 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:57,205 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:18:57,219 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:57,239 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 10:18:58,136 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:58,156 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 10:18:58,174 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:58,195 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 10:18:59,080 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:59,100 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 10:18:59,885 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:18:59,906 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:18:59,924 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:59,944 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:18:59,960 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:18:59,981 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 10:19:00,821 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:00,842 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 10:19:00,861 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:00,881 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 10:19:01,720 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:01,740 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 10:19:02,586 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:02,607 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:19:02,622 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:02,643 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 10:19:02,661 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:02,681 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 10:19:03,583 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:03,603 p=399007 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 10:19:04,504 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:04,543 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 10:19:05,162 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:05,184 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 10:19:05,365 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:05,386 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 10:19:05,402 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:05,423 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 10:19:05,597 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:05,619 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 10:19:05,791 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:05,811 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 10:19:05,980 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:06,003 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 10:19:06,189 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:06,210 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 10:19:06,502 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:06,539 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 10:19:06,575 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:06,595 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 10:19:06,634 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:06,654 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 10:19:06,670 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:06,693 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 10:19:06,731 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:06,751 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 10:19:06,834 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 10:19:06,892 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 10:19:06,949 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:19:06,982 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 10:19:07,764 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:07,790 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 10:19:08,482 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:08,503 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 10:19:08,522 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:08,543 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 10:19:08,860 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:08,880 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 10:19:08,898 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:08,918 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 10:19:09,708 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:09,729 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 10:19:09,765 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 10:19:09,802 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 10:19:10,007 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 10:19:10,036 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 10:19:10,394 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 10:19:10,417 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 10:19:10,717 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:10,738 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 10:19:11,027 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:11,050 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 10:19:11,067 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:11,087 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 10:19:11,443 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:11,463 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 10:19:11,824 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:11,844 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 10:19:12,037 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:12,061 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 10:19:12,077 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:12,098 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 10:19:12,449 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:12,472 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 10:19:12,507 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 10:19:12,542 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 10:19:12,555 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:12,577 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 10:19:12,603 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:12,623 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 10:19:12,650 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:12,671 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 10:19:12,859 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:12,880 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 10:19:12,908 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:12,928 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 10:19:13,129 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,149 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 10:19:13,177 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,198 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 10:19:13,213 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,234 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 10:19:13,249 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,270 p=399007 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 10:19:13,285 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,323 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] ************************************************************************
2023-04-20 10:19:13,339 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,359 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] ************************************************************************
2023-04-20 10:19:13,410 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-20 10:19:13,470 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] *****************************************************
2023-04-20 10:19:13,488 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,508 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] *************************************************
2023-04-20 10:19:13,529 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,549 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] *****************************
2023-04-20 10:19:13,568 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,587 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ******************************
2023-04-20 10:19:13,602 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,623 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***************************
2023-04-20 10:19:13,795 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,815 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] *****************************************************
2023-04-20 10:19:13,831 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,851 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *******************************************************
2023-04-20 10:19:13,899 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:13,919 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] *************************************
2023-04-20 10:19:14,132 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:14,152 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] ************************************************
2023-04-20 10:19:14,203 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:14,223 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ********************************************************
2023-04-20 10:19:14,547 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:14,567 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ******************************************
2023-04-20 10:19:14,622 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:14,643 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *********************************************
2023-04-20 10:19:15,150 p=399007 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-399007llb4zm4g/tmph206c6bf[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+deb [signed-by=/usr/share/keyrings/influxdata-archive.asc] https://repos.influxdata.com/ubuntu jammy stable[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 10:19:15,151 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:15,171 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *********************************************************
2023-04-20 10:19:15,202 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:15,223 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 10:19:25,896 p=399007 u=ubuntu n=ansible | The following NEW packages will be installed:
  telegraf
0 upgraded, 1 newly installed, 0 to remove and 11 not upgraded.
2023-04-20 10:19:25,896 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:25,918 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 10:19:28,046 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,066 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] **********************************************
2023-04-20 10:19:28,082 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,102 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] ***********************************************
2023-04-20 10:19:28,116 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,137 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] **************************************
2023-04-20 10:19:28,151 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,171 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] **************************************************************************
2023-04-20 10:19:28,185 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,206 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] ***********************************************************************
2023-04-20 10:19:28,220 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,240 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] *************************************************************************
2023-04-20 10:19:28,253 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,273 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] ****************************************************************************
2023-04-20 10:19:28,290 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,313 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] ***********************************************************************
2023-04-20 10:19:28,376 p=399007 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-20 10:19:28,456 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] ***********************************************************************
2023-04-20 10:19:28,471 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,491 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] **************************************************************************
2023-04-20 10:19:28,506 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,526 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] ****************************************************
2023-04-20 10:19:28,541 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,560 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] **************************************************
2023-04-20 10:19:28,576 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:28,596 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] *************************************************
2023-04-20 10:19:29,271 p=399007 u=ubuntu n=ansible | diff skipped: destination file size is greater than 104448

2023-04-20 10:19:29,272 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:29,291 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] *****************************
2023-04-20 10:19:29,310 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:29,332 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ********************************************************
2023-04-20 10:19:29,346 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:29,366 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ********************************************************
2023-04-20 10:19:29,381 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:29,402 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] **************************************************************
2023-04-20 10:19:30,029 p=399007 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-399007llb4zm4g/tmpouo0atls/telegraf-extra-plugin.conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,6 @@[0m
[0;36m[0m[0;32m+### MANAGED BY dj-wasabi.telegraf ANSIBLE ROLE ###[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[[inputs.statsd]][0m
[0;32m[0m[0;32m+    service_address = ":8125"[0m
[0;32m[0m[0;32m+    metric_separator = "."[0m
[0;32m[0m[0;32m+    allowed_pending_messages = 10000[0m
[0;32m[0m

2023-04-20 10:19:30,031 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-20 10:19:30,054 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] ************************************************************
2023-04-20 10:19:30,111 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-20 10:19:30,113 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:30,133 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] ************************************************
2023-04-20 10:19:30,170 p=399007 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 10:19:37,168 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:37,189 p=399007 u=ubuntu n=ansible | RUNNING HANDLER [dj-wasabi.telegraf : Restart Telegraf] **************************************************************
2023-04-20 10:19:37,610 p=399007 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 10:19:37,633 p=399007 u=ubuntu n=ansible | RUNNING HANDLER [dj-wasabi.telegraf : Restart Telegraf container] ****************************************************
2023-04-20 10:19:37,653 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:37,674 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] ****************************************************
2023-04-20 10:19:37,997 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,017 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ********************************************************
2023-04-20 10:19:38,034 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,054 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ********************************************************************
2023-04-20 10:19:38,072 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,094 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ********************************************************************
2023-04-20 10:19:38,110 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,133 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] ************************************************
2023-04-20 10:19:38,159 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,180 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] **************************************************************
2023-04-20 10:19:38,198 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,218 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] **************************************************************
2023-04-20 10:19:38,235 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,256 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] **************************************************
2023-04-20 10:19:38,275 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,296 p=399007 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] ****************************************************
2023-04-20 10:19:38,313 p=399007 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,389 p=399007 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 10:19:38,620 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:38,641 p=399007 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 10:19:39,520 p=399007 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 10:19:39,565 p=399007 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 10:19:39,565 p=399007 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=253  changed=32   unreachable=0    failed=0    skipped=166  rescued=0    ignored=1   
2023-04-20 12:07:23,982 p=415766 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-20 12:07:23,982 p=415766 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-20 12:07:23,982 p=415766 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-20 12:07:23,983 p=415766 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-20 12:07:23,983 p=415766 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-20 12:07:23,983 p=415766 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-20 12:07:23,984 p=415766 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-20 12:07:23,984 p=415766 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-20 12:07:23,984 p=415766 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-20 12:07:23,984 p=415766 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-20 12:07:23,984 p=415766 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-20 12:07:23,985 p=415766 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-20 12:07:23,985 p=415766 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-20 12:07:23,985 p=415766 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) is already installed, skipping.
2023-04-20 12:07:23,985 p=415766 u=ubuntu n=ansible | - geerlingguy.docker (6.1.0) is already installed, skipping.
2023-04-20 12:07:23,986 p=415766 u=ubuntu n=ansible | - usegalaxy_eu.rabbitmqserver (1.4.4) is already installed, skipping.
2023-04-20 12:07:23,986 p=415766 u=ubuntu n=ansible | - galaxyproject.pulsar (1.0.10) is already installed, skipping.
2023-04-20 12:07:23,986 p=415766 u=ubuntu n=ansible | - geerlingguy.redis (1.8.0) is already installed, skipping.
2023-04-20 12:07:23,986 p=415766 u=ubuntu n=ansible | - usegalaxy_eu.flower (1.0.2) is already installed, skipping.
2023-04-20 12:07:23,986 p=415766 u=ubuntu n=ansible | - usegalaxy_eu.influxdb (v6.0.7) is already installed, skipping.
2023-04-20 12:07:23,987 p=415766 u=ubuntu n=ansible | - cloudalchemy.grafana (0.14.2) is already installed, skipping.
2023-04-20 12:07:23,987 p=415766 u=ubuntu n=ansible | - dj-wasabi.telegraf (6f6fdf7f5ead491560783d52528b79e9e088bd5b) is already installed, skipping.
2023-04-20 12:07:24,128 p=415766 u=ubuntu n=ansible | - downloading role 'tiaas2', owned by galaxyproject
2023-04-20 12:07:24,574 p=415766 u=ubuntu n=ansible | - downloading role from https://github.com/galaxyproject/ansible-tiaas2/archive/2.1.5.tar.gz
2023-04-20 12:07:25,076 p=415766 u=ubuntu n=ansible | - extracting galaxyproject.tiaas2 to /home/ubuntu/galaxy/roles/galaxyproject.tiaas2
2023-04-20 12:07:25,080 p=415766 u=ubuntu n=ansible | - galaxyproject.tiaas2 (2.1.5) was installed successfully
2023-04-20 12:25:00,053 p=416643 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 12:25:00,255 p=416643 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 12:25:00,272 p=416643 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 12:25:01,450 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:01,457 p=416643 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 12:25:02,416 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:02,434 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 12:25:02,460 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:02,469 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 12:25:02,491 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:02,498 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 12:25:02,522 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:02,530 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 12:25:02,553 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:02,560 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 12:25:03,359 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:03,366 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 12:25:03,638 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:03,645 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 12:25:03,688 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:03,695 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 12:25:04,473 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:04,479 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 12:25:04,504 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:04,511 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 12:25:04,543 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:04,550 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 12:25:04,575 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:04,581 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 12:25:04,609 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:04,616 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 12:25:04,631 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:04,638 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 12:25:04,922 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:04,928 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 12:25:05,222 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:05,229 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 12:25:05,247 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:05,254 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 12:25:05,432 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:05,439 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 12:25:05,918 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:05,925 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 12:25:06,296 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:06,303 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 12:25:06,335 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:06,347 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 12:25:06,545 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 12:25:06,696 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 12:25:06,704 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 12:25:06,882 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:06,889 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 12:25:07,231 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 12:25:07,241 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 12:25:07,567 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 12:25:07,576 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 12:25:07,917 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:07,924 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 12:25:08,254 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:08,261 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 12:25:08,420 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:08,427 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 12:25:08,948 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:08,960 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 12:25:08,987 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 12:25:08,990 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-20 12:25:08,993 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:09,000 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 12:25:09,041 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-20 12:25:09,051 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-20 12:25:09,060 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-20 12:25:09,068 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-20 12:25:09,070 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:09,077 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 12:25:09,110 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 12:25:09,113 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:09,119 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 12:25:09,492 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:25:09,713 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:25:09,723 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 12:25:09,735 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:09,743 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 12:25:09,766 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:09,773 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 12:25:09,787 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:09,794 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 12:25:10,189 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:25:10,198 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 12:25:10,599 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:25:10,856 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:25:11,113 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:25:11,361 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:25:11,435 p=416643 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 12:25:11,502 p=416643 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 12:25:12,330 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:12,373 p=416643 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 12:25:13,131 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:13,149 p=416643 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 12:25:13,163 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:13,182 p=416643 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 12:25:13,981 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:14,000 p=416643 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 12:25:14,704 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:14,758 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 12:25:15,162 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,182 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 12:25:15,202 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,222 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 12:25:15,449 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,469 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 12:25:15,661 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,680 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 12:25:15,731 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,750 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 12:25:15,766 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,786 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 12:25:15,801 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,821 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 12:25:15,835 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,855 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 12:25:15,873 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,892 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 12:25:15,908 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:15,928 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 12:25:15,963 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:15,997 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 12:25:16,009 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:16,028 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 12:25:16,062 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 12:25:16,074 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:16,110 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 12:25:16,546 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:16,568 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 12:25:16,582 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:16,601 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 12:25:16,621 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:16,640 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 12:25:16,659 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:16,695 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 12:25:16,711 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:16,730 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 12:25:16,794 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:16,828 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 12:25:17,582 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:17,602 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 12:25:17,618 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:17,640 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 12:25:17,712 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:17,732 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 12:25:17,748 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:17,767 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 12:25:17,803 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:17,836 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 12:25:17,861 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 12:25:17,864 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 12:25:17,866 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 12:25:17,867 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:17,886 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 12:25:17,949 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:17,984 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 12:25:18,757 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:18,776 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 12:25:18,793 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:18,812 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 12:25:18,885 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:18,904 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 12:25:18,922 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:18,942 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 12:25:18,974 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:19,006 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 12:25:19,029 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 12:25:19,033 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 12:25:19,035 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 12:25:19,036 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:19,055 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 12:25:19,070 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:19,089 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 12:25:19,848 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:19,867 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 12:25:19,885 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:19,904 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 12:25:19,921 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:19,948 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 12:25:20,396 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:20,415 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 12:25:20,454 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:20,487 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 12:25:20,652 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:20,672 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 12:25:20,694 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:20,714 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 12:25:21,008 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:21,028 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 12:25:21,044 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:21,063 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 12:25:21,340 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:21,360 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 12:25:21,669 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:21,706 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 12:25:22,013 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:22,035 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 12:25:22,838 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:22,874 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 12:25:22,892 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 12:25:22,912 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 12:25:22,955 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:22,977 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 12:25:23,015 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:23,034 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 12:25:23,065 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 12:25:23,074 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 12:25:23,083 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 12:25:23,093 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 12:25:23,103 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 12:25:23,114 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 12:25:23,117 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 12:25:23,121 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 12:25:23,124 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 12:25:23,145 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 12:25:23,209 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 12:25:23,242 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 12:25:23,277 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 12:25:23,307 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 12:25:23,309 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:23,329 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 12:25:23,413 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 12:25:23,459 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 12:25:23,499 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 12:25:23,520 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 12:25:23,574 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:23,610 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 12:25:23,715 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:23,735 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 12:25:24,299 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:24,317 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 12:25:24,424 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:24,444 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 12:25:24,736 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:25:24,895 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 12:25:24,917 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 12:25:25,112 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:25:25,264 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 12:25:25,286 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 12:25:25,372 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:25,391 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 12:25:25,411 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:25,430 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 12:25:25,469 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:25,506 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 12:25:25,849 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:25,870 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 12:25:26,221 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 12:25:26,223 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 12:25:26,551 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 12:25:26,872 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 12:25:27,219 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 12:25:27,528 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 12:25:27,550 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 12:25:27,890 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 12:25:28,197 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 12:25:28,500 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 12:25:28,814 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 12:25:29,128 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 12:25:29,426 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 12:25:29,745 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 12:25:30,060 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 12:25:30,379 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 12:25:30,682 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 12:25:30,704 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 12:25:30,768 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:30,807 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 12:25:32,447 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:32,466 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 12:25:32,563 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:32,583 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 12:25:34,454 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:34,475 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 12:25:36,330 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:36,352 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 12:25:36,452 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:36,472 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 12:25:36,484 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:36,510 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 12:25:36,522 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:36,542 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 12:25:36,599 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:36,649 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 12:25:36,771 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:36,808 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 12:25:37,256 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:37,276 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 12:25:37,471 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:37,490 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 12:25:37,986 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 12:25:38,421 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 12:25:38,443 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 12:25:38,917 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 12:25:38,939 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 12:25:39,482 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 12:25:39,941 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 12:25:40,404 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 12:25:40,898 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 12:25:40,921 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 12:25:41,432 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 12:25:41,453 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 12:25:41,935 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:41,955 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 12:25:42,137 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:42,156 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 12:25:42,262 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:42,282 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 12:25:42,297 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:42,316 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 12:25:42,330 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:42,350 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 12:25:42,363 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:42,383 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 12:25:42,397 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:42,416 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 12:25:42,955 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:42,975 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 12:25:43,078 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:43,097 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 12:25:43,199 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:43,224 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 12:25:43,800 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:43,819 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 12:25:43,870 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:43,920 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 12:25:45,596 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:45,616 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 12:25:47,420 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:47,441 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 12:25:52,541 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:52,561 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 12:25:53,173 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:53,192 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 12:25:54,829 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:54,849 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 12:25:56,486 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:25:56,507 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 12:25:56,557 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:56,609 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 12:25:56,717 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:25:56,736 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 12:25:57,230 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 12:25:57,252 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 12:25:57,736 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 12:25:58,048 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 12:25:58,071 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 12:25:58,489 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 12:25:58,804 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 12:25:58,825 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 12:25:58,863 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 12:25:58,916 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 12:26:00,435 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:00,455 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 12:26:01,769 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:01,788 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 12:26:01,892 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:01,913 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 12:26:02,013 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:02,032 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 12:26:02,101 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:02,160 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 12:26:02,513 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:02,533 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 12:26:02,886 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:02,905 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 12:26:03,242 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:03,261 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 12:26:03,625 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:03,645 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 12:26:03,856 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:03,875 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 12:26:04,069 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:04,089 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 12:26:04,188 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:04,208 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 12:26:04,306 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:04,326 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 12:26:04,438 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:04,457 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 12:26:04,565 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:04,586 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 12:26:04,685 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:04,707 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 12:26:04,807 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:04,827 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 12:26:04,933 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:04,953 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 12:26:05,059 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:05,079 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 12:26:05,094 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:05,114 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 12:26:05,155 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:05,232 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 12:26:05,333 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:05,353 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 12:26:05,982 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:06,002 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 12:26:06,021 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:06,040 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 12:26:06,053 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:06,073 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 12:26:06,108 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:06,171 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 12:26:06,581 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:06,601 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 12:26:06,707 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:06,747 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 12:26:06,917 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:06,937 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 12:26:07,260 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:07,279 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 12:26:09,911 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:26:09,947 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 12:26:10,123 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,142 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 12:26:10,158 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,177 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 12:26:10,544 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,563 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 12:26:10,598 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,619 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 12:26:10,633 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,653 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 12:26:10,666 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,685 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 12:26:10,709 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,729 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 12:26:10,753 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,773 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 12:26:10,788 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,825 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 12:26:10,842 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,864 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 12:26:10,891 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:10,910 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 12:26:11,085 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:11,104 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 12:26:11,422 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:11,442 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 12:26:11,457 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:11,477 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 12:26:11,511 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:11,543 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 12:26:12,284 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:12,303 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 12:26:12,318 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:12,338 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 12:26:12,627 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:12,664 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 12:26:12,938 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:12,957 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 12:26:13,162 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:13,182 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 12:26:13,465 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:13,485 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 12:26:13,513 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:13,532 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 12:26:13,703 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1681985866.5066216[0m
[0;31m[0m[0;31m-mtime: 1681985985.465546[0m
[0;31m[0m[0;32m+atime: 1681993573.681523[0m
[0;32m[0m[0;32m+mtime: 1681993573.681523[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 12:26:13,703 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:26:13,724 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 12:26:13,894 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:13,914 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 12:26:14,651 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:14,674 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 12:26:15,721 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:15,742 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 12:26:15,920 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 12:26:15,920 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:26:15,940 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 12:26:17,384 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:17,403 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 12:26:17,727 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:17,746 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 12:26:18,087 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:18,107 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 12:26:18,646 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:18,684 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 12:26:18,721 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:18,756 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 12:26:19,491 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:19,511 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 12:26:19,684 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:19,707 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 12:26:19,728 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:19,749 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 12:26:19,765 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:19,785 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 12:26:19,950 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:19,970 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 12:26:19,999 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:20,026 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 12:26:20,059 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:20,078 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 12:26:20,093 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:20,112 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 12:26:20,127 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:20,146 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 12:26:20,163 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:20,182 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 12:26:20,204 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:20,224 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 12:26:20,561 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:20,581 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 12:26:20,611 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:20,631 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 12:26:20,986 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 12:26:21,008 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 12:26:21,201 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 12:26:21,223 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 12:26:21,413 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:21,433 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 12:26:21,515 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:21,547 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 12:26:21,584 p=416643 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 12:26:21,782 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 12:26:21,819 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:21,854 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 12:26:22,691 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:22,712 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 12:26:22,732 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:22,753 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 12:26:22,775 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:22,795 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 12:26:22,811 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:22,831 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 12:26:22,846 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:22,866 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 12:26:22,908 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:22,974 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 12:26:23,161 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:23,181 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 12:26:23,205 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:23,224 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 12:26:23,247 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:23,268 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 12:26:23,482 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:23,503 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 12:26:23,526 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 12:26:23,546 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 12:26:23,588 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:23,631 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 12:26:23,650 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:23,670 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 12:26:24,040 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:24,062 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 12:26:24,099 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 12:26:24,135 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:24,178 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 12:26:24,366 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:24,403 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 12:26:24,571 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:24,591 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 12:26:24,929 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:24,949 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 12:26:25,123 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:25,143 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 12:26:25,314 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:25,333 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 12:26:25,371 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:25,406 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 12:26:26,140 p=416643 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/sites-available/galaxy[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-416643olleb1dv/tmpl58ukcow/galaxy.j2[0m
[0;32m[0m[0;36m@@ -114,4 +114,28 @@[0m
[0;36m[0m 		proxy_set_header Host $http_host;
 	}
 
[0;32m+	location /tiaas {[0m
[0;32m[0m[0;32m+    proxy_pass            http://unix:/run/tiaas.sock;[0m
[0;32m[0m[0;32m+    proxy_redirect        off;[0m
[0;32m[0m[0;32m+    proxy_set_header      Host                 $host;[0m
[0;32m[0m[0;32m+    proxy_set_header      X-Real-IP            $remote_addr;[0m
[0;32m[0m[0;32m+    proxy_set_header      X-Forwarded-For      $proxy_add_x_forwarded_for;[0m
[0;32m[0m[0;32m+    proxy_hide_header     X-Frame-Options;[0m
[0;32m[0m[0;32m+    proxy_read_timeout    600;  # seconds[0m
[0;32m[0m }
[0;32m+[0m
[0;32m[0m[0;32m+location /tiaas/static {[0m
[0;32m[0m[0;32m+    alias /srv/tiaas/static;[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+location /join-training {[0m
[0;32m[0m[0;32m+    proxy_pass            http://unix:/run/tiaas.sock;[0m
[0;32m[0m[0;32m+    proxy_redirect        off;[0m
[0;32m[0m[0;32m+    proxy_set_header      Host                 $host;[0m
[0;32m[0m[0;32m+    proxy_set_header      X-Real-IP            $remote_addr;[0m
[0;32m[0m[0;32m+    proxy_set_header      X-Forwarded-For      $proxy_add_x_forwarded_for;[0m
[0;32m[0m[0;32m+    proxy_hide_header     X-Frame-Options;[0m
[0;32m[0m[0;32m+    proxy_read_timeout    600;  # seconds[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m

2023-04-20 12:26:26,142 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:26:26,164 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 12:26:26,343 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:26:26,364 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 12:26:26,551 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:26,570 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 12:26:26,588 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:26,607 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 12:26:26,886 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:26,923 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 12:26:26,942 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:26,962 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 12:26:26,978 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:26,997 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 12:26:27,035 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:27,068 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 12:26:27,583 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:27,601 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 12:26:28,348 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:28,368 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 12:26:28,382 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:28,402 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 12:26:29,146 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:29,167 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 12:26:29,595 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:29,614 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 12:26:29,641 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:29,660 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 12:26:29,686 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:29,706 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 12:26:30,037 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:30,057 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 12:26:30,072 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:30,095 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 12:26:30,844 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:30,870 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 12:26:30,896 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:30,915 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 12:26:30,940 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:30,960 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 12:26:30,991 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:31,009 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 12:26:31,039 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:31,059 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 12:26:31,351 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:31,370 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 12:26:31,405 p=416643 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-20 12:26:31,699 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:26:31,718 p=416643 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-20 12:26:31,737 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:31,756 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 12:26:31,804 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:31,841 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 12:26:32,038 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,060 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 12:26:32,104 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,124 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 12:26:32,155 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,175 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 12:26:32,223 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,243 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 12:26:32,274 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,293 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 12:26:32,306 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,327 p=416643 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 12:26:32,344 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,381 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 12:26:32,416 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:32,460 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 12:26:32,481 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,502 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 12:26:32,520 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,540 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 12:26:32,554 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,574 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 12:26:32,737 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:32,757 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 12:26:33,098 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 12:26:33,645 p=416643 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-416643olleb1dv/tmpjki53bj5/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-4Eir9VCMivpQJnA9[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+AA2JaCeFgmNnx7u7[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 12:26:33,647 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 12:26:33,669 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 12:26:33,703 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:33,737 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 12:26:33,787 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:33,807 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 12:26:33,822 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:26:33,843 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 12:26:34,428 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:34,448 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 12:26:34,465 p=416643 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 12:26:34,466 p=416643 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 12:26:54,469 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:26:54,489 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 12:26:54,526 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 12:26:54,561 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 12:26:55,598 p=416643 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 12:26:55,598 p=416643 u=ubuntu n=ansible | ...ignoring
2023-04-20 12:26:55,618 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 12:26:59,056 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 12:26:59,078 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 12:26:59,138 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 12:26:59,155 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 12:26:59,173 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 12:26:59,195 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 12:26:59,232 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 12:27:00,057 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:00,077 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 12:27:00,924 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:00,945 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:27:00,961 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:00,980 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:27:00,996 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:01,015 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 12:27:01,995 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:02,015 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 12:27:02,839 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:02,860 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 12:27:03,715 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:03,735 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 12:27:04,573 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:04,593 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:27:04,608 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:04,628 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:27:04,642 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:04,661 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 12:27:05,608 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:05,628 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 12:27:05,647 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:05,667 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 12:27:06,541 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:06,561 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 12:27:07,398 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:07,417 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:27:07,433 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:07,453 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:27:07,468 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:07,488 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 12:27:08,341 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:08,361 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 12:27:08,380 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:08,400 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 12:27:09,242 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:09,263 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 12:27:10,120 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:10,140 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:27:10,155 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:10,174 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:27:10,190 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:10,209 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 12:27:11,014 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:11,034 p=416643 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 12:27:11,861 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:11,900 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] ***************************************************************************
2023-04-20 12:27:12,143 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:12,163 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ********************************************************************
2023-04-20 12:27:12,397 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:12,416 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] **********************************************************
2023-04-20 12:27:12,579 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:12,598 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] ***********************************************************************
2023-04-20 12:27:14,302 p=416643 u=ubuntu n=ansible | >> Newly checked out 4a73d918f7950feb30c440bc17c4a20bdecdb2cc
2023-04-20 12:27:14,302 p=416643 u=ubuntu n=ansible | [WARNING]: Module remote_tmp /srv/tiaas/.ansible/tmp did not exist and was created with a mode of 0700, this may
cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions
manually

2023-04-20 12:27:14,302 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:14,322 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *********************************************************************
2023-04-20 12:27:14,777 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-416643olleb1dv/tmp_72ydf2b/gunicorn.py[0m
[0;32m[0m[0;36m@@ -0,0 +1,12 @@[0m
[0;36m[0m[0;32m+"""Add a worker for each available CPU.[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+Most requests are handled quickly, so 1 worker should be able to handle many[0m
[0;32m[0m[0;32m+requests per second.[0m
[0;32m[0m[0;32m+"""[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+workers = 1[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Environment variables[0m
[0;32m[0m[0;32m+raw_env = [[0m
[0;32m[0m[0;32m+    "DJANGO_SETTINGS_MODULE=tiaas.settings"[0m
[0;32m[0m[0;32m+][0m
[0;32m[0m

2023-04-20 12:27:14,777 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:14,796 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] **************************************************************
2023-04-20 12:27:35,467 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:35,487 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] ***************************************************
2023-04-20 12:27:35,686 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-mode: '0755'[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 1002[0m
[0;32m[0m[0;32m+mode: '0750'[0m
[0;32m[0m[0;32m+owner: 1002[0m
[0;32m[0m path: /srv/tiaas/config/
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 12:27:35,686 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:35,705 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] ****************************************************************************
2023-04-20 12:27:36,218 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-416643olleb1dv/tmpda364g31/config.py[0m
[0;32m[0m[0;36m@@ -0,0 +1,38 @@[0m
[0;36m[0m[0;32m+GALAXY_SECRET = "S21ATLTHw2biuLuUEBVP9GBh5iqVO0Em"[0m
[0;32m[0m[0;32m+TIAAS_OWNER = 'default'[0m
[0;32m[0m[0;32m+TIAAS_EMAIL = 'admin@localhost'[0m
[0;32m[0m[0;32m+TIAAS_OWNER_SITE = 'http://gat-20.eu.galaxy.training'[0m
[0;32m[0m[0;32m+GALAXY_DOMAIN = 'gat-20.eu.galaxy.training'[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+TIAAS_SEND_EMAIL_TO = 'admin@localhost'[0m
[0;32m[0m[0;32m+TIAAS_SEND_EMAIL_FROM = "tiaas+noreply@example.org"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+TIAAS_SHOW_ADVERTISING = True[0m
[0;32m[0m[0;32m+TIAAS_GDPR_RETAIN_EXTRA_MONTHS = 12[0m
[0;32m[0m[0;32m+TIAAS_RETAIN_CONTACT_REQUIRE_CONSENT = True[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+TIAAS_EXPOSE_USERNAME = False[0m
[0;32m[0m[0;32m+TIAAS_SEND_EMAIL_TO_REQUESTER = False[0m
[0;32m[0m[0;32m+TIAAS_LATE_REQUEST_PREVENTION_DAYS = 10[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+DEBUG = False[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+DATABASES = {[0m
[0;32m[0m[0;32m+        'default': {[0m
[0;32m[0m[0;32m+        'ENGINE': 'django.db.backends.sqlite3',[0m
[0;32m[0m[0;32m+        'NAME': '/srv/tiaas/db.sqlite3',[0m
[0;32m[0m[0;32m+    },[0m
[0;32m[0m[0;32m+        'galaxy': {[0m
[0;32m[0m[0;32m+        'ENGINE': 'django.db.backends.postgresql_psycopg2',[0m
[0;32m[0m[0;32m+        'NAME': 'galaxy',[0m
[0;32m[0m[0;32m+        'USER': '',[0m
[0;32m[0m[0;32m+        'PASSWORD': '',[0m
[0;32m[0m[0;32m+        'HOST': '/var/run/postgresql/',[0m
[0;32m[0m[0;32m+        'PORT': '',[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+ALLOWED_HOSTS = ['127.0.0.1', 'localhost', 'gat-20.eu.galaxy.training'][0m
[0;32m[0m[0;32m+SECRET_KEY = 'Using the default is bad news bears'[0m
[0;32m[0m[0;32m+STATIC_ROOT = '/srv/tiaas/static'[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-20 12:27:36,218 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:36,239 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] *****************************************************************
2023-04-20 12:27:36,425 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 1002[0m
[0;32m[0m[0;32m+owner: 1002[0m
[0;32m[0m path: /srv/tiaas/code/training/static/training/style
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 12:27:36,425 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:36,445 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] ***************************************************************
2023-04-20 12:27:36,630 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:36,650 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] **************************************************************
2023-04-20 12:27:37,147 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-416643olleb1dv/tmp583zf7mw/tiaas.service[0m
[0;32m[0m[0;36m@@ -0,0 +1,25 @@[0m
[0;36m[0m[0;32m+[Unit][0m
[0;32m[0m[0;32m+Description=Training Infrastructure as a Service[0m
[0;32m[0m[0;32m+Documentation=https://github.com/galaxyproject/tiaas2[0m
[0;32m[0m[0;32m+Requires=tiaas.socket[0m
[0;32m[0m[0;32m+After=network.target[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[Service][0m
[0;32m[0m[0;32m+Type=notify[0m
[0;32m[0m[0;32m+User=tiaas[0m
[0;32m[0m[0;32m+Group=tiaas[0m
[0;32m[0m[0;32m+RuntimeDirectory=gunicorn[0m
[0;32m[0m[0;32m+WorkingDirectory=/srv/tiaas/code[0m
[0;32m[0m[0;32m+Environment="PATH=/srv/tiaas/venv/bin:$PATH"[0m
[0;32m[0m[0;32m+ExecStart=/srv/tiaas/venv/bin/gunicorn --bind unix:/run/tiaas.sock \[0m
[0;32m[0m[0;32m+   \[0m
[0;32m[0m[0;32m+  --pythonpath '/srv/tiaas' \[0m
[0;32m[0m[0;32m+  -c ../gunicorn.py \[0m
[0;32m[0m[0;32m+   \[0m
[0;32m[0m[0;32m+  tiaas.wsgi[0m
[0;32m[0m[0;32m+Restart=on-failure[0m
[0;32m[0m[0;32m+RestartForceExitStatus=SIGPIPE[0m
[0;32m[0m[0;32m+KillMode=control-group[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[Install][0m
[0;32m[0m[0;32m+WantedBy=multi-user.target[0m
[0;32m[0m

2023-04-20 12:27:37,148 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:37,167 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] *************************************************************************
2023-04-20 12:27:37,622 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-416643olleb1dv/tmptjjxgkal/tiaas.socket[0m
[0;32m[0m[0;36m@@ -0,0 +1,6 @@[0m
[0;36m[0m[0;32m+[Unit][0m
[0;32m[0m[0;32m+Description=Galaxy tiaas service socket[0m
[0;32m[0m[0;32m+[Socket][0m
[0;32m[0m[0;32m+ListenStream=/run/tiaas.sock[0m
[0;32m[0m[0;32m+[Install][0m
[0;32m[0m[0;32m+WantedBy=sockets.target[0m
[0;32m[0m

2023-04-20 12:27:37,622 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:37,643 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] ************************************************************************
2023-04-20 12:27:38,835 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:38,856 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] *************************************************************
2023-04-20 12:27:39,418 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:39,438 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] ***************************************************
2023-04-20 12:27:39,615 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 1002[0m
[0;32m[0m[0;32m+owner: 1002[0m
[0;32m[0m path: /srv/tiaas/static/
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 12:27:39,615 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:39,634 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *******************************************************************
2023-04-20 12:27:40,212 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:40,232 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] *************************************************************
2023-04-20 12:27:40,270 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-20 12:27:40,276 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-20 12:27:40,283 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-20 12:27:40,290 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-20 12:27:40,297 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-20 12:27:40,305 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-20 12:27:40,312 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-20 12:27:40,319 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-20 12:27:40,326 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-20 12:27:40,333 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-20 12:27:40,340 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-20 12:27:40,344 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-20 12:27:40,347 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:40,366 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] ***************************************************************
2023-04-20 12:27:40,386 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:40,406 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] ************************************************************
2023-04-20 12:27:40,758 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/footer.html


2023-04-20 12:27:40,761 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-20 12:27:41,091 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/about/1_intro.html


2023-04-20 12:27:41,093 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-20 12:27:41,414 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt


2023-04-20 12:27:41,416 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-20 12:27:41,716 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/about/3_eligibility.html


2023-04-20 12:27:41,718 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-20 12:27:42,034 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html


2023-04-20 12:27:42,036 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-20 12:27:42,354 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/calendar/intro.html


2023-04-20 12:27:42,356 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-20 12:27:42,659 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/register/1_intro.html


2023-04-20 12:27:42,661 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-20 12:27:42,965 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/register/2_about_the_course.html


2023-04-20 12:27:42,968 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-20 12:27:43,297 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/register/3_resource_usage.html


2023-04-20 12:27:43,299 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-20 12:27:43,604 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/register/4_advertising.html


2023-04-20 12:27:43,606 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-20 12:27:43,927 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/register/5_conclusion.html


2023-04-20 12:27:43,929 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-20 12:27:44,243 p=416643 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-mode: '0664'[0m
[0;31m[0m[0;32m+mode: '0644'[0m
[0;32m[0m path: /srv/tiaas/code/templates/snippets/register/6_thanks.html


2023-04-20 12:27:44,245 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-20 12:27:44,272 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] **************************************************************
2023-04-20 12:27:45,323 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:45,344 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ****
2023-04-20 12:27:45,547 p=416643 u=ubuntu n=ansible | [0;31m--- before: /etc/cron.d/ansible_tiaas2_disassociate_training_roles[0m
[0;31m[0m[0;32m+++ after: /etc/cron.d/ansible_tiaas2_disassociate_training_roles[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+#Ansible: tiaas_disassociate_training_roles[0m
[0;32m[0m[0;32m+0 0 * * * tiaas { date; /srv/tiaas/venv/bin/python /srv/tiaas/code/manage.py disassociate_training_roles --pythonpath /srv/tiaas; } >> /srv/tiaas/disassociate_training_roles.log[0m
[0;32m[0m

2023-04-20 12:27:45,547 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:27:45,585 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 12:27:46,200 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:46,220 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 12:27:46,394 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:46,414 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 12:27:46,430 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:46,449 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 12:27:46,629 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:46,648 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 12:27:46,828 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:46,849 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 12:27:47,033 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:47,054 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 12:27:47,230 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:47,250 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 12:27:47,508 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:47,546 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 12:27:47,582 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:47,602 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 12:27:47,639 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:47,663 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 12:27:47,678 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:47,698 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 12:27:47,743 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:47,762 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 12:27:47,854 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 12:27:47,912 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 12:27:47,970 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:27:48,003 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 12:27:48,797 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:48,817 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 12:27:49,436 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:49,456 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 12:27:49,473 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:49,493 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 12:27:49,788 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:49,809 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 12:27:49,826 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:49,850 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 12:27:50,641 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:50,661 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 12:27:50,699 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 12:27:50,735 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 12:27:50,950 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 12:27:50,973 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 12:27:51,306 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 12:27:51,328 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 12:27:51,617 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:51,638 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 12:27:51,935 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:51,956 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 12:27:51,973 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:51,993 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 12:27:52,330 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:52,350 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 12:27:52,682 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:52,702 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 12:27:52,879 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:52,904 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 12:27:52,922 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:52,943 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 12:27:53,282 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:53,302 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 12:27:53,339 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 12:27:53,374 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 12:27:53,389 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:53,411 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 12:27:53,437 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:53,456 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 12:27:53,483 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:53,505 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 12:27:53,701 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:53,721 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 12:27:53,749 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:53,768 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 12:27:53,951 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:53,973 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 12:27:54,000 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,019 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 12:27:54,036 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,055 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 12:27:54,072 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,093 p=416643 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 12:27:54,108 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,144 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] ************************************************************************
2023-04-20 12:27:54,160 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,180 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] ************************************************************************
2023-04-20 12:27:54,229 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:27:54,286 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] *****************************************************
2023-04-20 12:27:54,303 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,322 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] *************************************************
2023-04-20 12:27:54,340 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,359 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] *****************************
2023-04-20 12:27:54,378 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,398 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ******************************
2023-04-20 12:27:54,414 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,434 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***************************
2023-04-20 12:27:54,602 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,621 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] *****************************************************
2023-04-20 12:27:54,637 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,657 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *******************************************************
2023-04-20 12:27:54,706 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,727 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] *************************************
2023-04-20 12:27:54,940 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:54,964 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] ************************************************
2023-04-20 12:27:55,016 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:55,043 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ********************************************************
2023-04-20 12:27:55,371 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:55,391 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ******************************************
2023-04-20 12:27:55,446 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:55,466 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *********************************************
2023-04-20 12:27:55,815 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:27:55,836 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *********************************************************
2023-04-20 12:27:55,867 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:27:55,888 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 12:28:01,284 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:28:01,304 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 12:28:03,565 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,586 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] **********************************************
2023-04-20 12:28:03,602 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,622 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] ***********************************************
2023-04-20 12:28:03,637 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,657 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] **************************************
2023-04-20 12:28:03,673 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,692 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] **************************************************************************
2023-04-20 12:28:03,708 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,728 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] ***********************************************************************
2023-04-20 12:28:03,743 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,763 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] *************************************************************************
2023-04-20 12:28:03,779 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,799 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] ****************************************************************************
2023-04-20 12:28:03,814 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,833 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] ***********************************************************************
2023-04-20 12:28:03,886 p=416643 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-20 12:28:03,962 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] ***********************************************************************
2023-04-20 12:28:03,979 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:03,999 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] **************************************************************************
2023-04-20 12:28:04,015 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:04,039 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] ****************************************************
2023-04-20 12:28:04,056 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:04,075 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] **************************************************
2023-04-20 12:28:04,098 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:04,119 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] *************************************************
2023-04-20 12:28:04,733 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:28:04,753 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] *****************************
2023-04-20 12:28:04,770 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:04,792 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ********************************************************
2023-04-20 12:28:04,808 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:04,828 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ********************************************************
2023-04-20 12:28:04,845 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:04,864 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] **************************************************************
2023-04-20 12:28:05,373 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-20 12:28:05,398 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] ************************************************************
2023-04-20 12:28:05,445 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-20 12:28:05,447 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:05,469 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] ************************************************
2023-04-20 12:28:05,504 p=416643 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 12:28:12,534 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:28:12,555 p=416643 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.tiaas2 : reload tiaas] ****************************************************************
2023-04-20 12:28:13,016 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:28:13,037 p=416643 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.tiaas2 : setup tiaas systemd] *********************************************************
2023-04-20 12:28:13,844 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:28:13,864 p=416643 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.tiaas2 : enable tiaas socket] *********************************************************
2023-04-20 12:28:14,449 p=416643 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:28:14,470 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] ****************************************************
2023-04-20 12:28:14,801 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:28:14,823 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ********************************************************
2023-04-20 12:28:14,843 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:14,864 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ********************************************************************
2023-04-20 12:28:14,883 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:14,905 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ********************************************************************
2023-04-20 12:28:14,923 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:14,945 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] ************************************************
2023-04-20 12:28:14,963 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:14,986 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] **************************************************************
2023-04-20 12:28:15,002 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:15,024 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] **************************************************************
2023-04-20 12:28:15,041 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:15,063 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] **************************************************
2023-04-20 12:28:15,079 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:15,104 p=416643 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] ****************************************************
2023-04-20 12:28:15,121 p=416643 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:28:15,197 p=416643 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 12:28:15,392 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:28:15,413 p=416643 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 12:28:16,364 p=416643 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:28:16,408 p=416643 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 12:28:16,408 p=416643 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=274  changed=46   unreachable=0    failed=0    skipped=164  rescued=0    ignored=1   
2023-04-20 12:39:28,130 p=429648 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 12:39:28,329 p=429648 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 12:39:28,346 p=429648 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 12:39:29,433 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:29,441 p=429648 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 12:39:30,385 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:30,402 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 12:39:30,428 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:30,437 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 12:39:30,461 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:30,468 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 12:39:30,492 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:30,499 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 12:39:30,522 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:30,529 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 12:39:31,316 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:31,323 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 12:39:31,605 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:31,611 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 12:39:31,653 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:31,662 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 12:39:32,462 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:32,470 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 12:39:32,495 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:32,502 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 12:39:32,533 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:32,540 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 12:39:32,564 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:32,570 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 12:39:32,594 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:32,601 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 12:39:32,614 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:32,620 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 12:39:32,900 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:32,907 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 12:39:33,185 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:33,192 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 12:39:33,209 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:33,216 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 12:39:33,386 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:33,393 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 12:39:33,869 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:33,876 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 12:39:34,233 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:34,240 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 12:39:34,272 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:34,284 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 12:39:34,476 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 12:39:34,623 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 12:39:34,632 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 12:39:34,802 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:34,809 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 12:39:35,131 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 12:39:35,142 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 12:39:35,494 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 12:39:35,503 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 12:39:35,838 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:35,845 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 12:39:36,195 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:36,202 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 12:39:36,375 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:36,382 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 12:39:36,916 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:36,931 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 12:39:36,958 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 12:39:36,962 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-20 12:39:36,964 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:36,971 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 12:39:37,011 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-20 12:39:37,021 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-20 12:39:37,032 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-20 12:39:37,041 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-20 12:39:37,043 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:37,049 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 12:39:37,089 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 12:39:37,091 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:37,097 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 12:39:37,503 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:39:37,748 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:39:37,758 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 12:39:37,771 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:37,778 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 12:39:37,801 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:37,809 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 12:39:37,821 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:37,830 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 12:39:38,228 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:39:38,236 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 12:39:38,647 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:39:38,927 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:39:39,206 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:39:39,486 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 12:39:39,571 p=429648 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 12:39:39,638 p=429648 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 12:39:40,548 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:40,567 p=429648 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 12:39:41,393 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:41,413 p=429648 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 12:39:41,427 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:41,477 p=429648 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 12:39:42,269 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:42,288 p=429648 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 12:39:42,941 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:42,995 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 12:39:43,574 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:43,594 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 12:39:43,615 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:43,634 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 12:39:43,896 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:43,915 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 12:39:44,100 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,120 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 12:39:44,172 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,191 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 12:39:44,207 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,226 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 12:39:44,241 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,261 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 12:39:44,276 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,295 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 12:39:44,310 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,329 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 12:39:44,344 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,363 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 12:39:44,397 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:44,431 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 12:39:44,443 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,462 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 12:39:44,497 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 12:39:44,509 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,545 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 12:39:44,963 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:44,983 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 12:39:44,998 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:45,018 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 12:39:45,036 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:45,055 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 12:39:45,072 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:45,108 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 12:39:45,123 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:45,145 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 12:39:45,207 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:45,240 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 12:39:46,042 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:46,061 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 12:39:46,077 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:46,096 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 12:39:46,169 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:46,189 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 12:39:46,205 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:46,225 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 12:39:46,256 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:46,289 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 12:39:46,312 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 12:39:46,314 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 12:39:46,316 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 12:39:46,318 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:46,337 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 12:39:46,398 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:46,434 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 12:39:47,255 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:47,275 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 12:39:47,292 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:47,311 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 12:39:47,380 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:47,399 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 12:39:47,415 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:47,434 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 12:39:47,465 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:47,497 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 12:39:47,519 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 12:39:47,522 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 12:39:47,524 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 12:39:47,526 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:47,545 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 12:39:47,559 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:47,578 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 12:39:48,375 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:48,395 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 12:39:48,413 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:48,433 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 12:39:48,449 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:48,469 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 12:39:48,924 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:48,945 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 12:39:48,985 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:49,022 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 12:39:49,186 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:49,207 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 12:39:49,230 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:49,252 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 12:39:49,550 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:49,569 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 12:39:49,586 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:49,605 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 12:39:49,901 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:49,920 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 12:39:50,217 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:50,254 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 12:39:50,552 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:50,572 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 12:39:51,377 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:51,414 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 12:39:51,432 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 12:39:51,452 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 12:39:51,495 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:51,515 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 12:39:51,549 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:51,568 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 12:39:51,604 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 12:39:51,608 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 12:39:51,614 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 12:39:51,621 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 12:39:51,631 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 12:39:51,641 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 12:39:51,648 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 12:39:51,651 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 12:39:51,654 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 12:39:51,676 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 12:39:51,744 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 12:39:51,777 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 12:39:51,810 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 12:39:51,840 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 12:39:51,842 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:51,862 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 12:39:51,942 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 12:39:51,986 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 12:39:52,063 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 12:39:52,084 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 12:39:52,138 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:52,175 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 12:39:52,276 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:52,295 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 12:39:52,852 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:52,870 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 12:39:52,980 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:39:52,999 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 12:39:53,279 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:39:53,434 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 12:39:53,457 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 12:39:53,645 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:39:53,812 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 12:39:53,834 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 12:39:53,916 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:53,935 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 12:39:53,953 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:53,973 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 12:39:54,010 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:54,048 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 12:39:54,402 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:39:54,423 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 12:39:54,763 p=429648 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 12:39:54,765 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 12:39:55,067 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 12:39:55,389 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 12:39:55,708 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 12:39:56,015 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 12:39:56,038 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 12:39:56,392 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 12:39:56,707 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 12:39:57,023 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 12:39:57,331 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 12:39:57,642 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 12:39:57,953 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 12:39:58,270 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 12:39:58,581 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 12:39:58,889 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 12:39:59,191 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 12:39:59,214 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 12:39:59,281 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 12:39:59,322 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 12:40:00,877 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:00,897 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 12:40:00,994 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:01,014 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 12:40:02,851 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:02,873 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 12:40:04,688 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:04,710 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 12:40:04,812 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:04,831 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 12:40:04,847 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:04,866 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 12:40:04,883 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:04,903 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 12:40:04,961 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:05,008 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 12:40:05,131 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:05,169 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 12:40:05,598 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:05,618 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 12:40:05,814 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:05,834 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 12:40:06,322 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 12:40:07,153 p=429648 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/config/tpv_rules_local.yml[0m
[0;32m[0m[0;36m@@ -37,6 +37,17 @@[0m
[0;36m[0m       require:
         - pulsar
 
[0;32m+roles:[0m
[0;32m[0m[0;32m+  training.*:[0m
[0;32m[0m[0;32m+    rules:[0m
[0;32m[0m[0;32m+    - id: tiaas[0m
[0;32m[0m[0;32m+      max_cores: 2[0m
[0;32m[0m[0;32m+      max_mem: max_cores * 3.8  # TODO check multiplier[0m
[0;32m[0m[0;32m+      scheduling:[0m
[0;32m[0m[0;32m+        require:[0m
[0;32m[0m[0;32m+          - slurm[0m
[0;32m[0m[0;32m+          - training[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m destinations:
   local_env:
     runner: local_runner
[0;36m@@ -64,7 +75,19 @@[0m
[0;36m[0m     max_mem: 8
     params:
       native_specification: --nodes=1 --ntasks=1 --cpus-per-task={cores} --time={params['walltime']}:00:00
[0;31m-  [0m
[0;31m[0m[0;32m+  slurm-training:[0m
[0;32m[0m[0;32m+    inherits: singularity[0m
[0;32m[0m[0;32m+    runner: slurm[0m
[0;32m[0m[0;32m+    max_accepted_cores: 12[0m
[0;32m[0m[0;32m+    max_accepted_mem: 120[0m
[0;32m[0m[0;32m+    max_cores: 2 # Limit the cores[0m
[0;32m[0m[0;32m+    max_mem: 8 # Limit the memory[0m
[0;32m[0m[0;32m+    params:[0m
[0;32m[0m[0;32m+      native_specification: --nodes=1 --ntasks=1 --mem={round(mem*1024)} --cpus-per-task={cores} --time=00:30:00[0m
[0;32m[0m[0;32m+    scheduling:[0m
[0;32m[0m[0;32m+      require:[0m
[0;32m[0m[0;32m+        - slurm[0m
[0;32m[0m[0;32m+        - training  [0m
[0;32m[0m   pulsar:
     runner: pulsar_runner
     params:


2023-04-20 12:40:07,155 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 12:40:07,179 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 12:40:07,659 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 12:40:07,682 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 12:40:08,238 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 12:40:08,694 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 12:40:09,158 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 12:40:09,625 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 12:40:09,647 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 12:40:10,140 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 12:40:10,161 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 12:40:10,650 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:10,669 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 12:40:10,851 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:10,870 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 12:40:10,970 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:10,990 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 12:40:11,003 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:11,022 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 12:40:11,036 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:11,056 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 12:40:11,070 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:11,090 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 12:40:11,103 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:11,123 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 12:40:11,655 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:11,674 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 12:40:11,778 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:11,798 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 12:40:11,904 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:11,924 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 12:40:12,499 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:12,519 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 12:40:12,572 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:12,622 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 12:40:14,248 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:14,267 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 12:40:16,047 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:16,066 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 12:40:21,303 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:21,324 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 12:40:21,924 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:21,944 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 12:40:23,592 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:23,613 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 12:40:25,288 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:25,307 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 12:40:25,356 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:25,407 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 12:40:25,515 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:25,535 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 12:40:26,038 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 12:40:26,059 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 12:40:26,499 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 12:40:26,801 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 12:40:26,823 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 12:40:27,214 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 12:40:27,547 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 12:40:27,569 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 12:40:27,605 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:27,658 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 12:40:29,062 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:29,082 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 12:40:30,417 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:30,437 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 12:40:30,545 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:30,565 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 12:40:30,662 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:30,683 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 12:40:30,753 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:30,810 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 12:40:31,149 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:31,169 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 12:40:31,496 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:31,515 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 12:40:31,866 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:31,886 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 12:40:32,239 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:32,259 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 12:40:32,442 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:32,461 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 12:40:32,638 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:32,657 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 12:40:32,757 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:32,777 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 12:40:32,879 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:32,899 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 12:40:33,003 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:33,023 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 12:40:33,126 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:33,147 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 12:40:33,254 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:33,274 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 12:40:33,381 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:33,401 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 12:40:33,504 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:33,524 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 12:40:33,625 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:33,647 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 12:40:33,662 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:33,685 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 12:40:33,728 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:33,801 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 12:40:33,905 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:33,926 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 12:40:34,551 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:34,572 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 12:40:34,596 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:34,616 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 12:40:34,632 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:34,653 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 12:40:34,690 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:34,755 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 12:40:35,163 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:35,183 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 12:40:35,287 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:35,326 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 12:40:35,515 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:35,535 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 12:40:35,867 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:35,886 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 12:40:38,541 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:40:38,581 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 12:40:38,763 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:38,783 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 12:40:38,798 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:38,817 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 12:40:39,190 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,209 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 12:40:39,244 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,264 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 12:40:39,280 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,301 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 12:40:39,317 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,337 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 12:40:39,362 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,381 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 12:40:39,405 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,425 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 12:40:39,440 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,477 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 12:40:39,496 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,515 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 12:40:39,544 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,563 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 12:40:39,753 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:39,772 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 12:40:40,106 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:40,126 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 12:40:40,142 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:40,162 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 12:40:40,197 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:40,229 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 12:40:41,093 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:41,113 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 12:40:41,128 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:41,147 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 12:40:41,434 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:41,471 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 12:40:41,764 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:41,783 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 12:40:41,985 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:42,004 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 12:40:42,283 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:42,303 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 12:40:42,333 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:42,353 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 12:40:42,533 p=429648 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1681993573.6765141[0m
[0;31m[0m[0;31m-mtime: 1681993700.7873642[0m
[0;31m[0m[0;32m+atime: 1681994442.5108616[0m
[0;32m[0m[0;32m+mtime: 1681994442.5108616[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 12:40:42,533 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:40:42,552 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 12:40:42,729 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:42,748 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 12:40:43,487 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:43,506 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 12:40:44,544 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:44,563 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 12:40:44,733 p=429648 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 12:40:44,733 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:40:44,752 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 12:40:46,217 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:46,236 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 12:40:46,567 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:46,586 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 12:40:46,921 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:46,941 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 12:40:47,440 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:47,477 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 12:40:47,513 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:47,553 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 12:40:48,296 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,316 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 12:40:48,487 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,507 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 12:40:48,521 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,541 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 12:40:48,556 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,579 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 12:40:48,741 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,769 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 12:40:48,798 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,817 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 12:40:48,847 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,866 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 12:40:48,878 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,898 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 12:40:48,911 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,933 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 12:40:48,946 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:48,965 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 12:40:48,986 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:49,005 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 12:40:49,346 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:49,365 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 12:40:49,395 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:49,414 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 12:40:49,750 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 12:40:49,777 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 12:40:49,973 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 12:40:49,994 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 12:40:50,207 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:40:50,226 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 12:40:50,307 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 12:40:50,343 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 12:40:50,378 p=429648 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-20 12:40:50,395 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:50,416 p=429648 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 12:40:50,434 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:40:50,454 p=429648 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 12:41:05,666 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:05,689 p=429648 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 12:41:05,896 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 12:41:05,951 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:05,991 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 12:41:06,851 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:06,874 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 12:41:06,895 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:06,919 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 12:41:06,940 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:06,963 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 12:41:06,980 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:07,006 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 12:41:07,029 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:07,053 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 12:41:07,107 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:07,173 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 12:41:07,407 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:07,432 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 12:41:07,458 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:07,482 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 12:41:07,509 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:07,534 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 12:41:07,783 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:07,808 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 12:41:07,835 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 12:41:07,859 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 12:41:07,907 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:07,950 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 12:41:07,972 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:07,996 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 12:41:08,427 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:08,451 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 12:41:08,487 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 12:41:08,529 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:08,581 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 12:41:08,817 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:08,855 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 12:41:09,038 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:09,058 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 12:41:09,443 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:09,467 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 12:41:09,653 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:09,678 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 12:41:09,877 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:09,900 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 12:41:09,943 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:09,977 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 12:41:10,398 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:41:10,420 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 12:41:10,634 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 12:41:10,656 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 12:41:10,883 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:10,907 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 12:41:10,929 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:10,954 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 12:41:11,289 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:11,326 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 12:41:11,350 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:11,372 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 12:41:11,389 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:11,409 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 12:41:11,452 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:11,486 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 12:41:12,123 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:12,144 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 12:41:13,025 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:13,046 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 12:41:13,072 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:13,094 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 12:41:13,850 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:13,871 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 12:41:14,289 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:14,314 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 12:41:14,340 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:14,360 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 12:41:14,387 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:14,406 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 12:41:14,707 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:14,726 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 12:41:14,741 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:14,761 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 12:41:15,512 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:15,532 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 12:41:15,560 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:15,580 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 12:41:15,607 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:15,629 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 12:41:15,661 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:15,681 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 12:41:15,724 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:15,745 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 12:41:16,047 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,070 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 12:41:16,107 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 12:41:16,157 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:16,195 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 12:41:16,399 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,418 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 12:41:16,462 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,482 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 12:41:16,515 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,534 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 12:41:16,584 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,604 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 12:41:16,636 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,655 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 12:41:16,672 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,692 p=429648 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 12:41:16,712 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,748 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 12:41:16,784 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:16,831 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 12:41:16,855 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,875 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 12:41:16,895 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,915 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 12:41:16,930 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:16,949 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 12:41:17,123 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:17,152 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 12:41:17,503 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 12:41:18,109 p=429648 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-429648xnb0ua02/tmpjik2rkug/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-AA2JaCeFgmNnx7u7[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+g1Idsr7MwAXSKDqR[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 12:41:18,111 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 12:41:18,135 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 12:41:18,172 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:18,206 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 12:41:18,259 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:18,279 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 12:41:18,295 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:18,315 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 12:41:18,907 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:18,927 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 12:41:18,945 p=429648 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 12:41:18,945 p=429648 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 12:41:38,947 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:38,967 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 12:41:39,001 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 12:41:39,037 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 12:41:40,084 p=429648 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 12:41:40,084 p=429648 u=ubuntu n=ansible | ...ignoring
2023-04-20 12:41:40,103 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 12:41:43,482 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 12:41:43,505 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 12:41:43,572 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 12:41:43,592 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 12:41:43,612 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 12:41:43,630 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 12:41:43,668 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 12:41:44,497 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:44,517 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 12:41:45,421 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:45,443 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:41:45,459 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:45,482 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:41:45,498 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:45,521 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 12:41:46,475 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:46,495 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 12:41:47,391 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:47,413 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 12:41:48,277 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:48,298 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 12:41:49,179 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:49,200 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:41:49,217 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:49,238 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:41:49,254 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:49,275 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 12:41:50,132 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:50,153 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 12:41:50,178 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:50,213 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 12:41:51,131 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:51,154 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 12:41:52,076 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:52,096 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:41:52,114 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:52,134 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:41:52,150 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:52,171 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 12:41:53,022 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:53,042 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 12:41:53,062 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:53,082 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 12:41:54,022 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:54,042 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 12:41:54,906 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:54,926 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:41:54,943 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:54,963 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 12:41:54,985 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:41:55,005 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 12:41:55,937 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:55,958 p=429648 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 12:41:56,877 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:41:56,915 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] ***************************************************************************
2023-04-20 12:41:57,127 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:57,147 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ********************************************************************
2023-04-20 12:41:57,359 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:57,384 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] **********************************************************
2023-04-20 12:41:57,560 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:57,581 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] ***********************************************************************
2023-04-20 12:41:58,695 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:58,716 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *********************************************************************
2023-04-20 12:41:59,040 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:41:59,060 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] **************************************************************
2023-04-20 12:42:00,745 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:00,767 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] ***************************************************
2023-04-20 12:42:00,941 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:00,963 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] ****************************************************************************
2023-04-20 12:42:01,336 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:01,358 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] *****************************************************************
2023-04-20 12:42:01,531 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:01,554 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] ***************************************************************
2023-04-20 12:42:01,749 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:01,774 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] **************************************************************
2023-04-20 12:42:02,125 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:02,147 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] *************************************************************************
2023-04-20 12:42:02,492 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:02,514 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] ************************************************************************
2023-04-20 12:42:02,530 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:02,551 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] *************************************************************
2023-04-20 12:42:03,177 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:03,197 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] ***************************************************
2023-04-20 12:42:03,372 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:03,393 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *******************************************************************
2023-04-20 12:42:03,919 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:03,941 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] *************************************************************
2023-04-20 12:42:03,976 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-20 12:42:03,982 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-20 12:42:03,988 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-20 12:42:03,995 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-20 12:42:04,001 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-20 12:42:04,008 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-20 12:42:04,014 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-20 12:42:04,021 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-20 12:42:04,027 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-20 12:42:04,033 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-20 12:42:04,040 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-20 12:42:04,044 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-20 12:42:04,046 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:04,066 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] ***************************************************************
2023-04-20 12:42:04,083 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:04,103 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] ************************************************************
2023-04-20 12:42:04,463 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-20 12:42:04,804 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-20 12:42:05,110 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-20 12:42:05,454 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-20 12:42:05,778 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-20 12:42:06,106 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-20 12:42:06,433 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-20 12:42:06,756 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-20 12:42:07,088 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-20 12:42:07,416 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-20 12:42:07,749 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-20 12:42:08,070 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-20 12:42:08,093 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] **************************************************************
2023-04-20 12:42:08,874 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:08,895 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ****
2023-04-20 12:42:09,102 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:09,139 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 12:42:09,731 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:09,751 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 12:42:09,940 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:09,960 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 12:42:09,976 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:09,996 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 12:42:10,169 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:10,189 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 12:42:10,372 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:10,391 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 12:42:10,568 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:10,588 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 12:42:10,774 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:10,794 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 12:42:11,094 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:11,135 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 12:42:11,170 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:11,191 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 12:42:11,230 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:11,250 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 12:42:11,265 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:11,285 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 12:42:11,321 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:11,341 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 12:42:11,430 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 12:42:11,492 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 12:42:11,550 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:42:11,587 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 12:42:12,460 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:12,481 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 12:42:13,146 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:13,168 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 12:42:13,185 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:13,206 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 12:42:13,514 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:13,534 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 12:42:13,551 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:13,571 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 12:42:14,422 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:14,444 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 12:42:14,481 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 12:42:14,520 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 12:42:14,745 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 12:42:14,770 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 12:42:15,146 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 12:42:15,172 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 12:42:15,472 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:15,493 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 12:42:15,815 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:15,836 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 12:42:15,854 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:15,874 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 12:42:16,263 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:16,286 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 12:42:16,652 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:16,676 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 12:42:16,873 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:16,897 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 12:42:16,914 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:16,936 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 12:42:17,288 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:17,308 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 12:42:17,343 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 12:42:17,378 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 12:42:17,392 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:17,413 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 12:42:17,440 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:17,460 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 12:42:17,487 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:17,507 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 12:42:17,696 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:17,717 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 12:42:17,746 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:17,766 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 12:42:17,957 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:17,982 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 12:42:18,014 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,034 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 12:42:18,048 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,069 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 12:42:18,084 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,106 p=429648 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 12:42:18,121 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,159 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] ************************************************************************
2023-04-20 12:42:18,177 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,197 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] ************************************************************************
2023-04-20 12:42:18,246 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-20 12:42:18,307 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] *****************************************************
2023-04-20 12:42:18,323 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,344 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] *************************************************
2023-04-20 12:42:18,364 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,387 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] *****************************
2023-04-20 12:42:18,409 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,429 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ******************************
2023-04-20 12:42:18,445 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,466 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***************************
2023-04-20 12:42:18,656 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,678 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] *****************************************************
2023-04-20 12:42:18,694 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,717 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *******************************************************
2023-04-20 12:42:18,768 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:18,791 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] *************************************
2023-04-20 12:42:19,010 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:19,031 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] ************************************************
2023-04-20 12:42:19,086 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:19,107 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ********************************************************
2023-04-20 12:42:19,448 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:19,469 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ******************************************
2023-04-20 12:42:19,523 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:19,546 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *********************************************
2023-04-20 12:42:19,922 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:19,943 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *********************************************************
2023-04-20 12:42:19,974 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:19,995 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 12:42:25,883 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:25,907 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 12:42:28,157 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,180 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] **********************************************
2023-04-20 12:42:28,198 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,219 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] ***********************************************
2023-04-20 12:42:28,236 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,256 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] **************************************
2023-04-20 12:42:28,273 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,295 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] **************************************************************************
2023-04-20 12:42:28,314 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,334 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] ***********************************************************************
2023-04-20 12:42:28,352 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,372 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] *************************************************************************
2023-04-20 12:42:28,389 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,409 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] ****************************************************************************
2023-04-20 12:42:28,428 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,448 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] ***********************************************************************
2023-04-20 12:42:28,500 p=429648 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-20 12:42:28,576 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] ***********************************************************************
2023-04-20 12:42:28,594 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,615 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] **************************************************************************
2023-04-20 12:42:28,633 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,653 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] ****************************************************
2023-04-20 12:42:28,670 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,690 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] **************************************************
2023-04-20 12:42:28,708 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:28,727 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] *************************************************
2023-04-20 12:42:29,344 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:29,365 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] *****************************
2023-04-20 12:42:29,383 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:29,405 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ********************************************************
2023-04-20 12:42:29,424 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:29,447 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ********************************************************
2023-04-20 12:42:29,464 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:29,486 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] **************************************************************
2023-04-20 12:42:29,994 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-20 12:42:30,021 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] ************************************************************
2023-04-20 12:42:30,074 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-20 12:42:30,076 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:30,096 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] ************************************************
2023-04-20 12:42:30,131 p=429648 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 12:42:37,047 p=429648 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,074 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] ****************************************************
2023-04-20 12:42:37,408 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,498 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ********************************************************
2023-04-20 12:42:37,515 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,537 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ********************************************************************
2023-04-20 12:42:37,553 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,577 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ********************************************************************
2023-04-20 12:42:37,594 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,617 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] ************************************************
2023-04-20 12:42:37,636 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,660 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] **************************************************************
2023-04-20 12:42:37,677 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,699 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] **************************************************************
2023-04-20 12:42:37,715 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,737 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] **************************************************
2023-04-20 12:42:37,753 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,775 p=429648 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] ****************************************************
2023-04-20 12:42:37,791 p=429648 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 12:42:37,873 p=429648 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 12:42:38,082 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:38,106 p=429648 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 12:42:38,950 p=429648 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 12:42:38,989 p=429648 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 12:42:38,990 p=429648 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=270  changed=24   unreachable=0    failed=0    skipped=166  rescued=0    ignored=1   
2023-04-20 12:50:28,301 p=442240 u=ubuntu n=ansible | Starting galaxy role install process
2023-04-20 12:50:28,302 p=442240 u=ubuntu n=ansible | - galaxyproject.galaxy (0.10.14) is already installed, skipping.
2023-04-20 12:50:28,302 p=442240 u=ubuntu n=ansible | - galaxyproject.nginx (0.7.1) is already installed, skipping.
2023-04-20 12:50:28,302 p=442240 u=ubuntu n=ansible | - galaxyproject.postgresql (1.1.2) is already installed, skipping.
2023-04-20 12:50:28,302 p=442240 u=ubuntu n=ansible | - galaxyproject.postgresql_objects (1.2.0) is already installed, skipping.
2023-04-20 12:50:28,302 p=442240 u=ubuntu n=ansible | - galaxyproject.miniconda (0.3.1) is already installed, skipping.
2023-04-20 12:50:28,303 p=442240 u=ubuntu n=ansible | - usegalaxy_eu.certbot (0.1.11) is already installed, skipping.
2023-04-20 12:50:28,303 p=442240 u=ubuntu n=ansible | - galaxyproject.gxadmin (0.0.12) is already installed, skipping.
2023-04-20 12:50:28,303 p=442240 u=ubuntu n=ansible | - galaxyproject.tusd (0.0.1) is already installed, skipping.
2023-04-20 12:50:28,303 p=442240 u=ubuntu n=ansible | - galaxyproject.cvmfs (0.2.21) is already installed, skipping.
2023-04-20 12:50:28,303 p=442240 u=ubuntu n=ansible | - usegalaxy_eu.apptainer (0.0.1) is already installed, skipping.
2023-04-20 12:50:28,304 p=442240 u=ubuntu n=ansible | - galaxyproject.repos (0.0.3) is already installed, skipping.
2023-04-20 12:50:28,304 p=442240 u=ubuntu n=ansible | - galaxyproject.slurm (1.0.2) is already installed, skipping.
2023-04-20 12:50:28,304 p=442240 u=ubuntu n=ansible | - usegalaxy_eu.tpv_auto_lint (0.4.3) is already installed, skipping.
2023-04-20 12:50:28,304 p=442240 u=ubuntu n=ansible | - geerlingguy.docker (6.1.0) is already installed, skipping.
2023-04-20 12:50:28,304 p=442240 u=ubuntu n=ansible | - usegalaxy_eu.rabbitmqserver (1.4.4) is already installed, skipping.
2023-04-20 12:50:28,305 p=442240 u=ubuntu n=ansible | - galaxyproject.pulsar (1.0.10) is already installed, skipping.
2023-04-20 12:50:28,305 p=442240 u=ubuntu n=ansible | - geerlingguy.redis (1.8.0) is already installed, skipping.
2023-04-20 12:50:28,305 p=442240 u=ubuntu n=ansible | - usegalaxy_eu.flower (1.0.2) is already installed, skipping.
2023-04-20 12:50:28,305 p=442240 u=ubuntu n=ansible | - usegalaxy_eu.influxdb (v6.0.7) is already installed, skipping.
2023-04-20 12:50:28,305 p=442240 u=ubuntu n=ansible | - cloudalchemy.grafana (0.14.2) is already installed, skipping.
2023-04-20 12:50:28,306 p=442240 u=ubuntu n=ansible | - dj-wasabi.telegraf (6f6fdf7f5ead491560783d52528b79e9e088bd5b) is already installed, skipping.
2023-04-20 12:50:28,306 p=442240 u=ubuntu n=ansible | - galaxyproject.tiaas2 (2.1.5) is already installed, skipping.
2023-04-20 12:50:28,306 p=442240 u=ubuntu n=ansible | - downloading role from https://github.com/mvdbeek/ansible-role-sentry/archive/main.tar.gz
2023-04-20 12:50:28,476 p=442240 u=ubuntu n=ansible | - extracting mvdbeek.sentry_selfhosted to /home/ubuntu/galaxy/roles/mvdbeek.sentry_selfhosted
2023-04-20 12:50:28,478 p=442240 u=ubuntu n=ansible | - mvdbeek.sentry_selfhosted was installed successfully
2023-04-20 12:58:26,841 p=442689 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 12:58:26,852 p=442689 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 12:58:27,960 p=442689 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 12:58:27,966 p=442689 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 12:58:32,670 p=442689 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-20 12:58:32,687 p=442689 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 12:58:32,983 p=442689 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,3 +1,3 @@[0m
[0;36m[0m[0;31m-mode: '0755'[0m
[0;31m[0m[0;32m+mode: '0700'[0m
[0;32m[0m path: /srv/sentry
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-20 12:58:32,986 p=442689 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training] => (item=/srv/sentry)
2023-04-20 12:58:32,994 p=442689 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 12:58:35,156 p=442689 u=ubuntu n=ansible | >> Newly checked out 2badb5f42ac804b0083c0d4c84fbbbf1f4d1ab8e
2023-04-20 12:58:35,156 p=442689 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-20 12:58:35,162 p=442689 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 12:58:35,451 p=442689 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 12:58:35,461 p=442689 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:02:08,249 p=442689 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 13:05:11,792 p=453742 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:05:11,803 p=453742 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:05:13,259 p=453742 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:05:13,270 p=453742 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:05:14,902 p=453742 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:05:14,928 p=453742 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:05:15,219 p=453742 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:05:15,232 p=453742 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:05:16,545 p=453742 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:05:16,555 p=453742 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:05:16,841 p=453742 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:05:16,852 p=453742 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:05:16,865 p=453742 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-20 13:05:16,875 p=453742 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:05:16,898 p=453742 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-20 13:05:16,908 p=453742 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:05:17,091 p=453742 u=ubuntu n=ansible | [0;31m--- before: /srv/sentry/sentry/config.yml (content)[0m
[0;31m[0m[0;32m+++ after: /srv/sentry/sentry/config.yml (content)[0m
[0;32m[0m[0;36m@@ -115,3 +115,4 @@[0m
[0;36m[0m # slack.signing-secret: <signing secret>
 ## If legacy-app is True use verfication-token instead of signing-secret
 # slack.verification-token: <verification token>
[0;32m+system.url-prefix: "https://gat.gat-20.eu.galaxy.training"[0m
[0;32m[0m

2023-04-20 13:05:17,091 p=453742 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-20 13:05:17,102 p=453742 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:05:17,123 p=453742 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-20 13:05:17,133 p=453742 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:05:34,273 p=453742 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 13:05:54,347 p=455780 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:05:54,359 p=455780 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:05:55,762 p=455780 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:05:55,772 p=455780 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:05:57,079 p=455780 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:05:57,107 p=455780 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:05:57,408 p=455780 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:05:57,421 p=455780 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:05:58,521 p=455780 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:05:58,531 p=455780 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:05:58,833 p=455780 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:05:58,846 p=455780 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:05:58,861 p=455780 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-20 13:05:58,873 p=455780 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:05:58,895 p=455780 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-20 13:05:58,906 p=455780 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:05:58,934 p=455780 u=ubuntu n=ansible | fatal: [gat-20.oz.galaxy.training]: FAILED! => 
  msg: |-
    The task includes an option with an undefined variable. The error was: https://{{ sentry_domain }}: gat.{{ groups['galaxyservers']['0'] }}: 'list object' has no attribute '0'. 'list object' has no attribute '0'. gat.{{ groups['galaxyservers']['0'] }}: 'list object' has no attribute '0'. 'list object' has no attribute '0'. https://{{ sentry_domain }}: gat.{{ groups['galaxyservers']['0'] }}: 'list object' has no attribute '0'. 'list object' has no attribute '0'. gat.{{ groups['galaxyservers']['0'] }}: 'list object' has no attribute '0'. 'list object' has no attribute '0'
  
    The error appears to be in '/home/ubuntu/galaxy/roles/mvdbeek.sentry_selfhosted/tasks/main.yml': line 43, column 3, but may
    be elsewhere in the file depending on the exact syntax problem.
  
    The offending line appears to be:
  
  
    - name: Configure sentry url prefix
      ^ here
2023-04-20 13:05:58,935 p=455780 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:05:58,935 p=455780 u=ubuntu n=ansible | gat-20.oz.galaxy.training  : ok=5    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2023-04-20 13:06:15,818 p=456167 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:06:15,830 p=456167 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:06:17,235 p=456167 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:06:17,245 p=456167 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:06:18,525 p=456167 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:06:18,553 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:06:18,840 p=456167 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:06:18,852 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:06:19,937 p=456167 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:06:19,951 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:06:20,245 p=456167 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:06:20,257 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:06:20,272 p=456167 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-20 13:06:20,285 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:06:20,308 p=456167 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-20 13:06:20,319 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:06:20,504 p=456167 u=ubuntu n=ansible | ok: [gat-20.oz.galaxy.training]
2023-04-20 13:06:20,514 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:06:20,536 p=456167 u=ubuntu n=ansible | skipping: [gat-20.oz.galaxy.training]
2023-04-20 13:06:20,547 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:07:23,202 p=456167 u=ubuntu n=ansible | changed: [gat-20.oz.galaxy.training]
2023-04-20 13:07:23,221 p=456167 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:07:23,251 p=456167 u=ubuntu n=ansible | fatal: [gat-20.oz.galaxy.training]: FAILED! => 
  msg: '[{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined. [{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined'
2023-04-20 13:07:23,251 p=456167 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:07:23,308 p=456167 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:07:23,313 p=456167 u=ubuntu n=ansible | gat-20.oz.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:07:24,440 p=456167 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 13:07:24,631 p=456167 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 13:07:24,647 p=456167 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:07:26,401 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:26,415 p=456167 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 13:07:27,673 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:27,709 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 13:07:27,749 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:27,767 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 13:07:27,798 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:27,815 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 13:07:27,853 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:27,877 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 13:07:27,907 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:27,927 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 13:07:28,845 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:28,861 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 13:07:29,134 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:29,147 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 13:07:29,198 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:29,212 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 13:07:30,073 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,086 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 13:07:30,115 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,129 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 13:07:30,166 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,187 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 13:07:30,217 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,233 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 13:07:30,261 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,275 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 13:07:30,291 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,304 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 13:07:30,493 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,507 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 13:07:30,694 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,707 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 13:07:30,728 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,741 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 13:07:30,932 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:30,944 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 13:07:31,621 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:31,640 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 13:07:32,157 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:32,171 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 13:07:32,217 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:32,235 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 13:07:32,435 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 13:07:32,605 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 13:07:32,622 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 13:07:32,817 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:32,831 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 13:07:33,190 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 13:07:33,206 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 13:07:33,559 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 13:07:33,574 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 13:07:33,942 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:33,955 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 13:07:34,334 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:34,348 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 13:07:34,522 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:34,535 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 13:07:35,105 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:35,139 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 13:07:35,190 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 13:07:35,197 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-20 13:07:35,200 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:35,213 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 13:07:35,254 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-20 13:07:35,263 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-20 13:07:35,273 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-20 13:07:35,281 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-20 13:07:35,283 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:35,296 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 13:07:35,340 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 13:07:35,342 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:35,355 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 13:07:35,779 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:07:36,014 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:07:36,030 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 13:07:36,043 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:36,056 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 13:07:36,081 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:36,096 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 13:07:36,110 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:36,124 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 13:07:36,541 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:07:36,556 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 13:07:36,953 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:07:37,257 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:07:37,525 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:07:37,783 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:07:37,894 p=456167 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 13:07:37,989 p=456167 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:07:39,465 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:39,492 p=456167 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 13:07:40,369 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:40,395 p=456167 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 13:07:40,410 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:40,436 p=456167 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 13:07:41,355 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:41,381 p=456167 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 13:07:42,153 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:42,227 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 13:07:42,923 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:42,951 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 13:07:42,973 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,000 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 13:07:43,241 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,276 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 13:07:43,480 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,508 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 13:07:43,564 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,594 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 13:07:43,611 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,639 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 13:07:43,658 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,685 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 13:07:43,704 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,732 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 13:07:43,750 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,778 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 13:07:43,795 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,821 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 13:07:43,867 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:43,911 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 13:07:43,927 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:43,955 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 13:07:44,008 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 13:07:44,024 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:44,077 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 13:07:44,581 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:44,607 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 13:07:44,622 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:44,650 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 13:07:44,670 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:44,698 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 13:07:44,719 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:44,769 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 13:07:44,787 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:44,816 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 13:07:44,894 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:44,935 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 13:07:45,823 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:45,851 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 13:07:45,869 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:45,898 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 13:07:45,976 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:46,003 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 13:07:46,021 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:46,050 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 13:07:46,091 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:46,132 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 13:07:46,158 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 13:07:46,161 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 13:07:46,163 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 13:07:46,165 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:46,195 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 13:07:46,268 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:46,311 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 13:07:47,167 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:47,196 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 13:07:47,214 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:47,240 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 13:07:47,322 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:47,352 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 13:07:47,370 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:47,403 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 13:07:47,451 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:47,495 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 13:07:47,520 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 13:07:47,525 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 13:07:47,527 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 13:07:47,530 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:47,556 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 13:07:47,574 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:47,602 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 13:07:48,488 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:48,517 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 13:07:48,537 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:48,569 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 13:07:48,589 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:48,619 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 13:07:49,101 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:49,131 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 13:07:49,179 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:49,218 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 13:07:49,408 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:49,440 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 13:07:49,466 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:49,496 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 13:07:49,810 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:49,836 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 13:07:49,854 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:49,880 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 13:07:50,238 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:50,266 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 13:07:50,600 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:50,652 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 13:07:50,988 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:51,020 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 13:07:51,978 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:52,030 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 13:07:52,056 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 13:07:52,086 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 13:07:52,154 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:52,191 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 13:07:52,229 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:52,255 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 13:07:52,302 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 13:07:52,317 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 13:07:52,323 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 13:07:52,326 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 13:07:52,330 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 13:07:52,339 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 13:07:52,345 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 13:07:52,354 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 13:07:52,362 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 13:07:52,391 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 13:07:52,459 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 13:07:52,494 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 13:07:52,529 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 13:07:52,563 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 13:07:52,566 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:52,593 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 13:07:52,686 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 13:07:52,739 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 13:07:52,789 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 13:07:52,819 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 13:07:52,885 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:52,935 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 13:07:53,045 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:53,074 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 13:07:53,751 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:53,779 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 13:07:53,902 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:07:53,931 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 13:07:54,292 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:07:54,458 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 13:07:54,487 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 13:07:54,692 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:07:54,869 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 13:07:54,898 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 13:07:54,981 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:55,007 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 13:07:55,028 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:55,057 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 13:07:55,119 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 13:07:55,167 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 13:07:55,546 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:07:55,574 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 13:07:55,946 p=456167 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 13:07:55,949 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 13:07:56,274 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 13:07:56,620 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 13:07:56,969 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 13:07:57,307 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 13:07:57,339 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 13:07:57,716 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 13:07:58,054 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 13:07:58,388 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 13:07:58,729 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 13:07:59,125 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 13:07:59,463 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 13:07:59,814 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 13:08:00,165 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 13:08:00,520 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 13:08:00,872 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 13:08:00,904 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 13:08:00,984 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:01,077 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 13:08:02,763 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:02,791 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 13:08:02,905 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:02,932 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 13:08:04,769 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:04,798 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 13:08:06,707 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:06,739 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 13:08:06,849 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:06,875 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 13:08:06,895 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:06,922 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 13:08:06,939 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:06,968 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 13:08:07,041 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:07,100 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 13:08:07,248 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:07,296 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 13:08:07,792 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:07,819 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 13:08:08,048 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:08,077 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 13:08:08,618 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 13:08:09,121 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 13:08:09,152 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 13:08:09,686 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 13:08:09,721 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 13:08:10,311 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 13:08:10,826 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 13:08:11,359 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 13:08:11,871 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 13:08:11,900 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 13:08:12,436 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 13:08:12,465 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 13:08:13,017 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:13,046 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 13:08:13,245 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:13,272 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 13:08:13,375 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:13,406 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 13:08:13,423 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:13,451 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 13:08:13,466 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:13,494 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 13:08:13,509 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:13,539 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 13:08:13,555 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:13,584 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 13:08:14,165 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:14,191 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 13:08:14,299 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:14,327 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 13:08:14,440 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:14,467 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 13:08:15,161 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:15,196 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 13:08:15,262 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:15,318 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 13:08:17,060 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:17,086 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 13:08:19,428 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:19,455 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 13:08:24,907 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:24,939 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 13:08:25,683 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:25,712 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 13:08:27,494 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:27,520 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 13:08:29,236 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:29,264 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 13:08:29,323 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:29,383 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 13:08:29,491 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:29,517 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 13:08:30,065 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 13:08:30,094 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 13:08:30,549 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 13:08:30,863 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 13:08:30,892 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 13:08:31,314 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 13:08:31,643 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 13:08:31,672 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 13:08:31,720 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:31,780 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 13:08:33,594 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:33,620 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 13:08:35,009 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:35,040 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 13:08:35,152 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:35,178 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 13:08:35,285 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:35,313 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 13:08:35,395 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:35,460 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 13:08:35,824 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:35,849 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 13:08:36,188 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:36,214 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 13:08:36,563 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:36,590 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 13:08:36,952 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:36,978 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 13:08:37,176 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:37,203 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 13:08:37,399 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:37,425 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 13:08:37,534 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:37,561 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 13:08:37,675 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:37,701 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 13:08:37,807 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:37,833 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 13:08:37,937 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:37,965 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 13:08:38,074 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:38,100 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 13:08:38,208 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:38,234 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 13:08:38,342 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:38,369 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 13:08:38,473 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:38,499 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 13:08:38,513 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:38,539 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 13:08:38,588 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:38,671 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 13:08:38,776 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:38,805 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 13:08:39,429 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:39,456 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 13:08:39,480 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:39,511 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 13:08:39,525 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:39,552 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 13:08:39,597 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:39,666 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 13:08:40,107 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:40,133 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 13:08:40,240 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:40,292 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 13:08:40,468 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:40,494 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 13:08:40,823 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:40,853 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 13:08:44,099 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:08:44,158 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 13:08:44,344 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:44,370 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 13:08:44,388 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:44,420 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 13:08:44,867 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:44,894 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 13:08:44,935 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:44,964 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 13:08:44,981 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:45,007 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 13:08:45,024 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:45,051 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 13:08:45,090 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:45,119 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 13:08:45,147 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:45,173 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 13:08:45,189 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:45,242 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 13:08:45,262 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:45,343 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 13:08:45,373 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:45,402 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 13:08:45,605 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:45,633 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 13:08:45,997 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:46,023 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 13:08:46,041 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:46,067 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 13:08:46,115 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:46,156 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 13:08:46,987 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:47,013 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 13:08:47,029 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:47,055 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 13:08:47,378 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:47,430 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 13:08:47,763 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:47,790 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 13:08:48,010 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:48,039 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 13:08:48,363 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:48,392 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 13:08:48,423 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:48,450 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 13:08:48,625 p=456167 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1681994442.5087318[0m
[0;31m[0m[0;31m-mtime: 1681994565.4076207[0m
[0;31m[0m[0;32m+atime: 1681996128.603165[0m
[0;32m[0m[0;32m+mtime: 1681996128.603165[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 13:08:48,625 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:08:48,653 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 13:08:48,825 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:48,855 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 13:08:49,691 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:49,718 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 13:08:50,926 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:50,953 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 13:08:51,135 p=456167 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 13:08:51,136 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:08:51,162 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 13:08:52,750 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:52,776 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 13:08:53,126 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:53,152 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 13:08:53,698 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:53,725 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 13:08:54,362 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:54,411 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 13:08:54,457 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:54,499 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 13:08:55,322 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:55,350 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 13:08:55,525 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:55,553 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 13:08:55,570 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:55,596 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 13:08:55,613 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:55,640 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 13:08:55,831 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:55,859 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 13:08:55,890 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:55,916 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 13:08:55,951 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:55,978 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 13:08:55,994 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:56,020 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 13:08:56,035 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:56,062 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 13:08:56,077 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:56,113 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 13:08:56,198 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:56,224 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 13:08:56,573 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:56,602 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 13:08:56,634 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:56,662 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 13:08:57,024 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 13:08:57,053 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 13:08:57,256 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 13:08:57,287 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 13:08:57,484 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:57,511 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 13:08:57,607 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:57,646 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 13:08:57,697 p=456167 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 13:08:57,911 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 13:08:57,961 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:58,008 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 13:08:58,889 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:58,917 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 13:08:58,937 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:58,965 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 13:08:58,987 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:59,015 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 13:08:59,033 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:59,059 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 13:08:59,076 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:59,102 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 13:08:59,151 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:59,224 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 13:08:59,439 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:59,466 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 13:08:59,492 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:59,520 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 13:08:59,545 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:08:59,572 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 13:08:59,798 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:08:59,826 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 13:08:59,853 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 13:08:59,881 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 13:08:59,933 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 13:08:59,985 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 13:09:00,010 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:00,039 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 13:09:00,433 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:00,458 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 13:09:00,506 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 13:09:00,548 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 13:09:00,600 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 13:09:00,795 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:00,847 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 13:09:01,016 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:01,041 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 13:09:01,385 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:01,412 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 13:09:01,587 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:01,614 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 13:09:01,786 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:01,815 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 13:09:01,907 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 13:09:01,947 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 13:09:02,317 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:09:02,864 p=456167 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-4561674ezimcip/tmp0mf90rxa/sentry.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,21 @@[0m
[0;36m[0m[0;32m+server {[0m
[0;32m[0m[0;32m+	# Listen on port 443[0m
[0;32m[0m[0;32m+	listen        *:443 ssl;[0m
[0;32m[0m[0;32m+	# The virtualhost is our domain name[0m
[0;32m[0m[0;32m+	server_name   "gat.gat-20.eu.galaxy.training";[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Our log files will go here.[0m
[0;32m[0m[0;32m+	access_log  syslog:server=unix:/dev/log;[0m
[0;32m[0m[0;32m+	error_log   syslog:server=unix:/dev/log;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location / {[0m
[0;32m[0m[0;32m+		# This is the backend to send the requests to.[0m
[0;32m[0m[0;32m+		proxy_pass "http://localhost:9000";[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+		proxy_set_header Host $http_host;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-Proto $scheme;[0m
[0;32m[0m[0;32m+		proxy_set_header Upgrade $http_upgrade;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+  [0m
[0;32m[0m

2023-04-20 13:09:02,866 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-20 13:09:02,897 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 13:09:03,093 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:09:03,254 p=456167 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/sites-enabled/sentry
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: link[0m
[0;32m[0m

2023-04-20 13:09:03,256 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-20 13:09:03,287 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 13:09:03,488 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:03,515 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 13:09:03,536 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:03,562 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 13:09:03,862 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:03,912 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 13:09:03,933 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:03,960 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 13:09:03,975 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:04,001 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 13:09:04,050 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 13:09:04,089 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 13:09:04,624 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:04,650 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 13:09:05,458 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:05,484 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 13:09:05,500 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:05,526 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 13:09:06,320 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:06,347 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 13:09:06,799 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:06,825 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 13:09:06,853 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:06,880 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 13:09:06,909 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:06,934 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 13:09:07,247 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:07,275 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 13:09:07,293 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:07,321 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 13:09:08,143 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:08,170 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 13:09:08,200 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:08,225 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 13:09:08,252 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:08,278 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 13:09:08,312 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:08,339 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 13:09:08,371 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:08,399 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 13:09:08,702 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:08,729 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 13:09:08,780 p=456167 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-20 13:09:09,116 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:09,144 p=456167 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-20 13:09:09,165 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:09,194 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 13:09:09,253 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 13:09:09,300 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 13:09:09,880 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:09,910 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 13:09:09,960 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:09,989 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 13:09:10,216 p=456167 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /usr/local/bin/docker-compose
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: absent[0m
[0;32m[0m

2023-04-20 13:09:10,217 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:10,243 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 13:09:11,156 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:11,183 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 13:09:11,221 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:11,247 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 13:09:11,262 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:11,290 p=456167 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 13:09:11,310 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:11,361 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 13:09:11,405 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 13:09:11,455 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 13:09:11,480 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:11,509 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 13:09:11,531 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:11,615 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 13:09:11,632 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:11,660 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 13:09:11,844 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:11,873 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 13:09:12,236 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 13:09:12,871 p=456167 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-4561674ezimcip/tmpdjb5_qdb/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-g1Idsr7MwAXSKDqR[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+I1YIrEqdk3UeOPd5[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 13:09:12,874 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 13:09:12,904 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 13:09:12,950 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 13:09:12,995 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 13:09:13,052 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:13,080 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 13:09:13,101 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:13,129 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 13:09:13,822 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:13,850 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 13:09:13,869 p=456167 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 13:09:13,869 p=456167 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 13:09:33,872 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:33,900 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 13:09:33,943 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 13:09:33,986 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 13:09:35,588 p=456167 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 13:09:35,588 p=456167 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:09:35,614 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 13:09:39,564 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 13:09:39,595 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 13:09:39,666 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 13:09:39,685 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 13:09:39,703 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 13:09:39,722 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 13:09:39,765 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 13:09:40,828 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:40,857 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 13:09:41,843 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:41,871 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 13:09:41,888 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:41,919 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 13:09:41,937 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:41,964 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 13:09:43,096 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:43,122 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 13:09:44,170 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:44,198 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 13:09:45,320 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:45,348 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 13:09:46,432 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:46,460 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 13:09:46,476 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:46,503 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 13:09:46,518 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:46,546 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 13:09:47,635 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:47,663 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 13:09:47,684 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:47,713 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 13:09:48,794 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:48,822 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 13:09:49,967 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:49,996 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 13:09:50,022 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:50,054 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 13:09:50,073 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:50,105 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 13:09:51,199 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:51,224 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 13:09:51,245 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:51,273 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 13:09:52,330 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:52,359 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 13:09:53,482 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:53,509 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 13:09:53,526 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:53,553 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 13:09:53,571 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:09:53,600 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 13:09:54,795 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:54,824 p=456167 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 13:09:56,000 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:09:56,053 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] ***************************************************************************
2023-04-20 13:09:56,283 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:56,310 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ********************************************************************
2023-04-20 13:09:56,523 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:56,551 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] **********************************************************
2023-04-20 13:09:56,739 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:56,767 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] ***********************************************************************
2023-04-20 13:09:57,819 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:57,848 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *********************************************************************
2023-04-20 13:09:58,208 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:58,235 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] **************************************************************
2023-04-20 13:09:59,965 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:09:59,993 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] ***************************************************
2023-04-20 13:10:00,198 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:00,223 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] ****************************************************************************
2023-04-20 13:10:00,596 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:00,623 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] *****************************************************************
2023-04-20 13:10:00,801 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:00,830 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] ***************************************************************
2023-04-20 13:10:01,031 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:01,057 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] **************************************************************
2023-04-20 13:10:01,391 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:01,417 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] *************************************************************************
2023-04-20 13:10:01,736 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:01,763 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] ************************************************************************
2023-04-20 13:10:01,779 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:01,806 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] *************************************************************
2023-04-20 13:10:02,497 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:02,524 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] ***************************************************
2023-04-20 13:10:02,699 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:02,725 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *******************************************************************
2023-04-20 13:10:03,242 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:03,268 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] *************************************************************
2023-04-20 13:10:03,307 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-20 13:10:03,313 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-20 13:10:03,319 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-20 13:10:03,327 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-20 13:10:03,336 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-20 13:10:03,342 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-20 13:10:03,349 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-20 13:10:03,355 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-20 13:10:03,362 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-20 13:10:03,370 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-20 13:10:03,377 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-20 13:10:03,380 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-20 13:10:03,382 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:03,407 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] ***************************************************************
2023-04-20 13:10:03,426 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:03,452 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] ************************************************************
2023-04-20 13:10:03,809 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-20 13:10:04,134 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-20 13:10:04,469 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-20 13:10:04,787 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-20 13:10:05,127 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-20 13:10:05,449 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-20 13:10:05,791 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-20 13:10:06,146 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-20 13:10:06,515 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-20 13:10:06,857 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-20 13:10:07,194 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-20 13:10:07,515 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-20 13:10:07,545 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] **************************************************************
2023-04-20 13:10:08,374 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:08,401 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ****
2023-04-20 13:10:08,655 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:08,708 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 13:10:09,338 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:09,364 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 13:10:09,553 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:09,584 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 13:10:09,609 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:09,637 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 13:10:09,837 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:09,865 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 13:10:10,062 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:10,097 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 13:10:10,277 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:10,305 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 13:10:10,486 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:10,513 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 13:10:10,846 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:10,896 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 13:10:10,934 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:10,962 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 13:10:11,004 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:11,031 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 13:10:11,047 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:11,072 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 13:10:11,110 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:11,139 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 13:10:11,232 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 13:10:11,304 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 13:10:11,371 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 13:10:11,411 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 13:10:12,263 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:12,289 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 13:10:12,968 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:12,998 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 13:10:13,019 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:13,047 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 13:10:13,362 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:13,392 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 13:10:13,409 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:13,436 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 13:10:14,239 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:14,265 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 13:10:14,306 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 13:10:14,349 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 13:10:14,565 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 13:10:14,595 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 13:10:14,956 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 13:10:14,984 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 13:10:15,304 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:15,341 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 13:10:15,647 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:15,674 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 13:10:15,696 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:15,723 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 13:10:16,095 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:16,129 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 13:10:16,529 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:16,555 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 13:10:16,741 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:16,769 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 13:10:16,784 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:16,811 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 13:10:17,180 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:17,206 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 13:10:17,249 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 13:10:17,291 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 13:10:17,306 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:17,336 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 13:10:17,368 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:17,400 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 13:10:17,429 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:17,457 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 13:10:17,659 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:17,686 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 13:10:17,717 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:17,748 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 13:10:17,938 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:17,964 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 13:10:17,994 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,021 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 13:10:18,037 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,067 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 13:10:18,084 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,112 p=456167 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 13:10:18,130 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,190 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] ************************************************************************
2023-04-20 13:10:18,220 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,250 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] ************************************************************************
2023-04-20 13:10:18,306 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-20 13:10:18,379 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] *****************************************************
2023-04-20 13:10:18,396 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,422 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] *************************************************
2023-04-20 13:10:18,443 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,470 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] *****************************
2023-04-20 13:10:18,492 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,523 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ******************************
2023-04-20 13:10:18,542 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,569 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***************************
2023-04-20 13:10:18,750 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,776 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] *****************************************************
2023-04-20 13:10:18,793 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,819 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *******************************************************
2023-04-20 13:10:18,875 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:18,902 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] *************************************
2023-04-20 13:10:19,120 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:19,147 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] ************************************************
2023-04-20 13:10:19,202 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:19,229 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ********************************************************
2023-04-20 13:10:19,556 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:19,585 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ******************************************
2023-04-20 13:10:19,640 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:19,667 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *********************************************
2023-04-20 13:10:20,026 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:20,052 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *********************************************************
2023-04-20 13:10:20,088 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:20,115 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 13:10:22,572 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:22,601 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 13:10:25,117 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,149 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] **********************************************
2023-04-20 13:10:25,167 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,196 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] ***********************************************
2023-04-20 13:10:25,213 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,239 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] **************************************
2023-04-20 13:10:25,255 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,281 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] **************************************************************************
2023-04-20 13:10:25,297 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,325 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] ***********************************************************************
2023-04-20 13:10:25,344 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,372 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] *************************************************************************
2023-04-20 13:10:25,390 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,416 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] ****************************************************************************
2023-04-20 13:10:25,432 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,459 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] ***********************************************************************
2023-04-20 13:10:25,526 p=456167 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-20 13:10:25,615 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] ***********************************************************************
2023-04-20 13:10:25,632 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,659 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] **************************************************************************
2023-04-20 13:10:25,676 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,702 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] ****************************************************
2023-04-20 13:10:25,719 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,745 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] **************************************************
2023-04-20 13:10:25,761 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:25,788 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] *************************************************
2023-04-20 13:10:26,373 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:26,399 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] *****************************
2023-04-20 13:10:26,424 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:26,452 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ********************************************************
2023-04-20 13:10:26,470 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:26,500 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ********************************************************
2023-04-20 13:10:26,516 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:26,543 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] **************************************************************
2023-04-20 13:10:27,062 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-20 13:10:27,089 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] ************************************************************
2023-04-20 13:10:27,138 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-20 13:10:27,141 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:27,170 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] ************************************************
2023-04-20 13:10:27,222 p=456167 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 13:10:34,276 p=456167 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:10:34,303 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] ****************************************************
2023-04-20 13:10:34,657 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:34,684 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ********************************************************
2023-04-20 13:10:34,701 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:34,734 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ********************************************************************
2023-04-20 13:10:34,751 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:34,778 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ********************************************************************
2023-04-20 13:10:34,795 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:34,825 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] ************************************************
2023-04-20 13:10:34,843 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:34,871 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] **************************************************************
2023-04-20 13:10:34,889 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:34,918 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] **************************************************************
2023-04-20 13:10:34,939 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:34,967 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] **************************************************
2023-04-20 13:10:34,983 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:35,015 p=456167 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] ****************************************************
2023-04-20 13:10:35,032 p=456167 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:10:35,139 p=456167 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 13:10:35,326 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:35,351 p=456167 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 13:10:36,253 p=456167 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:10:36,308 p=456167 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:10:36,309 p=456167 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=272  changed=27   unreachable=0    failed=0    skipped=163  rescued=0    ignored=1   
2023-04-20 13:10:36,309 p=456167 u=ubuntu n=ansible | gat-20.oz.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:18:08,214 p=486680 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:18:08,232 p=486680 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:18:09,838 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:09,850 p=486680 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:18:11,223 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:11,256 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:18:11,566 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:18:11,580 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:18:12,735 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:12,747 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:18:13,041 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:18:13,056 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:18:13,072 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:13,085 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:18:13,111 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:13,124 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:18:13,319 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:13,332 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:18:13,376 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:13,411 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:18:15,975 p=486680 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:18:15,990 p=486680 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:18:16,007 p=486680 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: '[{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined. [{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined'
2023-04-20 13:18:16,007 p=486680 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:18:16,062 p=486680 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:18:16,063 p=486680 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:18:17,088 p=486680 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 13:18:17,280 p=486680 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 13:18:17,323 p=486680 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:18:18,692 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:18,704 p=486680 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 13:18:19,677 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:19,711 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 13:18:19,744 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:19,758 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 13:18:19,782 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:19,795 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 13:18:19,820 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:19,839 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 13:18:19,866 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:19,883 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 13:18:20,707 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:20,721 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 13:18:21,045 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:21,060 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 13:18:21,108 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:21,123 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 13:18:21,996 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,009 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 13:18:22,036 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,051 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 13:18:22,086 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,100 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 13:18:22,129 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,141 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 13:18:22,173 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,188 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 13:18:22,204 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,216 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 13:18:22,402 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,413 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 13:18:22,595 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,608 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 13:18:22,629 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,642 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 13:18:22,835 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:22,849 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 13:18:23,360 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:23,373 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 13:18:23,777 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:23,791 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 13:18:23,840 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:23,858 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 13:18:24,060 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 13:18:24,215 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 13:18:24,230 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 13:18:24,417 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:24,430 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 13:18:24,792 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 13:18:24,807 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 13:18:25,177 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 13:18:25,192 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 13:18:25,553 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:25,566 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 13:18:25,911 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:25,925 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 13:18:26,094 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:26,107 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 13:18:26,652 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:26,676 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 13:18:26,704 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 13:18:26,707 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-20 13:18:26,709 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:26,723 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 13:18:26,761 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-20 13:18:26,770 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-20 13:18:26,781 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-20 13:18:26,788 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-20 13:18:26,790 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:26,804 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 13:18:26,840 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 13:18:26,842 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:26,858 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 13:18:27,256 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:18:27,480 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:18:27,498 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 13:18:27,511 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:27,524 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 13:18:27,547 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:27,562 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 13:18:27,574 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:27,623 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 13:18:27,987 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:18:28,002 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 13:18:28,384 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:18:28,646 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:18:28,913 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:18:29,177 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 13:18:29,284 p=486680 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 13:18:29,362 p=486680 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:18:30,662 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:30,690 p=486680 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 13:18:31,550 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:31,575 p=486680 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 13:18:31,589 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:31,614 p=486680 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 13:18:32,422 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:32,447 p=486680 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 13:18:33,026 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:33,100 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 13:18:33,732 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:33,759 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 13:18:33,782 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:33,808 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 13:18:34,038 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,067 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 13:18:34,257 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,288 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 13:18:34,344 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,371 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 13:18:34,388 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,416 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 13:18:34,433 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,460 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 13:18:34,478 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,504 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 13:18:34,523 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,551 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 13:18:34,568 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,598 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 13:18:34,640 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:34,682 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 13:18:34,700 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,726 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 13:18:34,774 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 13:18:34,788 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:34,840 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 13:18:35,297 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:35,323 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 13:18:35,340 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:35,366 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 13:18:35,388 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:35,415 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 13:18:35,436 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:35,486 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 13:18:35,503 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:35,530 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 13:18:35,600 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:35,642 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 13:18:36,452 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:36,478 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 13:18:36,498 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:36,525 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 13:18:36,608 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:36,633 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 13:18:36,651 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:36,681 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 13:18:36,721 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:36,761 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 13:18:36,789 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 13:18:36,792 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 13:18:36,794 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 13:18:36,796 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:36,822 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 13:18:36,897 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:36,940 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 13:18:37,797 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:37,824 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 13:18:37,842 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:37,868 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 13:18:37,946 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:37,973 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 13:18:37,990 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:38,017 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 13:18:38,058 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:38,101 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 13:18:38,125 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 13:18:38,130 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 13:18:38,132 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 13:18:38,134 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:38,161 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 13:18:38,177 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:38,204 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 13:18:39,047 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:39,073 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 13:18:39,093 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:39,152 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 13:18:39,173 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:39,199 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 13:18:39,681 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:39,708 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 13:18:39,757 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:39,798 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 13:18:40,005 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:40,052 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 13:18:40,082 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:40,110 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 13:18:40,422 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:40,448 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 13:18:40,464 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:40,490 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 13:18:40,792 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:40,817 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 13:18:41,126 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:41,181 p=486680 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 13:18:41,485 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:41,510 p=486680 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 13:18:42,378 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:42,429 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 13:18:42,453 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 13:18:42,479 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 13:18:42,537 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:42,564 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 13:18:42,610 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:42,637 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 13:18:42,676 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 13:18:42,688 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 13:18:42,692 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 13:18:42,695 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 13:18:42,710 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 13:18:42,720 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 13:18:42,728 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 13:18:42,731 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 13:18:42,735 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 13:18:42,763 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 13:18:42,839 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 13:18:42,881 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 13:18:42,919 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 13:18:42,948 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 13:18:42,951 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:42,977 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 13:18:43,066 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 13:18:43,115 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 13:18:43,159 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 13:18:43,188 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 13:18:43,255 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:43,299 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 13:18:43,413 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:43,441 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 13:18:44,041 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:44,067 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 13:18:44,178 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:44,204 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 13:18:44,547 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:18:44,723 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 13:18:44,751 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 13:18:44,955 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 13:18:45,178 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 13:18:45,210 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 13:18:45,300 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:45,327 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 13:18:45,350 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:45,382 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 13:18:45,431 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:45,481 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 13:18:45,866 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:45,891 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 13:18:46,253 p=486680 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 13:18:46,255 p=486680 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 13:18:46,581 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 13:18:46,926 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 13:18:47,271 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 13:18:47,597 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 13:18:47,627 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 13:18:48,011 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 13:18:48,342 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 13:18:48,700 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 13:18:49,040 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 13:18:49,367 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 13:18:49,716 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 13:18:50,055 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 13:18:50,426 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 13:18:50,764 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 13:18:51,087 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 13:18:51,127 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 13:18:51,207 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:51,256 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 13:18:52,642 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:52,668 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 13:18:52,775 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:52,802 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 13:18:54,599 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:54,627 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 13:18:56,649 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:56,675 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 13:18:56,785 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:56,810 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 13:18:56,826 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:56,852 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 13:18:56,869 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:18:56,895 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 13:18:56,959 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:57,012 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 13:18:57,152 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 13:18:57,197 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 13:18:57,654 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:57,681 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 13:18:57,898 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:18:57,925 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 13:18:58,448 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 13:18:58,937 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 13:18:58,966 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 13:18:59,466 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 13:18:59,495 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 13:19:05,090 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 13:19:05,607 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 13:19:06,115 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 13:19:06,620 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 13:19:06,648 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 13:19:07,179 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 13:19:07,208 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 13:19:07,740 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:07,769 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 13:19:07,964 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:07,990 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 13:19:08,099 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:08,125 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 13:19:08,141 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:08,167 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 13:19:08,186 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:08,214 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 13:19:08,233 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:08,261 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 13:19:08,277 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:08,303 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 13:19:08,866 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:08,892 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 13:19:08,999 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:09,027 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 13:19:09,143 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:09,169 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 13:19:09,785 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:09,814 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 13:19:09,878 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 13:19:09,939 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 13:19:11,729 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:11,757 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 13:19:13,719 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:13,751 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 13:19:19,216 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:19,245 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 13:19:19,879 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:19,906 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 13:19:21,647 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:21,684 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 13:19:21,722 p=491484 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:19:21,737 p=491484 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:19:23,270 p=491484 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:23,283 p=491484 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:19:23,440 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:23,472 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 13:19:23,532 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 13:19:23,597 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 13:19:23,733 p=486680 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:23,764 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 13:19:24,296 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 13:19:24,327 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 13:19:24,609 p=491484 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:24,652 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:19:24,796 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 13:19:24,971 p=491484 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:19:24,987 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:19:25,224 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 13:19:25,259 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 13:19:25,727 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 13:19:26,047 p=486680 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 13:19:26,076 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 13:19:26,130 p=486680 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 13:19:26,164 p=491484 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:26,177 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:19:26,200 p=486680 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 13:19:26,471 p=491484 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:19:26,486 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:19:26,501 p=491484 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:26,514 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:19:26,536 p=491484 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:26,550 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:19:26,734 p=491484 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:26,747 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:19:26,770 p=491484 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:26,784 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:19:27,152 p=486680 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 13:19:29,186 p=491484 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:19:29,199 p=491484 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:19:29,214 p=491484 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: '[{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined. [{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined'
2023-04-20 13:19:29,214 p=491484 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:19:29,289 p=491484 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:19:29,289 p=491484 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:19:30,307 p=491484 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 13:19:30,513 p=491484 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 13:19:30,532 p=491484 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:19:31,431 p=491484 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 13:19:34,435 p=492576 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:19:34,449 p=492576 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:19:35,911 p=492576 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:35,925 p=492576 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:19:37,193 p=492576 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:37,227 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:19:37,508 p=492576 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:19:37,522 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:19:38,610 p=492576 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:38,623 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:19:38,917 p=492576 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:19:38,932 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:19:38,946 p=492576 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:38,959 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:19:38,982 p=492576 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:38,995 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:19:39,177 p=492576 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:19:39,190 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:19:39,213 p=492576 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:19:39,226 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:19:41,533 p=492576 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:19:41,546 p=492576 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:19:41,561 p=492576 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: '[{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined. [{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined'
2023-04-20 13:19:41,561 p=492576 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:19:41,618 p=492576 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:19:41,618 p=492576 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:20:30,348 p=493783 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:20:30,363 p=493783 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:20:31,867 p=493783 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:20:31,880 p=493783 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:20:33,145 p=493783 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:20:33,178 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:20:33,477 p=493783 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:20:33,491 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:20:34,647 p=493783 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:20:34,662 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:20:34,947 p=493783 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:20:34,962 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:20:34,976 p=493783 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:20:34,989 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:20:35,012 p=493783 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:20:35,024 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:20:35,207 p=493783 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:20:35,220 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:20:35,243 p=493783 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:20:35,256 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:20:37,492 p=493783 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:20:37,505 p=493783 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:20:37,521 p=493783 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: '[{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined. [{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined'
2023-04-20 13:20:37,521 p=493783 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:20:37,605 p=493783 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:20:37,605 p=493783 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:21:32,416 p=495047 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:21:32,432 p=495047 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:21:33,992 p=495047 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:21:34,005 p=495047 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:21:35,317 p=495047 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:21:35,353 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:21:35,644 p=495047 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:21:35,662 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:21:36,804 p=495047 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:21:36,817 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:21:37,120 p=495047 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:21:37,135 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:21:37,150 p=495047 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:21:37,166 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:21:37,189 p=495047 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:21:37,203 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:21:37,389 p=495047 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:21:37,402 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:21:37,426 p=495047 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:21:37,439 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:21:39,732 p=495047 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:21:39,747 p=495047 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:21:39,761 p=495047 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: '[{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined. [{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined'
2023-04-20 13:21:39,762 p=495047 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:21:39,820 p=495047 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:21:39,820 p=495047 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:25:10,109 p=497883 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:25:10,126 p=497883 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:25:11,663 p=497883 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:25:11,675 p=497883 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:25:12,993 p=497883 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:25:13,033 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:25:13,312 p=497883 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:25:13,327 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:25:14,474 p=497883 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:25:14,487 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:25:14,800 p=497883 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:25:14,815 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:25:14,829 p=497883 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:25:14,842 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:25:14,867 p=497883 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:25:14,900 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:25:15,088 p=497883 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:25:15,101 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:25:15,136 p=497883 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:25:15,151 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:25:17,772 p=497883 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:25:17,785 p=497883 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:25:17,798 p=497883 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: '[{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined. [{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined'
2023-04-20 13:25:17,798 p=497883 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:25:17,856 p=497883 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:25:17,856 p=497883 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:26:51,117 p=499531 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:26:51,131 p=499531 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:26:52,741 p=499531 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:26:52,753 p=499531 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:26:54,069 p=499531 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:26:54,113 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:26:54,431 p=499531 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:26:54,446 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:26:55,573 p=499531 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:26:55,587 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:26:55,878 p=499531 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:26:55,893 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:26:55,908 p=499531 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:26:55,921 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:26:55,944 p=499531 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:26:55,961 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:26:56,174 p=499531 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:26:56,185 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:26:56,209 p=499531 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:26:56,221 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:26:58,557 p=499531 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:26:58,570 p=499531 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:26:58,584 p=499531 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: '[{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined. [{''email'': ''admin@example.com'', ''password'': ''{{ vault_sentry_password }}''}]: ''vault_sentry_password'' is undefined. ''vault_sentry_password'' is undefined'
2023-04-20 13:26:58,584 p=499531 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:26:58,641 p=499531 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:26:58,641 p=499531 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=1    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:28:32,434 p=501285 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:28:32,461 p=501285 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:28:33,920 p=501285 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:28:33,946 p=501285 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:28:35,243 p=501285 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:28:35,319 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:28:35,623 p=501285 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:28:35,651 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:28:36,816 p=501285 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:28:36,841 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:28:37,129 p=501285 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:28:37,157 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:28:37,171 p=501285 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:28:37,200 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:28:37,224 p=501285 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:28:37,249 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:28:37,429 p=501285 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:28:37,454 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:28:37,477 p=501285 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:28:37,503 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:28:39,847 p=501285 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:28:39,871 p=501285 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:29:44,276 p=501285 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 13:29:45,627 p=505700 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:29:45,653 p=505700 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:29:47,372 p=505700 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:29:47,411 p=505700 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:29:48,781 p=505700 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:29:48,887 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:29:49,247 p=505700 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:29:49,290 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:29:50,552 p=505700 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:29:50,582 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:29:50,946 p=505700 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:29:51,000 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:29:51,023 p=505700 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:29:51,054 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:29:51,082 p=505700 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:29:51,106 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:29:51,346 p=505700 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:29:51,374 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:29:51,411 p=505700 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:29:51,441 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:30:45,360 p=505700 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:30:45,395 p=505700 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:32:08,388 p=505700 u=ubuntu n=ansible | failed: [gat-20.eu.galaxy.training] (item={'email': 'admin@example.com', 'password': 's4FquyhvM37afzMBR/hEjzsJZSC2RBwc'}) => changed=true 
  ansible_loop_var: item
  cmd:
  - docker-compose
  - run
  - --rm
  - web
  - createuser
  - --email
  - admin@example.com
  - --password
  - s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  - --superuser
  - --no-input
  delta: '0:01:22.594389'
  end: '2023-04-20 13:32:08.343272'
  item:
    email: admin@example.com
    password: s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  msg: non-zero return code
  rc: 1
  start: '2023-04-20 13:30:45.748883'
  stderr: |-
    Container sentry-self-hosted_symbolicator_1  Recreate
    Container sentry-self-hosted_redis_1  Recreate
    Container sentry-self-hosted_zookeeper_1  Recreate
    Container sentry-self-hosted_clickhouse_1  Recreate
    Container sentry-self-hosted_postgres_1  Recreate
    Container sentry-self-hosted_smtp_1  Recreate
    Container sentry-self-hosted_memcached_1  Recreate
    Container sentry-self-hosted_smtp_1  Recreated
    Container sentry-self-hosted_redis_1  Recreated
    Container sentry-self-hosted_zookeeper_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreate
    Container sentry-self-hosted_postgres_1  Recreated
    Container sentry-self-hosted_memcached_1  Recreated
    Container sentry-self-hosted_clickhouse_1  Recreated
    Container sentry-self-hosted_symbolicator_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreated
    Container sentry-self-hosted_snuba-replacer_1  Recreate
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-consumer_1  Recreate
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreate
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreate
    Container sentry-self-hosted_snuba-api_1  Recreate
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreated
    Container sentry-self-hosted_snuba-consumer_1  Recreated
    Container sentry-self-hosted_snuba-api_1  Recreated
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-replacer_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreated
    Container sentry-self-hosted-symbolicator-1  Starting
    Container sentry-self-hosted-postgres-1  Starting
    Container sentry-self-hosted-memcached-1  Starting
    Container sentry-self-hosted-clickhouse-1  Starting
    Container sentry-self-hosted-zookeeper-1  Starting
    Container sentry-self-hosted-smtp-1  Starting
    Container sentry-self-hosted-redis-1  Starting
    Container sentry-self-hosted-symbolicator-1  Started
    Container sentry-self-hosted-postgres-1  Started
    Container sentry-self-hosted-smtp-1  Started
    Container sentry-self-hosted-clickhouse-1  Started
    Container sentry-self-hosted-zookeeper-1  Started
    Container sentry-self-hosted-zookeeper-1  Waiting
    Container sentry-self-hosted-redis-1  Started
    Container sentry-self-hosted-memcached-1  Started
    Container sentry-self-hosted-zookeeper-1  Healthy
    Container sentry-self-hosted-kafka-1  Starting
    Container sentry-self-hosted-kafka-1  Started
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Starting
    Container sentry-self-hosted-snuba-replacer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-transactions-consumer-1  Starting
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Starting
    Container sentry-self-hosted-snuba-consumer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-sessions-consumer-1  Starting
    Container sentry-self-hosted-snuba-api-1  Starting
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Started
    Container sentry-self-hosted-snuba-replacer-1  Started
    Container sentry-self-hosted-snuba-transactions-consumer-1  Started
    Container sentry-self-hosted-snuba-consumer-1  Started
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Started
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Started
    Container sentry-self-hosted-snuba-api-1  Started
    Container sentry-self-hosted-snuba-sessions-consumer-1  Started
    /usr/local/lib/python3.8/site-packages/memcache.py:1303: SyntaxWarning: "is" with a literal. Did you mean "=="?
      if key is '':
    /usr/local/lib/python3.8/site-packages/memcache.py:1304: SyntaxWarning: "is" with a literal. Did you mean "=="?
      if key_extra_len is 0:
    Traceback (most recent call last):
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    psycopg2.errors.UndefinedTable: relation "auth_user" does not exist
    LINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...
                                                                 ^
  
  
    During handling of the above exception, another exception occurred:
  
    Traceback (most recent call last):
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 77, in inner
        raise_the_exception(self.db, e)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 75, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 18, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 95, in inner
        raise exc_info[0](msg).with_traceback(exc_info[2])
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    psycopg2.errors.UndefinedTable: UndefinedTable('relation "auth_user" does not exist\nLINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...\n                                                             ^\n')
    SQL: SELECT "auth_user"."password", "auth_user"."last_login", "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."is_managed", "auth_user"."is_sentry_app", "auth_user"."is_password_expired", "auth_user"."last_password_change", "auth_user"."flags", "auth_user"."session_nonce", "auth_user"."actor_id", "auth_user"."date_joined", "auth_user"."last_active", "auth_user"."avatar_type", "auth_user"."avatar_url" FROM "auth_user" WHERE "auth_user"."username" = %s
  
    The above exception was the direct cause of the following exception:
  
    Traceback (most recent call last):
      File "/usr/local/bin/sentry", line 8, in <module>
        sys.exit(main())
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/__init__.py", line 191, in main
        func(**kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1128, in __call__
        return self.main(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1053, in main
        rv = self.invoke(ctx)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1659, in invoke
        return _process_result(sub_ctx.command.invoke(sub_ctx))
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1395, in invoke
        return ctx.invoke(self.callback, **ctx.params)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 754, in invoke
        return __callback(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/decorators.py", line 26, in new_func
        return f(get_current_context(), *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/decorators.py", line 29, in inner
        return ctx.invoke(f, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 754, in invoke
        return __callback(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/commands/createuser.py", line 130, in createuser
        user = User.objects.get(username=email)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/models/manager/base.py", line 259, in get
        model: M = super().get(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
        return getattr(self.get_queryset(), name)(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 402, in get
        num = len(clone)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 256, in __len__
        self._fetch_all()
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 1242, in _fetch_all
        self._result_cache = list(self._iterable_class(self))
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 55, in __iter__
        results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/sql/compiler.py", line 1142, in execute_sql
        cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry_sdk/integrations/django/__init__.py", line 582, in execute
        return real_execute(self, sql, params)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 67, in execute
        return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 76, in _execute_with_wrappers
        return executor(sql, params, many, context)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/django/db/utils.py", line 89, in __exit__
        raise dj_exc_value.with_traceback(traceback) from exc_value
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 77, in inner
        raise_the_exception(self.db, e)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 75, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 18, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 95, in inner
        raise exc_info[0](msg).with_traceback(exc_info[2])
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    django.db.utils.ProgrammingError: UndefinedTable('relation "auth_user" does not exist\nLINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...\n                                                             ^\n')
    SQL: SELECT "auth_user"."password", "auth_user"."last_login", "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."is_managed", "auth_user"."is_sentry_app", "auth_user"."is_password_expired", "auth_user"."last_password_change", "auth_user"."flags", "auth_user"."session_nonce", "auth_user"."actor_id", "auth_user"."date_joined", "auth_user"."last_active", "auth_user"."avatar_type", "auth_user"."avatar_url" FROM "auth_user" WHERE "auth_user"."username" = %s
  stderr_lines: <omitted>
  stdout: |-
    Updating certificates in /etc/ssl/certs...
    0 added, 0 removed; done.
    Running hooks in /etc/ca-certificates/update.d...
    done.
    13:31:58 [WARNING] sentry.utils.geo: Error opening GeoIP database: /geoip/GeoLite2-City.mmdb
    13:31:58 [WARNING] sentry.utils.geo: Error opening GeoIP database in Rust: /geoip/GeoLite2-City.mmdb
    13:32:06 [INFO] sentry.plugins.github: apps-not-configured
  stdout_lines: <omitted>
2023-04-20 13:32:08,391 p=505700 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:32:08,508 p=505700 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:32:08,508 p=505700 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:32:35,474 p=513536 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:32:35,500 p=513536 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:32:37,086 p=513536 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:32:37,113 p=513536 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:32:38,467 p=513536 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:32:38,545 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:32:38,833 p=513536 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:32:38,864 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:32:40,052 p=513536 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:32:40,079 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:32:40,370 p=513536 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:32:40,403 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:32:40,419 p=513536 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:32:40,446 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:32:40,502 p=513536 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:32:40,528 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:32:40,726 p=513536 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:32:40,751 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:32:40,782 p=513536 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:32:40,812 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:33:35,209 p=513536 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:33:35,266 p=513536 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:35:01,619 p=513536 u=ubuntu n=ansible | failed: [gat-20.eu.galaxy.training] (item={'email': 'admin@example.com', 'password': 's4FquyhvM37afzMBR/hEjzsJZSC2RBwc'}) => changed=true 
  ansible_loop_var: item
  cmd:
  - docker-compose
  - run
  - --rm
  - web
  - createuser
  - --email
  - admin@example.com
  - --password
  - s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  - --superuser
  - --no-input
  delta: '0:01:25.903241'
  end: '2023-04-20 13:35:01.572637'
  item:
    email: admin@example.com
    password: s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  msg: non-zero return code
  rc: 1
  start: '2023-04-20 13:33:35.669396'
  stderr: |-
    Container sentry-self-hosted_smtp_1  Recreate
    Container sentry-self-hosted_zookeeper_1  Recreate
    Container sentry-self-hosted_memcached_1  Recreate
    Container sentry-self-hosted_postgres_1  Recreate
    Container sentry-self-hosted_redis_1  Recreate
    Container sentry-self-hosted_symbolicator_1  Recreate
    Container sentry-self-hosted_clickhouse_1  Recreate
    Container sentry-self-hosted_smtp_1  Recreated
    Container sentry-self-hosted_postgres_1  Recreated
    Container sentry-self-hosted_zookeeper_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreate
    Container sentry-self-hosted_redis_1  Recreated
    Container sentry-self-hosted_clickhouse_1  Recreated
    Container sentry-self-hosted_memcached_1  Recreated
    Container sentry-self-hosted_symbolicator_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreated
    Container sentry-self-hosted_snuba-replacer_1  Recreate
    Container sentry-self-hosted_snuba-api_1  Recreate
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreate
    Container sentry-self-hosted_snuba-consumer_1  Recreate
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-consumer_1  Recreated
    Container sentry-self-hosted_snuba-api_1  Recreated
    Container sentry-self-hosted_snuba-replacer_1  Recreated
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreated
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreated
    Container sentry-self-hosted-memcached-1  Starting
    Container sentry-self-hosted-smtp-1  Starting
    Container sentry-self-hosted-clickhouse-1  Starting
    Container sentry-self-hosted-redis-1  Starting
    Container sentry-self-hosted-zookeeper-1  Starting
    Container sentry-self-hosted-postgres-1  Starting
    Container sentry-self-hosted-symbolicator-1  Starting
    Container sentry-self-hosted-smtp-1  Started
    Container sentry-self-hosted-redis-1  Started
    Container sentry-self-hosted-memcached-1  Started
    Container sentry-self-hosted-zookeeper-1  Started
    Container sentry-self-hosted-zookeeper-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Started
    Container sentry-self-hosted-symbolicator-1  Started
    Container sentry-self-hosted-postgres-1  Started
    Container sentry-self-hosted-zookeeper-1  Healthy
    Container sentry-self-hosted-kafka-1  Starting
    Container sentry-self-hosted-kafka-1  Started
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-api-1  Starting
    Container sentry-self-hosted-snuba-replacer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-transactions-consumer-1  Starting
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Starting
    Container sentry-self-hosted-snuba-sessions-consumer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-consumer-1  Starting
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Starting
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Started
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Started
    Container sentry-self-hosted-snuba-replacer-1  Started
    Container sentry-self-hosted-snuba-consumer-1  Started
    Container sentry-self-hosted-snuba-sessions-consumer-1  Started
    Container sentry-self-hosted-snuba-api-1  Started
    Container sentry-self-hosted-snuba-transactions-consumer-1  Started
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Started
    /usr/local/lib/python3.8/site-packages/memcache.py:1303: SyntaxWarning: "is" with a literal. Did you mean "=="?
      if key is '':
    /usr/local/lib/python3.8/site-packages/memcache.py:1304: SyntaxWarning: "is" with a literal. Did you mean "=="?
      if key_extra_len is 0:
    Traceback (most recent call last):
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    psycopg2.errors.UndefinedTable: relation "auth_user" does not exist
    LINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...
                                                                 ^
  
  
    During handling of the above exception, another exception occurred:
  
    Traceback (most recent call last):
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 77, in inner
        raise_the_exception(self.db, e)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 75, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 18, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 95, in inner
        raise exc_info[0](msg).with_traceback(exc_info[2])
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    psycopg2.errors.UndefinedTable: UndefinedTable('relation "auth_user" does not exist\nLINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...\n                                                             ^\n')
    SQL: SELECT "auth_user"."password", "auth_user"."last_login", "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."is_managed", "auth_user"."is_sentry_app", "auth_user"."is_password_expired", "auth_user"."last_password_change", "auth_user"."flags", "auth_user"."session_nonce", "auth_user"."actor_id", "auth_user"."date_joined", "auth_user"."last_active", "auth_user"."avatar_type", "auth_user"."avatar_url" FROM "auth_user" WHERE "auth_user"."username" = %s
  
    The above exception was the direct cause of the following exception:
  
    Traceback (most recent call last):
      File "/usr/local/bin/sentry", line 8, in <module>
        sys.exit(main())
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/__init__.py", line 191, in main
        func(**kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1128, in __call__
        return self.main(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1053, in main
        rv = self.invoke(ctx)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1659, in invoke
        return _process_result(sub_ctx.command.invoke(sub_ctx))
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1395, in invoke
        return ctx.invoke(self.callback, **ctx.params)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 754, in invoke
        return __callback(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/decorators.py", line 26, in new_func
        return f(get_current_context(), *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/decorators.py", line 29, in inner
        return ctx.invoke(f, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 754, in invoke
        return __callback(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/commands/createuser.py", line 130, in createuser
        user = User.objects.get(username=email)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/models/manager/base.py", line 259, in get
        model: M = super().get(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
        return getattr(self.get_queryset(), name)(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 402, in get
        num = len(clone)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 256, in __len__
        self._fetch_all()
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 1242, in _fetch_all
        self._result_cache = list(self._iterable_class(self))
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 55, in __iter__
        results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/sql/compiler.py", line 1142, in execute_sql
        cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry_sdk/integrations/django/__init__.py", line 582, in execute
        return real_execute(self, sql, params)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 67, in execute
        return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 76, in _execute_with_wrappers
        return executor(sql, params, many, context)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/django/db/utils.py", line 89, in __exit__
        raise dj_exc_value.with_traceback(traceback) from exc_value
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 77, in inner
        raise_the_exception(self.db, e)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 75, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 18, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 95, in inner
        raise exc_info[0](msg).with_traceback(exc_info[2])
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    django.db.utils.ProgrammingError: UndefinedTable('relation "auth_user" does not exist\nLINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...\n                                                             ^\n')
    SQL: SELECT "auth_user"."password", "auth_user"."last_login", "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."is_managed", "auth_user"."is_sentry_app", "auth_user"."is_password_expired", "auth_user"."last_password_change", "auth_user"."flags", "auth_user"."session_nonce", "auth_user"."actor_id", "auth_user"."date_joined", "auth_user"."last_active", "auth_user"."avatar_type", "auth_user"."avatar_url" FROM "auth_user" WHERE "auth_user"."username" = %s
  stderr_lines: <omitted>
  stdout: |-
    Updating certificates in /etc/ssl/certs...
    0 added, 0 removed; done.
    Running hooks in /etc/ca-certificates/update.d...
    done.
    13:34:51 [WARNING] sentry.utils.geo: Error opening GeoIP database: /geoip/GeoLite2-City.mmdb
    13:34:51 [WARNING] sentry.utils.geo: Error opening GeoIP database in Rust: /geoip/GeoLite2-City.mmdb
    13:34:59 [INFO] sentry.plugins.github: apps-not-configured
  stdout_lines: <omitted>
2023-04-20 13:35:01,623 p=513536 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:35:01,745 p=513536 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:35:01,746 p=513536 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:44:03,486 p=526778 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:44:03,511 p=526778 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:44:05,013 p=526778 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:44:05,042 p=526778 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:44:06,442 p=526778 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:44:06,511 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:44:06,833 p=526778 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:44:06,859 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:44:08,166 p=526778 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:44:08,192 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:44:08,495 p=526778 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:44:08,521 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:44:08,538 p=526778 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:44:08,563 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:44:08,587 p=526778 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:44:08,612 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:44:08,811 p=526778 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:44:08,841 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:44:08,866 p=526778 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:44:08,892 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 13:45:01,712 p=526778 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:45:01,747 p=526778 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 13:46:26,117 p=526778 u=ubuntu n=ansible | failed: [gat-20.eu.galaxy.training] (item={'email': 'admin@example.com', 'password': 's4FquyhvM37afzMBR/hEjzsJZSC2RBwc'}) => changed=true 
  ansible_loop_var: item
  cmd:
  - docker-compose
  - run
  - --rm
  - web
  - createuser
  - --email
  - admin@example.com
  - --password
  - s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  - --superuser
  - --no-input
  delta: '0:01:23.999386'
  end: '2023-04-20 13:46:26.062286'
  item:
    email: admin@example.com
    password: s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  msg: non-zero return code
  rc: 1
  start: '2023-04-20 13:45:02.062900'
  stderr: |-
    Container sentry-self-hosted_symbolicator_1  Recreate
    Container sentry-self-hosted_zookeeper_1  Recreate
    Container sentry-self-hosted_postgres_1  Recreate
    Container sentry-self-hosted_redis_1  Recreate
    Container sentry-self-hosted_memcached_1  Recreate
    Container sentry-self-hosted_smtp_1  Recreate
    Container sentry-self-hosted_clickhouse_1  Recreate
    Container sentry-self-hosted_smtp_1  Recreated
    Container sentry-self-hosted_postgres_1  Recreated
    Container sentry-self-hosted_redis_1  Recreated
    Container sentry-self-hosted_zookeeper_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreate
    Container sentry-self-hosted_memcached_1  Recreated
    Container sentry-self-hosted_clickhouse_1  Recreated
    Container sentry-self-hosted_symbolicator_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreate
    Container sentry-self-hosted_snuba-replacer_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreate
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreate
    Container sentry-self-hosted_snuba-consumer_1  Recreate
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-api_1  Recreate
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreated
    Container sentry-self-hosted_snuba-api_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreated
    Container sentry-self-hosted_snuba-replacer_1  Recreated
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-consumer_1  Recreated
    Container sentry-self-hosted-smtp-1  Starting
    Container sentry-self-hosted-clickhouse-1  Starting
    Container sentry-self-hosted-memcached-1  Starting
    Container sentry-self-hosted-redis-1  Starting
    Container sentry-self-hosted-zookeeper-1  Starting
    Container sentry-self-hosted-symbolicator-1  Starting
    Container sentry-self-hosted-postgres-1  Starting
    Container sentry-self-hosted-redis-1  Started
    Container sentry-self-hosted-memcached-1  Started
    Container sentry-self-hosted-symbolicator-1  Started
    Container sentry-self-hosted-smtp-1  Started
    Container sentry-self-hosted-clickhouse-1  Started
    Container sentry-self-hosted-postgres-1  Started
    Container sentry-self-hosted-zookeeper-1  Started
    Container sentry-self-hosted-zookeeper-1  Waiting
    Container sentry-self-hosted-zookeeper-1  Healthy
    Container sentry-self-hosted-kafka-1  Starting
    Container sentry-self-hosted-kafka-1  Started
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-replacer-1  Starting
    Container sentry-self-hosted-snuba-consumer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-sessions-consumer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-transactions-consumer-1  Starting
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Starting
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-api-1  Starting
    Container sentry-self-hosted-snuba-consumer-1  Started
    Container sentry-self-hosted-snuba-sessions-consumer-1  Started
    Container sentry-self-hosted-snuba-replacer-1  Started
    Container sentry-self-hosted-snuba-transactions-consumer-1  Started
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Started
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Started
    Container sentry-self-hosted-snuba-api-1  Started
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Started
    /usr/local/lib/python3.8/site-packages/memcache.py:1303: SyntaxWarning: "is" with a literal. Did you mean "=="?
      if key is '':
    /usr/local/lib/python3.8/site-packages/memcache.py:1304: SyntaxWarning: "is" with a literal. Did you mean "=="?
      if key_extra_len is 0:
    Traceback (most recent call last):
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    psycopg2.errors.UndefinedTable: relation "auth_user" does not exist
    LINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...
                                                                 ^
  
  
    During handling of the above exception, another exception occurred:
  
    Traceback (most recent call last):
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 77, in inner
        raise_the_exception(self.db, e)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 75, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 18, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 95, in inner
        raise exc_info[0](msg).with_traceback(exc_info[2])
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    psycopg2.errors.UndefinedTable: UndefinedTable('relation "auth_user" does not exist\nLINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...\n                                                             ^\n')
    SQL: SELECT "auth_user"."password", "auth_user"."last_login", "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."is_managed", "auth_user"."is_sentry_app", "auth_user"."is_password_expired", "auth_user"."last_password_change", "auth_user"."flags", "auth_user"."session_nonce", "auth_user"."actor_id", "auth_user"."date_joined", "auth_user"."last_active", "auth_user"."avatar_type", "auth_user"."avatar_url" FROM "auth_user" WHERE "auth_user"."username" = %s
  
    The above exception was the direct cause of the following exception:
  
    Traceback (most recent call last):
      File "/usr/local/bin/sentry", line 8, in <module>
        sys.exit(main())
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/__init__.py", line 191, in main
        func(**kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1128, in __call__
        return self.main(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1053, in main
        rv = self.invoke(ctx)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1659, in invoke
        return _process_result(sub_ctx.command.invoke(sub_ctx))
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 1395, in invoke
        return ctx.invoke(self.callback, **ctx.params)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 754, in invoke
        return __callback(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/decorators.py", line 26, in new_func
        return f(get_current_context(), *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/decorators.py", line 29, in inner
        return ctx.invoke(f, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/click/core.py", line 754, in invoke
        return __callback(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/runner/commands/createuser.py", line 130, in createuser
        user = User.objects.get(username=email)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/models/manager/base.py", line 259, in get
        model: M = super().get(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/manager.py", line 82, in manager_method
        return getattr(self.get_queryset(), name)(*args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 402, in get
        num = len(clone)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 256, in __len__
        self._fetch_all()
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 1242, in _fetch_all
        self._result_cache = list(self._iterable_class(self))
      File "/usr/local/lib/python3.8/site-packages/django/db/models/query.py", line 55, in __iter__
        results = compiler.execute_sql(chunked_fetch=self.chunked_fetch, chunk_size=self.chunk_size)
      File "/usr/local/lib/python3.8/site-packages/django/db/models/sql/compiler.py", line 1142, in execute_sql
        cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry_sdk/integrations/django/__init__.py", line 582, in execute
        return real_execute(self, sql, params)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 67, in execute
        return self._execute_with_wrappers(sql, params, many=False, executor=self._execute)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 76, in _execute_with_wrappers
        return executor(sql, params, many, context)
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/django/db/utils.py", line 89, in __exit__
        raise dj_exc_value.with_traceback(traceback) from exc_value
      File "/usr/local/lib/python3.8/site-packages/django/db/backends/utils.py", line 84, in _execute
        return self.cursor.execute(sql, params)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 77, in inner
        raise_the_exception(self.db, e)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 75, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 18, in inner
        return func(self, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 95, in inner
        raise exc_info[0](msg).with_traceback(exc_info[2])
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/decorators.py", line 91, in inner
        return func(self, sql, *args, **kwargs)
      File "/usr/local/lib/python3.8/site-packages/sentry/db/postgres/base.py", line 86, in execute
        return self.cursor.execute(sql, clean_bad_params(params))
    django.db.utils.ProgrammingError: UndefinedTable('relation "auth_user" does not exist\nLINE 1: ...ser"."avatar_type", "auth_user"."avatar_url" FROM "auth_user...\n                                                             ^\n')
    SQL: SELECT "auth_user"."password", "auth_user"."last_login", "auth_user"."id", "auth_user"."username", "auth_user"."first_name", "auth_user"."email", "auth_user"."is_staff", "auth_user"."is_active", "auth_user"."is_superuser", "auth_user"."is_managed", "auth_user"."is_sentry_app", "auth_user"."is_password_expired", "auth_user"."last_password_change", "auth_user"."flags", "auth_user"."session_nonce", "auth_user"."actor_id", "auth_user"."date_joined", "auth_user"."last_active", "auth_user"."avatar_type", "auth_user"."avatar_url" FROM "auth_user" WHERE "auth_user"."username" = %s
  stderr_lines: <omitted>
  stdout: |-
    Updating certificates in /etc/ssl/certs...
    0 added, 0 removed; done.
    Running hooks in /etc/ca-certificates/update.d...
    done.
    13:46:16 [WARNING] sentry.utils.geo: Error opening GeoIP database: /geoip/GeoLite2-City.mmdb
    13:46:16 [WARNING] sentry.utils.geo: Error opening GeoIP database in Rust: /geoip/GeoLite2-City.mmdb
    13:46:24 [INFO] sentry.plugins.github: apps-not-configured
  stdout_lines: <omitted>
2023-04-20 13:46:26,126 p=526778 u=ubuntu n=ansible | ...ignoring
2023-04-20 13:46:26,260 p=526778 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:46:26,260 p=526778 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 13:49:32,569 p=536362 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:49:32,597 p=536362 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:49:34,028 p=536362 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:49:34,054 p=536362 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:49:35,360 p=536362 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:49:35,437 p=536362 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:49:35,707 p=536362 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:49:35,734 p=536362 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:49:37,236 p=536362 u=ubuntu n=ansible | diff --git a/.craft.yml b/.craft.yml
index 4524aff..fcc29e7 100644
--- a/.craft.yml
+++ b/.craft.yml
@@ -1,6 +1,12 @@
-minVersion: "0.23.1"
-changelogPolicy: auto
+minVersion: "0.14.0"
+github:
+  owner: getsentry
+  repo: onpremise
+releaseBranchPrefix: releases
+changelogPolicy: none
 artifactProvider:
   name: none
+statusProvider:
+  name: github
 targets:
   - name: github
diff --git a/.env b/.env
index c8a984e..adb696f 100644
--- a/.env
+++ b/.env
@@ -1,15 +1,9 @@
-COMPOSE_PROJECT_NAME=sentry-self-hosted
+COMPOSE_PROJECT_NAME=sentry_onpremise
 SENTRY_EVENT_RETENTION_DAYS=90
 # You can either use a port number or an IP:PORT combo for SENTRY_BIND
 # See https://docs.docker.com/compose/compose-file/#ports for more
 SENTRY_BIND=9000
-# Set SENTRY_MAIL_HOST to a valid FQDN (host/domain name) to be able to send emails!
-# SENTRY_MAIL_HOST=example.com
-SENTRY_IMAGE=getsentry/sentry:23.3.1
-SNUBA_IMAGE=getsentry/snuba:23.3.1
-RELAY_IMAGE=getsentry/relay:23.3.1
-SYMBOLICATOR_IMAGE=getsentry/symbolicator:0.7.0
-WAL2JSON_VERSION=latest
-HEALTHCHECK_INTERVAL=30s
-HEALTHCHECK_TIMEOUT=60s
-HEALTHCHECK_RETRIES=10
+SENTRY_IMAGE=getsentry/sentry:21.1.0
+SNUBA_IMAGE=getsentry/snuba:21.1.0
+RELAY_IMAGE=getsentry/relay:21.1.0
+SYMBOLICATOR_IMAGE=getsentry/symbolicator:0.3.2
diff --git a/.gitattributes b/.gitattributes
deleted file mode 100644
index 0beb4bb..0000000
--- a/.gitattributes
+++ /dev/null
@@ -1,5 +0,0 @@
-/.gitattributes export-ignore
-/.gitignore export-ignore
-/.github export-ignore
-/.editorconfig export-ignore
-/.craft.yml export-ignore
diff --git a/.github/ISSUE_TEMPLATE/bug_report.md b/.github/ISSUE_TEMPLATE/bug_report.md
new file mode 100644
index 0000000..359d812
--- /dev/null
+++ b/.github/ISSUE_TEMPLATE/bug_report.md
@@ -0,0 +1,29 @@
+---
+name:  Bug Report
+about: Report a bug in Self-Hosted Sentry
+---
+
+### Version Information
+
+Version: *VERSION HERE*
+
+### Steps to Reproduce
+
+1. What
+2. you
+3. did.
+
+### Expected Result
+
+What you thought would happen.
+
+### Actual Result
+
+What actually happened. Maybe a screenshot/recording?
+
+### Logs
+
+What you saw along the way, e.g.:
+
+- latest install logs: `ls -1 sentry_install_log-*.txt | tail -1 | xargs cat`
+- `docker-compose logs` output
diff --git a/.github/ISSUE_TEMPLATE/config.yml b/.github/ISSUE_TEMPLATE/config.yml
index c58204a..22655b7 100644
--- a/.github/ISSUE_TEMPLATE/config.yml
+++ b/.github/ISSUE_TEMPLATE/config.yml
@@ -1,5 +1,8 @@
 blank_issues_enabled: false
 contact_links:
+  - name: Question about self-hosting/on-premise
+    url: https://forum.sentry.io
+    about: Please use the community forums for questions
   - name: Report a security vulnerability
     url: https://sentry.io/security/#vulnerability-disclosure
     about: Please see our guide for responsible disclosure.
diff --git a/.github/ISSUE_TEMPLATE/feature-request.yml b/.github/ISSUE_TEMPLATE/feature-request.yml
deleted file mode 100644
index 3e5de4d..0000000
--- a/.github/ISSUE_TEMPLATE/feature-request.yml
+++ /dev/null
@@ -1,28 +0,0 @@
-name:  Feature Request
-description: Tell us about a problem our software could solve but doesn't.
-body:
-  - type: textarea
-    id: problem
-    attributes:
-      label: Problem Statement
-      description: What problem could `self-hosted` solve that it doesn't?
-      placeholder: |-
-        I want to make whirled peas, but `self-hosted` doesn't blend.
-    validations:
-      required: true
-  - type: textarea
-    id: expected
-    attributes:
-      label: Solution Brainstorm
-      description: We know you have bright ideas to share ... share away, friend.
-      placeholder: |-
-        Add a blender to `self-hosted`.
-    validations:
-      required: false
-  - type: markdown
-    attributes:
-      value: |-
-        ## Thanks
-        Check our [triage docs](https://open.sentry.io/triage/) for what to expect next.
-    validations:
-      required: false
diff --git a/.github/ISSUE_TEMPLATE/feature_request.md b/.github/ISSUE_TEMPLATE/feature_request.md
new file mode 100644
index 0000000..32e32f2
--- /dev/null
+++ b/.github/ISSUE_TEMPLATE/feature_request.md
@@ -0,0 +1,18 @@
+---
+name:  Feature Request
+about: Suggest an idea for improving Self-Hosted Sentry
+---
+
+### Summary
+
+One paragraph description of the feature.
+
+### Motivation
+
+Why should this be worked on? What problems or use cases does it solve or
+improve?
+
+### Additional Context
+
+Any other context or screenshots or API request payload/responses that
+pertain to the feature.
diff --git a/.github/ISSUE_TEMPLATE/problem-report.yml b/.github/ISSUE_TEMPLATE/problem-report.yml
deleted file mode 100644
index 07f555b..0000000
--- a/.github/ISSUE_TEMPLATE/problem-report.yml
+++ /dev/null
@@ -1,86 +0,0 @@
-name:  Problem Report
-description: Tell us about something that's not working the way you expect.
-body:
-  - type: input
-    id: self_hosted_version
-    attributes:
-      label: Self-Hosted Version
-      placeholder: 21.7.0  should look like this (check the footer)
-      description: What version of self-hosted Sentry are you running?
-    validations:
-      required: true
-  - type: input
-    id: cpu_architecture
-    attributes:
-      label: CPU Architecture
-      placeholder: x86_64  should look like this
-      description: |
-        What cpu architecture are you running self-hosted on?
-        e.g: (docker info --format '{{.Architecture}}')
-    validations:
-      required: true
-  - type: input
-    id: docker_version
-    attributes:
-      label: Docker Version
-      placeholder: 20.10.16  should look like this
-      description: |
-        What version of docker are you using to run self-hosted?
-        e.g: (docker --version)
-    validations:
-      required: true
-  - type: input
-    id: docker_compose_version
-    attributes:
-      label: Docker Compose Version
-      placeholder: 2.6.0  should look like this (docker compose --version)
-      description: |
-        What version of docker-compose are you using to run self-hosted?
-        You need to use docker-compose --version if you are running < v2.0.0.
-    validations:
-      required: true
-  - type: textarea
-    id: repro
-    attributes:
-      label: Steps to Reproduce
-      description: How can we see what you're seeing? Specific is terrific.
-      placeholder: |-
-        1. foo
-        2. bar
-        3. baz
-    validations:
-      required: true
-  - type: textarea
-    id: expected
-    attributes:
-      label: Expected Result
-    validations:
-      required: true
-  - type: textarea
-    id: actual
-    attributes:
-      label: Actual Result
-      description: |
-        Logs? Screenshots? Yes, please.
-        e.g.:
-          - latest install logs: `ls -1 sentry_install_log-*.txt | tail -1 | xargs cat`
-          - `docker compose logs` output
-      placeholder: |-
-        e.g.:
-        - logs output
-    validations:
-      required: true
-  - type: textarea
-    id: event_id
-    attributes:
-      label: Event ID
-      description: |
-        If you opted into sending errors to our error monitoring and the error has an event ID, enter it here!
-      placeholder: c2d85058-d3b0-4d85-a509-e2ba965845d7
-  - type: markdown
-    attributes:
-      value: |-
-        ## Thanks
-        Check our [triage docs](https://open.sentry.io/triage/) for what to expect next.
-    validations:
-      required: false
diff --git a/.github/PULL_REQUEST_TEMPLATE.md b/.github/PULL_REQUEST_TEMPLATE.md
deleted file mode 100644
index 501be2d..0000000
--- a/.github/PULL_REQUEST_TEMPLATE.md
+++ /dev/null
@@ -1,16 +0,0 @@
-
-
-
-<!-- Describe your PR here. -->
-
-
-
-<!--
-
-  Sentry employees and contractors can delete or ignore the following.
-
--->
-
-### Legal Boilerplate
-
-Look, I get it. The entity doing business as "Sentry" was incorporated in the State of Delaware in 2015 as Functional Software, Inc. and is gonna need some rights from me in order to utilize my contributions in this here PR. So here's the deal: I retain all rights, title and interest in and to my contributions, and by keeping this boilerplate intact I confirm that Sentry can use, modify, copy, and redistribute my contributions, under Sentry's choice of terms.
diff --git a/.github/workflows/enforce-license-compliance.yml b/.github/workflows/enforce-license-compliance.yml
deleted file mode 100644
index 46d724d..0000000
--- a/.github/workflows/enforce-license-compliance.yml
+++ /dev/null
@@ -1,16 +0,0 @@
-name: Enforce License Compliance
-
-on:
-  push:
-    branches: [master]
-  pull_request:
-    branches: [master]
-
-jobs:
-  enforce-license-compliance:
-    runs-on: ubuntu-latest
-    steps:
-      - name: 'Enforce License Compliance'
-        uses: getsentry/action-enforce-license-compliance@main
-        with:
-          fossa_api_key: ${{ secrets.FOSSA_API_KEY }}
diff --git a/.github/workflows/lock.yml b/.github/workflows/lock.yml
index cd1d4ef..5d57d6f 100644
--- a/.github/workflows/lock.yml
+++ b/.github/workflows/lock.yml
@@ -5,7 +5,6 @@ on:
   workflow_dispatch:
 jobs:
   lock:
-    if: github.repository_owner == 'getsentry'
     runs-on: ubuntu-latest
     steps:
       - uses: getsentry/forked-action-lock-threads@master
diff --git a/.github/workflows/pre-commit.yml b/.github/workflows/pre-commit.yml
deleted file mode 100644
index 06fd36e..0000000
--- a/.github/workflows/pre-commit.yml
+++ /dev/null
@@ -1,16 +0,0 @@
-name: pre-commit
-
-on:
-  pull_request:
-  push:
-    branches: [master]
-
-jobs:
-  pre-commit:
-    runs-on: ubuntu-latest
-    steps:
-    - uses: actions/checkout@v3
-    - uses: actions/setup-python@v4
-      with:
-        python-version: 3.x
-    - uses: pre-commit/action@v3.0.0
diff --git a/.github/workflows/release.yml b/.github/workflows/release.yml
index aa4f527..1d2afb6 100644
--- a/.github/workflows/release.yml
+++ b/.github/workflows/release.yml
@@ -15,16 +15,14 @@ on:
     - cron: "0 18 15 * *"
 jobs:
   release:
-    if: github.repository_owner == 'getsentry'
     runs-on: ubuntu-latest
     name: "Release a new version"
     steps:
-      - uses: actions/checkout@v3
+      - uses: actions/checkout@v2
         with:
           token: ${{ secrets.GH_RELEASE_PAT }}
           fetch-depth: 0
       - name: Prepare release
-        id: prepare-release
         uses: getsentry/action-prepare-release@v1
         env:
           GITHUB_TOKEN: ${{ secrets.GH_RELEASE_PAT }}
@@ -32,26 +30,3 @@ jobs:
           version: ${{ github.event.inputs.version }}
           force: ${{ github.event.inputs.force }}
           calver: true
-    outputs:
-      release-version: ${{ env.RELEASE_VERSION }}
-  dogfood-release:
-    if: github.repository_owner == 'getsentry'
-    runs-on: ubuntu-latest
-    name: Create release on self-hosted dogfood instance
-    needs: release
-    steps:
-      - uses: actions/checkout@v3
-        with:
-          token: ${{ secrets.GH_RELEASE_PAT }}
-          fetch-depth: 0
-      - uses: getsentry/action-release@v1
-        env:
-          SENTRY_ORG: self-hosted
-          SENTRY_PROJECT: installer
-          SENTRY_URL: https://self-hosted.getsentry.net/
-          SENTRY_AUTH_TOKEN: ${{ secrets.SELF_HOSTED_RELEASE_TOKEN }}
-        with:
-          environment: production
-          version: ${{ needs.release.outputs.release-version }}
-          ignore_empty: true
-          ignore_missing: true
diff --git a/.github/workflows/stale.yml b/.github/workflows/stale.yml
index 8586d99..b2a339a 100644
--- a/.github/workflows/stale.yml
+++ b/.github/workflows/stale.yml
@@ -1,11 +1,10 @@
-name: 'close stale issues/PRs'
+name: 'Close stale issues/PRs'
 on:
   schedule:
-    - cron: '0 0 * * *'
+    - cron: '* */6 * * *'
   workflow_dispatch:
 jobs:
   stale:
-    if: github.repository_owner == 'getsentry'
     runs-on: ubuntu-latest
     steps:
       - uses: actions/stale@87c2b794b9b47a9bec68ae03c01aeb572ffebdb1
@@ -19,12 +18,12 @@ jobs:
           debug-only: false
           ascending: false
 
-          exempt-issue-labels: "Status: Backlog,Status: In Progress"
+          exempt-issue-labels: "Status: Accepted,Status: On Hold"
           stale-issue-label: "Status: Stale"
           stale-issue-message: |-
             This issue has gone three weeks without activity. In another week, I will close it.
 
-            But! If you comment or otherwise update it, I will reset the clock, and if you label it `Status: Backlog` or `Status: In Progress`, I will leave it alone ... forever!
+            But! If you comment or otherwise update it, I will reset the clock, and if you label it `Status: Accepted`, I will leave it alone ... forever!
 
             ----
 
@@ -33,12 +32,12 @@ jobs:
           close-issue-label: ""
           close-issue-message: ""
 
-          exempt-pr-labels: "Status: Backlog,Status: In Progress"
+          exempt-pr-labels: "Status: Accepted,Status: On Hold"
           stale-pr-label: "Status: Stale"
           stale-pr-message: |-
             This pull request has gone three weeks without activity. In another week, I will close it.
 
-            But! If you comment or otherwise update it, I will reset the clock, and if you label it `Status: Backlog` or `Status: In Progress`, I will leave it alone ... forever!
+            But! If you comment or otherwise update it, I will reset the clock, and if you label it `Status: Accepted`, I will leave it alone ... forever!
 
             ----
 
diff --git a/.github/workflows/test.yml b/.github/workflows/test.yml
index 04d18f1..6222568 100644
--- a/.github/workflows/test.yml
+++ b/.github/workflows/test.yml
@@ -6,74 +6,47 @@ on:
   push:
     branches:
       - "master"
-      - "release/**"
+      - "releases/**"
   pull_request:
-  schedule:
-    - cron: '1 0 * * *'
+env:
+  DOCKER_COMPOSE_VERSION: 1.24.1
 defaults:
   run:
     shell: bash
 jobs:
-  e2e-test:
-    runs-on: ubuntu-20.04
-    name: "Sentry self-hosted end-to-end tests"
-    steps:
-      - name: Checkout
-        uses: actions/checkout@v3
-        with:
-          path: self-hosted
-      - name: End to end tests
-        uses: getsentry/action-self-hosted-e2e-tests@77805295ebff8a603def5970e18743ded72cb304
-        with:
-          project_name: self-hosted
-
-  unit-test:
-    runs-on: ubuntu-20.04
-    name: "unit tests"
-    steps:
-      - name: Checkout
-        uses: actions/checkout@v3
-
-      - name: Unit Tests
-        run: ./unit-test.sh
-
-  integration-test:
-    runs-on: ubuntu-20.04
-    name: "integration test"
+  test:
     strategy:
-      fail-fast: false
+      # Only run one job at a time as they are quite demanding
+      max-parallel: 1
       matrix:
-        include:
-          # Disabled due to https://github.com/getsentry/self-hosted/issues/1415
-          # - compose_version: "1.28.0"
-          #   compose_path: "/usr/local/bin"
-          # - compose_version: "1.29.2"
-          #   compose_path: "/usr/local/bin"
-          - compose_version: "v2.0.1"
-            compose_path: "/usr/local/lib/docker/cli-plugins"
-          - compose_version: "v2.7.0"
-            compose_path: "/usr/local/lib/docker/cli-plugins"
-    env:
-      COMPOSE_PROJECT_NAME: self-hosted-${{ strategy.job-index }}
+        py2: ["", "1"]
+    runs-on: ubuntu-18.04
+    name: "test${{ matrix.py2 == '1' && ' PY2' || ''}}"
     steps:
+      - name: Pin docker-compose
+        run: |
+          sudo rm /usr/local/bin/docker-compose
+          curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
+          chmod +x docker-compose
+          sudo mv docker-compose /usr/local/bin
+
       - name: Checkout
-        uses: actions/checkout@v3
+        uses: actions/checkout@v2
 
-      - name: Get Compose
+      - name: Install and test
+        env:
+          COMPOSE_PARALLEL_LIMIT: 50
+          COMPOSE_HTTP_TIMEOUT: 450
+          SENTRY_PYTHON2: ${{ matrix.py2 == '1' || '' }}
         run: |
-          # Always remove `docker compose` support as that's the newer version
-          # and comes installed by default nowadays.
-          sudo rm -f "/usr/local/lib/docker/cli-plugins/docker-compose"
-          sudo rm -f "${{ matrix.compose_path }}/docker-compose"
-          sudo mkdir -p "${{ matrix.compose_path }}"
-          sudo curl -L https://github.com/docker/compose/releases/download/${{ matrix.compose_version }}/docker-compose-`uname -s`-`uname -m` -o "${{ matrix.compose_path }}/docker-compose"
-          sudo chmod +x "${{ matrix.compose_path }}/docker-compose"
-
-      - name: Integration Test
-        run: ./integration-test.sh
+          ./install.sh
+          ./test.sh
+          printf "Testing in-place upgrade"
+          ./install.sh --minimize-downtime
+          ./test.sh
 
       - name: Inspect failure
         if: failure()
         run: |
-          docker compose ps
-          docker compose logs
+          docker-compose ps
+          docker-compose logs
diff --git a/.github/workflows/validate-new-issue.yml b/.github/workflows/validate-new-issue.yml
new file mode 100644
index 0000000..3252396
--- /dev/null
+++ b/.github/workflows/validate-new-issue.yml
@@ -0,0 +1,36 @@
+name: Validate new issue
+on:
+  issues:
+    types: ['opened']
+jobs:
+  validate-new-issue:
+    runs-on: ubuntu-latest
+    steps:
+    - uses: actions/checkout@v2
+    - name: "Validate issue against templates"
+      shell: bash
+      run: |
+        # Look for a template where the headings match this issue's
+        echo "${{ github.event.issue.body }}" > issue-body
+        for template in $(ls .github/ISSUE_TEMPLATE/*.md 2> /dev/null); do
+          echo -n "$(basename $template)? "
+          # <() is process substitution - https://superuser.com/a/1060002
+          if diff -rub <(grep '^#' $template) <(grep '^#' issue-body) > /dev/null; then
+            echo " "
+            exit 0
+          else
+            echo ""
+          fi
+        done
+
+        # Failed to find a match! Close the issue.
+        echo "${{ github.token }}" | gh auth login --with-token
+        cat << EOF > comment
+        {"body": "Sorry, friend. As far as this ol' bot can tell, your issue does not use one of this repo's available issue templates. Please [try again using a template](https://github.com/${{ github.repository }}/issues/new/choose) so that we have the best chance of understanding and addressing your issue. (And if I'm confused, please [let us know](https://github.com/getsentry/.github/issues/new?title=template+enforcer+is+confused&body=${{ github.event.issue.html_url }}). )\n\n----\n\n[![Did you see the memo about this?](https://user-images.githubusercontent.com/134455/104515469-e04a9c80-55c0-11eb-8e15-ffe9c0b8dd7f.gif)](https://www.youtube.com/watch?v=Fy3rjQGc6lA)"}
+        EOF
+
+        # Might get `gh issue comment` some day - https://github.com/cli/cli/issues/517
+        gh api "https://api.github.com/repos/${{ github.repository }}/issues/${{ github.event.issue.number }}/comments" \
+          --method POST \
+          --input comment
+        gh issue close ${{ github.event.issue.number }}
diff --git a/.gitignore b/.gitignore
index b52e82d..707622f 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,6 +1,3 @@
-# Error reporting choice cache
-.reporterrors
-
 # Byte-compiled / optimized / DLL files
 __pycache__/
 *.py[cod]
@@ -37,9 +34,6 @@ var/
 pip-log.txt
 pip-delete-this-directory.txt
 sentry_install_log*.txt
-sentry_reset_log*.txt
-sentry_restore_log*.txt
-sentry_backup_log*.txt
 
 # Unit test / coverage reports
 htmlcov/
@@ -75,21 +69,14 @@ target/
 # https://docs.docker.com/compose/extends/
 docker-compose.override.yml
 
-# https://docs.docker.com/compose/environment-variables/#using-the---env-file--option
-.env.custom
-
 *.tar
 data/
-
-# Editor / IDE
 .vscode/tags
-.idea
 
 # custom Sentry config
 sentry/sentry.conf.py
 sentry/config.yml
 sentry/*.bak
-sentry/enhance-image.sh
 sentry/requirements.txt
 relay/credentials.json
 relay/config.yml
@@ -97,10 +84,3 @@ symbolicator/config.yml
 geoip/GeoIP.conf
 geoip/*.mmdb
 geoip/.geoipupdate.lock
-
-# wal2json download
-postgres/wal2json
-
-# integration testing
-_integration-test/custom-ca-roots/nginx/*
-sentry/test-custom-ca-roots.py
diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml
deleted file mode 100644
index 1d99537..0000000
--- a/.pre-commit-config.yaml
+++ /dev/null
@@ -1,24 +0,0 @@
-repos:
-- repo: local
-  hooks:
-    # Based on https://github.com/scop/pre-commit-shfmt/blob/main/.pre-commit-hooks.yaml
-    # Customized to also work on ARM, and give diff for CI on failure.
-    - id: shfmt
-      name: shfmt
-      description: Format shell source code
-      language: docker_image
-      entry: --net none mvdan/shfmt:v3.5.1
-      args: [-w, -d]
-      files: .*\.sh
-      stages: [commit, merge-commit, push, manual]
-
-- repo: https://github.com/pre-commit/pre-commit-hooks
-  rev: v4.3.0
-  hooks:
-  - id: check-case-conflict
-  - id: check-executables-have-shebangs
-  - id: check-merge-conflict
-  - id: check-symlinks
-  - id: end-of-file-fixer
-  - id: trailing-whitespace
-  - id: check-yaml
diff --git a/CHANGELOG.md b/CHANGELOG.md
deleted file mode 100644
index 7884168..0000000
--- a/CHANGELOG.md
+++ /dev/null
@@ -1,303 +0,0 @@
-# Changelog
-
-## 23.3.1
-
-### Various fixes & improvements
-
-- Bump Kafka version to keep up with SaaS (#2037) by @chadwhitacre
-- Add Backup/restore scripts (#2029) by @hubertdeng123
-- Add opt in error monitoring to reset and clean scripts (#2021) by @hubertdeng123
-
-## 23.3.0
-
-### Various fixes & improvements
-
-- Remove ZooKeeper snapshot (#2020) by @dereckson
-- feat(snuba): Add snuba sessions subscription service (#2006) by @klboke
-- Add backup/restore integration tests (#2012) by @hubertdeng123
-- ref(snuba): Remove snuba-cleanup, snuba-transactions-cleanup jobs (#2003) by @klboke
-- ref(replays): Remove the session-replay-ui flag (#2010) by @ryan953
-- Remove broken replay integration test (#2011) by @hubertdeng123
-- Bump self-hosted-e2e-tests action commit sha (#2008) by @hubertdeng123
-- Revert symbolicator tests (#2004) by @hubertdeng123
-- post-process-forwarder: Update CLI command (#1999) by @lynnagara
-- feat(replays): add replays to self hosted (#1990) by @JoshFerge
-- Remove issue status helper automation (#1989) by @hubertdeng123
-- Add proxy buffer size config to fix Bad Gateway (#1984) by @SCjona
-- Reference paths relative to project root (#1800) by @spawnia
-- Run close stale issues/PRs only on getsentry (#1969) by @aminvakil
-
-## 23.2.0
-
-### Various fixes & improvements
-
-- Run lock issues/PRs only on getsentry (#1966) by @aminvakil
-- Updates Redis to 6.2.10 (#1937) by @danielhartnell
-- Handle missing example files gracefully (#1950) by @chadwhitacre
-- Fix post-release.sh for `git pull` (#1938) by @BYK
-- Manually change 23.1.1 to nightly (#1936) by @hubertdeng123
-
-## 23.1.1
-
-### Various fixes & improvements
-
-- ci: Add test for symbolicator pipeline (#1916) by @ethanhs
-
-## 23.1.0
-
-### Various fixes & improvements
-
-- ci: Check health of services after running integration tests and fix snuba-replacer (#1897) by @ethanhs
-- Add wal2json debugging (#1906) by @chadwhitacre
-- Pick up CI bugfix (#1905) by @chadwhitacre
-- ref: Move jq build to error-handling.sh, and use proxy config (#1895) by @ethanhs
-- fix(CI): use default curl retry mechanism for wal2json install (#1890) by @volokluev
-- ref: Retry wal2json download in installer (#1881) by @ethanhs
-- ci: Remove GCB and update Github Action SHA (#1880) by @ethanhs
-
-## 22.12.0
-
-### Various fixes & improvements
-
-- Build each service image individually (#1858) by @ethanhs
-- Set higher kafka healthcheck timeout and fix clickhouse timeout (#1855) by @ethanhs
-- Add --skip-sse42-requirements to install.sh and enable SKIP_SSE42_REQUIREMENTS override (#1790) by @erinaceous
-- Fix commit-log-topic parameter configuration problem (#1817) by @klboke
-- Add .idea to .gitignore (#1803) by @spawnia
-- Add USE_X_FORWARDED_HOST to example config (#1804) by @crinjes
-- (fix): Fix contributor PR e2e tests (#1820) by @hubertdeng123
-
-## 22.11.0
-
-### Various fixes & improvements
-
-- Fix jq usage (#1814) by @ethanhs
-- Try adding end to end tests using new action (#1806) by @ethanhs
-- Add context line, error msg to envelope (#1784) by @hubertdeng123
-- Update to actions/checkoutv3 to address upcoming github deprecations (#1792) by @mattgauntseo-sentry
-- ref: upgrade actions/setup-python to avoid set-output deprecation (#1789) by @asottile-sentry
-- Enforce error reporting (#1777) by @hubertdeng123
-- Upload end of log as breadcrumbs, use exceptions and stacktrace (#1775) by @ethanhs
-- Fix sentry release for dogfood instance (#1768) by @hubertdeng123
-- Add pre-commit config (#1738) by @ethanhs
-- Do not send event on INT signal (#1773) by @hubertdeng123
-
-## 22.10.0
-
-### Various fixes & improvements
-
-- Split post process forwarders (#1759) by @chadwhitacre
-- Revert "Enforce error reporting for self-hosted" (#1755) by @hubertdeng123
-- Enforce error reporting for self-hosted (#1753) by @hubertdeng123
-- ref: Remove unused scripts and code (#1710) by @BYK
-- Check to see if docker compose exists, else error out (#1733) by @hubertdeng123
-- Fix minimum version requirements for docker and docker compose (#1732) by @hubertdeng123
-- Factor out clean and use it in unit-test (#1731) by @chadwhitacre
-- Reorganize unit test layout (#1729) by @hubertdeng123
-- Request event ID in issue template (#1723) by @ethanhs
-- Tag releases with sentry-cli (#1718) by @hubertdeng123
-- Send full logs as an attachment to our dogfood instance (#1715) by @hubertdeng123
-
-## 22.9.0
-
-### Various fixes & improvements
-
-- Fix traceback hash for error monitoring (#1700) by @hubertdeng123
-- Add section about error monitoring to the README (#1699) by @ethanhs
-- Switch from .reporterrors file to flag + envvar (#1697) by @chadwhitacre
-- Rename flag to --skip-user-creation (#1696) by @chadwhitacre
-- Default to not sending data to Sentry for now (#1695) by @chadwhitacre
-- fix(e2e tests): Pull branch that initially triggers gcp build for PRs (#1694) by @hubertdeng123
-- fix(e2e tests): Add .reporterrors file for GCP run of e2e tests (#1691) by @hubertdeng123
-- Error monitoring of the self-hosted installer (#1679) by @ethanhs
-- added docker commands in the description (#1673) by @victorelec14
-- Use docker-compose 2.7.0 instead of 2.2.3 in CI (#1591) by @aminvakil
-
-## 22.8.0
-
-- No documented changes.
-
-## 22.7.0
-
-### Various fixes & improvements
-
-- ref: use sort -V to check minimum versions (#1553) by @ethanhs
-- Get more data from users in issue templates (#1497) by @aminvakil
-- Add ARM support (#1538) by @chadwhitacre
-- do not use gosu for snuba-transactions-cleanup and snuba-cleanup (#1564) by @goganchic
-- ref: Replace regex with --short flag to get compose version (#1551) by @ethanhs
-- Improve installation through proxy (#1543) by @goganchic
-- Cleanup .env{,.custom} handling (#1539) by @chadwhitacre
-- Bump nginx:1.22.0-alpine (#1506) by @aminvakil
-- Run release a new version job only on getsentry (#1529) by @aminvakil
-
-## 22.6.0
-
-### Various fixes & improvements
-
-- fix "services.web.healthcheck.retries must be a number" (#1482) by @yuval1986
-- Add volume for nginx cache (#1511) by @glensc
-- snuba: New subscriptions infrastucture rollout (#1507) by @lynnagara
-- Ease modification of base image (#1479) by @spawnia
-
-## 22.5.0
-
-### Various fixes & improvements
-
-- ref: reset user to root for installation (#1469) by @asottile-sentry
-- Document From email display name (#1446) by @chadwhitacre
-- Bring in CLA Lite (#1439) by @chadwhitacre
-- fix: replace git.io links with redirect targets (#1430) by @asottile-sentry
-
-## 22.4.0
-
-### Various fixes & improvements
-
-- Use better API key when available (#1408) by @chadwhitacre
-- Use a custom action (#1407) by @chadwhitacre
-- Add some debug logging (#1340) by @chadwhitacre
-- meta(gha): Deploy workflow enforce-license-compliance.yml (#1388) by @chadwhitacre
-- Turn off containers under old name as well (#1384) by @chadwhitacre
-
-## 22.3.0
-
-### Various fixes & improvements
-
-- Run CI every night (#1334) by @aminvakil
-- Docker-Compose: Avoid setting hostname to '' (#1365) by @glensc
-- meta(gha): Deploy workflow enforce-license-compliance.yml (#1375) by @chadwhitacre
-- ci: Change stale GitHub workflow to run once a day (#1371) by @kamilogorek
-- ci: Temporary fix for interactive prompt on createuser (#1370) by @BYK
-- meta(gha): Deploy workflow enforce-license-compliance.yml (#1347) by @chadwhitacre
-- Add SaaS nudge to README (#1327) by @chadwhitacre
-
-## 22.2.0
-
-### Various fixes & improvements
-
-- fix: unbound variable _group in reset/dc-detect-version script (#1283) (#1284) by @lovetodream
-- Remove routing helper (#1323) by @chadwhitacre
-- Bump nginx:1.21.6-alpine (#1319) by @aminvakil
-- Add a cloudbuild.yaml for GCB (#1315) by @chadwhitacre
-- Update set-up-and-migrate-database.sh (#1308) by @drmrbrewer
-- Pull relay explicitly to avoid garbage in creds (#1301) by @chadwhitacre
-- Improve logging of docker versions and relay creds (#1298) by @chadwhitacre
-- Remove file again (#1299) by @chadwhitacre
-- Clean up relay credentials generation (#1289) by @chadwhitacre
-- Add CI compose version 1.29.2 / 2.0.1 / 2.2.3 (#1290) by @chadwhitacre
-- Revert "Add CI compose version 1.29.2 / 2.0.1 / 2.2.3 (#1251)" (#1272) by @chadwhitacre
-- Add CI compose version 1.29.2 / 2.0.1 / 2.2.3 (#1251) by @aminvakil
-
-## 22.1.0
-
-### Various fixes & improvements
-
-- Make healthcheck variables configurable in .env (#1248) by @aminvakil
-- Take some actions to avoid unhealthy containers (#1241) by @chadwhitacre
-- Install: setup umask (#1222) by @glensc
-- Deprecated /docker-entrypoint.sh call (#1218) by @marcinroman
-- Bump nginx:1.21.5-alpine (#1230) by @aminvakil
-- Fix reset.sh docker-compose call (#1215) by @aminvakil
-- Set worker_processes to auto (#1207) by @aminvakil
-
-## 21.12.0
-
-### Support Docker Compose v2 (ongoing)
-
-Self-hosted Sentry mostly works with Docker Compose v2 (in addition to v1 >= 1.28.0). There is [one more bug](https://github.com/getsentry/self-hosted/issues/1133) we are trying to squash.
-
-By: @chadwhitacre (#1179)
-
-### Prevent Component Drift
-
-When a user runs the `install.sh` script, they get the latest version of the Sentry, Snuba, Relay and Symbolicator projects. However there is no guarantee they have pulled the latest `self-hosted` version first, and running an old one may cause problems. To mitigate this, we now perform a check during installation that the user is on the latest commit if they are on the `master` branch. You can disable this check with `--skip-commit-check`.
-
-By: @chadwhitacre (#1191), @aminvakil (#1186)
-
-### React to log4shell
-
-Self-hosted Sentry is [not vulnerable](https://github.com/getsentry/self-hosted/issues/1196) to the [log4shell](https://log4shell.com/) vulnerability.
-
-By: @chadwhitacre (#1203)
-
-### Forum  Issues
-
-In the interest of reducing sources of truth, providing better support, and restarting the fire of the self-hosted Sentry community, we [deprecated the Discourse forum in favor of GitHub Issues](https://github.com/getsentry/self-hosted/issues/1151).
-
-By: @chadwhitacre (#1167, #1160, #1159)
-
-### Rename onpremise to self-hosted (ongoing)
-
-In the beginning we used the term "on-premise" and over time we introduced the term "self-hosted." In an effort to regain some consistency for both branding and developer mental overhead purposes, we are standardizing on the term "self-hosted." This release includes a fair portion of the work towards this across multiple repos, hopefully a future release will include the remainder. Some orphaned containers / volumes / networks are [expected](https://github.com/getsentry/self-hosted/pull/1169&#35;discussion_r756401917). You may clean them up with `docker-compose down --remove-orphans`.
-
-By: @chadwhitacre (#1169)
-
-### Add support for custom DotEnv file
-
-There are several ways to [configure self-hosted Sentry](https://develop.sentry.dev/self-hosted/&#35;configuration) and one of them is the `.env` file. In this release we add support for a `.env.custom` file that is git-ignored to make it easier for you to override keys configured this way with custom values. Thanks to @Sebi94nbg for the contribution!
-
-By: @Sebi94nbg (#1113)
-
-### Various fixes & improvements
-
-- Revert "Rename onpremise to self-hosted" (5495fe2e) by @chadwhitacre
-- Rename onpremise to self-hosted (9ad05d87) by @chadwhitacre
-
-## 21.11.0
-
-### Various fixes & improvements
-
-- Fix #1079 - bug in reset.sh (#1134) by @chadwhitacre
-- ci: Enable parallel tests again, increase timeouts (#1125) by @BYK
-- fix: Hide compose errors during version check (#1124) by @BYK
-- build: Omit nightly bump commit from changelog (#1120) by @BYK
-- build: Set master version to nightly (d3e77857)
-
-## 21.10.0
-
-### Support for Docker Compose v2 (ongoing)
-
-You asked for it and you did it! Sentry self-hosted now can work with Docker Compose v2 thanks to our community's contributions.
-
-PRs: #1116
-
-### Various fixes & improvements
-
-- docs: simplify Linux `sudo` instructions in README (#1096)
-- build: Set master version to nightly (58874cf9)
-
-## 21.9.0
-
-- fix(healthcheck): Increase retries to 5 (#1072)
-- fix(requirements): Make compose version check bw-compatible (#1068)
-- ci: Test with the required minimum docker-compose (#1066)
-  Run tests using docker-compose `1.28.0` instead of latest
-- fix(clickhouse): Use correct HTTP port for healthcheck (#1069)
-  Fixes the regular `Unexpected packet` errors in Clickhouse
-
-## 21.8.0
-
-- feat: Support custom CA roots ([#27062](https://github.com/getsentry/sentry/pull/27062)), see the [docs](https://develop.sentry.dev/self-hosted/custom-ca-roots/) for more details.
-- fix: Fix `curl` image to version 7.77.0
-- upgrade: docker-compose version to 1.29.2
-- feat: Leverage health checks for depends_on
-
-## 21.7.0
-
-- No documented changes.
-
-## 21.6.3
-
-- No documented changes.
-
-## 21.6.2
-
-- BREAKING CHANGE: The frontend bundle will be loaded asynchronously (via [#25744](https://github.com/getsentry/sentry/pull/25744)). This is a breaking change that can affect custom plugins that access certain globals in the django template. Please see https://forum.sentry.io/t/breaking-frontend-changes-for-custom-plugins/14184 for more information.
-
-## 21.6.1
-
-- No documented changes.
-
-## 21.6.0
-
-- feat: Add healthchecks for redis, memcached and postgres (#975)
diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md
deleted file mode 100644
index 49120af..0000000
--- a/CONTRIBUTING.md
+++ /dev/null
@@ -1,7 +0,0 @@
-## Testing
-
-Validate changes to the setup by running the integration test:
-
-```shell
-./integration-test.sh
-```
diff --git a/LICENSE b/LICENSE
index 8096560..17ad403 100644
--- a/LICENSE
+++ b/LICENSE
@@ -16,7 +16,7 @@ Additional Use Grant: You may make use of the Licensed Work, provided that you d
                       error-reporting or application monitoring features of the
                       Licensed Work.
 
-Change Date:          2026-03-22
+Change Date:          2024-01-15
 
 Change License:       Apache License, Version 2.0
 
diff --git a/README.md b/README.md
index e5be2af..f8c480d 100644
--- a/README.md
+++ b/README.md
@@ -1,81 +1,71 @@
-# Self-Hosted Sentry 23.3.1
+# Self-Hosted Sentry 21.1.0
 
 Official bootstrap for running your own [Sentry](https://sentry.io/) with [Docker](https://www.docker.com/).
 
 ## Requirements
 
-* Docker 19.03.6+
-* Compose 1.28.0+
-* 4 CPU Cores
-* 8 GB RAM
-* 20 GB Free Disk Space
+ * Docker 19.03.6+
+ * Compose 1.24.1+
+ * 8 GB RAM
 
 ## Setup
 
-### Installation
+To get started with all the defaults, simply clone the repo and run `./install.sh` in your local check-out. Sentry uses Python 3 by default since December 4th, 2020. If you want/need to stick with the Python 2 versions of the images, you can run `SENTRY_PYTHON2=1 ./install.sh` instead. Note that we are planning to end our Python 2 support completely by January 2021.
 
-To get started with all the defaults, simply clone the repo and run `./install.sh` in your local check-out. Please also read the section below about monitoring. Sentry uses Python 3 by default since December 4th, 2020 and Sentry 21.1.0 is the last version to support Python 2.
+During the install, a prompt will ask if you want to create a user account. If you require that the install not be blocked by the prompt, run `./install.sh --no-user-prompt`.
 
-During the install, a prompt will ask if you want to create a user account. If you require that the install not be blocked by the prompt, run `./install.sh --skip-user-prompt`.
+There may need to be modifications to the included example config files (`sentry/config.example.yml` and `sentry/sentry.conf.example.py`) to accommodate your needs or your environment (such as adding GitHub credentials). If you want to perform these, do them before you run the install script and copy them without the `.example` extensions in the name (such as `sentry/sentry.conf.py`) before running the `install.sh` script.
 
-Thinking of not managing this yourself? Check out the [SaaS migration docs](https://docs.sentry.io/product/sentry-basics/migration/) or [contact us](https://sentry.io/from/self-hosted) for help.
+The recommended way to customize your configuration is using the files below, in that order:
 
-Please visit [our documentation](https://develop.sentry.dev/self-hosted/) for everything else.
+ * `config.yml`
+ * `sentry.conf.py`
+ * `.env` w/ environment variables
 
-### Customize DotEnv (.env) file
+We currently support a very minimal set of environment variables to promote other means of configuration.
 
-Environment specific configurations can be done in the `.env.custom` file. It will be located in the root directory of the Sentry installation, and if it exists then `.env` will be ignored entirely.
+If you have any issues or questions, our [Community Forum](https://forum.sentry.io/c/on-premise) is at your service! Everytime you run the install script, it will generate a log file, `sentry_install_log-<ISO_TIMESTAMP>.txt` with the output. Sharing these logs would help people diagnose any issues you might be having.
 
-By default, there exists no `.env.custom` file. In this case, you can manually add this file by copying the `.env` file to a new `.env.custom` file and adjust your settings in the `.env.custom` file.
+## Versioning
 
-Please keep in mind to check the `.env` file for changes, when you perform an upgrade of Sentry, so that you can adjust your `.env.custom` accordingly, if required, as `.env` is ignored entirely if `.env.custom` is present.
-
-### Enhance Sentry image
+If you want to install a specific release of Sentry, use the tags/releases on this repo.
 
-To install plugins and their dependencies or make other modifications to the Sentry base image,
-copy `sentry/enhance-image.example.sh` to `sentry/enhance-image.sh` and add necessary steps there.
-For example, you can use `apt-get` to install dependencies and use `pip` to install plugins.
+We continously push the Docker image for each commit made into [Sentry](https://github.com/getsentry/sentry), and other services such as [Snuba](https://github.com/getsentry/snuba) or [Symbolicator](https://github.com/getsentry/symbolicator) to [our Docker Hub](https://hub.docker.com/u/getsentry) and tag the latest version on master as `:nightly`. This is also usually what we have on sentry.io and what the install script uses. You can use a custom Sentry image, such as a modified version that you have built on your own, or simply a specific commit hash by setting the `SENTRY_IMAGE` environment variable to that image name before running `./install.sh`:
 
-After making modifications to `sentry/enhance-image.sh`, run `./install.sh` again to apply them.
+```shell
+SENTRY_IMAGE=getsentry/sentry:83b1380 ./install.sh
+```
 
-## Tips & Tricks
+Note that this may not work for all commit SHAs as this repository evolves with Sentry and its satellite projects. It is highly recommended to check out a version of this repository that is close to the timestamp of the Sentry commit you are installing.
 
-### Event Retention
+## Event Retention
 
 Sentry comes with a cleanup cron job that prunes events older than `90 days` by default. If you want to change that, you can change the `SENTRY_EVENT_RETENTION_DAYS` environment variable in `.env` or simply override it in your environment. If you do not want the cleanup cron, you can remove the `sentry-cleanup` service from the `docker-compose.yml`file.
 
-### Installing a specific SHA
+## Securing Sentry with SSL/TLS
 
-If you want to install a specific release of Sentry, use the tags/releases on this repo.
+If you'd like to protect your Sentry install with SSL/TLS, there are
+fantastic SSL/TLS proxies like [HAProxy](http://www.haproxy.org/)
+and [Nginx](http://nginx.org/). Our recommendation is running and external Nginx instance or your choice of load balancer that does the TLS termination and more. Read more over at our [productionalizing self-hosted docs](https://develop.sentry.dev/self-hosted/#productionalizing).
 
-We continuously push the Docker image for each commit made into [Sentry](https://github.com/getsentry/sentry), and other services such as [Snuba](https://github.com/getsentry/snuba) or [Symbolicator](https://github.com/getsentry/symbolicator) to [our Docker Hub](https://hub.docker.com/u/getsentry) and tag the latest version on master as `:nightly`. This is also usually what we have on sentry.io and what the install script uses. You can use a custom Sentry image, such as a modified version that you have built on your own, or simply a specific commit hash by setting the `SENTRY_IMAGE` environment variable to that image name before running `./install.sh`:
+## Updating Sentry
 
-```shell
-SENTRY_IMAGE=getsentry/sentry:83b1380 ./install.sh
-```
-
-Note that this may not work for all commit SHAs as this repository evolves with Sentry and its satellite projects. It is highly recommended to check out a version of this repository that is close to the timestamp of the Sentry commit you are installing.
+_You need to be on at least Sentry 9.1.2 to be able to upgrade automatically to the latest version. If you are not, upgrade to 9.1.2 first by checking out the [9.1.2 tag](https://github.com/getsentry/onpremise/tree/9.1.2) on this repo._
 
-### Using Linux
+We recommend (and sometimes require) you to upgrade Sentry one version at a time. That means if you are running 20.6.0, instead of going directly to 20.8.0, first go through 20.7.0. Skipping versions would work most of the time, but there will be times that we require you to stop at specific versions to ensure essential data migrations along the way.
 
-If you are using Linux and you need to use `sudo` when running `./install.sh`, make sure to place the environment variable *after* `sudo`:
-
-```shell
-sudo SENTRY_IMAGE=us.gcr.io/sentryio/sentry:83b1380 ./install.sh
-```
+Pull the version of the repository that you wish to upgrade to by checking out the tagged release of this repo. Make sure to check for any difference between the example config files and your current config files in use. There might be new configuration that has to be added to your adjusted files such as feature flags or server configuration.
 
-Where you replace `83b1380` with the sha you want to use.
+The included `install.sh` script is meant to be idempotent and to bring you to the latest version. What this means is you can and should run `install.sh` to upgrade to the latest version available. Remember that the output of the script will be stored in a log file, `sentry_install_log-<ISO_TIMESTAMP>.txt`, which you may share for diagnosis if anything goes wrong.
 
-### Self-Hosted Monitoring
+For more information regarding updating your Sentry installation, please visit [our documentation](https://develop.sentry.dev/self-hosted/#upgrading).
 
-We'd love to catch errors in self-hosted so you don't run into them, and so we can fix them faster! When you run `./install.sh`, you will be prompted to select whether to opt in or out of our monitoring. If you opt into our monitoring, we will send information to our own self-hosted Sentry instance for development and debugging purposes. We may collect:
+## Resources
 
-- OS username
-- IP address
-- install log
-- runtime errors in Sentry
-- performance data
+ * [Documentation](https://develop.sentry.dev/self-hosted/)
+ * [Bug Tracker](https://github.com/getsentry/onpremise/issues)
+ * [Community Forums](https://forum.sentry.io/c/on-premise)
 
-Thirty (30) day retention. No marketing. Privacy policy at sentry.io/privacy.
 
-Starting with the 22.10.0 release in October, we will require those running the Sentry installer to choose to opt in or out. If you are running the installer under automation, you may want to set `REPORT_SELF_HOSTED_ISSUES` or pass `--(no-)report-self-hosted-issues` to the installer accordingly.
+[build-status-image]: https://github.com/getsentry/onpremise/workflows/test/badge.svg
+[build-status-url]: https://git.io/JUYkh
diff --git a/_integration-test/custom-ca-roots/docker-compose.test.yml b/_integration-test/custom-ca-roots/docker-compose.test.yml
deleted file mode 100644
index 2bc40ba..0000000
--- a/_integration-test/custom-ca-roots/docker-compose.test.yml
+++ /dev/null
@@ -1,12 +0,0 @@
-version: '3.4'
-services:
-  fixture-custom-ca-roots:
-    image: nginx:1.21.0-alpine
-    restart: unless-stopped
-    volumes:
-      - ./_integration-test/custom-ca-roots/nginx:/etc/nginx:ro
-    networks:
-      default:
-        aliases:
-          - self.test
-          - fail.test
diff --git a/_integration-test/custom-ca-roots/nginx/nginx.conf b/_integration-test/custom-ca-roots/nginx/nginx.conf
deleted file mode 100644
index 517aea4..0000000
--- a/_integration-test/custom-ca-roots/nginx/nginx.conf
+++ /dev/null
@@ -1,32 +0,0 @@
-user nginx;
-worker_processes 1;
-
-error_log /var/log/nginx/error.log warn;
-pid /var/run/nginx.pid;
-
-events {
-	worker_connections 1024;
-}
-
-http {
-  server {
-    listen               443 ssl;
-    server_name          "self.test";
-    ssl_certificate      "/etc/nginx/self.test.crt";
-    ssl_certificate_key  "/etc/nginx/self.test.key";
-    location / {
-      add_header Content-Type text/plain;
-      return 200 'ok';
-    }
-  }
-  server {
-    listen               443 ssl;
-    server_name          "fake.test";
-    ssl_certificate      "/etc/nginx/fake.test.crt";
-    ssl_certificate_key  "/etc/nginx/fake.test.key";
-    location / {
-      add_header Content-Type text/plain;
-      return 200 'bad';
-    }
-  }
-}
diff --git a/_integration-test/custom-ca-roots/setup.sh b/_integration-test/custom-ca-roots/setup.sh
deleted file mode 100644
index 7cb6dd4..0000000
--- a/_integration-test/custom-ca-roots/setup.sh
+++ /dev/null
@@ -1,45 +0,0 @@
-set -e
-export COMPOSE_FILE=docker-compose.yml:_integration-test/custom-ca-roots/docker-compose.test.yml
-
-TEST_NGINX_CONF_PATH=_integration-test/custom-ca-roots/nginx
-CUSTOM_CERTS_PATH=certificates
-
-# generate tightly constrained CA
-# NB: `-addext` requires LibreSSL 3.1.0+, or OpenSSL (brew install openssl)
-openssl req -x509 -new -nodes -newkey rsa:2048 -keyout $TEST_NGINX_CONF_PATH/ca.key \
-  -sha256 -days 1 -out $TEST_NGINX_CONF_PATH/ca.crt -batch \
-  -subj "/CN=TEST CA *DO NOT TRUST*" \
-  -addext "keyUsage = critical, keyCertSign, cRLSign" \
-  -addext "nameConstraints = critical, permitted;DNS:self.test"
-
-## Lines like the following are debug helpers ...
-# openssl x509 -in nginx/ca.crt -text -noout
-
-mkdir -p $CUSTOM_CERTS_PATH
-cp $TEST_NGINX_CONF_PATH/ca.crt $CUSTOM_CERTS_PATH/test-custom-ca-roots.crt
-
-# generate server certificate
-openssl req -new -nodes -newkey rsa:2048 -keyout $TEST_NGINX_CONF_PATH/self.test.key \
-  -addext "subjectAltName=DNS:self.test" \
-  -out $TEST_NGINX_CONF_PATH/self.test.req -batch -subj "/CN=Self Signed with CA Test Server"
-
-# openssl req -in nginx/self.test.req -text -noout
-
-openssl x509 -req -in $TEST_NGINX_CONF_PATH/self.test.req -CA $TEST_NGINX_CONF_PATH/ca.crt -CAkey $TEST_NGINX_CONF_PATH/ca.key \
-  -extfile <(printf "subjectAltName=DNS:self.test") \
-  -CAcreateserial -out $TEST_NGINX_CONF_PATH/self.test.crt -days 1 -sha256
-
-# openssl x509 -in nginx/self.test.crt -text -noout
-
-# sanity check that signed certificate passes OpenSSL's validation
-openssl verify -CAfile $TEST_NGINX_CONF_PATH/ca.crt $TEST_NGINX_CONF_PATH/self.test.crt
-
-# self signed certificate, for sanity check of not just accepting all certs
-openssl req -x509 -newkey rsa:2048 -nodes -days 1 -keyout $TEST_NGINX_CONF_PATH/fake.test.key \
-  -out $TEST_NGINX_CONF_PATH/fake.test.crt -addext "subjectAltName=DNS:fake.test" -subj "/CN=Self Signed Test Server"
-
-# openssl x509 -in nginx/fake.test.crt -text -noout
-
-cp _integration-test/custom-ca-roots/test.py sentry/test-custom-ca-roots.py
-
-$dc up -d fixture-custom-ca-roots
diff --git a/_integration-test/custom-ca-roots/teardown.sh b/_integration-test/custom-ca-roots/teardown.sh
deleted file mode 100644
index 8b89299..0000000
--- a/_integration-test/custom-ca-roots/teardown.sh
+++ /dev/null
@@ -1,3 +0,0 @@
-$dc rm -s -f -v fixture-custom-ca-roots
-rm -f certificates/test-custom-ca-roots.crt sentry/test-custom-ca-roots.py
-unset COMPOSE_FILE
diff --git a/_integration-test/custom-ca-roots/test.py b/_integration-test/custom-ca-roots/test.py
deleted file mode 100644
index 0f9b501..0000000
--- a/_integration-test/custom-ca-roots/test.py
+++ /dev/null
@@ -1,15 +0,0 @@
-import unittest
-import requests
-
-
-class CustomCATests(unittest.TestCase):
-    def test_valid_self_signed(self):
-        self.assertEqual(requests.get("https://self.test").text, 'ok')
-
-    def test_invalid_self_signed(self):
-        with self.assertRaises(requests.exceptions.SSLError):
-            requests.get("https://fail.test")
-
-
-if __name__ == '__main__':
-    unittest.main()
diff --git a/_integration-test/ensure-backup-restore-works.sh b/_integration-test/ensure-backup-restore-works.sh
deleted file mode 100755
index 881211d..0000000
--- a/_integration-test/ensure-backup-restore-works.sh
+++ /dev/null
@@ -1,34 +0,0 @@
-#!/usr/bin/env bash
-set -ex
-
-source install/_lib.sh
-source install/dc-detect-version.sh
-
-echo "${_group}Test that backup/restore works..."
-echo "Creating backup..."
-# Docker was giving me permissioning issues when trying to create this file and write to it even after giving read + write access
-# to group and owner. Instead, try creating the empty file and then give everyone write access to the backup file
-touch $(pwd)/sentry/backup.json
-chmod 666 $(pwd)/sentry/backup.json
-# Command here matches exactly what we have in our docs https://develop.sentry.dev/self-hosted/backup/#backup
-docker-compose run -v $(pwd)/sentry:/sentry-data/backup --rm -T -e SENTRY_LOG_LEVEL=CRITICAL web export /sentry-data/backup/backup.json
-# Check to make sure there is content in the file
-if [ ! -s "$(pwd)/sentry/backup.json" ]; then
-  echo "Backup file is empty"
-  exit 1
-fi
-
-# Bring postgres down and recreate the docker volume
-docker-compose stop postgres
-sleep 5
-docker-compose rm -f -v postgres
-docker volume rm sentry-postgres
-export SKIP_USER_CREATION=1
-source install/create-docker-volumes.sh
-source install/set-up-and-migrate-database.sh
-docker-compose up -d
-
-echo "Importing backup..."
-docker-compose run --rm -T web import /etc/sentry/backup.json
-
-rm $(pwd)/sentry/backup.json
diff --git a/_integration-test/ensure-customizations-not-present.sh b/_integration-test/ensure-customizations-not-present.sh
deleted file mode 100755
index 78939ae..0000000
--- a/_integration-test/ensure-customizations-not-present.sh
+++ /dev/null
@@ -1,13 +0,0 @@
-#!/usr/bin/env bash
-set -ex
-
-source install/_lib.sh
-source install/dc-detect-version.sh
-
-# Negated version of ensure-customizations-work.sh, make changes in sync
-echo "${_group}Ensure customizations not present"
-! $dcr --no-deps web bash -c "if [ ! -e /created-by-enhance-image ]; then exit 1; fi"
-! $dcr --no-deps --entrypoint=/etc/sentry/entrypoint.sh sentry-cleanup bash -c "if [ ! -e /created-by-enhance-image ]; then exit 1; fi"
-! $dcr --no-deps web python -c "import ldap"
-! $dcr --no-deps --entrypoint=/etc/sentry/entrypoint.sh sentry-cleanup python -c "import ldap"
-echo "${_endgroup}"
diff --git a/_integration-test/ensure-customizations-work.sh b/_integration-test/ensure-customizations-work.sh
deleted file mode 100755
index 674cf07..0000000
--- a/_integration-test/ensure-customizations-work.sh
+++ /dev/null
@@ -1,13 +0,0 @@
-#!/usr/bin/env bash
-set -ex
-
-source install/_lib.sh
-source install/dc-detect-version.sh
-
-# Negated version of ensure-customizations-not-present.sh, make changes in sync
-echo "${_group}Ensure customizations work"
-$dcr --no-deps web bash -c "if [ ! -e /created-by-enhance-image ]; then exit 1; fi"
-$dcr --no-deps --entrypoint=/etc/sentry/entrypoint.sh sentry-cleanup bash -c "if [ ! -e /created-by-enhance-image ]; then exit 1; fi"
-$dcr --no-deps web python -c "import ldap"
-$dcr --no-deps --entrypoint=/etc/sentry/entrypoint.sh sentry-cleanup python -c "import ldap"
-echo "${_endgroup}"
diff --git a/_integration-test/run.sh b/_integration-test/run.sh
deleted file mode 100755
index 338ba5c..0000000
--- a/_integration-test/run.sh
+++ /dev/null
@@ -1,151 +0,0 @@
-#!/usr/bin/env bash
-set -ex
-
-source install/_lib.sh
-source install/dc-detect-version.sh
-
-echo "${_group}Setting up variables and helpers ..."
-export SENTRY_TEST_HOST="${SENTRY_TEST_HOST:-http://localhost:9000}"
-TEST_USER='test@example.com'
-TEST_PASS='test123TEST'
-COOKIE_FILE=$(mktemp)
-
-# Courtesy of https://stackoverflow.com/a/2183063/90297
-trap_with_arg() {
-  func="$1"
-  shift
-  for sig; do
-    trap "$func $sig "'$LINENO' "$sig"
-  done
-}
-
-DID_TEAR_DOWN=0
-# the teardown function will be the exit point
-teardown() {
-  if [ "$DID_TEAR_DOWN" -eq 1 ]; then
-    return 0
-  fi
-  DID_TEAR_DOWN=1
-
-  if [ "$1" != "EXIT" ]; then
-    echo "An error occurred, caught SIG$1 on line $2"
-  fi
-
-  echo "Tearing down ..."
-  rm $COOKIE_FILE
-  echo "Done."
-}
-trap_with_arg teardown ERR INT TERM EXIT
-echo "${_endgroup}"
-
-echo "${_group}Starting Sentry for tests ..."
-# Disable beacon for e2e tests
-echo 'SENTRY_BEACON=False' >>$SENTRY_CONFIG_PY
-echo y | $dcr web createuser --force-update --superuser --email $TEST_USER --password $TEST_PASS
-$dc up -d
-printf "Waiting for Sentry to be up"
-timeout 90 bash -c 'until $(curl -Isf -o /dev/null $SENTRY_TEST_HOST); do printf '.'; sleep 0.5; done'
-echo ""
-echo "${_endgroup}"
-
-echo "${_group}Running tests ..."
-get_csrf_token() { awk '$6 == "sc" { print $7 }' $COOKIE_FILE; }
-sentry_api_request() { curl -s -H 'Accept: application/json; charset=utf-8' -H "Referer: $SENTRY_TEST_HOST" -H 'Content-Type: application/json' -H "X-CSRFToken: $(get_csrf_token)" -b "$COOKIE_FILE" -c "$COOKIE_FILE" "$SENTRY_TEST_HOST/api/0/$1" ${@:2}; }
-
-login() {
-  INITIAL_AUTH_REDIRECT=$(curl -sL -o /dev/null $SENTRY_TEST_HOST -w %{url_effective})
-  if [ "$INITIAL_AUTH_REDIRECT" != "$SENTRY_TEST_HOST/auth/login/sentry/" ]; then
-    echo "Initial /auth/login/ redirect failed, exiting..."
-    echo "$INITIAL_AUTH_REDIRECT"
-    exit 1
-  fi
-
-  CSRF_TOKEN_FOR_LOGIN=$(curl $SENTRY_TEST_HOST -sL -c "$COOKIE_FILE" | awk -F "['\"]" '
-    /csrfmiddlewaretoken/ {
-    print $4 "=" $6;
-    exit;
-  }')
-
-  curl -sL --data-urlencode 'op=login' --data-urlencode "username=$TEST_USER" --data-urlencode "password=$TEST_PASS" --data-urlencode "$CSRF_TOKEN_FOR_LOGIN" "$SENTRY_TEST_HOST/auth/login/sentry/" -H "Referer: $SENTRY_TEST_HOST/auth/login/sentry/" -b "$COOKIE_FILE" -c "$COOKIE_FILE"
-}
-
-LOGIN_RESPONSE=$(login)
-declare -a LOGIN_TEST_STRINGS=(
-  '"isAuthenticated":true'
-  '"username":"test@example.com"'
-  '"isSuperuser":true'
-)
-for i in "${LOGIN_TEST_STRINGS[@]}"; do
-  echo "Testing '$i'..."
-  echo "$LOGIN_RESPONSE" | grep "${i}[,}]" >&/dev/null
-  echo "Pass."
-done
-echo "${_endgroup}"
-
-echo "${_group}Running moar tests !!!"
-# Set up initial/required settings (InstallWizard request)
-sentry_api_request "internal/options/?query=is:required" -X PUT --data '{"mail.use-tls":false,"mail.username":"","mail.port":25,"system.admin-email":"ben@byk.im","mail.password":"","system.url-prefix":"'"$SENTRY_TEST_HOST"'","auth.allow-registration":false,"beacon.anonymous":true}' >/dev/null
-
-SENTRY_DSN=$(sentry_api_request "projects/sentry/internal/keys/" | awk 'BEGIN { RS=",|:{\n"; FS="\""; } $2 == "public" && $4 ~ "^http" { print $4; exit; }')
-# We ignore the protocol and the host as we already know those
-DSN_PIECES=($(echo $SENTRY_DSN | sed -ne 's|^https\{0,1\}://\([0-9a-z]\{1,\}\)@[^/]\{1,\}/\([0-9]\{1,\}\)$|\1 \2|p' | tr ' ' '\n'))
-SENTRY_KEY=${DSN_PIECES[0]}
-PROJECT_ID=${DSN_PIECES[1]}
-
-TEST_EVENT_ID=$(
-  export LC_ALL=C
-  head /dev/urandom | tr -dc "a-f0-9" | head -c 32
-)
-# Thanks @untitaker - https://forum.sentry.io/t/how-can-i-post-with-curl-a-sentry-event-which-authentication-credentials/4759/2?u=byk
-echo "Creating test event..."
-curl -sf --data '{"event_id": "'"$TEST_EVENT_ID"'","level":"error","message":"a failure","extra":{"object":"42"}}' -H 'Content-Type: application/json' -H "X-Sentry-Auth: Sentry sentry_version=7, sentry_key=$SENTRY_KEY, sentry_client=test-bash/0.1" "$SENTRY_TEST_HOST/api/$PROJECT_ID/store/" -o /dev/null
-
-EVENT_PATH="projects/sentry/internal/events/$TEST_EVENT_ID/"
-export -f sentry_api_request get_csrf_token
-export SENTRY_TEST_HOST COOKIE_FILE EVENT_PATH
-printf "Getting the test event back"
-timeout 60 bash -c 'until $(sentry_api_request "$EVENT_PATH" -Isf -X GET -o /dev/null); do printf '.'; sleep 0.5; done'
-echo " got it!"
-
-EVENT_RESPONSE=$(sentry_api_request "$EVENT_PATH")
-declare -a EVENT_TEST_STRINGS=(
-  '"eventID":"'"$TEST_EVENT_ID"'"'
-  '"message":"a failure"'
-  '"title":"a failure"'
-  '"object":"42"'
-)
-for i in "${EVENT_TEST_STRINGS[@]}"; do
-  echo "Testing '$i'..."
-  echo "$EVENT_RESPONSE" | grep "${i}[,}]" >&/dev/null
-  echo "Pass."
-done
-echo "${_endgroup}"
-
-echo "${_group}Ensure cleanup crons are working ..."
-$dc ps -a | tee debug.log | grep -E -e '\-cleanup\s+running\s+' -e '\-cleanup[_-].+\s+Up\s+'
-# to debug https://github.com/getsentry/self-hosted/issues/1171
-echo '------------------------------------------'
-cat debug.log
-echo '------------------------------------------'
-echo "${_endgroup}"
-
-echo "${_group}Test custom CAs work ..."
-source _integration-test/custom-ca-roots/setup.sh
-$dcr --no-deps web python3 /etc/sentry/test-custom-ca-roots.py
-source _integration-test/custom-ca-roots/teardown.sh
-echo "${_endgroup}"
-
-# Table formatting based on https://stackoverflow.com/a/39144364
-COMPOSE_PS_OUTPUT=$(docker compose ps --format json | jq -r \
-  '.[] |
-   # we only care about running services. geoipupdate always exits, so we ignore it
-   select(.State != "running" and .Service != "geoipupdate") |
-   # Filter to only show the service name and state
-   with_entries(select(.key | in({"Service":1, "State":1})))
- ')
-
-if [[ "$COMPOSE_PS_OUTPUT" ]]; then
-  echo "Services failed, oh no!"
-  echo "$COMPOSE_PS_OUTPUT" | jq -rs '["Service","State"], ["-------","-----"], (.[]|[.Service, .State]) | @tsv'
-  exit 1
-fi
diff --git a/_unit-test/_test_setup.sh b/_unit-test/_test_setup.sh
deleted file mode 100644
index 8572dd8..0000000
--- a/_unit-test/_test_setup.sh
+++ /dev/null
@@ -1,57 +0,0 @@
-set -euo pipefail
-
-source install/_lib.sh
-
-_ORIGIN=$(pwd)
-
-rm -rf /tmp/sentry-self-hosted-test-sandbox.*
-_SANDBOX="$(mktemp -d /tmp/sentry-self-hosted-test-sandbox.XXX)"
-
-source install/detect-platform.sh
-docker build -t sentry-self-hosted-jq-local --platform="$DOCKER_PLATFORM" jq
-
-report_success() {
-  echo "$(basename $0) - Success "
-}
-
-teardown() {
-  test "${DEBUG:-}" || rm -rf "$_SANDBOX"
-  cd "$_ORIGIN"
-}
-
-setup() {
-  # Clone the local repo into a temp dir. FWIW `git clone --local` breaks for
-  # me because it depends on hard-linking, which doesn't work across devices,
-  # and I happen to have my workspace and /tmp on separate devices.
-  git -c advice.detachedHead=false clone --depth=1 "file://$_ORIGIN" "$_SANDBOX"
-
-  # Now propagate any local changes from the working copy to the sandbox. This
-  # provides a pretty nice dev experience: edit the files in the working copy,
-  # then run `DEBUG=1 some-test.sh` to leave the sandbox up for interactive
-  # dev/debugging.
-  git status --porcelain | while read line; do
-    # $line here is something like `M some-script.sh`.
-
-    local filepath="$(cut -f2 -d' ' <(echo $line))"
-    local filestatus="$(cut -f1 -d' ' <(echo $line))"
-
-    case $filestatus in
-    D)
-      rm "$_SANDBOX/$filepath"
-      ;;
-    A | M | AM | ??)
-      ln -sf "$(realpath $filepath)" "$_SANDBOX/$filepath"
-      ;;
-    **)
-      echo "Wuh? $line"
-      exit 77
-      ;;
-    esac
-  done
-
-  cd "$_SANDBOX"
-
-  trap teardown EXIT
-}
-
-setup
diff --git a/_unit-test/create-docker-volumes-test.sh b/_unit-test/create-docker-volumes-test.sh
deleted file mode 100755
index 8893196..0000000
--- a/_unit-test/create-docker-volumes-test.sh
+++ /dev/null
@@ -1,31 +0,0 @@
-#!/usr/bin/env bash
-
-source _unit-test/_test_setup.sh
-
-get_volumes() {
-  # If grep returns no strings, we still want to return without error
-  docker volume ls --quiet | { grep '^sentry-.*' || true; } | sort
-}
-
-# Maybe they exist prior, maybe they don't. Script is idempotent.
-
-expected_volumes="sentry-clickhouse
-sentry-data
-sentry-kafka
-sentry-postgres
-sentry-redis
-sentry-symbolicator
-sentry-zookeeper"
-
-before=$(get_volumes)
-
-test "$before" == "" || test "$before" == "$expected_volumes"
-
-source install/create-docker-volumes.sh
-source install/create-docker-volumes.sh
-source install/create-docker-volumes.sh
-
-after=$(get_volumes)
-test "$after" == "$expected_volumes"
-
-report_success
diff --git a/_unit-test/ensure-relay-credentials-test.sh b/_unit-test/ensure-relay-credentials-test.sh
deleted file mode 100755
index e116675..0000000
--- a/_unit-test/ensure-relay-credentials-test.sh
+++ /dev/null
@@ -1,27 +0,0 @@
-#!/usr/bin/env bash
-
-source _unit-test/_test_setup.sh
-source install/dc-detect-version.sh
-
-# using _file format for these variables since there is a creds defined in dc-detect-version.sh
-cfg_file=relay/config.yml
-creds_file=relay/credentials.json
-
-# Relay files don't exist in a clean clone.
-test ! -f $cfg_file
-test ! -f $creds_file
-
-# Running the install script adds them.
-source install/ensure-relay-credentials.sh
-test -f $cfg_file
-test -f $creds_file
-test "$(jq -r 'keys[2]' "$creds_file")" = "secret_key"
-
-# If the files exist we don't touch it.
-echo GARBAGE >$cfg_file
-echo MOAR GARBAGE >$creds_file
-source install/ensure-relay-credentials.sh
-test "$(cat $cfg_file)" = "GARBAGE"
-test "$(cat $creds_file)" = "MOAR GARBAGE"
-
-report_success
diff --git a/_unit-test/error-handling-test.sh b/_unit-test/error-handling-test.sh
deleted file mode 100755
index 3cae1f0..0000000
--- a/_unit-test/error-handling-test.sh
+++ /dev/null
@@ -1,61 +0,0 @@
-#!/usr/bin/env bash
-
-source _unit-test/_test_setup.sh
-
-export REPORT_SELF_HOSTED_ISSUES=1
-
-# This is set up in dc-detect-version.sh, but for
-# our purposes we don't care about proxies.
-dbuild="docker build"
-source install/error-handling.sh
-
-# mock send_envelope
-send_envelope() {
-  echo "Test Sending $1"
-}
-
-export -f send_envelope
-echo "Testing initial send_event"
-export log_file=test_log.txt
-echo "Test Logs" >"$log_file"
-echo "Error Msg" >>"$log_file"
-breadcrumbs=$(generate_breadcrumb_json | sed '$d' | $jq -s -c)
-SEND_EVENT_RESPONSE=$(send_event "12345123451234512345123451234512" "Test exited with status 1" "{\"ignore\": \"me\"}" "$breadcrumbs")
-rm "$log_file"
-test "$SEND_EVENT_RESPONSE" == 'Test Sending sentry-envelope-12345123451234512345123451234512'
-ENVELOPE_CONTENTS=$(cat /tmp/sentry-envelope-12345123451234512345123451234512)
-test "$ENVELOPE_CONTENTS" == "$(cat _unit-test/snapshots/sentry-envelope-12345123451234512345123451234512)"
-echo "Pass."
-
-echo "Testing send_event duplicate"
-SEND_EVENT_RESPONSE=$(send_event "12345123451234512345123451234512" "Test exited with status 1" "{\"ignore\": \"me\"}" "$breadcrumbs")
-test "$SEND_EVENT_RESPONSE" == "Looks like you've already sent this error to us, we're on it :)"
-echo "Pass."
-rm '/tmp/sentry-envelope-12345123451234512345123451234512'
-
-echo "Testing cleanup without minimizing downtime"
-export REPORT_SELF_HOSTED_ISSUES=0
-export MINIMIZE_DOWNTIME=''
-export dc=':'
-echo "Test Logs" >"$log_file"
-CLEANUP_RESPONSE=$(cleanup ERROR)
-rm "$log_file"
-test "$CLEANUP_RESPONSE" == 'Error in _unit-test/error-handling-test.sh:41.
-'\''local cmd="${BASH_COMMAND}"'\'' exited with status 0
-
-Cleaning up...'
-echo "Pass."
-
-echo "Testing cleanup while minimizing downtime"
-export REPORT_SELF_HOSTED_ISSUES=0
-export MINIMIZE_DOWNTIME=1
-echo "Test Logs" >"$log_file"
-CLEANUP_RESPONSE=$(cleanup ERROR)
-rm "$log_file"
-test "$CLEANUP_RESPONSE" == 'Error in _unit-test/error-handling-test.sh:53.
-'\''local cmd="${BASH_COMMAND}"'\'' exited with status 0
-
-*NOT* cleaning up, to clean your environment run "docker compose stop".'
-echo "Pass."
-
-report_success
diff --git a/_unit-test/geoip-test.sh b/_unit-test/geoip-test.sh
deleted file mode 100755
index 64a78c7..0000000
--- a/_unit-test/geoip-test.sh
+++ /dev/null
@@ -1,17 +0,0 @@
-#!/usr/bin/env bash
-
-source _unit-test/_test_setup.sh
-
-mmdb=geoip/GeoLite2-City.mmdb
-
-# Starts with no mmdb, ends up with empty.
-test ! -f $mmdb
-source install/geoip.sh
-diff -rub $mmdb $mmdb.empty
-
-# Doesn't clobber existing, though.
-echo GARBAGE >$mmdb
-source install/geoip.sh
-test "$(cat $mmdb)" = "GARBAGE"
-
-report_success
diff --git a/_unit-test/snapshots/sentry-envelope-12345123451234512345123451234512 b/_unit-test/snapshots/sentry-envelope-12345123451234512345123451234512
deleted file mode 100644
index 1e08ae7..0000000
--- a/_unit-test/snapshots/sentry-envelope-12345123451234512345123451234512
+++ /dev/null
@@ -1,6 +0,0 @@
-{"event_id":"12345123451234512345123451234512","dsn":"https://19555c489ded4769978daae92f2346ca@self-hosted.getsentry.net/3"}
-{"type":"event"}
-{"level":"error","exception":{"values":[{"type":"Error","value":"Test exited with status 1","stacktrace":{"frames":[{"ignore":"me"}]}}]},"breadcrumbs":{"values":[{"message":"Test Logs","category":"log","level":"info"}]}}
-{"type":"attachment","length":20,"content_type":"text/plain","filename":"install_log.txt"}
-Test Logs
-Error Msg
diff --git a/certificates/.gitignore b/certificates/.gitignore
deleted file mode 100644
index 30d0607..0000000
--- a/certificates/.gitignore
+++ /dev/null
@@ -1,3 +0,0 @@
-# Add all custom CAs in this folder
-*
-!.gitignore
diff --git a/clickhouse/Dockerfile b/clickhouse/Dockerfile
deleted file mode 100644
index 4e841c0..0000000
--- a/clickhouse/Dockerfile
+++ /dev/null
@@ -1,2 +0,0 @@
-ARG BASE_IMAGE
-FROM ${BASE_IMAGE}
diff --git a/clickhouse/config.xml b/clickhouse/config.xml
index 58ab862..55cdbbd 100644
--- a/clickhouse/config.xml
+++ b/clickhouse/config.xml
@@ -1,10 +1,5 @@
 <yandex>
-    <max_server_memory_usage_to_ram_ratio>
-        <!-- This include is important!
-         It is required for the version of Clickhouse
-         used on ARM to read the environment variable. -->
-        <include from_env="MAX_MEMORY_USAGE_RATIO"/>
-    </max_server_memory_usage_to_ram_ratio>
+    <max_server_memory_usage_to_ram_ratio from_env="MAX_MEMORY_USAGE_RATIO" />
     <logger>
         <level>information</level>
         <console>1</console>
diff --git a/cron/Dockerfile b/cron/Dockerfile
index edb6407..0e6e76e 100644
--- a/cron/Dockerfile
+++ b/cron/Dockerfile
@@ -1,8 +1,5 @@
 ARG BASE_IMAGE
 FROM ${BASE_IMAGE}
-USER 0
-RUN if [ -z "${http_proxy}" ]; then echo "Acquire::http::proxy \"${http_proxy}\";" >> /etc/apt/apt.conf; fi
-RUN if [ -z "${https_proxy}" ]; then echo "Acquire::https::proxy \"${https_proxy}\";" >> /etc/apt/apt.conf; fi
 RUN apt-get update && apt-get install -y --no-install-recommends cron && \
     rm -r /var/lib/apt/lists/*
 COPY entrypoint.sh /entrypoint.sh
diff --git a/cron/entrypoint.sh b/cron/entrypoint.sh
index d69d4ac..baa833a 100755
--- a/cron/entrypoint.sh
+++ b/cron/entrypoint.sh
@@ -1,19 +1,15 @@
 #!/usr/bin/env bash
 
-if [ "$(ls -A /usr/local/share/ca-certificates/)" ]; then
-  update-ca-certificates
-fi
-
 # Prior art:
-# - https://github.com/renskiy/cron-docker-image/blob/5600db37acf841c6d7a8b4f3866741bada5b4622/debian/start-cron#L34-L36
+# - https://git.io/fjNOg
 # - https://blog.knoldus.com/running-a-cron-job-in-docker-container/
 
-declare -p | grep -Ev 'BASHOPTS|BASH_VERSINFO|EUID|PPID|SHELLOPTS|UID' >/container.env
+declare -p | grep -Ev 'BASHOPTS|BASH_VERSINFO|EUID|PPID|SHELLOPTS|UID' > /container.env
 
 { for cron_job in "$@"; do echo -e "SHELL=/bin/bash
 BASH_ENV=/container.env
-${cron_job} > /proc/1/fd/1 2>/proc/1/fd/2"; done; } |
-  sed --regexp-extended 's/\\(.)/\1/g' |
-  crontab -
+${cron_job} > /proc/1/fd/1 2>/proc/1/fd/2"; done } \
+  | sed --regexp-extended 's/\\(.)/\1/g' \
+  | crontab -
 crontab -l
 exec cron -f -l -L 15
diff --git a/docker-compose.yml b/docker-compose.yml
index 72d37e7..160ae62 100644
--- a/docker-compose.yml
+++ b/docker-compose.yml
@@ -1,212 +1,123 @@
+version: '3.4'
 x-restart-policy: &restart_policy
   restart: unless-stopped
-x-depends_on-healthy: &depends_on-healthy
-  condition: service_healthy
-x-depends_on-default: &depends_on-default
-  condition: service_started
-x-healthcheck-defaults: &healthcheck_defaults
-  # Avoid setting the interval too small, as docker uses much more CPU than one would expect.
-  # Related issues:
-  # https://github.com/moby/moby/issues/39102
-  # https://github.com/moby/moby/issues/39388
-  # https://github.com/getsentry/self-hosted/issues/1000
-  interval: "$HEALTHCHECK_INTERVAL"
-  timeout: "$HEALTHCHECK_TIMEOUT"
-  retries: $HEALTHCHECK_RETRIES
-  start_period: 10s
 x-sentry-defaults: &sentry_defaults
-  <<: *restart_policy
-  image: sentry-self-hosted-local
-  # Set the platform to build for linux/arm64 when needed on Apple silicon Macs.
-  platform: ${DOCKER_PLATFORM:-}
+  << : *restart_policy
   build:
     context: ./sentry
     args:
       - SENTRY_IMAGE
+      - SENTRY_PYTHON2
+  image: sentry-onpremise-local
   depends_on:
-    redis:
-      <<: *depends_on-healthy
-    kafka:
-      <<: *depends_on-healthy
-    postgres:
-      <<: *depends_on-healthy
-    memcached:
-      <<: *depends_on-default
-    smtp:
-      <<: *depends_on-default
-    snuba-api:
-      <<: *depends_on-default
-    snuba-consumer:
-      <<: *depends_on-default
-    snuba-outcomes-consumer:
-      <<: *depends_on-default
-    snuba-sessions-consumer:
-      <<: *depends_on-default
-    snuba-transactions-consumer:
-      <<: *depends_on-default
-    snuba-subscription-consumer-events:
-      <<: *depends_on-default
-    snuba-subscription-consumer-transactions:
-      <<: *depends_on-default
-    snuba-replacer:
-      <<: *depends_on-default
-    symbolicator:
-      <<: *depends_on-default
-  entrypoint: "/etc/sentry/entrypoint.sh"
-  command: ["run", "web"]
+    - redis
+    - postgres
+    - memcached
+    - smtp
+    - snuba-api
+    - snuba-consumer
+    - snuba-outcomes-consumer
+    - snuba-sessions-consumer
+    - snuba-transactions-consumer
+    - snuba-replacer
+    - symbolicator
+    - kafka
   environment:
-    PYTHONUSERBASE: "/data/custom-packages"
-    SENTRY_CONF: "/etc/sentry"
-    SNUBA: "http://snuba-api:1218"
-    # Force everything to use the system CA bundle
-    # This is mostly needed to support installing custom CA certs
-    # This one is used by botocore
-    DEFAULT_CA_BUNDLE: &ca_bundle "/etc/ssl/certs/ca-certificates.crt"
-    # This one is used by requests
-    REQUESTS_CA_BUNDLE: *ca_bundle
-    # This one is used by grpc/google modules
-    GRPC_DEFAULT_SSL_ROOTS_FILE_PATH_ENV_VAR: *ca_bundle
+    SENTRY_CONF: '/etc/sentry'
+    SNUBA: 'http://snuba-api:1218'
     # Leaving the value empty to just pass whatever is set
     # on the host system (or in the .env file)
     SENTRY_EVENT_RETENTION_DAYS:
-    SENTRY_MAIL_HOST:
   volumes:
-    - "sentry-data:/data"
-    - "./sentry:/etc/sentry"
-    - "./geoip:/geoip:ro"
-    - "./certificates:/usr/local/share/ca-certificates:ro"
+    - 'sentry-data:/data'
+    - './sentry:/etc/sentry'
+    - './geoip:/geoip:ro'
 x-snuba-defaults: &snuba_defaults
-  <<: *restart_policy
+  << : *restart_policy
   depends_on:
-    clickhouse:
-      <<: *depends_on-healthy
-    kafka:
-      <<: *depends_on-healthy
-    redis:
-      <<: *depends_on-healthy
-  image: "$SNUBA_IMAGE"
+    - redis
+    - clickhouse
+    - kafka
+  image: '$SNUBA_IMAGE'
   environment:
     SNUBA_SETTINGS: docker
     CLICKHOUSE_HOST: clickhouse
-    DEFAULT_BROKERS: "kafka:9092"
+    DEFAULT_BROKERS: 'kafka:9092'
     REDIS_HOST: redis
-    UWSGI_MAX_REQUESTS: "10000"
-    UWSGI_DISABLE_LOGGING: "true"
+    UWSGI_MAX_REQUESTS: '10000'
+    UWSGI_DISABLE_LOGGING: 'true'
     # Leaving the value empty to just pass whatever is set
     # on the host system (or in the .env file)
     SENTRY_EVENT_RETENTION_DAYS:
 services:
   smtp:
-    <<: *restart_policy
+    << : *restart_policy
     image: tianon/exim4
-    hostname: "${SENTRY_MAIL_HOST:-}"
     volumes:
-      - "sentry-smtp:/var/spool/exim4"
-      - "sentry-smtp-log:/var/log/exim4"
+      - 'sentry-smtp:/var/spool/exim4'
+      - 'sentry-smtp-log:/var/log/exim4'
   memcached:
-    <<: *restart_policy
-    image: "memcached:1.6.9-alpine"
-    healthcheck:
-      <<: *healthcheck_defaults
-      # From: https://stackoverflow.com/a/31877626/5155484
-      test: echo stats | nc 127.0.0.1 11211
+    << : *restart_policy
+    image: 'memcached:1.5-alpine'
   redis:
-    <<: *restart_policy
-    image: "redis:6.2.10-alpine"
-    healthcheck:
-      <<: *healthcheck_defaults
-      test: redis-cli ping
+    << : *restart_policy
+    image: 'redis:5.0-alpine'
     volumes:
-      - "sentry-redis:/data"
+      - 'sentry-redis:/data'
     ulimits:
       nofile:
         soft: 10032
         hard: 10032
   postgres:
-    <<: *restart_policy
-    image: "postgres:9.6"
-    healthcheck:
-      <<: *healthcheck_defaults
-      # Using default user "postgres" from sentry/sentry.conf.example.py or value of POSTGRES_USER if provided
-      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER:-postgres}"]
-    command:
-      [
-        "postgres",
-        "-c",
-        "wal_level=logical",
-        "-c",
-        "max_replication_slots=1",
-        "-c",
-        "max_wal_senders=1",
-      ]
+    << : *restart_policy
+    image: 'postgres:9.6'
     environment:
-      POSTGRES_HOST_AUTH_METHOD: "trust"
-    entrypoint: /opt/sentry/postgres-entrypoint.sh
+      POSTGRES_HOST_AUTH_METHOD: 'trust'
     volumes:
-      - "sentry-postgres:/var/lib/postgresql/data"
-      - type: bind
-        read_only: true
-        source: ./postgres/
-        target: /opt/sentry/
+      - 'sentry-postgres:/var/lib/postgresql/data'
   zookeeper:
-    <<: *restart_policy
-    image: "confluentinc/cp-zookeeper:5.5.7"
+    << : *restart_policy
+    image: 'confluentinc/cp-zookeeper:5.5.0'
     environment:
-      ZOOKEEPER_CLIENT_PORT: "2181"
-      CONFLUENT_SUPPORT_METRICS_ENABLE: "false"
-      ZOOKEEPER_LOG4J_ROOT_LOGLEVEL: "WARN"
-      ZOOKEEPER_TOOLS_LOG4J_LOGLEVEL: "WARN"
-      KAFKA_OPTS: "-Dzookeeper.4lw.commands.whitelist=ruok"
+      ZOOKEEPER_CLIENT_PORT: '2181'
+      CONFLUENT_SUPPORT_METRICS_ENABLE: 'false'
+      ZOOKEEPER_LOG4J_ROOT_LOGLEVEL: 'WARN'
+      ZOOKEEPER_TOOLS_LOG4J_LOGLEVEL: 'WARN'
     volumes:
-      - "sentry-zookeeper:/var/lib/zookeeper/data"
-      - "sentry-zookeeper-log:/var/lib/zookeeper/log"
-      - "sentry-secrets:/etc/zookeeper/secrets"
-    healthcheck:
-      <<: *healthcheck_defaults
-      test:
-        ["CMD-SHELL", 'echo "ruok" | nc -w 2 -q 2 localhost 2181 | grep imok']
+      - 'sentry-zookeeper:/var/lib/zookeeper/data'
+      - 'sentry-zookeeper-log:/var/lib/zookeeper/log'
+      - 'sentry-secrets:/etc/zookeeper/secrets'
   kafka:
-    <<: *restart_policy
+    << : *restart_policy
     depends_on:
-      zookeeper:
-        <<: *depends_on-healthy
-    image: "confluentinc/cp-kafka:5.5.7"
+      - zookeeper
+    image: 'confluentinc/cp-kafka:5.5.0'
     environment:
-      KAFKA_ZOOKEEPER_CONNECT: "zookeeper:2181"
-      KAFKA_ADVERTISED_LISTENERS: "PLAINTEXT://kafka:9092"
-      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: "1"
-      KAFKA_OFFSETS_TOPIC_NUM_PARTITIONS: "1"
-      KAFKA_LOG_RETENTION_HOURS: "24"
-      KAFKA_MESSAGE_MAX_BYTES: "50000000" #50MB or bust
-      KAFKA_MAX_REQUEST_SIZE: "50000000" #50MB on requests apparently too
-      CONFLUENT_SUPPORT_METRICS_ENABLE: "false"
-      KAFKA_LOG4J_LOGGERS: "kafka.cluster=WARN,kafka.controller=WARN,kafka.coordinator=WARN,kafka.log=WARN,kafka.server=WARN,kafka.zookeeper=WARN,state.change.logger=WARN"
-      KAFKA_LOG4J_ROOT_LOGLEVEL: "WARN"
-      KAFKA_TOOLS_LOG4J_LOGLEVEL: "WARN"
+      KAFKA_ZOOKEEPER_CONNECT: 'zookeeper:2181'
+      KAFKA_ADVERTISED_LISTENERS: 'PLAINTEXT://kafka:9092'
+      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: '1'
+      KAFKA_OFFSETS_TOPIC_NUM_PARTITIONS: '1'
+      KAFKA_LOG_RETENTION_HOURS: '24'
+      KAFKA_MESSAGE_MAX_BYTES: '50000000' #50MB or bust
+      KAFKA_MAX_REQUEST_SIZE: '50000000' #50MB on requests apparently too
+      CONFLUENT_SUPPORT_METRICS_ENABLE: 'false'
+      KAFKA_LOG4J_LOGGERS: 'kafka.cluster=WARN,kafka.controller=WARN,kafka.coordinator=WARN,kafka.log=WARN,kafka.server=WARN,kafka.zookeeper=WARN,state.change.logger=WARN'
+      KAFKA_LOG4J_ROOT_LOGLEVEL: 'WARN'
+      KAFKA_TOOLS_LOG4J_LOGLEVEL: 'WARN'
     volumes:
-      - "sentry-kafka:/var/lib/kafka/data"
-      - "sentry-kafka-log:/var/lib/kafka/log"
-      - "sentry-secrets:/etc/kafka/secrets"
-    healthcheck:
-      <<: *healthcheck_defaults
-      test: ["CMD-SHELL", "nc -z localhost 9092"]
-      interval: 10s
-      timeout: 10s
-      retries: 30
+      - 'sentry-kafka:/var/lib/kafka/data'
+      - 'sentry-kafka-log:/var/lib/kafka/log'
+      - 'sentry-secrets:/etc/kafka/secrets'
   clickhouse:
-    <<: *restart_policy
-    image: clickhouse-self-hosted-local
-    build:
-      context: ./clickhouse
-      args:
-        BASE_IMAGE: "${CLICKHOUSE_IMAGE:-}"
+    << : *restart_policy
+    image: 'yandex/clickhouse-server:20.3.9.70'
     ulimits:
       nofile:
         soft: 262144
         hard: 262144
     volumes:
-      - "sentry-clickhouse:/var/lib/clickhouse"
-      - "sentry-clickhouse-log:/var/log/clickhouse-server"
+      - 'sentry-clickhouse:/var/lib/clickhouse'
+      - 'sentry-clickhouse-log:/var/log/clickhouse-server'
       - type: bind
         read_only: true
         source: ./clickhouse/config.xml
@@ -216,142 +127,116 @@ services:
       # If you have high volume and your search return incomplete results
       # You might want to change this to a higher value (and ensure your host has enough memory)
       MAX_MEMORY_USAGE_RATIO: 0.3
-    healthcheck:
-      test: [
-          "CMD-SHELL",
-          # Manually override any http_proxy envvar that might be set, because
-          # this wget does not support no_proxy. See:
-          # https://github.com/getsentry/self-hosted/issues/1537
-          "http_proxy='' wget -nv -t1 --spider 'http://localhost:8123/' || exit 1",
-        ]
-      interval: 10s
-      timeout: 10s
-      retries: 30
   geoipupdate:
-    image: "maxmindinc/geoipupdate:v4.7.1"
+    image: 'maxmindinc/geoipupdate:latest'
     # Override the entrypoint in order to avoid using envvars for config.
     # Futz with settings so we can keep mmdb and conf in same dir on host
     # (image looks for them in separate dirs by default).
-    entrypoint:
-      ["/usr/bin/geoipupdate", "-d", "/sentry", "-f", "/sentry/GeoIP.conf"]
+    entrypoint: ['/usr/bin/geoipupdate', '-d', '/sentry', '-f', '/sentry/GeoIP.conf']
     volumes:
-      - "./geoip:/sentry"
+      - './geoip:/sentry'
   snuba-api:
-    <<: *snuba_defaults
+    << : *snuba_defaults
   # Kafka consumer responsible for feeding events into Clickhouse
   snuba-consumer:
-    <<: *snuba_defaults
-    command: consumer --storage errors --auto-offset-reset=latest --max-batch-time-ms 750
+    << : *snuba_defaults
+    command: consumer --storage events --auto-offset-reset=latest --max-batch-time-ms 750
   # Kafka consumer responsible for feeding outcomes into Clickhouse
   # Use --auto-offset-reset=earliest to recover up to 7 days of TSDB data
   # since we did not do a proper migration
   snuba-outcomes-consumer:
-    <<: *snuba_defaults
+    << : *snuba_defaults
     command: consumer --storage outcomes_raw --auto-offset-reset=earliest --max-batch-time-ms 750
   # Kafka consumer responsible for feeding session data into Clickhouse
   snuba-sessions-consumer:
-    <<: *snuba_defaults
+    << : *snuba_defaults
     command: consumer --storage sessions_raw --auto-offset-reset=latest --max-batch-time-ms 750
   # Kafka consumer responsible for feeding transactions data into Clickhouse
   snuba-transactions-consumer:
-    <<: *snuba_defaults
-    command: consumer --storage transactions --consumer-group transactions_group --auto-offset-reset=latest --max-batch-time-ms 750
-  snuba-replays-consumer:
-    <<: *snuba_defaults
-    command: consumer --storage replays --auto-offset-reset=latest --max-batch-time-ms 750
+    << : *snuba_defaults
+    command: consumer --storage transactions --consumer-group transactions_group --auto-offset-reset=latest --max-batch-time-ms 750 --commit-log-topic=snuba-commit-log
   snuba-replacer:
-    <<: *snuba_defaults
-    command: replacer --storage errors --auto-offset-reset=latest
+    << : *snuba_defaults
+    command: replacer --storage events --auto-offset-reset=latest --max-batch-size 3
   snuba-subscription-consumer-events:
-    <<: *snuba_defaults
-    command: subscriptions-scheduler-executor --dataset events --entity events --auto-offset-reset=latest --no-strict-offset-reset --consumer-group=snuba-events-subscriptions-consumers --followed-consumer-group=snuba-consumers --delay-seconds=60 --schedule-ttl=60 --stale-threshold-seconds=900
-  snuba-subscription-consumer-sessions:
-    <<: *snuba_defaults
-    command: subscriptions-scheduler-executor --dataset sessions --entity sessions --auto-offset-reset=latest --no-strict-offset-reset --consumer-group=snuba-sessions-subscriptions-consumers --followed-consumer-group=sessions-group --delay-seconds=60 --schedule-ttl=60 --stale-threshold-seconds=900
+    << : *snuba_defaults
+    command: subscriptions --auto-offset-reset=latest --consumer-group=snuba-events-subscriptions-consumers --topic=events --result-topic=events-subscription-results --dataset=events --commit-log-topic=snuba-commit-log --commit-log-group=snuba-consumers --delay-seconds=60 --schedule-ttl=60
   snuba-subscription-consumer-transactions:
-    <<: *snuba_defaults
-    command: subscriptions-scheduler-executor --dataset transactions --entity transactions --auto-offset-reset=latest --no-strict-offset-reset --consumer-group=snuba-transactions-subscriptions-consumers --followed-consumer-group=transactions_group --delay-seconds=60 --schedule-ttl=60 --stale-threshold-seconds=900
+    << : *snuba_defaults
+    command: subscriptions --auto-offset-reset=latest --consumer-group=snuba-transactions-subscriptions-consumers --topic=events --result-topic=transactions-subscription-results --dataset=transactions --commit-log-topic=snuba-commit-log --commit-log-group=transactions_group --delay-seconds=60 --schedule-ttl=60
+  snuba-cleanup:
+    << : *snuba_defaults
+    image: snuba-cleanup-onpremise-local
+    build:
+      context: ./cron
+      args:
+        BASE_IMAGE: '$SNUBA_IMAGE'
+    command: '"*/5 * * * * gosu snuba snuba cleanup --dry-run False"'
   symbolicator:
-    <<: *restart_policy
-    image: "$SYMBOLICATOR_IMAGE"
+    << : *restart_policy
+    image: '$SYMBOLICATOR_IMAGE'
     volumes:
-      - "sentry-symbolicator:/data"
+      - 'sentry-symbolicator:/data'
       - type: bind
         read_only: true
         source: ./symbolicator
         target: /etc/symbolicator
     command: run -c /etc/symbolicator/config.yml
   symbolicator-cleanup:
-    <<: *restart_policy
-    image: symbolicator-cleanup-self-hosted-local
+    << : *restart_policy
+    image: symbolicator-cleanup-onpremise-local
     build:
       context: ./cron
       args:
-        BASE_IMAGE: "$SYMBOLICATOR_IMAGE"
+        BASE_IMAGE: '$SYMBOLICATOR_IMAGE'
     command: '"55 23 * * * gosu symbolicator symbolicator cleanup"'
     volumes:
-      - "sentry-symbolicator:/data"
+      - 'sentry-symbolicator:/data'
   web:
-    <<: *sentry_defaults
-    healthcheck:
-      <<: *healthcheck_defaults
-      test:
-        - "CMD"
-        - "/bin/bash"
-        - "-c"
-        # Courtesy of https://unix.stackexchange.com/a/234089/108960
-        - 'exec 3<>/dev/tcp/127.0.0.1/9000 && echo -e "GET /_health/ HTTP/1.1\r\nhost: 127.0.0.1\r\n\r\n" >&3 && grep ok -s -m 1 <&3'
+    << : *sentry_defaults
   cron:
-    <<: *sentry_defaults
+    << : *sentry_defaults
     command: run cron
   worker:
-    <<: *sentry_defaults
+    << : *sentry_defaults
     command: run worker
   ingest-consumer:
-    <<: *sentry_defaults
+    << : *sentry_defaults
     command: run ingest-consumer --all-consumer-types
-  ingest-replay-recordings:
-    <<: *sentry_defaults
-    command: run ingest-replay-recordings
-  post-process-forwarder-errors:
-    <<: *sentry_defaults
-    command: run post-process-forwarder --entity errors
-
-  post-process-forwarder-transactions:
-    <<: *sentry_defaults
-    command: run post-process-forwarder --entity transactions --commit-log-topic=snuba-transactions-commit-log --synchronize-commit-group transactions_group
+  post-process-forwarder:
+    << : *sentry_defaults
+    # Increase `--commit-batch-size 1` below to deal with high-load environments.
+    command: run post-process-forwarder --commit-batch-size 1
   subscription-consumer-events:
-    <<: *sentry_defaults
+    << : *sentry_defaults
     command: run query-subscription-consumer --commit-batch-size 1 --topic events-subscription-results
   subscription-consumer-transactions:
-    <<: *sentry_defaults
+    << : *sentry_defaults
     command: run query-subscription-consumer --commit-batch-size 1 --topic transactions-subscription-results
   sentry-cleanup:
-    <<: *sentry_defaults
-    image: sentry-cleanup-self-hosted-local
+    << : *sentry_defaults
+    image: sentry-cleanup-onpremise-local
     build:
       context: ./cron
       args:
-        BASE_IMAGE: sentry-self-hosted-local
-    entrypoint: "/entrypoint.sh"
+        BASE_IMAGE: 'sentry-onpremise-local'
     command: '"0 0 * * * gosu sentry sentry cleanup --days $SENTRY_EVENT_RETENTION_DAYS"'
   nginx:
-    <<: *restart_policy
+    << : *restart_policy
     ports:
-      - "$SENTRY_BIND:80/tcp"
-    image: "nginx:1.22.0-alpine"
+      - '$SENTRY_BIND:80/tcp'
+    image: 'nginx:1.16'
     volumes:
       - type: bind
         read_only: true
         source: ./nginx
         target: /etc/nginx
-      - sentry-nginx-cache:/var/cache/nginx
     depends_on:
       - web
       - relay
   relay:
-    <<: *restart_policy
-    image: "$RELAY_IMAGE"
+    << : *restart_policy
+    image: '$RELAY_IMAGE'
     volumes:
       - type: bind
         read_only: true
@@ -362,14 +247,9 @@ services:
         source: ./geoip
         target: /geoip
     depends_on:
-      kafka:
-        <<: *depends_on-healthy
-      redis:
-        <<: *depends_on-healthy
-      web:
-        <<: *depends_on-healthy
+      - kafka
+      - redis
 volumes:
-  # These store application data that should persist across restarts.
   sentry-data:
     external: true
   sentry-postgres:
@@ -384,11 +264,8 @@ volumes:
     external: true
   sentry-symbolicator:
     external: true
-
-  # These store ephemeral data that needn't persist across restarts.
   sentry-secrets:
   sentry-smtp:
-  sentry-nginx-cache:
   sentry-zookeeper-log:
   sentry-kafka-log:
   sentry-smtp-log:
diff --git a/foo b/foo
new file mode 100644
index 0000000..e69de29
diff --git a/install.sh b/install.sh
index c9f8674..58deecb 100755
--- a/install.sh
+++ b/install.sh
@@ -1,35 +1,354 @@
 #!/usr/bin/env bash
-set -eE
+set -e
 
-# Pre-pre-flight? 
 if [[ -n "$MSYSTEM" ]]; then
-  echo "Seems like you are using an MSYS2-based system (such as Git Bash) which is not supported. Please use WSL instead."
+  echo "Seems like you are using an MSYS2-based system (such as Git Bash) which is not supported. Please use WSL instead.";
   exit 1
 fi
 
-source install/_lib.sh
+# Read .env for default values with a tip o' the hat to https://stackoverflow.com/a/59831605/90297
+t=$(mktemp) && export -p > "$t" && set -a && . ./.env && set +a && . "$t" && rm "$t" && unset t
 
-# Pre-flight. No impact yet.
-source install/parse-cli.sh
-source install/detect-platform.sh
-source install/dc-detect-version.sh
-source install/error-handling.sh
-# We set the trap at the top level so that we get better tracebacks.
+source ./install/docker-aliases.sh
+
+# Thanks to https://unix.stackexchange.com/a/145654/108960
+log_file="sentry_install_log-`date +'%Y-%m-%d_%H-%M-%S'`.txt"
+exec &> >(tee -a "$log_file")
+
+MIN_DOCKER_VERSION='19.03.6'
+MIN_COMPOSE_VERSION='1.24.1'
+MIN_RAM_HARD=4000 # MB
+MIN_RAM_SOFT=8000 # MB
+
+# Increase the default 10 second SIGTERM timeout
+# to ensure celery queues are properly drained
+# between upgrades as task signatures may change across
+# versions
+STOP_TIMEOUT=60 # seconds
+SENTRY_CONFIG_PY='sentry/sentry.conf.py'
+SENTRY_CONFIG_YML='sentry/config.yml'
+SYMBOLICATOR_CONFIG_YML='symbolicator/config.yml'
+RELAY_CONFIG_YML='relay/config.yml'
+RELAY_CREDENTIALS_JSON='relay/credentials.json'
+SENTRY_EXTRA_REQUIREMENTS='sentry/requirements.txt'
+MINIMIZE_DOWNTIME=
+
+show_help() {
+  cat <<EOF
+Usage: $0 [options]
+
+Install Sentry with docker-compose.
+
+Options:
+ -h, --help             Show this message and exit.
+ --no-user-prompt       Skips the initial user creation prompt (ideal for non-interactive installs).
+ --minimize-downtime    EXPERIMENTAL: try to keep accepting events for as long as possible while upgrading.
+                        This will disable cleanup on error, and might leave your installation in partially upgraded state.
+                        This option might not reload all configuration, and is only meant for in-place upgrades.
+EOF
+}
+
+while (( $# )); do
+  case "$1" in
+    -h | --help) show_help; exit;;
+    --no-user-prompt) SKIP_USER_PROMPT=1;;
+    --minimize-downtime) MINIMIZE_DOWNTIME=1;;
+    --) ;;
+    *) echo "Unexpected argument: $1. Use --help for usage information."; exit 1;;
+  esac
+  shift
+done
+
+# Courtesy of https://stackoverflow.com/a/2183063/90297
+trap_with_arg() {
+  func="$1" ; shift
+  for sig ; do
+    trap "$func $sig "'$LINENO' "$sig"
+  done
+}
+
+DID_CLEAN_UP=0
+# the cleanup function will be the exit point
+cleanup () {
+  if [[ "$DID_CLEAN_UP" -eq 1 ]]; then
+    return 0;
+  fi
+  DID_CLEAN_UP=1
+
+  if [[ "$1" != "EXIT" ]]; then
+    echo "An error occurred, caught SIG$1 on line $2";
+
+    if [[ -n "$MINIMIZE_DOWNTIME" ]]; then
+      echo "*NOT* cleaning up, to clean your environment run \"docker-compose stop\"."
+    else
+      echo "Cleaning up..."
+    fi
+  fi
+
+  if [[ -z "$MINIMIZE_DOWNTIME" ]]; then
+    $dc stop -t $STOP_TIMEOUT &> /dev/null
+  fi
+}
 trap_with_arg cleanup ERR INT TERM EXIT
-source install/check-latest-commit.sh
-source install/check-minimum-requirements.sh
-
-# Let's go! Start impacting things.
-source install/turn-things-off.sh
-source install/create-docker-volumes.sh
-source install/ensure-files-from-examples.sh
-source install/ensure-relay-credentials.sh
-source install/generate-secret-key.sh
-source install/update-docker-images.sh
-source install/build-docker-images.sh
-source install/install-wal2json.sh
-source install/bootstrap-snuba.sh
-source install/create-kafka-topics.sh
-source install/set-up-and-migrate-database.sh
-source install/geoip.sh
-source install/wrap-up.sh
+
+
+echo "Checking minimum requirements..."
+
+DOCKER_VERSION=$(docker version --format '{{.Server.Version}}')
+COMPOSE_VERSION=$($dc --version | sed 's/docker-compose version \(.\{1,\}\),.*/\1/')
+RAM_AVAILABLE_IN_DOCKER=$(docker run --rm busybox free -m 2>/dev/null | awk '/Mem/ {print $2}');
+
+# Compare dot-separated strings - function below is inspired by https://stackoverflow.com/a/37939589/808368
+function ver () { echo "$@" | awk -F. '{ printf("%d%03d%03d", $1,$2,$3); }'; }
+
+# Thanks to https://stackoverflow.com/a/25123013/90297 for the quick `sed` pattern
+function ensure_file_from_example {
+  if [[ -f "$1" ]]; then
+    echo "$1 already exists, skipped creation."
+  else
+    echo "Creating $1..."
+    cp -n $(echo "$1" | sed 's/\.[^.]*$/.example&/') "$1"
+  fi
+}
+
+if [[ "$(ver $DOCKER_VERSION)" -lt "$(ver $MIN_DOCKER_VERSION)" ]]; then
+  echo "FAIL: Expected minimum Docker version to be $MIN_DOCKER_VERSION but found $DOCKER_VERSION"
+  exit 1
+fi
+
+if [[ "$(ver $COMPOSE_VERSION)" -lt "$(ver $MIN_COMPOSE_VERSION)" ]]; then
+  echo "FAIL: Expected minimum docker-compose version to be $MIN_COMPOSE_VERSION but found $COMPOSE_VERSION"
+  exit 1
+fi
+
+if [[ "$RAM_AVAILABLE_IN_DOCKER" -lt "$MIN_RAM_HARD" ]]; then
+  echo "FAIL: Required minimum RAM available to Docker is $MIN_RAM_HARD MB, found $RAM_AVAILABLE_IN_DOCKER MB"
+  exit 1
+elif [[ "$RAM_AVAILABLE_IN_DOCKER" -lt "$MIN_RAM_SOFT" ]]; then
+  echo "WARN: Recommended minimum RAM available to Docker is $MIN_RAM_SOFT MB, found $RAM_AVAILABLE_IN_DOCKER MB"
+fi
+
+#SSE4.2 required by Clickhouse (https://clickhouse.yandex/docs/en/operations/requirements/)
+# On KVM, cpuinfo could falsely not report SSE 4.2 support, so skip the check. https://github.com/ClickHouse/ClickHouse/issues/20#issuecomment-226849297
+IS_KVM=$(docker run --rm busybox grep -c 'Common KVM processor' /proc/cpuinfo || :)
+if [[ "$IS_KVM" -eq 0 ]]; then
+  SUPPORTS_SSE42=$(docker run --rm busybox grep -c sse4_2 /proc/cpuinfo || :)
+  if [[ "$SUPPORTS_SSE42" -eq 0 ]]; then
+    echo "FAIL: The CPU your machine is running on does not support the SSE 4.2 instruction set, which is required for one of the services Sentry uses (Clickhouse). See https://git.io/JvLDt for more info."
+    exit 1
+  fi
+fi
+
+echo ""
+echo "Creating volumes for persistent storage..."
+echo "Created $(docker volume create --name=sentry-data)."
+echo "Created $(docker volume create --name=sentry-postgres)."
+echo "Created $(docker volume create --name=sentry-redis)."
+echo "Created $(docker volume create --name=sentry-zookeeper)."
+echo "Created $(docker volume create --name=sentry-kafka)."
+echo "Created $(docker volume create --name=sentry-clickhouse)."
+echo "Created $(docker volume create --name=sentry-symbolicator)."
+
+echo ""
+ensure_file_from_example $SENTRY_CONFIG_PY
+ensure_file_from_example $SENTRY_CONFIG_YML
+ensure_file_from_example $SENTRY_EXTRA_REQUIREMENTS
+ensure_file_from_example $SYMBOLICATOR_CONFIG_YML
+ensure_file_from_example $RELAY_CONFIG_YML
+
+if grep -xq "system.secret-key: '!!changeme!!'" $SENTRY_CONFIG_YML ; then
+  echo ""
+  echo "Generating secret key..."
+  # This is to escape the secret key to be used in sed below
+  # Note the need to set LC_ALL=C due to BSD tr and sed always trying to decode
+  # whatever is passed to them. Kudos to https://stackoverflow.com/a/23584470/90297
+  SECRET_KEY=$(export LC_ALL=C; head /dev/urandom | tr -dc "a-z0-9@#%^&*(-_=+)" | head -c 50 | sed -e 's/[\/&]/\\&/g')
+  sed -i -e 's/^system.secret-key:.*$/system.secret-key: '"'$SECRET_KEY'"'/' $SENTRY_CONFIG_YML
+  echo "Secret key written to $SENTRY_CONFIG_YML"
+fi
+
+replace_tsdb() {
+  if (
+    [[ -f "$SENTRY_CONFIG_PY" ]] &&
+    ! grep -xq 'SENTRY_TSDB = "sentry.tsdb.redissnuba.RedisSnubaTSDB"' "$SENTRY_CONFIG_PY"
+  ); then
+    # Do NOT indent the following string as it would be reflected in the end result,
+    # breaking the final config file. See getsentry/onpremise#624.
+    tsdb_settings="\
+SENTRY_TSDB = \"sentry.tsdb.redissnuba.RedisSnubaTSDB\"
+
+# Automatic switchover 90 days after $(date). Can be removed afterwards.
+SENTRY_TSDB_OPTIONS = {\"switchover_timestamp\": $(date +%s) + (90 * 24 * 3600)}\
+"
+
+    if grep -q 'SENTRY_TSDB_OPTIONS = ' "$SENTRY_CONFIG_PY"; then
+      echo "Not attempting automatic TSDB migration due to presence of SENTRY_TSDB_OPTIONS"
+    else
+      echo "Attempting to automatically migrate to new TSDB"
+      # Escape newlines for sed
+      tsdb_settings="${tsdb_settings//$'\n'/\\n}"
+      cp "$SENTRY_CONFIG_PY" "$SENTRY_CONFIG_PY.bak"
+      sed -i -e "s/^SENTRY_TSDB = .*$/${tsdb_settings}/g" "$SENTRY_CONFIG_PY" || true
+
+      if grep -xq 'SENTRY_TSDB = "sentry.tsdb.redissnuba.RedisSnubaTSDB"' "$SENTRY_CONFIG_PY"; then
+        echo "Migrated TSDB to Snuba. Old configuration file backed up to $SENTRY_CONFIG_PY.bak"
+        return
+      fi
+
+      echo "Failed to automatically migrate TSDB. Reverting..."
+      mv "$SENTRY_CONFIG_PY.bak" "$SENTRY_CONFIG_PY"
+      echo "$SENTRY_CONFIG_PY restored from backup."
+    fi
+
+    echo "WARN: Your Sentry configuration uses a legacy data store for time-series data. Remove the options SENTRY_TSDB and SENTRY_TSDB_OPTIONS from $SENTRY_CONFIG_PY and add:"
+    echo ""
+    echo "$tsdb_settings"
+    echo ""
+    echo "For more information please refer to https://github.com/getsentry/onpremise/pull/430"
+  fi
+}
+
+replace_tsdb
+
+echo ""
+echo "Fetching and updating Docker images..."
+echo ""
+# We tag locally built images with an '-onpremise-local' suffix. docker-compose pull tries to pull these too and
+# shows a 404 error on the console which is confusing and unnecessary. To overcome this, we add the stderr>stdout
+# redirection below and pass it through grep, ignoring all lines having this '-onpremise-local' suffix.
+$dc pull -q --ignore-pull-failures 2>&1 | grep -v -- -onpremise-local || true
+
+# We may not have the set image on the repo (local images) so allow fails
+docker pull ${SENTRY_IMAGE}${SENTRY_PYTHON2:+-py2} || true;
+
+echo ""
+echo "Building and tagging Docker images..."
+echo ""
+# Build the sentry onpremise image first as it is needed for the cron image
+$dc build --force-rm web
+$dc build --force-rm --parallel
+echo ""
+echo "Docker images built."
+
+if [[ -n "$MINIMIZE_DOWNTIME" ]]; then
+  # Stop everything but relay and nginx
+  $dc rm -fsv $($dc config --services | grep -v -E '^(nginx|relay)$')
+else
+  # Clean up old stuff and ensure nothing is working while we install/update
+  # This is for older versions of on-premise:
+  $dc -p onpremise down -t $STOP_TIMEOUT --rmi local --remove-orphans
+  # This is for newer versions
+  $dc down -t $STOP_TIMEOUT --rmi local --remove-orphans
+fi
+
+ZOOKEEPER_SNAPSHOT_FOLDER_EXISTS=$($dcr zookeeper bash -c 'ls 2>/dev/null -Ubad1 -- /var/lib/zookeeper/data/version-2 | wc -l | tr -d '[:space:]'')
+if [[ "$ZOOKEEPER_SNAPSHOT_FOLDER_EXISTS" -eq 1 ]]; then
+  ZOOKEEPER_LOG_FILE_COUNT=$($dcr zookeeper bash -c 'ls 2>/dev/null -Ubad1 -- /var/lib/zookeeper/log/version-2/* | wc -l | tr -d '[:space:]'')
+  ZOOKEEPER_SNAPSHOT_FILE_COUNT=$($dcr zookeeper bash -c 'ls 2>/dev/null -Ubad1 -- /var/lib/zookeeper/data/version-2/* | wc -l | tr -d '[:space:]'')
+  # This is a workaround for a ZK upgrade bug: https://issues.apache.org/jira/browse/ZOOKEEPER-3056
+  if [[ "$ZOOKEEPER_LOG_FILE_COUNT" -gt 0 ]] && [[ "$ZOOKEEPER_SNAPSHOT_FILE_COUNT" -eq 0 ]]; then
+    $dcr -v $(pwd)/zookeeper:/temp zookeeper bash -c 'cp /temp/snapshot.0 /var/lib/zookeeper/data/version-2/snapshot.0'
+    $dc run -d -e ZOOKEEPER_SNAPSHOT_TRUST_EMPTY=true zookeeper
+  fi
+fi
+
+echo "Bootstrapping and migrating Snuba..."
+$dcr snuba-api bootstrap --no-migrate --force
+$dcr snuba-api migrations migrate --force
+echo ""
+
+# NOTE: This step relies on `kafka` being available from the previous `snuba-api bootstrap` step
+# XXX(BYK): We cannot use auto.create.topics as Confluence and Apache hates it now (and makes it very hard to enable)
+EXISTING_KAFKA_TOPICS=$($dcr kafka kafka-topics --list --bootstrap-server kafka:9092 2>/dev/null)
+NEEDED_KAFKA_TOPICS="ingest-attachments ingest-transactions ingest-events"
+for topic in $NEEDED_KAFKA_TOPICS; do
+  if ! echo "$EXISTING_KAFKA_TOPICS" | grep -wq $topic; then
+    echo "Creating additional Kafka topics..."
+    $dcr kafka kafka-topics --create --topic $topic --bootstrap-server kafka:9092
+    echo ""
+  fi
+done
+
+# Very naively check whether there's an existing sentry-postgres volume and the PG version in it
+if [[ -n "$(docker volume ls -q --filter name=sentry-postgres)" && "$(docker run --rm -v sentry-postgres:/db busybox cat /db/PG_VERSION 2>/dev/null)" == "9.5" ]]; then
+  docker volume rm sentry-postgres-new || true
+  # If this is Postgres 9.5 data, start upgrading it to 9.6 in a new volume
+  docker run --rm \
+  -v sentry-postgres:/var/lib/postgresql/9.5/data \
+  -v sentry-postgres-new:/var/lib/postgresql/9.6/data \
+  tianon/postgres-upgrade:9.5-to-9.6
+
+  # Get rid of the old volume as we'll rename the new one to that
+  docker volume rm sentry-postgres
+  docker volume create --name sentry-postgres
+  # There's no rename volume in Docker so copy the contents from old to new name
+  # Also append the `host all all all trust` line as `tianon/postgres-upgrade:9.5-to-9.6`
+  # doesn't do that automatically.
+  docker run --rm -v sentry-postgres-new:/from -v sentry-postgres:/to alpine ash -c \
+    "cd /from ; cp -av . /to ; echo 'host all all all trust' >> /to/pg_hba.conf"
+  # Finally, remove the new old volume as we are all in sentry-postgres now
+  docker volume rm sentry-postgres-new
+fi
+
+echo ""
+echo "Setting up database..."
+if [[ -n "$CI" || "$SKIP_USER_PROMPT" == 1 ]]; then
+  $dcr web upgrade --noinput
+  echo ""
+  echo "Did not prompt for user creation due to non-interactive shell."
+  echo "Run the following command to create one yourself (recommended):"
+  echo ""
+  echo "  docker-compose run --rm web createuser"
+  echo ""
+else
+  $dcr web upgrade
+fi
+
+
+SENTRY_DATA_NEEDS_MIGRATION=$(docker run --rm -v sentry-data:/data alpine ash -c "[ ! -d '/data/files' ] && ls -A1x /data | wc -l || true")
+if [[ -n "$SENTRY_DATA_NEEDS_MIGRATION" ]]; then
+  echo "Migrating file storage..."
+  # Use the web (Sentry) image so the file owners are kept as sentry:sentry
+  # The `\"` escape pattern is to make this compatible w/ Git Bash on Windows. See #329.
+  $dcr --entrypoint \"/bin/bash\" web -c \
+    "mkdir -p /tmp/files; mv /data/* /tmp/files/; mv /tmp/files /data/files; chown -R sentry:sentry /data"
+fi
+
+
+if [[ ! -f "$RELAY_CREDENTIALS_JSON" ]]; then
+  echo ""
+  echo "Generating Relay credentials..."
+
+  # We need the ugly hack below as `relay generate credentials` tries to read the config and the credentials
+  # even with the `--stdout` and `--overwrite` flags and then errors out when the credentials file exists but
+  # not valid JSON. We hit this case as we redirect output to the same config folder, creating an empty
+  # credentials file before relay runs.
+  $dcr --no-deps -v $(pwd)/$RELAY_CONFIG_YML:/tmp/config.yml relay --config /tmp credentials generate --stdout > "$RELAY_CREDENTIALS_JSON"
+  echo "Relay credentials written to $RELAY_CREDENTIALS_JSON"
+fi
+
+
+source ./install/geoip.sh
+
+
+if [[ "$MINIMIZE_DOWNTIME" ]]; then
+  # Start the whole setup, except nginx and relay.
+  $dc up -d --remove-orphans $($dc config --services | grep -v -E '^(nginx|relay)$')
+  $dc exec -T nginx service nginx reload
+
+  echo "Waiting for Sentry to start..."
+  docker run --rm --network="${COMPOSE_PROJECT_NAME}_default" alpine ash \
+    -c 'while [[ "$(wget -T 1 -q -O- http://web:9000/_health/)" != "ok" ]]; do sleep 0.5; done'
+
+  # Make sure everything is up. This should only touch relay and nginx
+  $dc up -d
+else
+  echo ""
+  echo "----------------"
+  echo "You're all done! Run the following command to get Sentry running:"
+  echo ""
+  echo "  docker-compose up -d"
+  echo ""
+fi
+
+source ./install/py2-warning.sh
diff --git a/install/_lib.sh b/install/_lib.sh
deleted file mode 100644
index 3a76d86..0000000
--- a/install/_lib.sh
+++ /dev/null
@@ -1,55 +0,0 @@
-set -euo pipefail
-test "${DEBUG:-}" && set -x
-
-# Override any user-supplied umask that could cause problems, see #1222
-umask 002
-
-# Thanks to https://unix.stackexchange.com/a/145654/108960
-log_file=sentry_install_log-$(date +'%Y-%m-%d_%H-%M-%S').txt
-exec &> >(tee -a "$log_file")
-
-# Allow `.env` overrides using the `.env.custom` file.
-# We pass this to docker compose in a couple places.
-if [[ -f .env.custom ]]; then
-  _ENV=.env.custom
-else
-  _ENV=.env
-fi
-
-# Read .env for default values with a tip o' the hat to https://stackoverflow.com/a/59831605/90297
-t=$(mktemp) && export -p >"$t" && set -a && . $_ENV && set +a && . "$t" && rm "$t" && unset t
-
-if [ "${GITHUB_ACTIONS:-}" = "true" ]; then
-  _group="::group::"
-  _endgroup="::endgroup::"
-else
-  _group=" "
-  _endgroup=""
-fi
-
-# A couple of the config files are referenced from other subscripts, so they
-# get vars, while multiple subscripts call ensure_file_from_example.
-function ensure_file_from_example {
-  target="$1"
-  if [[ -f "$target" ]]; then
-    echo "$target already exists, skipped creation."
-  else
-    # sed from https://stackoverflow.com/a/25123013/90297
-    example="$(echo "$target" | sed 's/\.[^.]*$/.example&/')"
-    if [[ ! -f "$example" ]]; then
-      echo "Oops! Where did $example go?  We need it in order to create $target."
-      exit
-    fi
-    echo "Creating $target ..."
-    cp -n "$example" "$target"
-  fi
-}
-
-SENTRY_CONFIG_PY=sentry/sentry.conf.py
-SENTRY_CONFIG_YML=sentry/config.yml
-
-# Increase the default 10 second SIGTERM timeout
-# to ensure celery queues are properly drained
-# between upgrades as task signatures may change across
-# versions
-STOP_TIMEOUT=60 # seconds
diff --git a/install/_min-requirements.sh b/install/_min-requirements.sh
deleted file mode 100644
index fb1b8a1..0000000
--- a/install/_min-requirements.sh
+++ /dev/null
@@ -1,7 +0,0 @@
-# Don't forget to update the README and othes docs when you change these!
-MIN_DOCKER_VERSION='19.03.6'
-MIN_COMPOSE_VERSION='1.28.0'
-MIN_RAM_HARD=3800 # MB
-MIN_RAM_SOFT=7800 # MB
-MIN_CPU_HARD=2
-MIN_CPU_SOFT=4
diff --git a/install/bootstrap-snuba.sh b/install/bootstrap-snuba.sh
deleted file mode 100644
index 2952ed0..0000000
--- a/install/bootstrap-snuba.sh
+++ /dev/null
@@ -1,6 +0,0 @@
-echo "${_group}Bootstrapping and migrating Snuba ..."
-
-$dcr snuba-api bootstrap --no-migrate --force
-$dcr snuba-api migrations migrate --force
-
-echo "${_endgroup}"
diff --git a/install/build-docker-images.sh b/install/build-docker-images.sh
deleted file mode 100644
index c793b9e..0000000
--- a/install/build-docker-images.sh
+++ /dev/null
@@ -1,14 +0,0 @@
-echo "${_group}Building and tagging Docker images ..."
-
-echo ""
-# Build any service that provides the image sentry-self-hosted-local first,
-# as it is used as the base image for sentry-cleanup-self-hosted-local.
-$dcb --force-rm web
-# Build each other service individually to localize potential failures better.
-for service in $($dc config --services); do
-  $dcb --force-rm "$service"
-done
-echo ""
-echo "Docker images built."
-
-echo "${_endgroup}"
diff --git a/install/check-latest-commit.sh b/install/check-latest-commit.sh
deleted file mode 100644
index cf3acb2..0000000
--- a/install/check-latest-commit.sh
+++ /dev/null
@@ -1,15 +0,0 @@
-echo "${_group}Checking for latest commit ... "
-
-# Checks if we are on latest commit from github if it is running from master branch
-if [[ -d "../.git" && "${SKIP_COMMIT_CHECK:-0}" != 1 ]]; then
-  if [[ $(git branch | sed -n '/\* /s///p') == "master" ]]; then
-    if [[ $(git rev-parse HEAD) != $(git ls-remote $(git rev-parse --abbrev-ref @{u} | sed 's/\// /g') | cut -f1) ]]; then
-      echo "Seems like you are not using the latest commit from the self-hosted repository. Please pull the latest changes and try again, or suppress this check with --skip-commit-check."
-      exit 1
-    fi
-  fi
-else
-  echo "skipped"
-fi
-
-echo "${_endgroup}"
diff --git a/install/check-minimum-requirements.sh b/install/check-minimum-requirements.sh
deleted file mode 100644
index 01488e8..0000000
--- a/install/check-minimum-requirements.sh
+++ /dev/null
@@ -1,63 +0,0 @@
-echo "${_group}Checking minimum requirements ..."
-
-source install/_min-requirements.sh
-
-# Check the version of $1 is greater than or equal to $2 using sort. Note: versions must be stripped of "v"
-function vergte() {
-  printf "%s\n%s" $1 $2 | sort --version-sort --check=quiet --reverse
-  echo $?
-}
-
-DOCKER_VERSION=$(docker version --format '{{.Server.Version}}' || echo '')
-if [[ -z "$DOCKER_VERSION" ]]; then
-  echo "FAIL: Unable to get docker version, is the docker daemon running?"
-  exit 1
-fi
-
-if [[ "$(vergte ${DOCKER_VERSION//v/} $MIN_DOCKER_VERSION)" -eq 1 ]]; then
-  echo "FAIL: Expected minimum docker version to be $MIN_DOCKER_VERSION but found $DOCKER_VERSION"
-  exit 1
-fi
-echo "Found Docker version $DOCKER_VERSION"
-
-COMPOSE_VERSION=$($dc_base version --short || echo '')
-if [[ -z "$COMPOSE_VERSION" ]]; then
-  echo "FAIL: Docker compose is required to run self-hosted"
-  exit 1
-fi
-
-if [[ "$(vergte ${COMPOSE_VERSION//v/} $MIN_COMPOSE_VERSION)" -eq 1 ]]; then
-  echo "FAIL: Expected minimum $dc_base version to be $MIN_COMPOSE_VERSION but found $COMPOSE_VERSION"
-  exit 1
-fi
-echo "Found Docker Compose version $COMPOSE_VERSION"
-
-CPU_AVAILABLE_IN_DOCKER=$(docker run --rm busybox nproc --all)
-if [[ "$CPU_AVAILABLE_IN_DOCKER" -lt "$MIN_CPU_HARD" ]]; then
-  echo "FAIL: Required minimum CPU cores available to Docker is $MIN_CPU_HARD, found $CPU_AVAILABLE_IN_DOCKER"
-  exit 1
-elif [[ "$CPU_AVAILABLE_IN_DOCKER" -lt "$MIN_CPU_SOFT" ]]; then
-  echo "WARN: Recommended minimum CPU cores available to Docker is $MIN_CPU_SOFT, found $CPU_AVAILABLE_IN_DOCKER"
-fi
-
-RAM_AVAILABLE_IN_DOCKER=$(docker run --rm busybox free -m 2>/dev/null | awk '/Mem/ {print $2}')
-if [[ "$RAM_AVAILABLE_IN_DOCKER" -lt "$MIN_RAM_HARD" ]]; then
-  echo "FAIL: Required minimum RAM available to Docker is $MIN_RAM_HARD MB, found $RAM_AVAILABLE_IN_DOCKER MB"
-  exit 1
-elif [[ "$RAM_AVAILABLE_IN_DOCKER" -lt "$MIN_RAM_SOFT" ]]; then
-  echo "WARN: Recommended minimum RAM available to Docker is $MIN_RAM_SOFT MB, found $RAM_AVAILABLE_IN_DOCKER MB"
-fi
-
-#SSE4.2 required by Clickhouse (https://clickhouse.yandex/docs/en/operations/requirements/)
-# On KVM, cpuinfo could falsely not report SSE 4.2 support, so skip the check. https://github.com/ClickHouse/ClickHouse/issues/20#issuecomment-226849297
-# This may also happen on other virtualization software such as on VMWare ESXi hosts.
-IS_KVM=$(docker run --rm busybox grep -c 'Common KVM processor' /proc/cpuinfo || :)
-if [[ ! "$SKIP_SSE42_REQUIREMENTS" -eq 1 && "$IS_KVM" -eq 0 && "$DOCKER_ARCH" = "x86_64" ]]; then
-  SUPPORTS_SSE42=$(docker run --rm busybox grep -c sse4_2 /proc/cpuinfo || :)
-  if [[ "$SUPPORTS_SSE42" -eq 0 ]]; then
-    echo "FAIL: The CPU your machine is running on does not support the SSE 4.2 instruction set, which is required for one of the services Sentry uses (Clickhouse). See https://github.com/getsentry/self-hosted/issues/340 for more info."
-    exit 1
-  fi
-fi
-
-echo "${_endgroup}"
diff --git a/install/create-docker-volumes.sh b/install/create-docker-volumes.sh
deleted file mode 100644
index ca3ef0b..0000000
--- a/install/create-docker-volumes.sh
+++ /dev/null
@@ -1,11 +0,0 @@
-echo "${_group}Creating volumes for persistent storage ..."
-
-echo "Created $(docker volume create --name=sentry-clickhouse)."
-echo "Created $(docker volume create --name=sentry-data)."
-echo "Created $(docker volume create --name=sentry-kafka)."
-echo "Created $(docker volume create --name=sentry-postgres)."
-echo "Created $(docker volume create --name=sentry-redis)."
-echo "Created $(docker volume create --name=sentry-symbolicator)."
-echo "Created $(docker volume create --name=sentry-zookeeper)."
-
-echo "${_endgroup}"
diff --git a/install/create-kafka-topics.sh b/install/create-kafka-topics.sh
deleted file mode 100644
index 78534ac..0000000
--- a/install/create-kafka-topics.sh
+++ /dev/null
@@ -1,14 +0,0 @@
-echo "${_group}Creating additional Kafka topics ..."
-
-# NOTE: This step relies on `kafka` being available from the previous `snuba-api bootstrap` step
-# XXX(BYK): We cannot use auto.create.topics as Confluence and Apache hates it now (and makes it very hard to enable)
-EXISTING_KAFKA_TOPICS=$($dcr -T kafka kafka-topics --list --bootstrap-server kafka:9092 2>/dev/null)
-NEEDED_KAFKA_TOPICS="ingest-attachments ingest-transactions ingest-events ingest-replay-recordings"
-for topic in $NEEDED_KAFKA_TOPICS; do
-  if ! echo "$EXISTING_KAFKA_TOPICS" | grep -wq $topic; then
-    $dcr kafka kafka-topics --create --topic $topic --bootstrap-server kafka:9092
-    echo ""
-  fi
-done
-
-echo "${_endgroup}"
diff --git a/install/dc-detect-version.sh b/install/dc-detect-version.sh
deleted file mode 100644
index 6f67988..0000000
--- a/install/dc-detect-version.sh
+++ /dev/null
@@ -1,23 +0,0 @@
-if [ "${GITHUB_ACTIONS:-}" = "true" ]; then
-  _group="::group::"
-  _endgroup="::endgroup::"
-else
-  _group=" "
-  _endgroup=""
-fi
-
-echo "${_group}Initializing Docker Compose ..."
-
-# Some environments still use `docker-compose` even for Docker Compose v2.
-dc_base="$(docker compose version &>/dev/null && echo 'docker compose' || echo 'docker-compose')"
-if [[ "$(basename $0)" = "install.sh" ]]; then
-  dc="$dc_base --ansi never --env-file ${_ENV}"
-else
-  dc="$dc_base --ansi never"
-fi
-proxy_args="--build-arg http_proxy=${http_proxy:-} --build-arg https_proxy=${https_proxy:-} --build-arg no_proxy=${no_proxy:-}"
-dcr="$dc run --rm"
-dcb="$dc build $proxy_args"
-dbuild="docker build $proxy_args"
-
-echo "${_endgroup}"
diff --git a/install/detect-platform.sh b/install/detect-platform.sh
deleted file mode 100644
index 13aa70f..0000000
--- a/install/detect-platform.sh
+++ /dev/null
@@ -1,29 +0,0 @@
-echo "${_group}Detecting Docker platform"
-
-# Sentry SaaS uses stock Yandex ClickHouse, but they don't provide images that
-# support ARM, which is relevant especially for Apple M1 laptops, Sentry's
-# standard developer environment. As a workaround, we use an altinity image
-# targeting ARM.
-#
-# See https://github.com/getsentry/self-hosted/issues/1385#issuecomment-1101824274
-#
-# Images built on ARM also need to be tagged to use linux/arm64 on Apple
-# silicon Macs to work around an issue where they are built for
-# linux/amd64 by default due to virtualization.
-# See https://github.com/docker/cli/issues/3286 for the Docker bug.
-
-export DOCKER_ARCH=$(docker info --format '{{.Architecture}}')
-
-if [[ "$DOCKER_ARCH" = "x86_64" ]]; then
-  export DOCKER_PLATFORM="linux/amd64"
-  export CLICKHOUSE_IMAGE="yandex/clickhouse-server:20.3.9.70"
-elif [[ "$DOCKER_ARCH" = "aarch64" ]]; then
-  export DOCKER_PLATFORM="linux/arm64"
-  export CLICKHOUSE_IMAGE="altinity/clickhouse-server:21.6.1.6734-testing-arm"
-else
-  echo "FAIL: Unsupported docker architecture $DOCKER_ARCH."
-  exit 1
-fi
-echo "Detected Docker platform is $DOCKER_PLATFORM"
-
-echo "${_endgroup}"
diff --git a/install/docker-aliases.sh b/install/docker-aliases.sh
new file mode 100755
index 0000000..e19384b
--- /dev/null
+++ b/install/docker-aliases.sh
@@ -0,0 +1,3 @@
+#!/usr/bin/env bash
+dc="docker-compose --no-ansi"
+dcr="$dc run --rm"
diff --git a/install/ensure-files-from-examples.sh b/install/ensure-files-from-examples.sh
deleted file mode 100644
index 97a7ed9..0000000
--- a/install/ensure-files-from-examples.sh
+++ /dev/null
@@ -1,7 +0,0 @@
-echo "${_group}Ensuring files from examples ..."
-
-ensure_file_from_example "$SENTRY_CONFIG_PY"
-ensure_file_from_example "$SENTRY_CONFIG_YML"
-ensure_file_from_example symbolicator/config.yml
-
-echo "${_endgroup}"
diff --git a/install/ensure-relay-credentials.sh b/install/ensure-relay-credentials.sh
deleted file mode 100644
index d1eaaa2..0000000
--- a/install/ensure-relay-credentials.sh
+++ /dev/null
@@ -1,42 +0,0 @@
-echo "${_group}Ensuring Relay credentials ..."
-
-RELAY_CONFIG_YML=relay/config.yml
-RELAY_CREDENTIALS_JSON=relay/credentials.json
-
-ensure_file_from_example $RELAY_CONFIG_YML
-
-if [[ -f "$RELAY_CREDENTIALS_JSON" ]]; then
-  echo "$RELAY_CREDENTIALS_JSON already exists, skipped creation."
-else
-
-  # There are a couple gotchas here:
-  #
-  # 1. We need to use a tmp file because if we redirect output directly to
-  #    credentials.json, then the shell will create an empty file that relay
-  #    will then try to read from (regardless of options such as --stdout or
-  #    --overwrite) and fail because it is empty.
-  #
-  # 2. We pull relay:nightly before invoking `run relay credentials generate`
-  #    because an implicit pull under the run causes extra stdout that results
-  #    in a garbage credentials.json.
-  #
-  # 3. We need to use -T to ensure that we receive output on Docker Compose
-  #    1.x and 2.2.3+ (funny story about that ... ;). Note that the long opt
-  #    --no-tty doesn't exist in Docker Compose 1.
-
-  $dc pull relay
-  creds="$dcr --no-deps -T relay credentials"
-  $creds generate --stdout >"$RELAY_CREDENTIALS_JSON".tmp
-  mv "$RELAY_CREDENTIALS_JSON".tmp "$RELAY_CREDENTIALS_JSON"
-  if ! grep -q Credentials <($creds show); then
-    # Let's fail early if creds failed, to make debugging easier.
-    echo "Failed to create relay credentials in $RELAY_CREDENTIALS_JSON."
-    echo "--- credentials.json v ---------------------------------------"
-    cat -v "$RELAY_CREDENTIALS_JSON" || true
-    echo "--- credentials.json ^ ---------------------------------------"
-    exit 1
-  fi
-  echo "Relay credentials written to $RELAY_CREDENTIALS_JSON."
-fi
-
-echo "${_endgroup}"
diff --git a/install/error-handling.sh b/install/error-handling.sh
deleted file mode 100644
index ba30fff..0000000
--- a/install/error-handling.sh
+++ /dev/null
@@ -1,222 +0,0 @@
-echo "${_group}Setting up error handling ..."
-
-export SENTRY_DSN='https://19555c489ded4769978daae92f2346ca@self-hosted.getsentry.net/3'
-export SENTRY_ORG=self-hosted
-export SENTRY_PROJECT=installer
-
-$dbuild -t sentry-self-hosted-jq-local --platform="$DOCKER_PLATFORM" jq
-
-jq="docker run --rm -i sentry-self-hosted-jq-local"
-sentry_cli="docker run --rm -v /tmp:/work -e SENTRY_ORG=$SENTRY_ORG -e SENTRY_PROJECT=$SENTRY_PROJECT -e SENTRY_DSN=$SENTRY_DSN getsentry/sentry-cli"
-
-send_envelope() {
-  # Send envelope
-  $sentry_cli send-envelope "$envelope_file"
-}
-
-generate_breadcrumb_json() {
-  cat $log_file | $jq -R -c 'split("\n") | {"message": (.[0]//""), "category": "log", "level": "info"}'
-}
-
-send_event() {
-  # Use traceback hash as the UUID since it is 32 characters long
-  local event_hash=$1
-  local error_msg=$2
-  local traceback_json=$3
-  local breadcrumbs=$4
-  local envelope_file="sentry-envelope-${event_hash}"
-  local envelope_file_path="/tmp/$envelope_file"
-  # If the envelope file exists, we've already sent it
-  if [[ -f $envelope_file_path ]]; then
-    echo "Looks like you've already sent this error to us, we're on it :)"
-    return
-  fi
-  # If we haven't sent the envelope file, make it and send to Sentry
-  # The format is documented at https://develop.sentry.dev/sdk/envelopes/
-  # Grab length of log file, needed for the envelope header to send an attachment
-  local file_length=$(wc -c <$log_file | awk '{print $1}')
-
-  # Add header for initial envelope information
-  $jq -n -c --arg event_id "$event_hash" \
-    --arg dsn "$SENTRY_DSN" \
-    '$ARGS.named' >"$envelope_file_path"
-  # Add header to specify the event type of envelope to be sent
-  echo '{"type":"event"}' >>"$envelope_file_path"
-
-  # Next we construct the meat of the event payload, which we build up
-  # inside out using jq
-  # See https://develop.sentry.dev/sdk/event-payloads/
-  # for details about the event payload
-
-  # Then we need the exception payload
-  # https://develop.sentry.dev/sdk/event-payloads/exception/
-  # but first we need to make the stacktrace which goes in the exception payload
-  frames=$(echo "$traceback_json" | $jq -s -c)
-  stacktrace=$($jq -n -c --argjson frames "$frames" '$ARGS.named')
-  exception=$(
-    $jq -n -c --arg "type" Error \
-      --arg value "$error_msg" \
-      --argjson stacktrace "$stacktrace" \
-      '$ARGS.named'
-  )
-  event_body=$(
-    $jq -n -c --arg level error \
-      --argjson exception "{\"values\":[$exception]}" \
-      --argjson breadcrumbs "{\"values\": $breadcrumbs}" \
-      '$ARGS.named'
-  )
-  echo "$event_body" >>$envelope_file_path
-  # Add attachment to the event
-  attachment=$(
-    $jq -n -c --arg "type" attachment \
-      --arg length "$file_length" \
-      --arg content_type "text/plain" \
-      --arg filename install_log.txt \
-      '{"type": $type,"length": $length|tonumber,"content_type": $content_type,"filename": $filename}'
-  )
-  echo "$attachment" >>$envelope_file_path
-  cat $log_file >>$envelope_file_path
-  # Send envelope
-  send_envelope $envelope_file
-}
-
-if [[ -z "${REPORT_SELF_HOSTED_ISSUES:-}" ]]; then
-  echo
-  echo "Hey, so ... we would love to automatically find out about issues with your"
-  echo "Sentry instance so that we can improve the product. Turns out there is an app"
-  echo "for that, called Sentry. Would you be willing to let us automatically send data"
-  echo "about your instance upstream to Sentry for development and debugging purposes?"
-  echo
-  echo "  y / yes / 1"
-  echo "  n / no / 0"
-  echo
-  echo "(Btw, we send this to our own self-hosted Sentry instance, not to Sentry SaaS,"
-  echo "so that we can be in this together.)"
-  echo
-  echo "Here's the info we may collect:"
-  echo
-  echo "  - OS username"
-  echo "  - IP address"
-  echo "  - install log"
-  echo "  - runtime errors"
-  echo "  - performance data"
-  echo
-  echo "Thirty (30) day retention. No marketing. Privacy policy at sentry.io/privacy."
-  echo
-
-  yn=""
-  until [ ! -z "$yn" ]; do
-    read -p "y or n? " yn
-    case $yn in
-    y | yes | 1)
-      export REPORT_SELF_HOSTED_ISSUES=1
-      echo
-      echo -n "Thank you."
-      ;;
-    n | no | 0)
-      export REPORT_SELF_HOSTED_ISSUES=0
-      echo
-      echo -n "Understood."
-      ;;
-    *) yn="" ;;
-    esac
-  done
-
-  echo " To avoid this prompt in the future, use one of these flags:"
-  echo
-  echo "  --report-self-hosted-issues"
-  echo "  --no-report-self-hosted-issues"
-  echo
-  echo "or set the REPORT_SELF_HOSTED_ISSUES environment variable:"
-  echo
-  echo "  REPORT_SELF_HOSTED_ISSUES=1 to send data"
-  echo "  REPORT_SELF_HOSTED_ISSUES=0 to not send data"
-  echo
-  sleep 5
-fi
-
-# Make sure we can use sentry-cli if we need it.
-if [ "$REPORT_SELF_HOSTED_ISSUES" == 1 ]; then
-  if ! docker pull getsentry/sentry-cli:latest; then
-    echo "Failed to pull sentry-cli, won't report to Sentry after all."
-    export REPORT_SELF_HOSTED_ISSUES=0
-  fi
-fi
-
-# Courtesy of https://stackoverflow.com/a/2183063/90297
-trap_with_arg() {
-  func="$1"
-  shift
-  for sig; do
-    trap "$func $sig" "$sig"
-  done
-}
-
-DID_CLEAN_UP=0
-# the cleanup function will be the exit point
-cleanup() {
-  local retcode=$?
-  local cmd="${BASH_COMMAND}"
-  if [[ "$DID_CLEAN_UP" -eq 1 ]]; then
-    return 0
-  fi
-  DID_CLEAN_UP=1
-  if [[ "$1" != "EXIT" ]]; then
-    set +o xtrace
-    # Save the error message that comes from the last line of the log file
-    error_msg=$(tail -n 1 "$log_file")
-    # Create the breadcrumb payload now before stacktrace is printed
-    # https://develop.sentry.dev/sdk/event-payloads/breadcrumbs/
-    # Use sed to remove the last line, that is reported through the error message
-    breadcrumbs=$(generate_breadcrumb_json | sed '$d' | $jq -s -c)
-    printf -v err '%s' "Error in ${BASH_SOURCE[1]}:${BASH_LINENO[0]}."
-    printf -v cmd_exit '%s' "'$cmd' exited with status $retcode"
-    printf '%s\n%s\n' "$err" "$cmd_exit"
-    local stack_depth=${#FUNCNAME[@]}
-    local traceback=""
-    local traceback_json=""
-    if [ $stack_depth -gt 2 ]; then
-      for ((i = $(($stack_depth - 1)), j = 1; i > 0; i--, j++)); do
-        local indent="$(yes a | head -$j | tr -d '\n')"
-        local src=${BASH_SOURCE[$i]}
-        local lineno=${BASH_LINENO[$i - 1]}
-        local funcname=${FUNCNAME[$i]}
-        JSON=$(
-          $jq -n -c --arg filename "$src" \
-            --arg "function" "$funcname" \
-            --arg lineno "$lineno" \
-            '{"filename": $filename, "function": $function, "lineno": $lineno|tonumber}'
-        )
-        # If we're in the stacktrace of the file we failed on, we can add a context line with the command run that failed
-        if [[ $i -eq 1 ]]; then
-          JSON=$(
-            $jq -n -c --arg cmd "$cmd" \
-              --argjson json "$JSON" \
-              '$json + {"context_line": $cmd}'
-          )
-        fi
-        printf -v traceback_json '%s\n' "$traceback_json$JSON"
-        printf -v traceback '%s\n' "$traceback${indent//a/-}> $src:$funcname:$lineno"
-      done
-    fi
-    echo "$traceback"
-
-    # Only send event when report issues flag is set and if trap signal is not INT (ctrl+c)
-    if [[ "$REPORT_SELF_HOSTED_ISSUES" == 1 && "$1" != "INT" ]]; then
-      local event_hash=$(echo -n "$cmd_exit $traceback" | docker run -i --rm busybox md5sum | cut -d' ' -f1)
-      send_event "$event_hash" "$error_msg" "$traceback_json" "$breadcrumbs"
-    fi
-
-    if [[ -n "$MINIMIZE_DOWNTIME" ]]; then
-      echo "*NOT* cleaning up, to clean your environment run \"docker compose stop\"."
-    else
-      echo "Cleaning up..."
-    fi
-  fi
-
-  if [[ -z "$MINIMIZE_DOWNTIME" ]]; then
-    $dc stop -t $STOP_TIMEOUT &>/dev/null
-  fi
-}
-
-echo "${_endgroup}"
diff --git a/install/generate-secret-key.sh b/install/generate-secret-key.sh
deleted file mode 100644
index 1a33c6d..0000000
--- a/install/generate-secret-key.sh
+++ /dev/null
@@ -1,15 +0,0 @@
-echo "${_group}Generating secret key ..."
-
-if grep -xq "system.secret-key: '!!changeme!!'" $SENTRY_CONFIG_YML; then
-  # This is to escape the secret key to be used in sed below
-  # Note the need to set LC_ALL=C due to BSD tr and sed always trying to decode
-  # whatever is passed to them. Kudos to https://stackoverflow.com/a/23584470/90297
-  SECRET_KEY=$(
-    export LC_ALL=C
-    head /dev/urandom | tr -dc "a-z0-9@#%^&*(-_=+)" | head -c 50 | sed -e 's/[\/&]/\\&/g'
-  )
-  sed -i -e 's/^system.secret-key:.*$/system.secret-key: '"'$SECRET_KEY'"'/' $SENTRY_CONFIG_YML
-  echo "Secret key written to $SENTRY_CONFIG_YML"
-fi
-
-echo "${_endgroup}"
diff --git a/install/geoip.sh b/install/geoip.sh
old mode 100644
new mode 100755
index 577b6ba..c90b56d
--- a/install/geoip.sh
+++ b/install/geoip.sh
@@ -1,8 +1,12 @@
-echo "${_group}Setting up GeoIP integration ..."
+#!/usr/bin/env bash
+
+if [[ ! -f 'install.sh' ]]; then echo 'Where are you?'; exit 1; fi
+
+source ./install/docker-aliases.sh
 
 install_geoip() {
-  local mmdb=geoip/GeoLite2-City.mmdb
-  local conf=geoip/GeoIP.conf
+  local mmdb='geoip/GeoLite2-City.mmdb'
+  local conf='geoip/GeoIP.conf'
   local result='Done'
 
   echo "Setting up IP address geolocation ..."
@@ -30,5 +34,3 @@ install_geoip() {
 }
 
 install_geoip
-
-echo "${_endgroup}"
diff --git a/install/install-wal2json.sh b/install/install-wal2json.sh
deleted file mode 100644
index 9df0df7..0000000
--- a/install/install-wal2json.sh
+++ /dev/null
@@ -1,45 +0,0 @@
-echo "${_group}Downloading and installing wal2json ..."
-
-WAL2JSON_DIR=postgres/wal2json
-FILE_TO_USE="$WAL2JSON_DIR/wal2json.so"
-ARCH=$(uname -m)
-FILE_NAME="wal2json-Linux-$ARCH-glibc.so"
-
-docker_curl() {
-  # The environment variables can be specified in lower case or upper case.
-  # The lower case version has precedence. http_proxy is an exception as it is only available in lower case.
-  docker run --rm -e http_proxy -e https_proxy -e HTTPS_PROXY -e no_proxy -e NO_PROXY curlimages/curl:7.77.0 \
-    --connect-timeout 5 \
-    --max-time 10 \
-    --retry 5 \
-    --retry-max-time 60 \
-    "$@"
-}
-
-if [[ $WAL2JSON_VERSION == "latest" ]]; then
-  # Hard-code this. Super-hacky. We were curling the GitHub API here but
-  # hitting rate limits in CI. This library hasn't seen a new release for a
-  # year and a half at time of writing.
-  #
-  # If you're reading this do us a favor and go check:
-  #
-  #   https://github.com/getsentry/wal2json/releases
-  #
-  # If there's a new release can you update this please? If not maybe subscribe
-  # for notifications on the repo with "Watch > Custom > Releases". Together we
-  # can make a difference.
-  VERSION=0.0.2
-else
-  VERSION=$WAL2JSON_VERSION
-fi
-
-mkdir -p "$WAL2JSON_DIR"
-if [ ! -f "$WAL2JSON_DIR/$VERSION/$FILE_NAME" ]; then
-  mkdir -p "$WAL2JSON_DIR/$VERSION"
-  docker_curl -L \
-    "https://github.com/getsentry/wal2json/releases/download/$VERSION/$FILE_NAME" \
-    >"$WAL2JSON_DIR/$VERSION/$FILE_NAME"
-fi
-cp "$WAL2JSON_DIR/$VERSION/$FILE_NAME" "$FILE_TO_USE"
-
-echo "${_endgroup}"
diff --git a/install/parse-cli.sh b/install/parse-cli.sh
deleted file mode 100644
index 0390b54..0000000
--- a/install/parse-cli.sh
+++ /dev/null
@@ -1,79 +0,0 @@
-echo "${_group}Parsing command line ..."
-
-show_help() {
-  cat <<EOF
-Usage: $0 [options]
-
-Install Sentry with \`docker compose\`.
-
-Options:
- -h, --help             Show this message and exit.
- --minimize-downtime    EXPERIMENTAL: try to keep accepting events for as long
-                          as possible while upgrading. This will disable cleanup
-                          on error, and might leave your installation in a
-                          partially upgraded state. This option might not reload
-                          all configuration, and is only meant for in-place
-                          upgrades.
- --skip-commit-check    Skip the check for the latest commit when on the master
-                          branch of a \`self-hosted\` Git working copy.
- --skip-user-creation   Skip the initial user creation prompt (ideal for non-
-                          	interactive installs).
- --skip-sse42-requirements
-			Skip checking that your environment meets the
-			  requirements to run Sentry. Only do this if you know
-			  what you are doing.
- --report-self-hosted-issues
-                        Report error and performance data about your self-hosted
-                          instance upstream to Sentry. See sentry.io/privacy for
-                          our privacy policy.
- --no-report-self-hosted-issues
-                        Do not report error and performance data about your
-                          self-hosted instance upstream to Sentry.
-EOF
-}
-
-depwarn() {
-  echo "WARNING The $1 is deprecated. Please use $2 instead."
-}
-
-if [ ! -z "${SKIP_USER_PROMPT:-}" ]; then
-  depwarn "SKIP_USER_PROMPT variable" "SKIP_USER_CREATION"
-  SKIP_USER_CREATION="${SKIP_USER_PROMPT}"
-fi
-
-SKIP_USER_CREATION="${SKIP_USER_CREATION:-}"
-MINIMIZE_DOWNTIME="${MINIMIZE_DOWNTIME:-}"
-SKIP_COMMIT_CHECK="${SKIP_COMMIT_CHECK:-}"
-REPORT_SELF_HOSTED_ISSUES="${REPORT_SELF_HOSTED_ISSUES:-}"
-SKIP_SSE42_REQUIREMENTS="${SKIP_SSE42_REQUIREMENTS:-}"
-
-while (($#)); do
-  case "$1" in
-  -h | --help)
-    show_help
-    exit
-    ;;
-  --no-user-prompt)
-    SKIP_USER_CREATION=1
-    depwarn "--no-user-prompt flag" "--skip-user-creation"
-    ;;
-  --skip-user-prompt)
-    SKIP_USER_CREATION=1
-    depwarn "--skip-user-prompt flag" "--skip-user-creation"
-    ;;
-  --skip-user-creation) SKIP_USER_CREATION=1 ;;
-  --minimize-downtime) MINIMIZE_DOWNTIME=1 ;;
-  --skip-commit-check) SKIP_COMMIT_CHECK=1 ;;
-  --report-self-hosted-issues) REPORT_SELF_HOSTED_ISSUES=1 ;;
-  --no-report-self-hosted-issues) REPORT_SELF_HOSTED_ISSUES=0 ;;
-  --skip-sse42-requirements) SKIP_SSE42_REQUIREMENTS=1 ;;
-  --) ;;
-  *)
-    echo "Unexpected argument: $1. Use --help for usage information."
-    exit 1
-    ;;
-  esac
-  shift
-done
-
-echo "${_endgroup}"
diff --git a/install/py2-warning.sh b/install/py2-warning.sh
new file mode 100755
index 0000000..2457893
--- /dev/null
+++ b/install/py2-warning.sh
@@ -0,0 +1,22 @@
+#!/usr/bin/env bash
+
+if [[ ! -f 'install.sh' ]]; then echo 'Where are you?'; exit 1; fi
+
+source ./install/docker-aliases.sh
+
+# Note the stderr>stdout redirection because Python thinks `--version` should
+# be on stderr: https://stackoverflow.com/a/31715011/90297
+if $dcr --no-deps --entrypoint python web --version 2>&1 | grep -q 'Python 2'; then
+  echo "
+ _  _   ____      ____  _       _______     ____  _____  _____  ____  _____   ______   _  _
+| || | |_  _|    |_  _|/ \     |_   __ \   |_   \|_   _||_   _||_   \|_   _|.' ___  | | || |
+| || |   \ \  /\  / / / _ \      | |__) |    |   \ | |    | |    |   \ | | / .'   \_| | || |
+| || |    \ \/  \/ / / ___ \     |  __ /     | |\ \| |    | |    | |\ \| | | |   ____ | || |
+|_||_|     \  /\  /_/ /   \ \_  _| |  \ \_  _| |_\   |_  _| |_  _| |_\   |_\ \`.___]  ||_||_|
+(_)(_)      \/  \/|____| |____||____| |___||_____|\____||_____||_____|\____|\`._____.' (_)(_)
+
+"
+  echo '-----------------------------------------------------------'
+  echo 'You are using Sentry with Python 2, which is deprecated.'
+  echo 'Sentry 21.1 will be the last version with Python 2 support.'
+fi
diff --git a/install/set-up-and-migrate-database.sh b/install/set-up-and-migrate-database.sh
deleted file mode 100644
index 6e393bb..0000000
--- a/install/set-up-and-migrate-database.sh
+++ /dev/null
@@ -1,15 +0,0 @@
-echo "${_group}Setting up / migrating database ..."
-
-if [[ -n "${CI:-}" || "${SKIP_USER_CREATION:-0}" == 1 ]]; then
-  $dcr web upgrade --noinput
-  echo ""
-  echo "Did not prompt for user creation. Run the following command to create one"
-  echo "yourself (recommended):"
-  echo ""
-  echo "  $dc_base run --rm web createuser"
-  echo ""
-else
-  $dcr web upgrade
-fi
-
-echo "${_endgroup}"
diff --git a/install/turn-things-off.sh b/install/turn-things-off.sh
deleted file mode 100644
index 270dc4e..0000000
--- a/install/turn-things-off.sh
+++ /dev/null
@@ -1,11 +0,0 @@
-echo "${_group}Turning things off ..."
-
-if [[ -n "$MINIMIZE_DOWNTIME" ]]; then
-  # Stop everything but relay and nginx
-  $dc rm -fsv $($dc config --services | grep -v -E '^(nginx|relay)$')
-else
-  # Clean up old stuff and ensure nothing is working while we install/update
-  $dc down -t $STOP_TIMEOUT --rmi local --remove-orphans
-fi
-
-echo "${_endgroup}"
diff --git a/install/update-docker-images.sh b/install/update-docker-images.sh
deleted file mode 100644
index a235585..0000000
--- a/install/update-docker-images.sh
+++ /dev/null
@@ -1,14 +0,0 @@
-echo "${_group}Fetching and updating Docker images ..."
-
-# We tag locally built images with a '-self-hosted-local' suffix. `docker
-# compose pull` tries to pull these too and shows a 404 error on the console
-# which is confusing and unnecessary. To overcome this, we add the
-# stderr>stdout redirection below and pass it through grep, ignoring all lines
-# having this '-onpremise-local' suffix.
-
-$dc pull -q --ignore-pull-failures 2>&1 | grep -v -- -self-hosted-local || true
-
-# We may not have the set image on the repo (local images) so allow fails
-docker pull ${SENTRY_IMAGE} || true
-
-echo "${_endgroup}"
diff --git a/install/wrap-up.sh b/install/wrap-up.sh
deleted file mode 100644
index a811f81..0000000
--- a/install/wrap-up.sh
+++ /dev/null
@@ -1,30 +0,0 @@
-if [[ "$MINIMIZE_DOWNTIME" ]]; then
-  echo "${_group}Waiting for Sentry to start ..."
-
-  # Start the whole setup, except nginx and relay.
-  $dc up -d --remove-orphans $($dc config --services | grep -v -E '^(nginx|relay)$')
-  $dc restart relay
-  $dc exec -T nginx nginx -s reload
-
-  docker run --rm --network="${COMPOSE_PROJECT_NAME}_default" alpine ash \
-    -c 'while [[ "$(wget -T 1 -q -O- http://web:9000/_health/)" != "ok" ]]; do sleep 0.5; done'
-
-  # Make sure everything is up. This should only touch relay and nginx
-  $dc up -d
-
-  echo "${_endgroup}"
-else
-  echo ""
-  echo "-----------------------------------------------------------------"
-  echo ""
-  echo "You're all done! Run the following command to get Sentry running:"
-  echo ""
-  if [[ "${_ENV}" =~ ".env.custom" ]]; then
-    echo "  $dc_base --env-file ${_ENV} up -d"
-  else
-    echo "  $dc_base up -d"
-  fi
-  echo ""
-  echo "-----------------------------------------------------------------"
-  echo ""
-fi
diff --git a/integration-test.sh b/integration-test.sh
deleted file mode 100755
index 10477f2..0000000
--- a/integration-test.sh
+++ /dev/null
@@ -1,29 +0,0 @@
-#!/usr/bin/env bash
-set -ex
-
-echo "Reset customizations"
-rm -f sentry/enhance-image.sh
-rm -f sentry/requirements.txt
-export REPORT_SELF_HOSTED_ISSUES=0
-
-echo "Testing initial install"
-./install.sh
-_integration-test/run.sh
-_integration-test/ensure-customizations-not-present.sh
-_integration-test/ensure-backup-restore-works.sh
-
-echo "Make customizations"
-cat <<EOT >sentry/enhance-image.sh
-#!/bin/bash
-touch /created-by-enhance-image
-apt-get update
-apt-get install -y gcc libsasl2-dev python-dev libldap2-dev libssl-dev
-EOT
-chmod +x sentry/enhance-image.sh
-printf "python-ldap" >sentry/requirements.txt
-
-echo "Testing in-place upgrade and customizations"
-./install.sh --minimize-downtime
-_integration-test/run.sh
-_integration-test/ensure-customizations-work.sh
-_integration-test/ensure-backup-restore-works.sh
diff --git a/jq/Dockerfile b/jq/Dockerfile
deleted file mode 100644
index 3e5541a..0000000
--- a/jq/Dockerfile
+++ /dev/null
@@ -1,11 +0,0 @@
-FROM debian:bullseye-slim
-
-LABEL MAINTAINER="oss@sentry.io"
-
-RUN set -x \
-  && apt-get update \
-  && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends jq \
-  && apt-get clean \
-  && rm -rf /var/lib/apt/lists/*
-
-ENTRYPOINT ["jq"]
diff --git a/nginx/nginx.conf b/nginx/nginx.conf
index b497429..e8d5644 100644
--- a/nginx/nginx.conf
+++ b/nginx/nginx.conf
@@ -1,5 +1,5 @@
 user nginx;
-worker_processes auto;
+worker_processes 1;
 
 error_log /var/log/nginx/error.log warn;
 pid /var/run/nginx.pid;
@@ -37,9 +37,6 @@ http {
 	proxy_http_version 1.1;
 	proxy_redirect off;
 	proxy_buffering off;
-	proxy_buffer_size          128k;
-	proxy_buffers              4 256k;
-	proxy_busy_buffers_size    256k;
 	proxy_next_upstream error timeout invalid_header http_502 http_503 non_idempotent;
 	proxy_next_upstream_tries 2;
 
@@ -47,6 +44,7 @@ http {
 	# it could be "close" to close a keepalive connection
 	proxy_set_header Connection '';
 	proxy_set_header Host $host;
+	proxy_set_header X-Real-IP $remote_addr;
 	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 	proxy_set_header X-Forwarded-Proto $scheme;
 	proxy_set_header X-Request-Id $request_id;
diff --git a/postgres/init_hba.sh b/postgres/init_hba.sh
deleted file mode 100755
index 9952ab1..0000000
--- a/postgres/init_hba.sh
+++ /dev/null
@@ -1,7 +0,0 @@
-#!/bin/bash
-# Initializes the pg_hba file with access permissions to the replication
-# slots.
-
-set -e
-
-{ echo "host replication all all trust"; } >>"$PGDATA/pg_hba.conf"
diff --git a/postgres/postgres-entrypoint.sh b/postgres/postgres-entrypoint.sh
deleted file mode 100755
index 68a469f..0000000
--- a/postgres/postgres-entrypoint.sh
+++ /dev/null
@@ -1,46 +0,0 @@
-#!/bin/bash
-# This script replaces the default docker entrypoint for postgres in the
-# development environment.
-# Its job is to ensure postgres is properly configured to support the
-# Change Data Capture pipeline (by setting access permissions and installing
-# the replication plugin we use for CDC). Unfortunately the default
-# Postgres image does not allow this level of configurability so we need
-# to do it this way in order not to have to publish and maintain our own
-# Postgres image.
-#
-# This then, at the end, transfers control to the default entrypoint.
-
-set -e
-
-prep_init_db() {
-  cp /opt/sentry/init_hba.sh /docker-entrypoint-initdb.d/init_hba.sh
-}
-
-cdc_setup_hba_conf() {
-  # Ensure pg-hba is properly configured to allow connections
-  # to the replication slots.
-
-  PG_HBA="$PGDATA/pg_hba.conf"
-  if [ ! -f "$PG_HBA" ]; then
-    echo "DB not initialized. Postgres will take care of pg_hba"
-  elif [ "$(grep -c -E "^host\s+replication" "$PGDATA"/pg_hba.conf)" != 0 ]; then
-    echo "Replication config already present in pg_hba. Not changing anything."
-  else
-    # Execute the same script we run on DB initialization
-    /opt/sentry/init_hba.sh
-  fi
-}
-
-bind_wal2json() {
-  # Copy the file in the right place
-  cp /opt/sentry/wal2json/wal2json.so $(pg_config --pkglibdir)/wal2json.so
-}
-
-echo "Setting up Change Data Capture"
-
-prep_init_db
-if [ "$1" = 'postgres' ]; then
-  cdc_setup_hba_conf
-  bind_wal2json
-fi
-exec /usr/local/bin/docker-entrypoint.sh "$@"
diff --git a/relay/config.example.yml b/relay/config.example.yml
index 52e6630..0d70d0a 100644
--- a/relay/config.example.yml
+++ b/relay/config.example.yml
@@ -8,6 +8,8 @@ processing:
   enabled: true
   kafka_config:
     - {name: "bootstrap.servers", value: "kafka:9092"}
-    - {name: "message.max.bytes", value: 50000000} # 50MB
+    - {name: "message.max.bytes", value: 50000000} #50MB or bust
   redis: redis://redis:6379
   geoip_path: "/geoip/GeoLite2-City.mmdb"
+http:
+  _client: "reqwest"
diff --git a/scripts/_lib.sh b/scripts/_lib.sh
deleted file mode 100755
index d382ec9..0000000
--- a/scripts/_lib.sh
+++ /dev/null
@@ -1,95 +0,0 @@
-#!/usr/bin/env bash
-
-set -eEuo pipefail
-
-if [ -n "${DEBUG:-}" ]; then
-  set -x
-fi
-
-function confirm() {
-  read -p "$1 [y/n] " confirmation
-  if [ "$confirmation" != "y" ]; then
-    echo "Canceled. "
-    exit
-  fi
-}
-
-# The purpose of this script is to make it easy to reset a local self-hosted
-# install to a clean state, optionally targeting a particular version.
-
-function clean() {
-  # If we have a version given, validate it.
-  # ----------------------------------------
-  # Note that arbitrary git refs won't work, because the *_IMAGE variables in
-  # .env will almost certainly point to :latest. Tagged releases are generally
-  # the only refs where these component versions are pinned, so enforce that
-  # we're targeting a valid tag here. Do this early in order to fail fast.
-  if [ -n "$version" ]; then
-    set +e
-    git rev-parse --verify --quiet "refs/tags/$version" >/dev/null
-    if [ $? -gt 0 ]; then
-      echo "Bad version: $version"
-      exit
-    fi
-    set -e
-  fi
-
-  false "noooo"
-
-  # Make sure they mean it.
-  if [ "${FORCE_CLEAN:-}" == "1" ]; then
-    echo "  Seeing FORCE=1, forcing cleanup."
-    echo
-  else
-    confirm "  Warning!  This is highly destructive!  Are you sure you wish to proceed?"
-    echo "Okay ... good luck! "
-  fi
-
-  # Hit the reset button.
-  $dc down --volumes --remove-orphans --rmi local
-
-  # Remove any remaining (likely external) volumes with name matching 'sentry-.*'.
-  for volume in $(docker volume list --format '{{ .Name }}' | grep '^sentry-'); do
-    docker volume remove $volume >/dev/null &&
-      echo "Removed volume: $volume" ||
-      echo "Skipped volume: $volume"
-  done
-
-  # If we have a version given, switch to it.
-  if [ -n "$version" ]; then
-    git checkout "$version"
-  fi
-}
-
-function backup() {
-  chmod +w $(pwd)/sentry
-  docker-compose run -v $(pwd)/sentry:/sentry-data/backup --rm -T -e SENTRY_LOG_LEVEL=CRITICAL web export /sentry-data/backup/backup.json
-}
-
-function restore() {
-  docker-compose run --rm -T web import /etc/sentry/backup.json
-}
-
-# Needed variables to source error-handling script
-MINIMIZE_DOWNTIME="${MINIMIZE_DOWNTIME:-}"
-STOP_TIMEOUT=60
-
-# Save logs in order to send envelope to Sentry
-log_file=sentry_"$cmd"_log-$(date +'%Y-%m-%d_%H-%M-%S').txt
-exec &> >(tee -a "$log_file")
-version=""
-
-while (($#)); do
-  case "$1" in
-  --report-self-hosted-issues) REPORT_SELF_HOSTED_ISSUES=1 ;;
-  --no-report-self-hosted-issues) REPORT_SELF_HOSTED_ISSUES=0 ;;
-  *) version=$1 ;;
-  esac
-  shift
-done
-
-# Source files needed to set up error-handling
-source install/dc-detect-version.sh
-source install/detect-platform.sh
-source install/error-handling.sh
-trap_with_arg cleanup ERR INT TERM EXIT
diff --git a/scripts/backup.sh b/scripts/backup.sh
deleted file mode 100755
index b2b5a62..0000000
--- a/scripts/backup.sh
+++ /dev/null
@@ -1,4 +0,0 @@
-#!/usr/bin/env bash
-cmd=backup
-source scripts/_lib.sh
-$cmd
diff --git a/scripts/bump-version.sh b/scripts/bump-version.sh
index b6a1000..4c8bb5a 100755
--- a/scripts/bump-version.sh
+++ b/scripts/bump-version.sh
@@ -1,18 +1,18 @@
 #!/bin/bash
 set -eu
 
+SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
+cd $SCRIPT_DIR/..
+
 OLD_VERSION="$1"
 NEW_VERSION="$2"
 
 SYMBOLICATOR_VERSION=${SYMBOLICATOR_VERSION:-$(curl -s "https://api.github.com/repos/getsentry/symbolicator/releases/latest" | grep -Po '"tag_name": "\K.*?(?=")')}
-WAL2JSON_VERSION=${WAL2JSON_VERSION:-$(curl -s "https://api.github.com/repos/getsentry/wal2json/releases/latest" | grep -Po '"tag_name": "\K.*?(?=")')}
 
 sed -i -e "s/^SYMBOLICATOR_IMAGE=\([^:]\+\):.\+\$/SYMBOLICATOR_IMAGE=\1:$SYMBOLICATOR_VERSION/" .env
-sed -i -e "s/^WAL2JSON_VERSION=\([^:]\+\):.\+\$/WAL2JSON_VERSION=\1:$WAL2JSON_VERSION/" .env
 sed -i -e "s/^\(SENTRY\|SNUBA\|RELAY\)_IMAGE=\([^:]\+\):.\+\$/\1_IMAGE=\2:$NEW_VERSION/" .env
 sed -i -e "s/^\# Self-Hosted Sentry .*/# Self-Hosted Sentry $NEW_VERSION/" README.md
 sed -i -e "s/\(Change Date:\s*\)[-0-9]\+\$/\\1$(date +'%Y-%m-%d' -d '3 years')/" LICENSE
 
 echo "New version: $NEW_VERSION"
 echo "New Symbolicator version: $SYMBOLICATOR_VERSION"
-echo "New wal2json version: $WAL2JSON_VERSION"
diff --git a/scripts/post-release.sh b/scripts/post-release.sh
index 225de19..ff8e706 100755
--- a/scripts/post-release.sh
+++ b/scripts/post-release.sh
@@ -1,7 +1,10 @@
 #!/bin/bash
 set -eu
 
+SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
+cd $SCRIPT_DIR/..
+
 # Bring master back to nightlies after merge from release branch
-git checkout master && git pull --rebase
+
 SYMBOLICATOR_VERSION=nightly ./scripts/bump-version.sh '' 'nightly'
-git diff --quiet || git commit -anm $'build: Set master version to nightly\n\n#skip-changelog' && git pull --rebase && git push
+git diff --quiet || git commit -anm 'build: Set master version to nightly' && git push
diff --git a/scripts/reset.sh b/scripts/reset.sh
deleted file mode 100755
index f519435..0000000
--- a/scripts/reset.sh
+++ /dev/null
@@ -1,4 +0,0 @@
-#!/usr/bin/env bash
-cmd=reset
-source scripts/_lib.sh
-$cmd
diff --git a/scripts/restore.sh b/scripts/restore.sh
deleted file mode 100755
index e8c9ebb..0000000
--- a/scripts/restore.sh
+++ /dev/null
@@ -1,4 +0,0 @@
-#!/usr/bin/env bash
-cmd=restore
-source scripts/_lib.sh
-$cmd
diff --git a/sentry/.dockerignore b/sentry/.dockerignore
new file mode 100644
index 0000000..693a7e0
--- /dev/null
+++ b/sentry/.dockerignore
@@ -0,0 +1,5 @@
+# Ignore everything
+*
+
+# Only allow requirements.txt
+!/requirements.txt
diff --git a/sentry/Dockerfile b/sentry/Dockerfile
index 5afe9c2..812056e 100644
--- a/sentry/Dockerfile
+++ b/sentry/Dockerfile
@@ -1,13 +1,8 @@
 ARG SENTRY_IMAGE
-FROM ${SENTRY_IMAGE}
+ARG SENTRY_PYTHON2
+FROM ${SENTRY_IMAGE}${SENTRY_PYTHON2:+-py2}
 
 COPY . /usr/src/sentry
 
-RUN if [ -s /usr/src/sentry/enhance-image.sh ]; then \
-    /usr/src/sentry/enhance-image.sh; \
-fi
-
-RUN if [ -s /usr/src/sentry/requirements.txt ]; then \
-    echo "sentry/requirements.txt is deprecated, use sentry/enhance-image.sh - see https://github.com/getsentry/self-hosted#enhance-sentry-image"; \
-    pip install -r /usr/src/sentry/requirements.txt; \
-fi
+# Hook for installing additional plugins
+RUN if [ -s /usr/src/sentry/requirements.txt ]; then pip install -r /usr/src/sentry/requirements.txt; fi
diff --git a/sentry/config.example.yml b/sentry/config.example.yml
index 616aee2..f42be82 100644
--- a/sentry/config.example.yml
+++ b/sentry/config.example.yml
@@ -13,21 +13,8 @@ mail.host: 'smtp'
 # mail.username: ''
 # mail.password: ''
 # mail.use-tls: false
-# mail.use-ssl: false
-
-# NOTE: The following 2 configs (mail.from and mail.list-namespace) are set
-#       through SENTRY_MAIL_HOST in sentry.conf.py so remove those first if
-#       you want your values in this file to be effective!
-
-
 # The email address to send on behalf of
-# mail.from: 'root@localhost' or ...
-# mail.from: 'System Administrator <root@localhost>'
-
-# The mailing list namespace for emails sent by this Sentry server.
-# This should be a domain you own (often the same domain as the domain
-# part of the `mail.from` configuration parameter value) or `localhost`.
-# mail.list-namespace: 'localhost'
+# mail.from: 'root@localhost'
 
 # If you'd like to configure email replies, enable this.
 # mail.enable-replies: true
@@ -89,7 +76,7 @@ transaction-events.force-disable-internal-project: true
 # GitHub Integration #
 ######################
 
-# github-login.extended-permissions: ['repo']
+# github-app.extended-permissions: ['repo']
 # github-app.id: GITHUB_APP_ID
 # github-app.name: 'GITHUB_APP_NAME'
 # github-app.webhook-secret: 'GITHUB_WEBHOOK_SECRET' # Use only if configured in GitHub
@@ -113,5 +100,7 @@ transaction-events.force-disable-internal-project: true
 # slack.client-id: <'client id'>
 # slack.client-secret: <client secret>
 # slack.signing-secret: <signing secret>
+## If you made your slack bot before july 2020 set legacy-app to True
+slack.legacy-app: False
 ## If legacy-app is True use verfication-token instead of signing-secret
 # slack.verification-token: <verification token>
diff --git a/sentry/enhance-image.example.sh b/sentry/enhance-image.example.sh
deleted file mode 100755
index e5b3182..0000000
--- a/sentry/enhance-image.example.sh
+++ /dev/null
@@ -1,7 +0,0 @@
-#!/bin/bash
-
-# Enhance the base $SENTRY_IMAGE with additional dependencies, plugins - see https://github.com/getsentry/self-hosted#enhance-sentry-image
-# For example:
-# apt-get update
-# apt-get install -y gcc libsasl2-dev python-dev libldap2-dev libssl-dev
-# pip install python-ldap
diff --git a/sentry/entrypoint.sh b/sentry/entrypoint.sh
deleted file mode 100755
index 552de05..0000000
--- a/sentry/entrypoint.sh
+++ /dev/null
@@ -1,12 +0,0 @@
-#!/bin/bash
-set -e
-
-if [ "$(ls -A /usr/local/share/ca-certificates/)" ]; then
-  update-ca-certificates
-fi
-
-if [ -e /etc/sentry/requirements.txt ]; then
-  echo "sentry/requirements.txt is deprecated, use sentry/enhance-image.sh - see https://github.com/getsentry/self-hosted#enhance-sentry-image"
-fi
-
-source /docker-entrypoint.sh
diff --git a/sentry/requirements.example.txt b/sentry/requirements.example.txt
index e7b63dc..b4659b6 100644
--- a/sentry/requirements.example.txt
+++ b/sentry/requirements.example.txt
@@ -1 +1 @@
-# sentry/requirements.txt is deprecated, use sentry/enhance-image.sh - see https://github.com/getsentry/self-hosted#enhance-sentry-image
+# Add plugins here
diff --git a/sentry/sentry.conf.example.py b/sentry/sentry.conf.example.py
index f7759b0..2d89b56 100644
--- a/sentry/sentry.conf.example.py
+++ b/sentry/sentry.conf.example.py
@@ -4,7 +4,7 @@
 from sentry.conf.server import *  # NOQA
 
 
-# Generously adapted from pynetlinux: https://github.com/rlisagor/pynetlinux/blob/e3f16978855c6649685f0c43d4c3fcf768427ae5/pynetlinux/ifconfig.py#L197-L223
+# Generously adapted from pynetlinux: https://git.io/JJmga
 def get_internal_network():
     import ctypes
     import fcntl
@@ -187,7 +187,7 @@ SENTRY_WEB_PORT = 9000
 SENTRY_WEB_OPTIONS = {
     "http": "%s:%s" % (SENTRY_WEB_HOST, SENTRY_WEB_PORT),
     "protocol": "uwsgi",
-    # This is needed in order to prevent https://github.com/getsentry/sentry/blob/c6f9660e37fcd9c1bbda8ff4af1dcfd0442f5155/src/sentry/services/http.py#L70
+    # This is needed in order to prevent https://git.io/fj7Lw
     "uwsgi-socket": None,
     "so-keepalive": True,
     # Keep this between 15s-75s as that's what Relay supports
@@ -222,20 +222,12 @@ SENTRY_WEB_OPTIONS = {
 # header and enable the settings below
 
 # SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')
-# USE_X_FORWARDED_HOST = True
 # SESSION_COOKIE_SECURE = True
 # CSRF_COOKIE_SECURE = True
 # SOCIAL_AUTH_REDIRECT_IS_HTTPS = True
 
 # End of SSL/TLS settings
 
-########
-# Mail #
-########
-
-SENTRY_OPTIONS["mail.list-namespace"] = env('SENTRY_MAIL_HOST', 'localhost')
-SENTRY_OPTIONS["mail.from"] = f"sentry@{SENTRY_OPTIONS['mail.list-namespace']}"
-
 ############
 # Features #
 ############
@@ -258,7 +250,6 @@ SENTRY_FEATURES.update(
             "organizations:sso-saml2",
             "organizations:performance-view",
             "organizations:advanced-search",
-            "organizations:session-replay",
             "projects:custom-inbound-filters",
             "projects:data-forwarding",
             "projects:discard-groups",
diff --git a/test.sh b/test.sh
index c7831de..91cfc80 100755
--- a/test.sh
+++ b/test.sh
@@ -1,6 +1,107 @@
 #!/usr/bin/env bash
 set -e
 
-# This file runs in https://github.com/getsentry/sentry/blob/fe4795f5eae9e0d7c33e0ecb736c9d1369535eca/docker/cloudbuild.yaml#L59
+export SENTRY_TEST_HOST="${SENTRY_TEST_HOST:-http://localhost:9000}"
+TEST_USER='test@example.com'
+TEST_PASS='test123TEST'
+COOKIE_FILE=$(mktemp)
 
-_integration-test/run.sh
+# Courtesy of https://stackoverflow.com/a/2183063/90297
+trap_with_arg() {
+  func="$1" ; shift
+  for sig ; do
+    trap "$func $sig "'$LINENO' "$sig"
+  done
+}
+
+DID_CLEAN_UP=0
+# the cleanup function will be the exit point
+cleanup () {
+  if [ "$DID_CLEAN_UP" -eq 1 ]; then
+    return 0;
+  fi
+  DID_CLEAN_UP=1
+
+  if [ "$1" != "EXIT" ]; then
+    echo "An error occurred, caught SIG$1 on line $2";
+  fi
+
+  echo "Cleaning up..."
+  rm $COOKIE_FILE
+  echo "Done."
+}
+trap_with_arg cleanup ERR INT TERM EXIT
+
+# Disable beacon for e2e tests
+echo 'SENTRY_BEACON=False' >> sentry/sentry.conf.py
+docker-compose run --rm web createuser --superuser --email $TEST_USER --password $TEST_PASS || true
+docker-compose up -d
+printf "Waiting for Sentry to be up"; timeout 60 bash -c 'until $(curl -Isf -o /dev/null $SENTRY_TEST_HOST); do printf '.'; sleep 0.5; done'
+
+get_csrf_token () { awk '$6 == "sc" { print $7 }' $COOKIE_FILE; }
+sentry_api_request () { curl -s -H 'Accept: application/json; charset=utf-8' -H "Referer: $SENTRY_TEST_HOST" -H 'Content-Type: application/json' -H "X-CSRFToken: $(get_csrf_token)" -b "$COOKIE_FILE" -c "$COOKIE_FILE" "$SENTRY_TEST_HOST/api/0/$1" ${@:2}; }
+
+login () {
+  INITIAL_AUTH_REDIRECT=$(curl -sL -o /dev/null $SENTRY_TEST_HOST -w %{url_effective})
+  if [ "$INITIAL_AUTH_REDIRECT" != "$SENTRY_TEST_HOST/auth/login/sentry/" ]; then
+    echo "Initial /auth/login/ redirect failed, exiting..."
+    echo "$INITIAL_AUTH_REDIRECT"
+    exit -1
+  fi
+
+  CSRF_TOKEN_FOR_LOGIN=$(curl $SENTRY_TEST_HOST -sL -c "$COOKIE_FILE" | awk -F "'" '
+    /csrfmiddlewaretoken/ {
+    print $4 "=" $6;
+    exit;
+  }')
+
+  curl -sL --data-urlencode 'op=login' --data-urlencode "username=$TEST_USER" --data-urlencode "password=$TEST_PASS" --data-urlencode "$CSRF_TOKEN_FOR_LOGIN" "$SENTRY_TEST_HOST/auth/login/sentry/" -H "Referer: $SENTRY_TEST_HOST/auth/login/sentry/" -b "$COOKIE_FILE" -c "$COOKIE_FILE";
+}
+
+LOGIN_RESPONSE=$(login);
+declare -a LOGIN_TEST_STRINGS=(
+  '"isAuthenticated":true'
+  '"username":"test@example.com"'
+  '"isSuperuser":true'
+)
+for i in "${LOGIN_TEST_STRINGS[@]}"
+do
+  echo "Testing '$i'..."
+  echo "$LOGIN_RESPONSE" | grep "$i[,}]" >& /dev/null
+  echo "Pass."
+done
+
+# Set up initial/required settings (InstallWizard request)
+sentry_api_request "internal/options/?query=is:required" -X PUT --data '{"mail.use-tls":false,"mail.username":"","mail.port":25,"system.admin-email":"ben@byk.im","mail.password":"","mail.from":"root@localhost","system.url-prefix":"'"$SENTRY_TEST_HOST"'","auth.allow-registration":false,"beacon.anonymous":true}' > /dev/null
+
+SENTRY_DSN=$(sentry_api_request "projects/sentry/internal/keys/" | awk 'BEGIN { RS=",|:{\n"; FS="\""; } $2 == "public" && $4 ~ "^http" { print $4; exit; }')
+# We ignore the protocol and the host as we already know those
+DSN_PIECES=(`echo $SENTRY_DSN | sed -ne 's|^https\?://\([0-9a-z]\+\)@[^/]\+/\([0-9]\+\)$|\1\n\2|p'`)
+SENTRY_KEY=${DSN_PIECES[0]}
+PROJECT_ID=${DSN_PIECES[1]}
+
+TEST_EVENT_ID=$(export LC_ALL=C; head /dev/urandom | tr -dc "a-f0-9" | head -c 32)
+# Thanks @untitaker - https://forum.sentry.io/t/how-can-i-post-with-curl-a-sentry-event-which-authentication-credentials/4759/2?u=byk
+echo "Creating test event..."
+curl -sf --data '{"event_id": "'"$TEST_EVENT_ID"'","level":"error","message":"a failure","extra":{"object":"42"}}' -H 'Content-Type: application/json' -H "X-Sentry-Auth: Sentry sentry_version=7, sentry_key=$SENTRY_KEY, sentry_client=test-bash/0.1" "$SENTRY_TEST_HOST/api/$PROJECT_ID/store/" -o /dev/null
+
+EVENT_PATH="projects/sentry/internal/events/$TEST_EVENT_ID/"
+export -f sentry_api_request get_csrf_token
+export SENTRY_TEST_HOST COOKIE_FILE EVENT_PATH
+printf "Getting the test event back"
+timeout 30 bash -c 'until $(sentry_api_request "$EVENT_PATH" -Isf -X GET -o /dev/null); do printf '.'; sleep 0.5; done'
+echo "";
+
+EVENT_RESPONSE=$(sentry_api_request "$EVENT_PATH")
+declare -a EVENT_TEST_STRINGS=(
+  '"eventID":"'"$TEST_EVENT_ID"'"'
+  '"message":"a failure"'
+  '"title":"a failure"'
+  '"object":"42"'
+)
+for i in "${EVENT_TEST_STRINGS[@]}"
+do
+  echo "Testing '$i'..."
+  echo "$EVENT_RESPONSE" | grep "$i[,}]" >& /dev/null
+  echo "Pass."
+done
diff --git a/unit-test.sh b/unit-test.sh
deleted file mode 100755
index 333159a..0000000
--- a/unit-test.sh
+++ /dev/null
@@ -1,14 +0,0 @@
-#!/usr/bin/env bash
-
-FORCE_CLEAN=1 "./scripts/reset.sh"
-fail=0
-for test_file in _unit-test/*-test.sh; do
-  echo " Running $test_file ..."
-  $test_file
-  if [ $? != 0 ]; then
-    echo fail 
-    fail=1
-  fi
-done
-
-exit $fail
diff --git a/zookeeper/snapshot.0 b/zookeeper/snapshot.0
new file mode 100644
index 0000000..3e6deee
Binary files /dev/null and b/zookeeper/snapshot.0 differ

2023-04-20 13:49:37,237 p=536362 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:49:37,262 p=536362 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:49:37,566 p=536362 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:49:37,593 p=536362 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:49:37,873 p=536362 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  cmd:
  - ./install.sh
  - --skip-user-creation
  - --no-report-self-hosted-issues
  delta: '0:00:00.009766'
  end: '2023-04-20 13:49:37.849529'
  msg: non-zero return code
  rc: 1
  start: '2023-04-20 13:49:37.839763'
  stderr: ''
  stderr_lines: <omitted>
  stdout: 'Unexpected argument: --skip-user-creation. Use --help for usage information.'
  stdout_lines: <omitted>
2023-04-20 13:49:37,874 p=536362 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:49:37,874 p=536362 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-04-20 13:50:32,626 p=537367 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:50:32,653 p=537367 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:50:34,131 p=537367 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:50:34,158 p=537367 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:50:35,394 p=537367 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:50:35,468 p=537367 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:50:35,759 p=537367 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:50:35,785 p=537367 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:50:36,863 p=537367 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=false 
  cmd: /usr/bin/git checkout --force latest
  msg: Failed to checkout latest
  rc: 1
  stderr: |-
    error: pathspec 'latest' did not match any file(s) known to git
  stderr_lines: <omitted>
  stdout: ''
  stdout_lines: <omitted>
2023-04-20 13:50:36,864 p=537367 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 13:50:36,864 p=537367 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-04-20 13:51:38,564 p=538321 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 13:51:38,590 p=538321 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 13:51:40,174 p=538321 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:51:40,198 p=538321 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 13:51:41,532 p=538321 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:51:41,606 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 13:51:41,889 p=538321 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 13:51:41,917 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 13:51:43,434 p=538321 u=ubuntu n=ansible | diff --git a/.craft.yml b/.craft.yml
index fcc29e7..4524aff 100644
--- a/.craft.yml
+++ b/.craft.yml
@@ -1,12 +1,6 @@
-minVersion: "0.14.0"
-github:
-  owner: getsentry
-  repo: onpremise
-releaseBranchPrefix: releases
-changelogPolicy: none
+minVersion: "0.23.1"
+changelogPolicy: auto
 artifactProvider:
   name: none
-statusProvider:
-  name: github
 targets:
   - name: github
diff --git a/.env b/.env
index adb696f..0bf3e20 100644
--- a/.env
+++ b/.env
@@ -1,9 +1,15 @@
-COMPOSE_PROJECT_NAME=sentry_onpremise
+COMPOSE_PROJECT_NAME=sentry-self-hosted
 SENTRY_EVENT_RETENTION_DAYS=90
 # You can either use a port number or an IP:PORT combo for SENTRY_BIND
 # See https://docs.docker.com/compose/compose-file/#ports for more
 SENTRY_BIND=9000
-SENTRY_IMAGE=getsentry/sentry:21.1.0
-SNUBA_IMAGE=getsentry/snuba:21.1.0
-RELAY_IMAGE=getsentry/relay:21.1.0
-SYMBOLICATOR_IMAGE=getsentry/symbolicator:0.3.2
+# Set SENTRY_MAIL_HOST to a valid FQDN (host/domain name) to be able to send emails!
+# SENTRY_MAIL_HOST=example.com
+SENTRY_IMAGE=getsentry/sentry:23.4.0
+SNUBA_IMAGE=getsentry/snuba:23.4.0
+RELAY_IMAGE=getsentry/relay:23.4.0
+SYMBOLICATOR_IMAGE=getsentry/symbolicator:23.4.0
+WAL2JSON_VERSION=latest
+HEALTHCHECK_INTERVAL=30s
+HEALTHCHECK_TIMEOUT=60s
+HEALTHCHECK_RETRIES=10
diff --git a/.gitattributes b/.gitattributes
new file mode 100644
index 0000000..0beb4bb
--- /dev/null
+++ b/.gitattributes
@@ -0,0 +1,5 @@
+/.gitattributes export-ignore
+/.gitignore export-ignore
+/.github export-ignore
+/.editorconfig export-ignore
+/.craft.yml export-ignore
diff --git a/.github/ISSUE_TEMPLATE/bug_report.md b/.github/ISSUE_TEMPLATE/bug_report.md
deleted file mode 100644
index 359d812..0000000
--- a/.github/ISSUE_TEMPLATE/bug_report.md
+++ /dev/null
@@ -1,29 +0,0 @@
----
-name:  Bug Report
-about: Report a bug in Self-Hosted Sentry
----
-
-### Version Information
-
-Version: *VERSION HERE*
-
-### Steps to Reproduce
-
-1. What
-2. you
-3. did.
-
-### Expected Result
-
-What you thought would happen.
-
-### Actual Result
-
-What actually happened. Maybe a screenshot/recording?
-
-### Logs
-
-What you saw along the way, e.g.:
-
-- latest install logs: `ls -1 sentry_install_log-*.txt | tail -1 | xargs cat`
-- `docker-compose logs` output
diff --git a/.github/ISSUE_TEMPLATE/config.yml b/.github/ISSUE_TEMPLATE/config.yml
index 22655b7..c58204a 100644
--- a/.github/ISSUE_TEMPLATE/config.yml
+++ b/.github/ISSUE_TEMPLATE/config.yml
@@ -1,8 +1,5 @@
 blank_issues_enabled: false
 contact_links:
-  - name: Question about self-hosting/on-premise
-    url: https://forum.sentry.io
-    about: Please use the community forums for questions
   - name: Report a security vulnerability
     url: https://sentry.io/security/#vulnerability-disclosure
     about: Please see our guide for responsible disclosure.
diff --git a/.github/ISSUE_TEMPLATE/feature-request.yml b/.github/ISSUE_TEMPLATE/feature-request.yml
new file mode 100644
index 0000000..3e5de4d
--- /dev/null
+++ b/.github/ISSUE_TEMPLATE/feature-request.yml
@@ -0,0 +1,28 @@
+name:  Feature Request
+description: Tell us about a problem our software could solve but doesn't.
+body:
+  - type: textarea
+    id: problem
+    attributes:
+      label: Problem Statement
+      description: What problem could `self-hosted` solve that it doesn't?
+      placeholder: |-
+        I want to make whirled peas, but `self-hosted` doesn't blend.
+    validations:
+      required: true
+  - type: textarea
+    id: expected
+    attributes:
+      label: Solution Brainstorm
+      description: We know you have bright ideas to share ... share away, friend.
+      placeholder: |-
+        Add a blender to `self-hosted`.
+    validations:
+      required: false
+  - type: markdown
+    attributes:
+      value: |-
+        ## Thanks
+        Check our [triage docs](https://open.sentry.io/triage/) for what to expect next.
+    validations:
+      required: false
diff --git a/.github/ISSUE_TEMPLATE/feature_request.md b/.github/ISSUE_TEMPLATE/feature_request.md
deleted file mode 100644
index 32e32f2..0000000
--- a/.github/ISSUE_TEMPLATE/feature_request.md
+++ /dev/null
@@ -1,18 +0,0 @@
----
-name:  Feature Request
-about: Suggest an idea for improving Self-Hosted Sentry
----
-
-### Summary
-
-One paragraph description of the feature.
-
-### Motivation
-
-Why should this be worked on? What problems or use cases does it solve or
-improve?
-
-### Additional Context
-
-Any other context or screenshots or API request payload/responses that
-pertain to the feature.
diff --git a/.github/ISSUE_TEMPLATE/problem-report.yml b/.github/ISSUE_TEMPLATE/problem-report.yml
new file mode 100644
index 0000000..4a4047a
--- /dev/null
+++ b/.github/ISSUE_TEMPLATE/problem-report.yml
@@ -0,0 +1,86 @@
+name:  Problem Report
+description: Tell us about something that's not working the way you expect.
+body:
+  - type: input
+    id: self_hosted_version
+    attributes:
+      label: Self-Hosted Version
+      placeholder: 21.7.0  should look like this (check the footer)
+      description: What version of self-hosted Sentry are you running?
+    validations:
+      required: true
+  - type: input
+    id: cpu_architecture
+    attributes:
+      label: CPU Architecture
+      placeholder: x86_64  should look like this
+      description: |
+        What cpu architecture are you running self-hosted on?
+        e.g: (docker info --format '{{.Architecture}}')
+    validations:
+      required: true
+  - type: input
+    id: docker_version
+    attributes:
+      label: Docker Version
+      placeholder: 20.10.16  should look like this
+      description: |
+        What version of docker are you using to run self-hosted?
+        e.g: (docker --version)
+    validations:
+      required: true
+  - type: input
+    id: docker_compose_version
+    attributes:
+      label: Docker Compose Version
+      placeholder: 2.6.0  should look like this (docker compose version)
+      description: |
+        What version of docker-compose are you using to run self-hosted?
+        You need to use docker-compose --version if you are running < v2.0.0.
+    validations:
+      required: true
+  - type: textarea
+    id: repro
+    attributes:
+      label: Steps to Reproduce
+      description: How can we see what you're seeing? Specific is terrific.
+      placeholder: |-
+        1. foo
+        2. bar
+        3. baz
+    validations:
+      required: true
+  - type: textarea
+    id: expected
+    attributes:
+      label: Expected Result
+    validations:
+      required: true
+  - type: textarea
+    id: actual
+    attributes:
+      label: Actual Result
+      description: |
+        Logs? Screenshots? Yes, please.
+        e.g.:
+          - latest install logs: `ls -1 sentry_install_log-*.txt | tail -1 | xargs cat`
+          - `docker compose logs` output
+      placeholder: |-
+        e.g.:
+        - logs output
+    validations:
+      required: true
+  - type: textarea
+    id: event_id
+    attributes:
+      label: Event ID
+      description: |
+        If you opted into sending errors to our error monitoring and the error has an event ID, enter it here!
+      placeholder: c2d85058-d3b0-4d85-a509-e2ba965845d7
+  - type: markdown
+    attributes:
+      value: |-
+        ## Thanks
+        Check our [triage docs](https://open.sentry.io/triage/) for what to expect next.
+    validations:
+      required: false
diff --git a/.github/PULL_REQUEST_TEMPLATE.md b/.github/PULL_REQUEST_TEMPLATE.md
new file mode 100644
index 0000000..501be2d
--- /dev/null
+++ b/.github/PULL_REQUEST_TEMPLATE.md
@@ -0,0 +1,16 @@
+
+
+
+<!-- Describe your PR here. -->
+
+
+
+<!--
+
+  Sentry employees and contractors can delete or ignore the following.
+
+-->
+
+### Legal Boilerplate
+
+Look, I get it. The entity doing business as "Sentry" was incorporated in the State of Delaware in 2015 as Functional Software, Inc. and is gonna need some rights from me in order to utilize my contributions in this here PR. So here's the deal: I retain all rights, title and interest in and to my contributions, and by keeping this boilerplate intact I confirm that Sentry can use, modify, copy, and redistribute my contributions, under Sentry's choice of terms.
diff --git a/.github/workflows/enforce-license-compliance.yml b/.github/workflows/enforce-license-compliance.yml
new file mode 100644
index 0000000..46d724d
--- /dev/null
+++ b/.github/workflows/enforce-license-compliance.yml
@@ -0,0 +1,16 @@
+name: Enforce License Compliance
+
+on:
+  push:
+    branches: [master]
+  pull_request:
+    branches: [master]
+
+jobs:
+  enforce-license-compliance:
+    runs-on: ubuntu-latest
+    steps:
+      - name: 'Enforce License Compliance'
+        uses: getsentry/action-enforce-license-compliance@main
+        with:
+          fossa_api_key: ${{ secrets.FOSSA_API_KEY }}
diff --git a/.github/workflows/lock.yml b/.github/workflows/lock.yml
index 5d57d6f..cd1d4ef 100644
--- a/.github/workflows/lock.yml
+++ b/.github/workflows/lock.yml
@@ -5,6 +5,7 @@ on:
   workflow_dispatch:
 jobs:
   lock:
+    if: github.repository_owner == 'getsentry'
     runs-on: ubuntu-latest
     steps:
       - uses: getsentry/forked-action-lock-threads@master
diff --git a/.github/workflows/pre-commit.yml b/.github/workflows/pre-commit.yml
new file mode 100644
index 0000000..06fd36e
--- /dev/null
+++ b/.github/workflows/pre-commit.yml
@@ -0,0 +1,16 @@
+name: pre-commit
+
+on:
+  pull_request:
+  push:
+    branches: [master]
+
+jobs:
+  pre-commit:
+    runs-on: ubuntu-latest
+    steps:
+    - uses: actions/checkout@v3
+    - uses: actions/setup-python@v4
+      with:
+        python-version: 3.x
+    - uses: pre-commit/action@v3.0.0
diff --git a/.github/workflows/release.yml b/.github/workflows/release.yml
index 1d2afb6..aa4f527 100644
--- a/.github/workflows/release.yml
+++ b/.github/workflows/release.yml
@@ -15,14 +15,16 @@ on:
     - cron: "0 18 15 * *"
 jobs:
   release:
+    if: github.repository_owner == 'getsentry'
     runs-on: ubuntu-latest
     name: "Release a new version"
     steps:
-      - uses: actions/checkout@v2
+      - uses: actions/checkout@v3
         with:
           token: ${{ secrets.GH_RELEASE_PAT }}
           fetch-depth: 0
       - name: Prepare release
+        id: prepare-release
         uses: getsentry/action-prepare-release@v1
         env:
           GITHUB_TOKEN: ${{ secrets.GH_RELEASE_PAT }}
@@ -30,3 +32,26 @@ jobs:
           version: ${{ github.event.inputs.version }}
           force: ${{ github.event.inputs.force }}
           calver: true
+    outputs:
+      release-version: ${{ env.RELEASE_VERSION }}
+  dogfood-release:
+    if: github.repository_owner == 'getsentry'
+    runs-on: ubuntu-latest
+    name: Create release on self-hosted dogfood instance
+    needs: release
+    steps:
+      - uses: actions/checkout@v3
+        with:
+          token: ${{ secrets.GH_RELEASE_PAT }}
+          fetch-depth: 0
+      - uses: getsentry/action-release@v1
+        env:
+          SENTRY_ORG: self-hosted
+          SENTRY_PROJECT: installer
+          SENTRY_URL: https://self-hosted.getsentry.net/
+          SENTRY_AUTH_TOKEN: ${{ secrets.SELF_HOSTED_RELEASE_TOKEN }}
+        with:
+          environment: production
+          version: ${{ needs.release.outputs.release-version }}
+          ignore_empty: true
+          ignore_missing: true
diff --git a/.github/workflows/stale.yml b/.github/workflows/stale.yml
index b2a339a..8586d99 100644
--- a/.github/workflows/stale.yml
+++ b/.github/workflows/stale.yml
@@ -1,10 +1,11 @@
-name: 'Close stale issues/PRs'
+name: 'close stale issues/PRs'
 on:
   schedule:
-    - cron: '* */6 * * *'
+    - cron: '0 0 * * *'
   workflow_dispatch:
 jobs:
   stale:
+    if: github.repository_owner == 'getsentry'
     runs-on: ubuntu-latest
     steps:
       - uses: actions/stale@87c2b794b9b47a9bec68ae03c01aeb572ffebdb1
@@ -18,12 +19,12 @@ jobs:
           debug-only: false
           ascending: false
 
-          exempt-issue-labels: "Status: Accepted,Status: On Hold"
+          exempt-issue-labels: "Status: Backlog,Status: In Progress"
           stale-issue-label: "Status: Stale"
           stale-issue-message: |-
             This issue has gone three weeks without activity. In another week, I will close it.
 
-            But! If you comment or otherwise update it, I will reset the clock, and if you label it `Status: Accepted`, I will leave it alone ... forever!
+            But! If you comment or otherwise update it, I will reset the clock, and if you label it `Status: Backlog` or `Status: In Progress`, I will leave it alone ... forever!
 
             ----
 
@@ -32,12 +33,12 @@ jobs:
           close-issue-label: ""
           close-issue-message: ""
 
-          exempt-pr-labels: "Status: Accepted,Status: On Hold"
+          exempt-pr-labels: "Status: Backlog,Status: In Progress"
           stale-pr-label: "Status: Stale"
           stale-pr-message: |-
             This pull request has gone three weeks without activity. In another week, I will close it.
 
-            But! If you comment or otherwise update it, I will reset the clock, and if you label it `Status: Accepted`, I will leave it alone ... forever!
+            But! If you comment or otherwise update it, I will reset the clock, and if you label it `Status: Backlog` or `Status: In Progress`, I will leave it alone ... forever!
 
             ----
 
diff --git a/.github/workflows/test.yml b/.github/workflows/test.yml
index 6222568..04d18f1 100644
--- a/.github/workflows/test.yml
+++ b/.github/workflows/test.yml
@@ -6,47 +6,74 @@ on:
   push:
     branches:
       - "master"
-      - "releases/**"
+      - "release/**"
   pull_request:
-env:
-  DOCKER_COMPOSE_VERSION: 1.24.1
+  schedule:
+    - cron: '1 0 * * *'
 defaults:
   run:
     shell: bash
 jobs:
-  test:
+  e2e-test:
+    runs-on: ubuntu-20.04
+    name: "Sentry self-hosted end-to-end tests"
+    steps:
+      - name: Checkout
+        uses: actions/checkout@v3
+        with:
+          path: self-hosted
+      - name: End to end tests
+        uses: getsentry/action-self-hosted-e2e-tests@77805295ebff8a603def5970e18743ded72cb304
+        with:
+          project_name: self-hosted
+
+  unit-test:
+    runs-on: ubuntu-20.04
+    name: "unit tests"
+    steps:
+      - name: Checkout
+        uses: actions/checkout@v3
+
+      - name: Unit Tests
+        run: ./unit-test.sh
+
+  integration-test:
+    runs-on: ubuntu-20.04
+    name: "integration test"
     strategy:
-      # Only run one job at a time as they are quite demanding
-      max-parallel: 1
+      fail-fast: false
       matrix:
-        py2: ["", "1"]
-    runs-on: ubuntu-18.04
-    name: "test${{ matrix.py2 == '1' && ' PY2' || ''}}"
+        include:
+          # Disabled due to https://github.com/getsentry/self-hosted/issues/1415
+          # - compose_version: "1.28.0"
+          #   compose_path: "/usr/local/bin"
+          # - compose_version: "1.29.2"
+          #   compose_path: "/usr/local/bin"
+          - compose_version: "v2.0.1"
+            compose_path: "/usr/local/lib/docker/cli-plugins"
+          - compose_version: "v2.7.0"
+            compose_path: "/usr/local/lib/docker/cli-plugins"
+    env:
+      COMPOSE_PROJECT_NAME: self-hosted-${{ strategy.job-index }}
     steps:
-      - name: Pin docker-compose
-        run: |
-          sudo rm /usr/local/bin/docker-compose
-          curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
-          chmod +x docker-compose
-          sudo mv docker-compose /usr/local/bin
-
       - name: Checkout
-        uses: actions/checkout@v2
+        uses: actions/checkout@v3
 
-      - name: Install and test
-        env:
-          COMPOSE_PARALLEL_LIMIT: 50
-          COMPOSE_HTTP_TIMEOUT: 450
-          SENTRY_PYTHON2: ${{ matrix.py2 == '1' || '' }}
+      - name: Get Compose
         run: |
-          ./install.sh
-          ./test.sh
-          printf "Testing in-place upgrade"
-          ./install.sh --minimize-downtime
-          ./test.sh
+          # Always remove `docker compose` support as that's the newer version
+          # and comes installed by default nowadays.
+          sudo rm -f "/usr/local/lib/docker/cli-plugins/docker-compose"
+          sudo rm -f "${{ matrix.compose_path }}/docker-compose"
+          sudo mkdir -p "${{ matrix.compose_path }}"
+          sudo curl -L https://github.com/docker/compose/releases/download/${{ matrix.compose_version }}/docker-compose-`uname -s`-`uname -m` -o "${{ matrix.compose_path }}/docker-compose"
+          sudo chmod +x "${{ matrix.compose_path }}/docker-compose"
+
+      - name: Integration Test
+        run: ./integration-test.sh
 
       - name: Inspect failure
         if: failure()
         run: |
-          docker-compose ps
-          docker-compose logs
+          docker compose ps
+          docker compose logs
diff --git a/.github/workflows/validate-new-issue.yml b/.github/workflows/validate-new-issue.yml
deleted file mode 100644
index 3252396..0000000
--- a/.github/workflows/validate-new-issue.yml
+++ /dev/null
@@ -1,36 +0,0 @@
-name: Validate new issue
-on:
-  issues:
-    types: ['opened']
-jobs:
-  validate-new-issue:
-    runs-on: ubuntu-latest
-    steps:
-    - uses: actions/checkout@v2
-    - name: "Validate issue against templates"
-      shell: bash
-      run: |
-        # Look for a template where the headings match this issue's
-        echo "${{ github.event.issue.body }}" > issue-body
-        for template in $(ls .github/ISSUE_TEMPLATE/*.md 2> /dev/null); do
-          echo -n "$(basename $template)? "
-          # <() is process substitution - https://superuser.com/a/1060002
-          if diff -rub <(grep '^#' $template) <(grep '^#' issue-body) > /dev/null; then
-            echo " "
-            exit 0
-          else
-            echo ""
-          fi
-        done
-
-        # Failed to find a match! Close the issue.
-        echo "${{ github.token }}" | gh auth login --with-token
-        cat << EOF > comment
-        {"body": "Sorry, friend. As far as this ol' bot can tell, your issue does not use one of this repo's available issue templates. Please [try again using a template](https://github.com/${{ github.repository }}/issues/new/choose) so that we have the best chance of understanding and addressing your issue. (And if I'm confused, please [let us know](https://github.com/getsentry/.github/issues/new?title=template+enforcer+is+confused&body=${{ github.event.issue.html_url }}). )\n\n----\n\n[![Did you see the memo about this?](https://user-images.githubusercontent.com/134455/104515469-e04a9c80-55c0-11eb-8e15-ffe9c0b8dd7f.gif)](https://www.youtube.com/watch?v=Fy3rjQGc6lA)"}
-        EOF
-
-        # Might get `gh issue comment` some day - https://github.com/cli/cli/issues/517
-        gh api "https://api.github.com/repos/${{ github.repository }}/issues/${{ github.event.issue.number }}/comments" \
-          --method POST \
-          --input comment
-        gh issue close ${{ github.event.issue.number }}
diff --git a/.gitignore b/.gitignore
index 707622f..b52e82d 100644
--- a/.gitignore
+++ b/.gitignore
@@ -1,3 +1,6 @@
+# Error reporting choice cache
+.reporterrors
+
 # Byte-compiled / optimized / DLL files
 __pycache__/
 *.py[cod]
@@ -34,6 +37,9 @@ var/
 pip-log.txt
 pip-delete-this-directory.txt
 sentry_install_log*.txt
+sentry_reset_log*.txt
+sentry_restore_log*.txt
+sentry_backup_log*.txt
 
 # Unit test / coverage reports
 htmlcov/
@@ -69,14 +75,21 @@ target/
 # https://docs.docker.com/compose/extends/
 docker-compose.override.yml
 
+# https://docs.docker.com/compose/environment-variables/#using-the---env-file--option
+.env.custom
+
 *.tar
 data/
+
+# Editor / IDE
 .vscode/tags
+.idea
 
 # custom Sentry config
 sentry/sentry.conf.py
 sentry/config.yml
 sentry/*.bak
+sentry/enhance-image.sh
 sentry/requirements.txt
 relay/credentials.json
 relay/config.yml
@@ -84,3 +97,10 @@ symbolicator/config.yml
 geoip/GeoIP.conf
 geoip/*.mmdb
 geoip/.geoipupdate.lock
+
+# wal2json download
+postgres/wal2json
+
+# integration testing
+_integration-test/custom-ca-roots/nginx/*
+sentry/test-custom-ca-roots.py
diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml
new file mode 100644
index 0000000..1d99537
--- /dev/null
+++ b/.pre-commit-config.yaml
@@ -0,0 +1,24 @@
+repos:
+- repo: local
+  hooks:
+    # Based on https://github.com/scop/pre-commit-shfmt/blob/main/.pre-commit-hooks.yaml
+    # Customized to also work on ARM, and give diff for CI on failure.
+    - id: shfmt
+      name: shfmt
+      description: Format shell source code
+      language: docker_image
+      entry: --net none mvdan/shfmt:v3.5.1
+      args: [-w, -d]
+      files: .*\.sh
+      stages: [commit, merge-commit, push, manual]
+
+- repo: https://github.com/pre-commit/pre-commit-hooks
+  rev: v4.3.0
+  hooks:
+  - id: check-case-conflict
+  - id: check-executables-have-shebangs
+  - id: check-merge-conflict
+  - id: check-symlinks
+  - id: end-of-file-fixer
+  - id: trailing-whitespace
+  - id: check-yaml
diff --git a/CHANGELOG.md b/CHANGELOG.md
new file mode 100644
index 0000000..ff8b4ff
--- /dev/null
+++ b/CHANGELOG.md
@@ -0,0 +1,321 @@
+# Changelog
+
+## 23.4.0
+
+### Postgres 14 Upgrade
+
+We've now included an upgrade from Postgres 9.6 to 14.5 that will automatically be run via the `./install.sh` script.
+
+By: @hubertdeng123 (#2074)
+
+### Various fixes & improvements
+
+- Remove clean function testing line (#2082) by @hubertdeng123
+- Fix command to get docker compose version in problem report template (#2080) by @hubertdeng123
+- Tweak permissioning of backup file in backup script to read/write for all users (#2043) by @hubertdeng123
+- Remove commit-batch-size parameter (#2058) by @hubertdeng123
+- Support external sourcemaps bigger, than 1Mb (#2050) by @le0pard
+- Add github setup instructions to config.example.yml (#2051) by @tm1000
+- ref(snuba): Use snuba self-hosted settings (#2039) by @enochtangg
+
+## 23.3.1
+
+### Various fixes & improvements
+
+- Bump Kafka version to keep up with SaaS (#2037) by @chadwhitacre
+- Add Backup/restore scripts (#2029) by @hubertdeng123
+- Add opt in error monitoring to reset and clean scripts (#2021) by @hubertdeng123
+
+## 23.3.0
+
+### Various fixes & improvements
+
+- Remove ZooKeeper snapshot (#2020) by @dereckson
+- feat(snuba): Add snuba sessions subscription service (#2006) by @klboke
+- Add backup/restore integration tests (#2012) by @hubertdeng123
+- ref(snuba): Remove snuba-cleanup, snuba-transactions-cleanup jobs (#2003) by @klboke
+- ref(replays): Remove the session-replay-ui flag (#2010) by @ryan953
+- Remove broken replay integration test (#2011) by @hubertdeng123
+- Bump self-hosted-e2e-tests action commit sha (#2008) by @hubertdeng123
+- Revert symbolicator tests (#2004) by @hubertdeng123
+- post-process-forwarder: Update CLI command (#1999) by @lynnagara
+- feat(replays): add replays to self hosted (#1990) by @JoshFerge
+- Remove issue status helper automation (#1989) by @hubertdeng123
+- Add proxy buffer size config to fix Bad Gateway (#1984) by @SCjona
+- Reference paths relative to project root (#1800) by @spawnia
+- Run close stale issues/PRs only on getsentry (#1969) by @aminvakil
+
+## 23.2.0
+
+### Various fixes & improvements
+
+- Run lock issues/PRs only on getsentry (#1966) by @aminvakil
+- Updates Redis to 6.2.10 (#1937) by @danielhartnell
+- Handle missing example files gracefully (#1950) by @chadwhitacre
+- Fix post-release.sh for `git pull` (#1938) by @BYK
+- Manually change 23.1.1 to nightly (#1936) by @hubertdeng123
+
+## 23.1.1
+
+### Various fixes & improvements
+
+- ci: Add test for symbolicator pipeline (#1916) by @ethanhs
+
+## 23.1.0
+
+### Various fixes & improvements
+
+- ci: Check health of services after running integration tests and fix snuba-replacer (#1897) by @ethanhs
+- Add wal2json debugging (#1906) by @chadwhitacre
+- Pick up CI bugfix (#1905) by @chadwhitacre
+- ref: Move jq build to error-handling.sh, and use proxy config (#1895) by @ethanhs
+- fix(CI): use default curl retry mechanism for wal2json install (#1890) by @volokluev
+- ref: Retry wal2json download in installer (#1881) by @ethanhs
+- ci: Remove GCB and update Github Action SHA (#1880) by @ethanhs
+
+## 22.12.0
+
+### Various fixes & improvements
+
+- Build each service image individually (#1858) by @ethanhs
+- Set higher kafka healthcheck timeout and fix clickhouse timeout (#1855) by @ethanhs
+- Add --skip-sse42-requirements to install.sh and enable SKIP_SSE42_REQUIREMENTS override (#1790) by @erinaceous
+- Fix commit-log-topic parameter configuration problem (#1817) by @klboke
+- Add .idea to .gitignore (#1803) by @spawnia
+- Add USE_X_FORWARDED_HOST to example config (#1804) by @crinjes
+- (fix): Fix contributor PR e2e tests (#1820) by @hubertdeng123
+
+## 22.11.0
+
+### Various fixes & improvements
+
+- Fix jq usage (#1814) by @ethanhs
+- Try adding end to end tests using new action (#1806) by @ethanhs
+- Add context line, error msg to envelope (#1784) by @hubertdeng123
+- Update to actions/checkoutv3 to address upcoming github deprecations (#1792) by @mattgauntseo-sentry
+- ref: upgrade actions/setup-python to avoid set-output deprecation (#1789) by @asottile-sentry
+- Enforce error reporting (#1777) by @hubertdeng123
+- Upload end of log as breadcrumbs, use exceptions and stacktrace (#1775) by @ethanhs
+- Fix sentry release for dogfood instance (#1768) by @hubertdeng123
+- Add pre-commit config (#1738) by @ethanhs
+- Do not send event on INT signal (#1773) by @hubertdeng123
+
+## 22.10.0
+
+### Various fixes & improvements
+
+- Split post process forwarders (#1759) by @chadwhitacre
+- Revert "Enforce error reporting for self-hosted" (#1755) by @hubertdeng123
+- Enforce error reporting for self-hosted (#1753) by @hubertdeng123
+- ref: Remove unused scripts and code (#1710) by @BYK
+- Check to see if docker compose exists, else error out (#1733) by @hubertdeng123
+- Fix minimum version requirements for docker and docker compose (#1732) by @hubertdeng123
+- Factor out clean and use it in unit-test (#1731) by @chadwhitacre
+- Reorganize unit test layout (#1729) by @hubertdeng123
+- Request event ID in issue template (#1723) by @ethanhs
+- Tag releases with sentry-cli (#1718) by @hubertdeng123
+- Send full logs as an attachment to our dogfood instance (#1715) by @hubertdeng123
+
+## 22.9.0
+
+### Various fixes & improvements
+
+- Fix traceback hash for error monitoring (#1700) by @hubertdeng123
+- Add section about error monitoring to the README (#1699) by @ethanhs
+- Switch from .reporterrors file to flag + envvar (#1697) by @chadwhitacre
+- Rename flag to --skip-user-creation (#1696) by @chadwhitacre
+- Default to not sending data to Sentry for now (#1695) by @chadwhitacre
+- fix(e2e tests): Pull branch that initially triggers gcp build for PRs (#1694) by @hubertdeng123
+- fix(e2e tests): Add .reporterrors file for GCP run of e2e tests (#1691) by @hubertdeng123
+- Error monitoring of the self-hosted installer (#1679) by @ethanhs
+- added docker commands in the description (#1673) by @victorelec14
+- Use docker-compose 2.7.0 instead of 2.2.3 in CI (#1591) by @aminvakil
+
+## 22.8.0
+
+- No documented changes.
+
+## 22.7.0
+
+### Various fixes & improvements
+
+- ref: use sort -V to check minimum versions (#1553) by @ethanhs
+- Get more data from users in issue templates (#1497) by @aminvakil
+- Add ARM support (#1538) by @chadwhitacre
+- do not use gosu for snuba-transactions-cleanup and snuba-cleanup (#1564) by @goganchic
+- ref: Replace regex with --short flag to get compose version (#1551) by @ethanhs
+- Improve installation through proxy (#1543) by @goganchic
+- Cleanup .env{,.custom} handling (#1539) by @chadwhitacre
+- Bump nginx:1.22.0-alpine (#1506) by @aminvakil
+- Run release a new version job only on getsentry (#1529) by @aminvakil
+
+## 22.6.0
+
+### Various fixes & improvements
+
+- fix "services.web.healthcheck.retries must be a number" (#1482) by @yuval1986
+- Add volume for nginx cache (#1511) by @glensc
+- snuba: New subscriptions infrastucture rollout (#1507) by @lynnagara
+- Ease modification of base image (#1479) by @spawnia
+
+## 22.5.0
+
+### Various fixes & improvements
+
+- ref: reset user to root for installation (#1469) by @asottile-sentry
+- Document From email display name (#1446) by @chadwhitacre
+- Bring in CLA Lite (#1439) by @chadwhitacre
+- fix: replace git.io links with redirect targets (#1430) by @asottile-sentry
+
+## 22.4.0
+
+### Various fixes & improvements
+
+- Use better API key when available (#1408) by @chadwhitacre
+- Use a custom action (#1407) by @chadwhitacre
+- Add some debug logging (#1340) by @chadwhitacre
+- meta(gha): Deploy workflow enforce-license-compliance.yml (#1388) by @chadwhitacre
+- Turn off containers under old name as well (#1384) by @chadwhitacre
+
+## 22.3.0
+
+### Various fixes & improvements
+
+- Run CI every night (#1334) by @aminvakil
+- Docker-Compose: Avoid setting hostname to '' (#1365) by @glensc
+- meta(gha): Deploy workflow enforce-license-compliance.yml (#1375) by @chadwhitacre
+- ci: Change stale GitHub workflow to run once a day (#1371) by @kamilogorek
+- ci: Temporary fix for interactive prompt on createuser (#1370) by @BYK
+- meta(gha): Deploy workflow enforce-license-compliance.yml (#1347) by @chadwhitacre
+- Add SaaS nudge to README (#1327) by @chadwhitacre
+
+## 22.2.0
+
+### Various fixes & improvements
+
+- fix: unbound variable _group in reset/dc-detect-version script (#1283) (#1284) by @lovetodream
+- Remove routing helper (#1323) by @chadwhitacre
+- Bump nginx:1.21.6-alpine (#1319) by @aminvakil
+- Add a cloudbuild.yaml for GCB (#1315) by @chadwhitacre
+- Update set-up-and-migrate-database.sh (#1308) by @drmrbrewer
+- Pull relay explicitly to avoid garbage in creds (#1301) by @chadwhitacre
+- Improve logging of docker versions and relay creds (#1298) by @chadwhitacre
+- Remove file again (#1299) by @chadwhitacre
+- Clean up relay credentials generation (#1289) by @chadwhitacre
+- Add CI compose version 1.29.2 / 2.0.1 / 2.2.3 (#1290) by @chadwhitacre
+- Revert "Add CI compose version 1.29.2 / 2.0.1 / 2.2.3 (#1251)" (#1272) by @chadwhitacre
+- Add CI compose version 1.29.2 / 2.0.1 / 2.2.3 (#1251) by @aminvakil
+
+## 22.1.0
+
+### Various fixes & improvements
+
+- Make healthcheck variables configurable in .env (#1248) by @aminvakil
+- Take some actions to avoid unhealthy containers (#1241) by @chadwhitacre
+- Install: setup umask (#1222) by @glensc
+- Deprecated /docker-entrypoint.sh call (#1218) by @marcinroman
+- Bump nginx:1.21.5-alpine (#1230) by @aminvakil
+- Fix reset.sh docker-compose call (#1215) by @aminvakil
+- Set worker_processes to auto (#1207) by @aminvakil
+
+## 21.12.0
+
+### Support Docker Compose v2 (ongoing)
+
+Self-hosted Sentry mostly works with Docker Compose v2 (in addition to v1 >= 1.28.0). There is [one more bug](https://github.com/getsentry/self-hosted/issues/1133) we are trying to squash.
+
+By: @chadwhitacre (#1179)
+
+### Prevent Component Drift
+
+When a user runs the `install.sh` script, they get the latest version of the Sentry, Snuba, Relay and Symbolicator projects. However there is no guarantee they have pulled the latest `self-hosted` version first, and running an old one may cause problems. To mitigate this, we now perform a check during installation that the user is on the latest commit if they are on the `master` branch. You can disable this check with `--skip-commit-check`.
+
+By: @chadwhitacre (#1191), @aminvakil (#1186)
+
+### React to log4shell
+
+Self-hosted Sentry is [not vulnerable](https://github.com/getsentry/self-hosted/issues/1196) to the [log4shell](https://log4shell.com/) vulnerability.
+
+By: @chadwhitacre (#1203)
+
+### Forum  Issues
+
+In the interest of reducing sources of truth, providing better support, and restarting the fire of the self-hosted Sentry community, we [deprecated the Discourse forum in favor of GitHub Issues](https://github.com/getsentry/self-hosted/issues/1151).
+
+By: @chadwhitacre (#1167, #1160, #1159)
+
+### Rename onpremise to self-hosted (ongoing)
+
+In the beginning we used the term "on-premise" and over time we introduced the term "self-hosted." In an effort to regain some consistency for both branding and developer mental overhead purposes, we are standardizing on the term "self-hosted." This release includes a fair portion of the work towards this across multiple repos, hopefully a future release will include the remainder. Some orphaned containers / volumes / networks are [expected](https://github.com/getsentry/self-hosted/pull/1169&#35;discussion_r756401917). You may clean them up with `docker-compose down --remove-orphans`.
+
+By: @chadwhitacre (#1169)
+
+### Add support for custom DotEnv file
+
+There are several ways to [configure self-hosted Sentry](https://develop.sentry.dev/self-hosted/&#35;configuration) and one of them is the `.env` file. In this release we add support for a `.env.custom` file that is git-ignored to make it easier for you to override keys configured this way with custom values. Thanks to @Sebi94nbg for the contribution!
+
+By: @Sebi94nbg (#1113)
+
+### Various fixes & improvements
+
+- Revert "Rename onpremise to self-hosted" (5495fe2e) by @chadwhitacre
+- Rename onpremise to self-hosted (9ad05d87) by @chadwhitacre
+
+## 21.11.0
+
+### Various fixes & improvements
+
+- Fix #1079 - bug in reset.sh (#1134) by @chadwhitacre
+- ci: Enable parallel tests again, increase timeouts (#1125) by @BYK
+- fix: Hide compose errors during version check (#1124) by @BYK
+- build: Omit nightly bump commit from changelog (#1120) by @BYK
+- build: Set master version to nightly (d3e77857)
+
+## 21.10.0
+
+### Support for Docker Compose v2 (ongoing)
+
+You asked for it and you did it! Sentry self-hosted now can work with Docker Compose v2 thanks to our community's contributions.
+
+PRs: #1116
+
+### Various fixes & improvements
+
+- docs: simplify Linux `sudo` instructions in README (#1096)
+- build: Set master version to nightly (58874cf9)
+
+## 21.9.0
+
+- fix(healthcheck): Increase retries to 5 (#1072)
+- fix(requirements): Make compose version check bw-compatible (#1068)
+- ci: Test with the required minimum docker-compose (#1066)
+  Run tests using docker-compose `1.28.0` instead of latest
+- fix(clickhouse): Use correct HTTP port for healthcheck (#1069)
+  Fixes the regular `Unexpected packet` errors in Clickhouse
+
+## 21.8.0
+
+- feat: Support custom CA roots ([#27062](https://github.com/getsentry/sentry/pull/27062)), see the [docs](https://develop.sentry.dev/self-hosted/custom-ca-roots/) for more details.
+- fix: Fix `curl` image to version 7.77.0
+- upgrade: docker-compose version to 1.29.2
+- feat: Leverage health checks for depends_on
+
+## 21.7.0
+
+- No documented changes.
+
+## 21.6.3
+
+- No documented changes.
+
+## 21.6.2
+
+- BREAKING CHANGE: The frontend bundle will be loaded asynchronously (via [#25744](https://github.com/getsentry/sentry/pull/25744)). This is a breaking change that can affect custom plugins that access certain globals in the django template. Please see https://forum.sentry.io/t/breaking-frontend-changes-for-custom-plugins/14184 for more information.
+
+## 21.6.1
+
+- No documented changes.
+
+## 21.6.0
+
+- feat: Add healthchecks for redis, memcached and postgres (#975)
diff --git a/CONTRIBUTING.md b/CONTRIBUTING.md
new file mode 100644
index 0000000..49120af
--- /dev/null
+++ b/CONTRIBUTING.md
@@ -0,0 +1,7 @@
+## Testing
+
+Validate changes to the setup by running the integration test:
+
+```shell
+./integration-test.sh
+```
diff --git a/LICENSE b/LICENSE
index 17ad403..a6a6364 100644
--- a/LICENSE
+++ b/LICENSE
@@ -16,7 +16,7 @@ Additional Use Grant: You may make use of the Licensed Work, provided that you d
                       error-reporting or application monitoring features of the
                       Licensed Work.
 
-Change Date:          2024-01-15
+Change Date:          2026-04-16
 
 Change License:       Apache License, Version 2.0
 
diff --git a/README.md b/README.md
index f8c480d..7a9a74c 100644
--- a/README.md
+++ b/README.md
@@ -1,71 +1,81 @@
-# Self-Hosted Sentry 21.1.0
+# Self-Hosted Sentry 23.4.0
 
 Official bootstrap for running your own [Sentry](https://sentry.io/) with [Docker](https://www.docker.com/).
 
 ## Requirements
 
- * Docker 19.03.6+
- * Compose 1.24.1+
- * 8 GB RAM
+* Docker 19.03.6+
+* Compose 1.28.0+
+* 4 CPU Cores
+* 8 GB RAM
+* 20 GB Free Disk Space
 
 ## Setup
 
-To get started with all the defaults, simply clone the repo and run `./install.sh` in your local check-out. Sentry uses Python 3 by default since December 4th, 2020. If you want/need to stick with the Python 2 versions of the images, you can run `SENTRY_PYTHON2=1 ./install.sh` instead. Note that we are planning to end our Python 2 support completely by January 2021.
+### Installation
 
-During the install, a prompt will ask if you want to create a user account. If you require that the install not be blocked by the prompt, run `./install.sh --no-user-prompt`.
+To get started with all the defaults, simply clone the repo and run `./install.sh` in your local check-out. Please also read the section below about monitoring. Sentry uses Python 3 by default since December 4th, 2020 and Sentry 21.1.0 is the last version to support Python 2.
 
-There may need to be modifications to the included example config files (`sentry/config.example.yml` and `sentry/sentry.conf.example.py`) to accommodate your needs or your environment (such as adding GitHub credentials). If you want to perform these, do them before you run the install script and copy them without the `.example` extensions in the name (such as `sentry/sentry.conf.py`) before running the `install.sh` script.
+During the install, a prompt will ask if you want to create a user account. If you require that the install not be blocked by the prompt, run `./install.sh --skip-user-prompt`.
 
-The recommended way to customize your configuration is using the files below, in that order:
+Thinking of not managing this yourself? Check out the [SaaS migration docs](https://docs.sentry.io/product/sentry-basics/migration/) or [contact us](https://sentry.io/from/self-hosted) for help.
 
- * `config.yml`
- * `sentry.conf.py`
- * `.env` w/ environment variables
+Please visit [our documentation](https://develop.sentry.dev/self-hosted/) for everything else.
 
-We currently support a very minimal set of environment variables to promote other means of configuration.
+### Customize DotEnv (.env) file
 
-If you have any issues or questions, our [Community Forum](https://forum.sentry.io/c/on-premise) is at your service! Everytime you run the install script, it will generate a log file, `sentry_install_log-<ISO_TIMESTAMP>.txt` with the output. Sharing these logs would help people diagnose any issues you might be having.
+Environment specific configurations can be done in the `.env.custom` file. It will be located in the root directory of the Sentry installation, and if it exists then `.env` will be ignored entirely.
 
-## Versioning
+By default, there exists no `.env.custom` file. In this case, you can manually add this file by copying the `.env` file to a new `.env.custom` file and adjust your settings in the `.env.custom` file.
 
-If you want to install a specific release of Sentry, use the tags/releases on this repo.
+Please keep in mind to check the `.env` file for changes, when you perform an upgrade of Sentry, so that you can adjust your `.env.custom` accordingly, if required, as `.env` is ignored entirely if `.env.custom` is present.
 
-We continously push the Docker image for each commit made into [Sentry](https://github.com/getsentry/sentry), and other services such as [Snuba](https://github.com/getsentry/snuba) or [Symbolicator](https://github.com/getsentry/symbolicator) to [our Docker Hub](https://hub.docker.com/u/getsentry) and tag the latest version on master as `:nightly`. This is also usually what we have on sentry.io and what the install script uses. You can use a custom Sentry image, such as a modified version that you have built on your own, or simply a specific commit hash by setting the `SENTRY_IMAGE` environment variable to that image name before running `./install.sh`:
+### Enhance Sentry image
 
-```shell
-SENTRY_IMAGE=getsentry/sentry:83b1380 ./install.sh
-```
+To install plugins and their dependencies or make other modifications to the Sentry base image,
+copy `sentry/enhance-image.example.sh` to `sentry/enhance-image.sh` and add necessary steps there.
+For example, you can use `apt-get` to install dependencies and use `pip` to install plugins.
 
-Note that this may not work for all commit SHAs as this repository evolves with Sentry and its satellite projects. It is highly recommended to check out a version of this repository that is close to the timestamp of the Sentry commit you are installing.
+After making modifications to `sentry/enhance-image.sh`, run `./install.sh` again to apply them.
+
+## Tips & Tricks
 
-## Event Retention
+### Event Retention
 
 Sentry comes with a cleanup cron job that prunes events older than `90 days` by default. If you want to change that, you can change the `SENTRY_EVENT_RETENTION_DAYS` environment variable in `.env` or simply override it in your environment. If you do not want the cleanup cron, you can remove the `sentry-cleanup` service from the `docker-compose.yml`file.
 
-## Securing Sentry with SSL/TLS
+### Installing a specific SHA
 
-If you'd like to protect your Sentry install with SSL/TLS, there are
-fantastic SSL/TLS proxies like [HAProxy](http://www.haproxy.org/)
-and [Nginx](http://nginx.org/). Our recommendation is running and external Nginx instance or your choice of load balancer that does the TLS termination and more. Read more over at our [productionalizing self-hosted docs](https://develop.sentry.dev/self-hosted/#productionalizing).
+If you want to install a specific release of Sentry, use the tags/releases on this repo.
 
-## Updating Sentry
+We continuously push the Docker image for each commit made into [Sentry](https://github.com/getsentry/sentry), and other services such as [Snuba](https://github.com/getsentry/snuba) or [Symbolicator](https://github.com/getsentry/symbolicator) to [our Docker Hub](https://hub.docker.com/u/getsentry) and tag the latest version on master as `:nightly`. This is also usually what we have on sentry.io and what the install script uses. You can use a custom Sentry image, such as a modified version that you have built on your own, or simply a specific commit hash by setting the `SENTRY_IMAGE` environment variable to that image name before running `./install.sh`:
 
-_You need to be on at least Sentry 9.1.2 to be able to upgrade automatically to the latest version. If you are not, upgrade to 9.1.2 first by checking out the [9.1.2 tag](https://github.com/getsentry/onpremise/tree/9.1.2) on this repo._
+```shell
+SENTRY_IMAGE=getsentry/sentry:83b1380 ./install.sh
+```
+
+Note that this may not work for all commit SHAs as this repository evolves with Sentry and its satellite projects. It is highly recommended to check out a version of this repository that is close to the timestamp of the Sentry commit you are installing.
 
-We recommend (and sometimes require) you to upgrade Sentry one version at a time. That means if you are running 20.6.0, instead of going directly to 20.8.0, first go through 20.7.0. Skipping versions would work most of the time, but there will be times that we require you to stop at specific versions to ensure essential data migrations along the way.
+### Using Linux
 
-Pull the version of the repository that you wish to upgrade to by checking out the tagged release of this repo. Make sure to check for any difference between the example config files and your current config files in use. There might be new configuration that has to be added to your adjusted files such as feature flags or server configuration.
+If you are using Linux and you need to use `sudo` when running `./install.sh`, make sure to place the environment variable *after* `sudo`:
+
+```shell
+sudo SENTRY_IMAGE=us.gcr.io/sentryio/sentry:83b1380 ./install.sh
+```
 
-The included `install.sh` script is meant to be idempotent and to bring you to the latest version. What this means is you can and should run `install.sh` to upgrade to the latest version available. Remember that the output of the script will be stored in a log file, `sentry_install_log-<ISO_TIMESTAMP>.txt`, which you may share for diagnosis if anything goes wrong.
+Where you replace `83b1380` with the sha you want to use.
 
-For more information regarding updating your Sentry installation, please visit [our documentation](https://develop.sentry.dev/self-hosted/#upgrading).
+### Self-Hosted Monitoring
 
-## Resources
+We'd love to catch errors in self-hosted so you don't run into them, and so we can fix them faster! When you run `./install.sh`, you will be prompted to select whether to opt in or out of our monitoring. If you opt into our monitoring, we will send information to our own self-hosted Sentry instance for development and debugging purposes. We may collect:
 
- * [Documentation](https://develop.sentry.dev/self-hosted/)
- * [Bug Tracker](https://github.com/getsentry/onpremise/issues)
- * [Community Forums](https://forum.sentry.io/c/on-premise)
+- OS username
+- IP address
+- install log
+- runtime errors in Sentry
+- performance data
 
+Thirty (30) day retention. No marketing. Privacy policy at sentry.io/privacy.
 
-[build-status-image]: https://github.com/getsentry/onpremise/workflows/test/badge.svg
-[build-status-url]: https://git.io/JUYkh
+Starting with the 22.10.0 release in October, we will require those running the Sentry installer to choose to opt in or out. If you are running the installer under automation, you may want to set `REPORT_SELF_HOSTED_ISSUES` or pass `--(no-)report-self-hosted-issues` to the installer accordingly.
diff --git a/_integration-test/custom-ca-roots/docker-compose.test.yml b/_integration-test/custom-ca-roots/docker-compose.test.yml
new file mode 100644
index 0000000..2bc40ba
--- /dev/null
+++ b/_integration-test/custom-ca-roots/docker-compose.test.yml
@@ -0,0 +1,12 @@
+version: '3.4'
+services:
+  fixture-custom-ca-roots:
+    image: nginx:1.21.0-alpine
+    restart: unless-stopped
+    volumes:
+      - ./_integration-test/custom-ca-roots/nginx:/etc/nginx:ro
+    networks:
+      default:
+        aliases:
+          - self.test
+          - fail.test
diff --git a/_integration-test/custom-ca-roots/nginx/nginx.conf b/_integration-test/custom-ca-roots/nginx/nginx.conf
new file mode 100644
index 0000000..517aea4
--- /dev/null
+++ b/_integration-test/custom-ca-roots/nginx/nginx.conf
@@ -0,0 +1,32 @@
+user nginx;
+worker_processes 1;
+
+error_log /var/log/nginx/error.log warn;
+pid /var/run/nginx.pid;
+
+events {
+	worker_connections 1024;
+}
+
+http {
+  server {
+    listen               443 ssl;
+    server_name          "self.test";
+    ssl_certificate      "/etc/nginx/self.test.crt";
+    ssl_certificate_key  "/etc/nginx/self.test.key";
+    location / {
+      add_header Content-Type text/plain;
+      return 200 'ok';
+    }
+  }
+  server {
+    listen               443 ssl;
+    server_name          "fake.test";
+    ssl_certificate      "/etc/nginx/fake.test.crt";
+    ssl_certificate_key  "/etc/nginx/fake.test.key";
+    location / {
+      add_header Content-Type text/plain;
+      return 200 'bad';
+    }
+  }
+}
diff --git a/_integration-test/custom-ca-roots/setup.sh b/_integration-test/custom-ca-roots/setup.sh
new file mode 100644
index 0000000..7cb6dd4
--- /dev/null
+++ b/_integration-test/custom-ca-roots/setup.sh
@@ -0,0 +1,45 @@
+set -e
+export COMPOSE_FILE=docker-compose.yml:_integration-test/custom-ca-roots/docker-compose.test.yml
+
+TEST_NGINX_CONF_PATH=_integration-test/custom-ca-roots/nginx
+CUSTOM_CERTS_PATH=certificates
+
+# generate tightly constrained CA
+# NB: `-addext` requires LibreSSL 3.1.0+, or OpenSSL (brew install openssl)
+openssl req -x509 -new -nodes -newkey rsa:2048 -keyout $TEST_NGINX_CONF_PATH/ca.key \
+  -sha256 -days 1 -out $TEST_NGINX_CONF_PATH/ca.crt -batch \
+  -subj "/CN=TEST CA *DO NOT TRUST*" \
+  -addext "keyUsage = critical, keyCertSign, cRLSign" \
+  -addext "nameConstraints = critical, permitted;DNS:self.test"
+
+## Lines like the following are debug helpers ...
+# openssl x509 -in nginx/ca.crt -text -noout
+
+mkdir -p $CUSTOM_CERTS_PATH
+cp $TEST_NGINX_CONF_PATH/ca.crt $CUSTOM_CERTS_PATH/test-custom-ca-roots.crt
+
+# generate server certificate
+openssl req -new -nodes -newkey rsa:2048 -keyout $TEST_NGINX_CONF_PATH/self.test.key \
+  -addext "subjectAltName=DNS:self.test" \
+  -out $TEST_NGINX_CONF_PATH/self.test.req -batch -subj "/CN=Self Signed with CA Test Server"
+
+# openssl req -in nginx/self.test.req -text -noout
+
+openssl x509 -req -in $TEST_NGINX_CONF_PATH/self.test.req -CA $TEST_NGINX_CONF_PATH/ca.crt -CAkey $TEST_NGINX_CONF_PATH/ca.key \
+  -extfile <(printf "subjectAltName=DNS:self.test") \
+  -CAcreateserial -out $TEST_NGINX_CONF_PATH/self.test.crt -days 1 -sha256
+
+# openssl x509 -in nginx/self.test.crt -text -noout
+
+# sanity check that signed certificate passes OpenSSL's validation
+openssl verify -CAfile $TEST_NGINX_CONF_PATH/ca.crt $TEST_NGINX_CONF_PATH/self.test.crt
+
+# self signed certificate, for sanity check of not just accepting all certs
+openssl req -x509 -newkey rsa:2048 -nodes -days 1 -keyout $TEST_NGINX_CONF_PATH/fake.test.key \
+  -out $TEST_NGINX_CONF_PATH/fake.test.crt -addext "subjectAltName=DNS:fake.test" -subj "/CN=Self Signed Test Server"
+
+# openssl x509 -in nginx/fake.test.crt -text -noout
+
+cp _integration-test/custom-ca-roots/test.py sentry/test-custom-ca-roots.py
+
+$dc up -d fixture-custom-ca-roots
diff --git a/_integration-test/custom-ca-roots/teardown.sh b/_integration-test/custom-ca-roots/teardown.sh
new file mode 100644
index 0000000..8b89299
--- /dev/null
+++ b/_integration-test/custom-ca-roots/teardown.sh
@@ -0,0 +1,3 @@
+$dc rm -s -f -v fixture-custom-ca-roots
+rm -f certificates/test-custom-ca-roots.crt sentry/test-custom-ca-roots.py
+unset COMPOSE_FILE
diff --git a/_integration-test/custom-ca-roots/test.py b/_integration-test/custom-ca-roots/test.py
new file mode 100644
index 0000000..0f9b501
--- /dev/null
+++ b/_integration-test/custom-ca-roots/test.py
@@ -0,0 +1,15 @@
+import unittest
+import requests
+
+
+class CustomCATests(unittest.TestCase):
+    def test_valid_self_signed(self):
+        self.assertEqual(requests.get("https://self.test").text, 'ok')
+
+    def test_invalid_self_signed(self):
+        with self.assertRaises(requests.exceptions.SSLError):
+            requests.get("https://fail.test")
+
+
+if __name__ == '__main__':
+    unittest.main()
diff --git a/_integration-test/ensure-backup-restore-works.sh b/_integration-test/ensure-backup-restore-works.sh
new file mode 100755
index 0000000..881211d
--- /dev/null
+++ b/_integration-test/ensure-backup-restore-works.sh
@@ -0,0 +1,34 @@
+#!/usr/bin/env bash
+set -ex
+
+source install/_lib.sh
+source install/dc-detect-version.sh
+
+echo "${_group}Test that backup/restore works..."
+echo "Creating backup..."
+# Docker was giving me permissioning issues when trying to create this file and write to it even after giving read + write access
+# to group and owner. Instead, try creating the empty file and then give everyone write access to the backup file
+touch $(pwd)/sentry/backup.json
+chmod 666 $(pwd)/sentry/backup.json
+# Command here matches exactly what we have in our docs https://develop.sentry.dev/self-hosted/backup/#backup
+docker-compose run -v $(pwd)/sentry:/sentry-data/backup --rm -T -e SENTRY_LOG_LEVEL=CRITICAL web export /sentry-data/backup/backup.json
+# Check to make sure there is content in the file
+if [ ! -s "$(pwd)/sentry/backup.json" ]; then
+  echo "Backup file is empty"
+  exit 1
+fi
+
+# Bring postgres down and recreate the docker volume
+docker-compose stop postgres
+sleep 5
+docker-compose rm -f -v postgres
+docker volume rm sentry-postgres
+export SKIP_USER_CREATION=1
+source install/create-docker-volumes.sh
+source install/set-up-and-migrate-database.sh
+docker-compose up -d
+
+echo "Importing backup..."
+docker-compose run --rm -T web import /etc/sentry/backup.json
+
+rm $(pwd)/sentry/backup.json
diff --git a/_integration-test/ensure-customizations-not-present.sh b/_integration-test/ensure-customizations-not-present.sh
new file mode 100755
index 0000000..78939ae
--- /dev/null
+++ b/_integration-test/ensure-customizations-not-present.sh
@@ -0,0 +1,13 @@
+#!/usr/bin/env bash
+set -ex
+
+source install/_lib.sh
+source install/dc-detect-version.sh
+
+# Negated version of ensure-customizations-work.sh, make changes in sync
+echo "${_group}Ensure customizations not present"
+! $dcr --no-deps web bash -c "if [ ! -e /created-by-enhance-image ]; then exit 1; fi"
+! $dcr --no-deps --entrypoint=/etc/sentry/entrypoint.sh sentry-cleanup bash -c "if [ ! -e /created-by-enhance-image ]; then exit 1; fi"
+! $dcr --no-deps web python -c "import ldap"
+! $dcr --no-deps --entrypoint=/etc/sentry/entrypoint.sh sentry-cleanup python -c "import ldap"
+echo "${_endgroup}"
diff --git a/_integration-test/ensure-customizations-work.sh b/_integration-test/ensure-customizations-work.sh
new file mode 100755
index 0000000..674cf07
--- /dev/null
+++ b/_integration-test/ensure-customizations-work.sh
@@ -0,0 +1,13 @@
+#!/usr/bin/env bash
+set -ex
+
+source install/_lib.sh
+source install/dc-detect-version.sh
+
+# Negated version of ensure-customizations-not-present.sh, make changes in sync
+echo "${_group}Ensure customizations work"
+$dcr --no-deps web bash -c "if [ ! -e /created-by-enhance-image ]; then exit 1; fi"
+$dcr --no-deps --entrypoint=/etc/sentry/entrypoint.sh sentry-cleanup bash -c "if [ ! -e /created-by-enhance-image ]; then exit 1; fi"
+$dcr --no-deps web python -c "import ldap"
+$dcr --no-deps --entrypoint=/etc/sentry/entrypoint.sh sentry-cleanup python -c "import ldap"
+echo "${_endgroup}"
diff --git a/_integration-test/run.sh b/_integration-test/run.sh
new file mode 100755
index 0000000..338ba5c
--- /dev/null
+++ b/_integration-test/run.sh
@@ -0,0 +1,151 @@
+#!/usr/bin/env bash
+set -ex
+
+source install/_lib.sh
+source install/dc-detect-version.sh
+
+echo "${_group}Setting up variables and helpers ..."
+export SENTRY_TEST_HOST="${SENTRY_TEST_HOST:-http://localhost:9000}"
+TEST_USER='test@example.com'
+TEST_PASS='test123TEST'
+COOKIE_FILE=$(mktemp)
+
+# Courtesy of https://stackoverflow.com/a/2183063/90297
+trap_with_arg() {
+  func="$1"
+  shift
+  for sig; do
+    trap "$func $sig "'$LINENO' "$sig"
+  done
+}
+
+DID_TEAR_DOWN=0
+# the teardown function will be the exit point
+teardown() {
+  if [ "$DID_TEAR_DOWN" -eq 1 ]; then
+    return 0
+  fi
+  DID_TEAR_DOWN=1
+
+  if [ "$1" != "EXIT" ]; then
+    echo "An error occurred, caught SIG$1 on line $2"
+  fi
+
+  echo "Tearing down ..."
+  rm $COOKIE_FILE
+  echo "Done."
+}
+trap_with_arg teardown ERR INT TERM EXIT
+echo "${_endgroup}"
+
+echo "${_group}Starting Sentry for tests ..."
+# Disable beacon for e2e tests
+echo 'SENTRY_BEACON=False' >>$SENTRY_CONFIG_PY
+echo y | $dcr web createuser --force-update --superuser --email $TEST_USER --password $TEST_PASS
+$dc up -d
+printf "Waiting for Sentry to be up"
+timeout 90 bash -c 'until $(curl -Isf -o /dev/null $SENTRY_TEST_HOST); do printf '.'; sleep 0.5; done'
+echo ""
+echo "${_endgroup}"
+
+echo "${_group}Running tests ..."
+get_csrf_token() { awk '$6 == "sc" { print $7 }' $COOKIE_FILE; }
+sentry_api_request() { curl -s -H 'Accept: application/json; charset=utf-8' -H "Referer: $SENTRY_TEST_HOST" -H 'Content-Type: application/json' -H "X-CSRFToken: $(get_csrf_token)" -b "$COOKIE_FILE" -c "$COOKIE_FILE" "$SENTRY_TEST_HOST/api/0/$1" ${@:2}; }
+
+login() {
+  INITIAL_AUTH_REDIRECT=$(curl -sL -o /dev/null $SENTRY_TEST_HOST -w %{url_effective})
+  if [ "$INITIAL_AUTH_REDIRECT" != "$SENTRY_TEST_HOST/auth/login/sentry/" ]; then
+    echo "Initial /auth/login/ redirect failed, exiting..."
+    echo "$INITIAL_AUTH_REDIRECT"
+    exit 1
+  fi
+
+  CSRF_TOKEN_FOR_LOGIN=$(curl $SENTRY_TEST_HOST -sL -c "$COOKIE_FILE" | awk -F "['\"]" '
+    /csrfmiddlewaretoken/ {
+    print $4 "=" $6;
+    exit;
+  }')
+
+  curl -sL --data-urlencode 'op=login' --data-urlencode "username=$TEST_USER" --data-urlencode "password=$TEST_PASS" --data-urlencode "$CSRF_TOKEN_FOR_LOGIN" "$SENTRY_TEST_HOST/auth/login/sentry/" -H "Referer: $SENTRY_TEST_HOST/auth/login/sentry/" -b "$COOKIE_FILE" -c "$COOKIE_FILE"
+}
+
+LOGIN_RESPONSE=$(login)
+declare -a LOGIN_TEST_STRINGS=(
+  '"isAuthenticated":true'
+  '"username":"test@example.com"'
+  '"isSuperuser":true'
+)
+for i in "${LOGIN_TEST_STRINGS[@]}"; do
+  echo "Testing '$i'..."
+  echo "$LOGIN_RESPONSE" | grep "${i}[,}]" >&/dev/null
+  echo "Pass."
+done
+echo "${_endgroup}"
+
+echo "${_group}Running moar tests !!!"
+# Set up initial/required settings (InstallWizard request)
+sentry_api_request "internal/options/?query=is:required" -X PUT --data '{"mail.use-tls":false,"mail.username":"","mail.port":25,"system.admin-email":"ben@byk.im","mail.password":"","system.url-prefix":"'"$SENTRY_TEST_HOST"'","auth.allow-registration":false,"beacon.anonymous":true}' >/dev/null
+
+SENTRY_DSN=$(sentry_api_request "projects/sentry/internal/keys/" | awk 'BEGIN { RS=",|:{\n"; FS="\""; } $2 == "public" && $4 ~ "^http" { print $4; exit; }')
+# We ignore the protocol and the host as we already know those
+DSN_PIECES=($(echo $SENTRY_DSN | sed -ne 's|^https\{0,1\}://\([0-9a-z]\{1,\}\)@[^/]\{1,\}/\([0-9]\{1,\}\)$|\1 \2|p' | tr ' ' '\n'))
+SENTRY_KEY=${DSN_PIECES[0]}
+PROJECT_ID=${DSN_PIECES[1]}
+
+TEST_EVENT_ID=$(
+  export LC_ALL=C
+  head /dev/urandom | tr -dc "a-f0-9" | head -c 32
+)
+# Thanks @untitaker - https://forum.sentry.io/t/how-can-i-post-with-curl-a-sentry-event-which-authentication-credentials/4759/2?u=byk
+echo "Creating test event..."
+curl -sf --data '{"event_id": "'"$TEST_EVENT_ID"'","level":"error","message":"a failure","extra":{"object":"42"}}' -H 'Content-Type: application/json' -H "X-Sentry-Auth: Sentry sentry_version=7, sentry_key=$SENTRY_KEY, sentry_client=test-bash/0.1" "$SENTRY_TEST_HOST/api/$PROJECT_ID/store/" -o /dev/null
+
+EVENT_PATH="projects/sentry/internal/events/$TEST_EVENT_ID/"
+export -f sentry_api_request get_csrf_token
+export SENTRY_TEST_HOST COOKIE_FILE EVENT_PATH
+printf "Getting the test event back"
+timeout 60 bash -c 'until $(sentry_api_request "$EVENT_PATH" -Isf -X GET -o /dev/null); do printf '.'; sleep 0.5; done'
+echo " got it!"
+
+EVENT_RESPONSE=$(sentry_api_request "$EVENT_PATH")
+declare -a EVENT_TEST_STRINGS=(
+  '"eventID":"'"$TEST_EVENT_ID"'"'
+  '"message":"a failure"'
+  '"title":"a failure"'
+  '"object":"42"'
+)
+for i in "${EVENT_TEST_STRINGS[@]}"; do
+  echo "Testing '$i'..."
+  echo "$EVENT_RESPONSE" | grep "${i}[,}]" >&/dev/null
+  echo "Pass."
+done
+echo "${_endgroup}"
+
+echo "${_group}Ensure cleanup crons are working ..."
+$dc ps -a | tee debug.log | grep -E -e '\-cleanup\s+running\s+' -e '\-cleanup[_-].+\s+Up\s+'
+# to debug https://github.com/getsentry/self-hosted/issues/1171
+echo '------------------------------------------'
+cat debug.log
+echo '------------------------------------------'
+echo "${_endgroup}"
+
+echo "${_group}Test custom CAs work ..."
+source _integration-test/custom-ca-roots/setup.sh
+$dcr --no-deps web python3 /etc/sentry/test-custom-ca-roots.py
+source _integration-test/custom-ca-roots/teardown.sh
+echo "${_endgroup}"
+
+# Table formatting based on https://stackoverflow.com/a/39144364
+COMPOSE_PS_OUTPUT=$(docker compose ps --format json | jq -r \
+  '.[] |
+   # we only care about running services. geoipupdate always exits, so we ignore it
+   select(.State != "running" and .Service != "geoipupdate") |
+   # Filter to only show the service name and state
+   with_entries(select(.key | in({"Service":1, "State":1})))
+ ')
+
+if [[ "$COMPOSE_PS_OUTPUT" ]]; then
+  echo "Services failed, oh no!"
+  echo "$COMPOSE_PS_OUTPUT" | jq -rs '["Service","State"], ["-------","-----"], (.[]|[.Service, .State]) | @tsv'
+  exit 1
+fi
diff --git a/_unit-test/_test_setup.sh b/_unit-test/_test_setup.sh
new file mode 100644
index 0000000..8572dd8
--- /dev/null
+++ b/_unit-test/_test_setup.sh
@@ -0,0 +1,57 @@
+set -euo pipefail
+
+source install/_lib.sh
+
+_ORIGIN=$(pwd)
+
+rm -rf /tmp/sentry-self-hosted-test-sandbox.*
+_SANDBOX="$(mktemp -d /tmp/sentry-self-hosted-test-sandbox.XXX)"
+
+source install/detect-platform.sh
+docker build -t sentry-self-hosted-jq-local --platform="$DOCKER_PLATFORM" jq
+
+report_success() {
+  echo "$(basename $0) - Success "
+}
+
+teardown() {
+  test "${DEBUG:-}" || rm -rf "$_SANDBOX"
+  cd "$_ORIGIN"
+}
+
+setup() {
+  # Clone the local repo into a temp dir. FWIW `git clone --local` breaks for
+  # me because it depends on hard-linking, which doesn't work across devices,
+  # and I happen to have my workspace and /tmp on separate devices.
+  git -c advice.detachedHead=false clone --depth=1 "file://$_ORIGIN" "$_SANDBOX"
+
+  # Now propagate any local changes from the working copy to the sandbox. This
+  # provides a pretty nice dev experience: edit the files in the working copy,
+  # then run `DEBUG=1 some-test.sh` to leave the sandbox up for interactive
+  # dev/debugging.
+  git status --porcelain | while read line; do
+    # $line here is something like `M some-script.sh`.
+
+    local filepath="$(cut -f2 -d' ' <(echo $line))"
+    local filestatus="$(cut -f1 -d' ' <(echo $line))"
+
+    case $filestatus in
+    D)
+      rm "$_SANDBOX/$filepath"
+      ;;
+    A | M | AM | ??)
+      ln -sf "$(realpath $filepath)" "$_SANDBOX/$filepath"
+      ;;
+    **)
+      echo "Wuh? $line"
+      exit 77
+      ;;
+    esac
+  done
+
+  cd "$_SANDBOX"
+
+  trap teardown EXIT
+}
+
+setup
diff --git a/_unit-test/create-docker-volumes-test.sh b/_unit-test/create-docker-volumes-test.sh
new file mode 100755
index 0000000..8893196
--- /dev/null
+++ b/_unit-test/create-docker-volumes-test.sh
@@ -0,0 +1,31 @@
+#!/usr/bin/env bash
+
+source _unit-test/_test_setup.sh
+
+get_volumes() {
+  # If grep returns no strings, we still want to return without error
+  docker volume ls --quiet | { grep '^sentry-.*' || true; } | sort
+}
+
+# Maybe they exist prior, maybe they don't. Script is idempotent.
+
+expected_volumes="sentry-clickhouse
+sentry-data
+sentry-kafka
+sentry-postgres
+sentry-redis
+sentry-symbolicator
+sentry-zookeeper"
+
+before=$(get_volumes)
+
+test "$before" == "" || test "$before" == "$expected_volumes"
+
+source install/create-docker-volumes.sh
+source install/create-docker-volumes.sh
+source install/create-docker-volumes.sh
+
+after=$(get_volumes)
+test "$after" == "$expected_volumes"
+
+report_success
diff --git a/_unit-test/ensure-relay-credentials-test.sh b/_unit-test/ensure-relay-credentials-test.sh
new file mode 100755
index 0000000..e116675
--- /dev/null
+++ b/_unit-test/ensure-relay-credentials-test.sh
@@ -0,0 +1,27 @@
+#!/usr/bin/env bash
+
+source _unit-test/_test_setup.sh
+source install/dc-detect-version.sh
+
+# using _file format for these variables since there is a creds defined in dc-detect-version.sh
+cfg_file=relay/config.yml
+creds_file=relay/credentials.json
+
+# Relay files don't exist in a clean clone.
+test ! -f $cfg_file
+test ! -f $creds_file
+
+# Running the install script adds them.
+source install/ensure-relay-credentials.sh
+test -f $cfg_file
+test -f $creds_file
+test "$(jq -r 'keys[2]' "$creds_file")" = "secret_key"
+
+# If the files exist we don't touch it.
+echo GARBAGE >$cfg_file
+echo MOAR GARBAGE >$creds_file
+source install/ensure-relay-credentials.sh
+test "$(cat $cfg_file)" = "GARBAGE"
+test "$(cat $creds_file)" = "MOAR GARBAGE"
+
+report_success
diff --git a/_unit-test/error-handling-test.sh b/_unit-test/error-handling-test.sh
new file mode 100755
index 0000000..3cae1f0
--- /dev/null
+++ b/_unit-test/error-handling-test.sh
@@ -0,0 +1,61 @@
+#!/usr/bin/env bash
+
+source _unit-test/_test_setup.sh
+
+export REPORT_SELF_HOSTED_ISSUES=1
+
+# This is set up in dc-detect-version.sh, but for
+# our purposes we don't care about proxies.
+dbuild="docker build"
+source install/error-handling.sh
+
+# mock send_envelope
+send_envelope() {
+  echo "Test Sending $1"
+}
+
+export -f send_envelope
+echo "Testing initial send_event"
+export log_file=test_log.txt
+echo "Test Logs" >"$log_file"
+echo "Error Msg" >>"$log_file"
+breadcrumbs=$(generate_breadcrumb_json | sed '$d' | $jq -s -c)
+SEND_EVENT_RESPONSE=$(send_event "12345123451234512345123451234512" "Test exited with status 1" "{\"ignore\": \"me\"}" "$breadcrumbs")
+rm "$log_file"
+test "$SEND_EVENT_RESPONSE" == 'Test Sending sentry-envelope-12345123451234512345123451234512'
+ENVELOPE_CONTENTS=$(cat /tmp/sentry-envelope-12345123451234512345123451234512)
+test "$ENVELOPE_CONTENTS" == "$(cat _unit-test/snapshots/sentry-envelope-12345123451234512345123451234512)"
+echo "Pass."
+
+echo "Testing send_event duplicate"
+SEND_EVENT_RESPONSE=$(send_event "12345123451234512345123451234512" "Test exited with status 1" "{\"ignore\": \"me\"}" "$breadcrumbs")
+test "$SEND_EVENT_RESPONSE" == "Looks like you've already sent this error to us, we're on it :)"
+echo "Pass."
+rm '/tmp/sentry-envelope-12345123451234512345123451234512'
+
+echo "Testing cleanup without minimizing downtime"
+export REPORT_SELF_HOSTED_ISSUES=0
+export MINIMIZE_DOWNTIME=''
+export dc=':'
+echo "Test Logs" >"$log_file"
+CLEANUP_RESPONSE=$(cleanup ERROR)
+rm "$log_file"
+test "$CLEANUP_RESPONSE" == 'Error in _unit-test/error-handling-test.sh:41.
+'\''local cmd="${BASH_COMMAND}"'\'' exited with status 0
+
+Cleaning up...'
+echo "Pass."
+
+echo "Testing cleanup while minimizing downtime"
+export REPORT_SELF_HOSTED_ISSUES=0
+export MINIMIZE_DOWNTIME=1
+echo "Test Logs" >"$log_file"
+CLEANUP_RESPONSE=$(cleanup ERROR)
+rm "$log_file"
+test "$CLEANUP_RESPONSE" == 'Error in _unit-test/error-handling-test.sh:53.
+'\''local cmd="${BASH_COMMAND}"'\'' exited with status 0
+
+*NOT* cleaning up, to clean your environment run "docker compose stop".'
+echo "Pass."
+
+report_success
diff --git a/_unit-test/geoip-test.sh b/_unit-test/geoip-test.sh
new file mode 100755
index 0000000..64a78c7
--- /dev/null
+++ b/_unit-test/geoip-test.sh
@@ -0,0 +1,17 @@
+#!/usr/bin/env bash
+
+source _unit-test/_test_setup.sh
+
+mmdb=geoip/GeoLite2-City.mmdb
+
+# Starts with no mmdb, ends up with empty.
+test ! -f $mmdb
+source install/geoip.sh
+diff -rub $mmdb $mmdb.empty
+
+# Doesn't clobber existing, though.
+echo GARBAGE >$mmdb
+source install/geoip.sh
+test "$(cat $mmdb)" = "GARBAGE"
+
+report_success
diff --git a/_unit-test/snapshots/sentry-envelope-12345123451234512345123451234512 b/_unit-test/snapshots/sentry-envelope-12345123451234512345123451234512
new file mode 100644
index 0000000..1e08ae7
--- /dev/null
+++ b/_unit-test/snapshots/sentry-envelope-12345123451234512345123451234512
@@ -0,0 +1,6 @@
+{"event_id":"12345123451234512345123451234512","dsn":"https://19555c489ded4769978daae92f2346ca@self-hosted.getsentry.net/3"}
+{"type":"event"}
+{"level":"error","exception":{"values":[{"type":"Error","value":"Test exited with status 1","stacktrace":{"frames":[{"ignore":"me"}]}}]},"breadcrumbs":{"values":[{"message":"Test Logs","category":"log","level":"info"}]}}
+{"type":"attachment","length":20,"content_type":"text/plain","filename":"install_log.txt"}
+Test Logs
+Error Msg
diff --git a/certificates/.gitignore b/certificates/.gitignore
new file mode 100644
index 0000000..30d0607
--- /dev/null
+++ b/certificates/.gitignore
@@ -0,0 +1,3 @@
+# Add all custom CAs in this folder
+*
+!.gitignore
diff --git a/clickhouse/Dockerfile b/clickhouse/Dockerfile
new file mode 100644
index 0000000..4e841c0
--- /dev/null
+++ b/clickhouse/Dockerfile
@@ -0,0 +1,2 @@
+ARG BASE_IMAGE
+FROM ${BASE_IMAGE}
diff --git a/clickhouse/config.xml b/clickhouse/config.xml
index 55cdbbd..58ab862 100644
--- a/clickhouse/config.xml
+++ b/clickhouse/config.xml
@@ -1,5 +1,10 @@
 <yandex>
-    <max_server_memory_usage_to_ram_ratio from_env="MAX_MEMORY_USAGE_RATIO" />
+    <max_server_memory_usage_to_ram_ratio>
+        <!-- This include is important!
+         It is required for the version of Clickhouse
+         used on ARM to read the environment variable. -->
+        <include from_env="MAX_MEMORY_USAGE_RATIO"/>
+    </max_server_memory_usage_to_ram_ratio>
     <logger>
         <level>information</level>
         <console>1</console>
diff --git a/cron/Dockerfile b/cron/Dockerfile
index 0e6e76e..edb6407 100644
--- a/cron/Dockerfile
+++ b/cron/Dockerfile
@@ -1,5 +1,8 @@
 ARG BASE_IMAGE
 FROM ${BASE_IMAGE}
+USER 0
+RUN if [ -z "${http_proxy}" ]; then echo "Acquire::http::proxy \"${http_proxy}\";" >> /etc/apt/apt.conf; fi
+RUN if [ -z "${https_proxy}" ]; then echo "Acquire::https::proxy \"${https_proxy}\";" >> /etc/apt/apt.conf; fi
 RUN apt-get update && apt-get install -y --no-install-recommends cron && \
     rm -r /var/lib/apt/lists/*
 COPY entrypoint.sh /entrypoint.sh
diff --git a/cron/entrypoint.sh b/cron/entrypoint.sh
index baa833a..d69d4ac 100755
--- a/cron/entrypoint.sh
+++ b/cron/entrypoint.sh
@@ -1,15 +1,19 @@
 #!/usr/bin/env bash
 
+if [ "$(ls -A /usr/local/share/ca-certificates/)" ]; then
+  update-ca-certificates
+fi
+
 # Prior art:
-# - https://git.io/fjNOg
+# - https://github.com/renskiy/cron-docker-image/blob/5600db37acf841c6d7a8b4f3866741bada5b4622/debian/start-cron#L34-L36
 # - https://blog.knoldus.com/running-a-cron-job-in-docker-container/
 
-declare -p | grep -Ev 'BASHOPTS|BASH_VERSINFO|EUID|PPID|SHELLOPTS|UID' > /container.env
+declare -p | grep -Ev 'BASHOPTS|BASH_VERSINFO|EUID|PPID|SHELLOPTS|UID' >/container.env
 
 { for cron_job in "$@"; do echo -e "SHELL=/bin/bash
 BASH_ENV=/container.env
-${cron_job} > /proc/1/fd/1 2>/proc/1/fd/2"; done } \
-  | sed --regexp-extended 's/\\(.)/\1/g' \
-  | crontab -
+${cron_job} > /proc/1/fd/1 2>/proc/1/fd/2"; done; } |
+  sed --regexp-extended 's/\\(.)/\1/g' |
+  crontab -
 crontab -l
 exec cron -f -l -L 15
diff --git a/docker-compose.yml b/docker-compose.yml
index 160ae62..fa57086 100644
--- a/docker-compose.yml
+++ b/docker-compose.yml
@@ -1,123 +1,215 @@
-version: '3.4'
 x-restart-policy: &restart_policy
   restart: unless-stopped
+x-depends_on-healthy: &depends_on-healthy
+  condition: service_healthy
+x-depends_on-default: &depends_on-default
+  condition: service_started
+x-healthcheck-defaults: &healthcheck_defaults
+  # Avoid setting the interval too small, as docker uses much more CPU than one would expect.
+  # Related issues:
+  # https://github.com/moby/moby/issues/39102
+  # https://github.com/moby/moby/issues/39388
+  # https://github.com/getsentry/self-hosted/issues/1000
+  interval: "$HEALTHCHECK_INTERVAL"
+  timeout: "$HEALTHCHECK_TIMEOUT"
+  retries: $HEALTHCHECK_RETRIES
+  start_period: 10s
 x-sentry-defaults: &sentry_defaults
-  << : *restart_policy
+  <<: *restart_policy
+  image: sentry-self-hosted-local
+  # Set the platform to build for linux/arm64 when needed on Apple silicon Macs.
+  platform: ${DOCKER_PLATFORM:-}
   build:
     context: ./sentry
     args:
       - SENTRY_IMAGE
-      - SENTRY_PYTHON2
-  image: sentry-onpremise-local
   depends_on:
-    - redis
-    - postgres
-    - memcached
-    - smtp
-    - snuba-api
-    - snuba-consumer
-    - snuba-outcomes-consumer
-    - snuba-sessions-consumer
-    - snuba-transactions-consumer
-    - snuba-replacer
-    - symbolicator
-    - kafka
+    redis:
+      <<: *depends_on-healthy
+    kafka:
+      <<: *depends_on-healthy
+    postgres:
+      <<: *depends_on-healthy
+    memcached:
+      <<: *depends_on-default
+    smtp:
+      <<: *depends_on-default
+    snuba-api:
+      <<: *depends_on-default
+    snuba-consumer:
+      <<: *depends_on-default
+    snuba-outcomes-consumer:
+      <<: *depends_on-default
+    snuba-sessions-consumer:
+      <<: *depends_on-default
+    snuba-transactions-consumer:
+      <<: *depends_on-default
+    snuba-subscription-consumer-events:
+      <<: *depends_on-default
+    snuba-subscription-consumer-transactions:
+      <<: *depends_on-default
+    snuba-replacer:
+      <<: *depends_on-default
+    symbolicator:
+      <<: *depends_on-default
+  entrypoint: "/etc/sentry/entrypoint.sh"
+  command: ["run", "web"]
   environment:
-    SENTRY_CONF: '/etc/sentry'
-    SNUBA: 'http://snuba-api:1218'
+    PYTHONUSERBASE: "/data/custom-packages"
+    SENTRY_CONF: "/etc/sentry"
+    SNUBA: "http://snuba-api:1218"
+    # Force everything to use the system CA bundle
+    # This is mostly needed to support installing custom CA certs
+    # This one is used by botocore
+    DEFAULT_CA_BUNDLE: &ca_bundle "/etc/ssl/certs/ca-certificates.crt"
+    # This one is used by requests
+    REQUESTS_CA_BUNDLE: *ca_bundle
+    # This one is used by grpc/google modules
+    GRPC_DEFAULT_SSL_ROOTS_FILE_PATH_ENV_VAR: *ca_bundle
     # Leaving the value empty to just pass whatever is set
     # on the host system (or in the .env file)
     SENTRY_EVENT_RETENTION_DAYS:
+    SENTRY_MAIL_HOST:
+    SENTRY_MAX_EXTERNAL_SOURCEMAP_SIZE:
   volumes:
-    - 'sentry-data:/data'
-    - './sentry:/etc/sentry'
-    - './geoip:/geoip:ro'
+    - "sentry-data:/data"
+    - "./sentry:/etc/sentry"
+    - "./geoip:/geoip:ro"
+    - "./certificates:/usr/local/share/ca-certificates:ro"
 x-snuba-defaults: &snuba_defaults
-  << : *restart_policy
+  <<: *restart_policy
   depends_on:
-    - redis
-    - clickhouse
-    - kafka
-  image: '$SNUBA_IMAGE'
+    clickhouse:
+      <<: *depends_on-healthy
+    kafka:
+      <<: *depends_on-healthy
+    redis:
+      <<: *depends_on-healthy
+  image: "$SNUBA_IMAGE"
   environment:
-    SNUBA_SETTINGS: docker
+    SNUBA_SETTINGS: self_hosted
     CLICKHOUSE_HOST: clickhouse
-    DEFAULT_BROKERS: 'kafka:9092'
+    DEFAULT_BROKERS: "kafka:9092"
     REDIS_HOST: redis
-    UWSGI_MAX_REQUESTS: '10000'
-    UWSGI_DISABLE_LOGGING: 'true'
+    UWSGI_MAX_REQUESTS: "10000"
+    UWSGI_DISABLE_LOGGING: "true"
     # Leaving the value empty to just pass whatever is set
     # on the host system (or in the .env file)
     SENTRY_EVENT_RETENTION_DAYS:
 services:
   smtp:
-    << : *restart_policy
+    <<: *restart_policy
     image: tianon/exim4
+    hostname: "${SENTRY_MAIL_HOST:-}"
     volumes:
-      - 'sentry-smtp:/var/spool/exim4'
-      - 'sentry-smtp-log:/var/log/exim4'
+      - "sentry-smtp:/var/spool/exim4"
+      - "sentry-smtp-log:/var/log/exim4"
   memcached:
-    << : *restart_policy
-    image: 'memcached:1.5-alpine'
+    <<: *restart_policy
+    image: "memcached:1.6.9-alpine"
+    command: ["-I", "${SENTRY_MAX_EXTERNAL_SOURCEMAP_SIZE:-1M}"]
+    healthcheck:
+      <<: *healthcheck_defaults
+      # From: https://stackoverflow.com/a/31877626/5155484
+      test: echo stats | nc 127.0.0.1 11211
   redis:
-    << : *restart_policy
-    image: 'redis:5.0-alpine'
+    <<: *restart_policy
+    image: "redis:6.2.10-alpine"
+    healthcheck:
+      <<: *healthcheck_defaults
+      test: redis-cli ping
     volumes:
-      - 'sentry-redis:/data'
+      - "sentry-redis:/data"
     ulimits:
       nofile:
         soft: 10032
         hard: 10032
   postgres:
-    << : *restart_policy
-    image: 'postgres:9.6'
+    <<: *restart_policy
+    # Using the same postgres version as Sentry dev for consistency purposes
+    image: "postgres:14.5"
+    healthcheck:
+      <<: *healthcheck_defaults
+      # Using default user "postgres" from sentry/sentry.conf.example.py or value of POSTGRES_USER if provided
+      test: ["CMD-SHELL", "pg_isready -U ${POSTGRES_USER:-postgres}"]
+    command:
+      [
+        "postgres",
+        "-c",
+        "wal_level=logical",
+        "-c",
+        "max_replication_slots=1",
+        "-c",
+        "max_wal_senders=1",
+      ]
     environment:
-      POSTGRES_HOST_AUTH_METHOD: 'trust'
+      POSTGRES_HOST_AUTH_METHOD: "trust"
+    entrypoint: /opt/sentry/postgres-entrypoint.sh
     volumes:
-      - 'sentry-postgres:/var/lib/postgresql/data'
+      - "sentry-postgres:/var/lib/postgresql/data"
+      - type: bind
+        read_only: true
+        source: ./postgres/
+        target: /opt/sentry/
   zookeeper:
-    << : *restart_policy
-    image: 'confluentinc/cp-zookeeper:5.5.0'
+    <<: *restart_policy
+    image: "confluentinc/cp-zookeeper:5.5.7"
     environment:
-      ZOOKEEPER_CLIENT_PORT: '2181'
-      CONFLUENT_SUPPORT_METRICS_ENABLE: 'false'
-      ZOOKEEPER_LOG4J_ROOT_LOGLEVEL: 'WARN'
-      ZOOKEEPER_TOOLS_LOG4J_LOGLEVEL: 'WARN'
+      ZOOKEEPER_CLIENT_PORT: "2181"
+      CONFLUENT_SUPPORT_METRICS_ENABLE: "false"
+      ZOOKEEPER_LOG4J_ROOT_LOGLEVEL: "WARN"
+      ZOOKEEPER_TOOLS_LOG4J_LOGLEVEL: "WARN"
+      KAFKA_OPTS: "-Dzookeeper.4lw.commands.whitelist=ruok"
     volumes:
-      - 'sentry-zookeeper:/var/lib/zookeeper/data'
-      - 'sentry-zookeeper-log:/var/lib/zookeeper/log'
-      - 'sentry-secrets:/etc/zookeeper/secrets'
+      - "sentry-zookeeper:/var/lib/zookeeper/data"
+      - "sentry-zookeeper-log:/var/lib/zookeeper/log"
+      - "sentry-secrets:/etc/zookeeper/secrets"
+    healthcheck:
+      <<: *healthcheck_defaults
+      test:
+        ["CMD-SHELL", 'echo "ruok" | nc -w 2 -q 2 localhost 2181 | grep imok']
   kafka:
-    << : *restart_policy
+    <<: *restart_policy
     depends_on:
-      - zookeeper
-    image: 'confluentinc/cp-kafka:5.5.0'
+      zookeeper:
+        <<: *depends_on-healthy
+    image: "confluentinc/cp-kafka:5.5.7"
     environment:
-      KAFKA_ZOOKEEPER_CONNECT: 'zookeeper:2181'
-      KAFKA_ADVERTISED_LISTENERS: 'PLAINTEXT://kafka:9092'
-      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: '1'
-      KAFKA_OFFSETS_TOPIC_NUM_PARTITIONS: '1'
-      KAFKA_LOG_RETENTION_HOURS: '24'
-      KAFKA_MESSAGE_MAX_BYTES: '50000000' #50MB or bust
-      KAFKA_MAX_REQUEST_SIZE: '50000000' #50MB on requests apparently too
-      CONFLUENT_SUPPORT_METRICS_ENABLE: 'false'
-      KAFKA_LOG4J_LOGGERS: 'kafka.cluster=WARN,kafka.controller=WARN,kafka.coordinator=WARN,kafka.log=WARN,kafka.server=WARN,kafka.zookeeper=WARN,state.change.logger=WARN'
-      KAFKA_LOG4J_ROOT_LOGLEVEL: 'WARN'
-      KAFKA_TOOLS_LOG4J_LOGLEVEL: 'WARN'
+      KAFKA_ZOOKEEPER_CONNECT: "zookeeper:2181"
+      KAFKA_ADVERTISED_LISTENERS: "PLAINTEXT://kafka:9092"
+      KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR: "1"
+      KAFKA_OFFSETS_TOPIC_NUM_PARTITIONS: "1"
+      KAFKA_LOG_RETENTION_HOURS: "24"
+      KAFKA_MESSAGE_MAX_BYTES: "50000000" #50MB or bust
+      KAFKA_MAX_REQUEST_SIZE: "50000000" #50MB on requests apparently too
+      CONFLUENT_SUPPORT_METRICS_ENABLE: "false"
+      KAFKA_LOG4J_LOGGERS: "kafka.cluster=WARN,kafka.controller=WARN,kafka.coordinator=WARN,kafka.log=WARN,kafka.server=WARN,kafka.zookeeper=WARN,state.change.logger=WARN"
+      KAFKA_LOG4J_ROOT_LOGLEVEL: "WARN"
+      KAFKA_TOOLS_LOG4J_LOGLEVEL: "WARN"
     volumes:
-      - 'sentry-kafka:/var/lib/kafka/data'
-      - 'sentry-kafka-log:/var/lib/kafka/log'
-      - 'sentry-secrets:/etc/kafka/secrets'
+      - "sentry-kafka:/var/lib/kafka/data"
+      - "sentry-kafka-log:/var/lib/kafka/log"
+      - "sentry-secrets:/etc/kafka/secrets"
+    healthcheck:
+      <<: *healthcheck_defaults
+      test: ["CMD-SHELL", "nc -z localhost 9092"]
+      interval: 10s
+      timeout: 10s
+      retries: 30
   clickhouse:
-    << : *restart_policy
-    image: 'yandex/clickhouse-server:20.3.9.70'
+    <<: *restart_policy
+    image: clickhouse-self-hosted-local
+    build:
+      context: ./clickhouse
+      args:
+        BASE_IMAGE: "${CLICKHOUSE_IMAGE:-}"
     ulimits:
       nofile:
         soft: 262144
         hard: 262144
     volumes:
-      - 'sentry-clickhouse:/var/lib/clickhouse'
-      - 'sentry-clickhouse-log:/var/log/clickhouse-server'
+      - "sentry-clickhouse:/var/lib/clickhouse"
+      - "sentry-clickhouse-log:/var/log/clickhouse-server"
       - type: bind
         read_only: true
         source: ./clickhouse/config.xml
@@ -127,116 +219,142 @@ services:
       # If you have high volume and your search return incomplete results
       # You might want to change this to a higher value (and ensure your host has enough memory)
       MAX_MEMORY_USAGE_RATIO: 0.3
+    healthcheck:
+      test: [
+          "CMD-SHELL",
+          # Manually override any http_proxy envvar that might be set, because
+          # this wget does not support no_proxy. See:
+          # https://github.com/getsentry/self-hosted/issues/1537
+          "http_proxy='' wget -nv -t1 --spider 'http://localhost:8123/' || exit 1",
+        ]
+      interval: 10s
+      timeout: 10s
+      retries: 30
   geoipupdate:
-    image: 'maxmindinc/geoipupdate:latest'
+    image: "maxmindinc/geoipupdate:v4.7.1"
     # Override the entrypoint in order to avoid using envvars for config.
     # Futz with settings so we can keep mmdb and conf in same dir on host
     # (image looks for them in separate dirs by default).
-    entrypoint: ['/usr/bin/geoipupdate', '-d', '/sentry', '-f', '/sentry/GeoIP.conf']
+    entrypoint:
+      ["/usr/bin/geoipupdate", "-d", "/sentry", "-f", "/sentry/GeoIP.conf"]
     volumes:
-      - './geoip:/sentry'
+      - "./geoip:/sentry"
   snuba-api:
-    << : *snuba_defaults
+    <<: *snuba_defaults
   # Kafka consumer responsible for feeding events into Clickhouse
   snuba-consumer:
-    << : *snuba_defaults
-    command: consumer --storage events --auto-offset-reset=latest --max-batch-time-ms 750
+    <<: *snuba_defaults
+    command: consumer --storage errors --auto-offset-reset=latest --max-batch-time-ms 750
   # Kafka consumer responsible for feeding outcomes into Clickhouse
   # Use --auto-offset-reset=earliest to recover up to 7 days of TSDB data
   # since we did not do a proper migration
   snuba-outcomes-consumer:
-    << : *snuba_defaults
+    <<: *snuba_defaults
     command: consumer --storage outcomes_raw --auto-offset-reset=earliest --max-batch-time-ms 750
   # Kafka consumer responsible for feeding session data into Clickhouse
   snuba-sessions-consumer:
-    << : *snuba_defaults
+    <<: *snuba_defaults
     command: consumer --storage sessions_raw --auto-offset-reset=latest --max-batch-time-ms 750
   # Kafka consumer responsible for feeding transactions data into Clickhouse
   snuba-transactions-consumer:
-    << : *snuba_defaults
-    command: consumer --storage transactions --consumer-group transactions_group --auto-offset-reset=latest --max-batch-time-ms 750 --commit-log-topic=snuba-commit-log
+    <<: *snuba_defaults
+    command: consumer --storage transactions --consumer-group transactions_group --auto-offset-reset=latest --max-batch-time-ms 750
+  snuba-replays-consumer:
+    <<: *snuba_defaults
+    command: consumer --storage replays --auto-offset-reset=latest --max-batch-time-ms 750
   snuba-replacer:
-    << : *snuba_defaults
-    command: replacer --storage events --auto-offset-reset=latest --max-batch-size 3
+    <<: *snuba_defaults
+    command: replacer --storage errors --auto-offset-reset=latest
   snuba-subscription-consumer-events:
-    << : *snuba_defaults
-    command: subscriptions --auto-offset-reset=latest --consumer-group=snuba-events-subscriptions-consumers --topic=events --result-topic=events-subscription-results --dataset=events --commit-log-topic=snuba-commit-log --commit-log-group=snuba-consumers --delay-seconds=60 --schedule-ttl=60
+    <<: *snuba_defaults
+    command: subscriptions-scheduler-executor --dataset events --entity events --auto-offset-reset=latest --no-strict-offset-reset --consumer-group=snuba-events-subscriptions-consumers --followed-consumer-group=snuba-consumers --delay-seconds=60 --schedule-ttl=60 --stale-threshold-seconds=900
+  snuba-subscription-consumer-sessions:
+    <<: *snuba_defaults
+    command: subscriptions-scheduler-executor --dataset sessions --entity sessions --auto-offset-reset=latest --no-strict-offset-reset --consumer-group=snuba-sessions-subscriptions-consumers --followed-consumer-group=sessions-group --delay-seconds=60 --schedule-ttl=60 --stale-threshold-seconds=900
   snuba-subscription-consumer-transactions:
-    << : *snuba_defaults
-    command: subscriptions --auto-offset-reset=latest --consumer-group=snuba-transactions-subscriptions-consumers --topic=events --result-topic=transactions-subscription-results --dataset=transactions --commit-log-topic=snuba-commit-log --commit-log-group=transactions_group --delay-seconds=60 --schedule-ttl=60
-  snuba-cleanup:
-    << : *snuba_defaults
-    image: snuba-cleanup-onpremise-local
-    build:
-      context: ./cron
-      args:
-        BASE_IMAGE: '$SNUBA_IMAGE'
-    command: '"*/5 * * * * gosu snuba snuba cleanup --dry-run False"'
+    <<: *snuba_defaults
+    command: subscriptions-scheduler-executor --dataset transactions --entity transactions --auto-offset-reset=latest --no-strict-offset-reset --consumer-group=snuba-transactions-subscriptions-consumers --followed-consumer-group=transactions_group --delay-seconds=60 --schedule-ttl=60 --stale-threshold-seconds=900
   symbolicator:
-    << : *restart_policy
-    image: '$SYMBOLICATOR_IMAGE'
+    <<: *restart_policy
+    image: "$SYMBOLICATOR_IMAGE"
     volumes:
-      - 'sentry-symbolicator:/data'
+      - "sentry-symbolicator:/data"
       - type: bind
         read_only: true
         source: ./symbolicator
         target: /etc/symbolicator
     command: run -c /etc/symbolicator/config.yml
   symbolicator-cleanup:
-    << : *restart_policy
-    image: symbolicator-cleanup-onpremise-local
+    <<: *restart_policy
+    image: symbolicator-cleanup-self-hosted-local
     build:
       context: ./cron
       args:
-        BASE_IMAGE: '$SYMBOLICATOR_IMAGE'
+        BASE_IMAGE: "$SYMBOLICATOR_IMAGE"
     command: '"55 23 * * * gosu symbolicator symbolicator cleanup"'
     volumes:
-      - 'sentry-symbolicator:/data'
+      - "sentry-symbolicator:/data"
   web:
-    << : *sentry_defaults
+    <<: *sentry_defaults
+    healthcheck:
+      <<: *healthcheck_defaults
+      test:
+        - "CMD"
+        - "/bin/bash"
+        - "-c"
+        # Courtesy of https://unix.stackexchange.com/a/234089/108960
+        - 'exec 3<>/dev/tcp/127.0.0.1/9000 && echo -e "GET /_health/ HTTP/1.1\r\nhost: 127.0.0.1\r\n\r\n" >&3 && grep ok -s -m 1 <&3'
   cron:
-    << : *sentry_defaults
+    <<: *sentry_defaults
     command: run cron
   worker:
-    << : *sentry_defaults
+    <<: *sentry_defaults
     command: run worker
   ingest-consumer:
-    << : *sentry_defaults
+    <<: *sentry_defaults
     command: run ingest-consumer --all-consumer-types
-  post-process-forwarder:
-    << : *sentry_defaults
-    # Increase `--commit-batch-size 1` below to deal with high-load environments.
-    command: run post-process-forwarder --commit-batch-size 1
+  ingest-replay-recordings:
+    <<: *sentry_defaults
+    command: run ingest-replay-recordings
+  post-process-forwarder-errors:
+    <<: *sentry_defaults
+    command: run post-process-forwarder --entity errors
+
+  post-process-forwarder-transactions:
+    <<: *sentry_defaults
+    command: run post-process-forwarder --entity transactions --commit-log-topic=snuba-transactions-commit-log --synchronize-commit-group transactions_group
   subscription-consumer-events:
-    << : *sentry_defaults
-    command: run query-subscription-consumer --commit-batch-size 1 --topic events-subscription-results
+    <<: *sentry_defaults
+    command: run query-subscription-consumer --topic events-subscription-results
   subscription-consumer-transactions:
-    << : *sentry_defaults
-    command: run query-subscription-consumer --commit-batch-size 1 --topic transactions-subscription-results
+    <<: *sentry_defaults
+    command: run query-subscription-consumer --topic transactions-subscription-results
   sentry-cleanup:
-    << : *sentry_defaults
-    image: sentry-cleanup-onpremise-local
+    <<: *sentry_defaults
+    image: sentry-cleanup-self-hosted-local
     build:
       context: ./cron
       args:
-        BASE_IMAGE: 'sentry-onpremise-local'
+        BASE_IMAGE: sentry-self-hosted-local
+    entrypoint: "/entrypoint.sh"
     command: '"0 0 * * * gosu sentry sentry cleanup --days $SENTRY_EVENT_RETENTION_DAYS"'
   nginx:
-    << : *restart_policy
+    <<: *restart_policy
     ports:
-      - '$SENTRY_BIND:80/tcp'
-    image: 'nginx:1.16'
+      - "$SENTRY_BIND:80/tcp"
+    image: "nginx:1.22.0-alpine"
     volumes:
       - type: bind
         read_only: true
         source: ./nginx
         target: /etc/nginx
+      - sentry-nginx-cache:/var/cache/nginx
     depends_on:
       - web
       - relay
   relay:
-    << : *restart_policy
-    image: '$RELAY_IMAGE'
+    <<: *restart_policy
+    image: "$RELAY_IMAGE"
     volumes:
       - type: bind
         read_only: true
@@ -247,9 +365,14 @@ services:
         source: ./geoip
         target: /geoip
     depends_on:
-      - kafka
-      - redis
+      kafka:
+        <<: *depends_on-healthy
+      redis:
+        <<: *depends_on-healthy
+      web:
+        <<: *depends_on-healthy
 volumes:
+  # These store application data that should persist across restarts.
   sentry-data:
     external: true
   sentry-postgres:
@@ -264,8 +387,11 @@ volumes:
     external: true
   sentry-symbolicator:
     external: true
+
+  # These store ephemeral data that needn't persist across restarts.
   sentry-secrets:
   sentry-smtp:
+  sentry-nginx-cache:
   sentry-zookeeper-log:
   sentry-kafka-log:
   sentry-smtp-log:
diff --git a/foo b/foo
deleted file mode 100644
index e69de29..0000000
diff --git a/install.sh b/install.sh
index 58deecb..06d3329 100755
--- a/install.sh
+++ b/install.sh
@@ -1,354 +1,36 @@
 #!/usr/bin/env bash
-set -e
+set -eE
 
+# Pre-pre-flight? 
 if [[ -n "$MSYSTEM" ]]; then
-  echo "Seems like you are using an MSYS2-based system (such as Git Bash) which is not supported. Please use WSL instead.";
+  echo "Seems like you are using an MSYS2-based system (such as Git Bash) which is not supported. Please use WSL instead."
   exit 1
 fi
 
-# Read .env for default values with a tip o' the hat to https://stackoverflow.com/a/59831605/90297
-t=$(mktemp) && export -p > "$t" && set -a && . ./.env && set +a && . "$t" && rm "$t" && unset t
+source install/_lib.sh
 
-source ./install/docker-aliases.sh
-
-# Thanks to https://unix.stackexchange.com/a/145654/108960
-log_file="sentry_install_log-`date +'%Y-%m-%d_%H-%M-%S'`.txt"
-exec &> >(tee -a "$log_file")
-
-MIN_DOCKER_VERSION='19.03.6'
-MIN_COMPOSE_VERSION='1.24.1'
-MIN_RAM_HARD=4000 # MB
-MIN_RAM_SOFT=8000 # MB
-
-# Increase the default 10 second SIGTERM timeout
-# to ensure celery queues are properly drained
-# between upgrades as task signatures may change across
-# versions
-STOP_TIMEOUT=60 # seconds
-SENTRY_CONFIG_PY='sentry/sentry.conf.py'
-SENTRY_CONFIG_YML='sentry/config.yml'
-SYMBOLICATOR_CONFIG_YML='symbolicator/config.yml'
-RELAY_CONFIG_YML='relay/config.yml'
-RELAY_CREDENTIALS_JSON='relay/credentials.json'
-SENTRY_EXTRA_REQUIREMENTS='sentry/requirements.txt'
-MINIMIZE_DOWNTIME=
-
-show_help() {
-  cat <<EOF
-Usage: $0 [options]
-
-Install Sentry with docker-compose.
-
-Options:
- -h, --help             Show this message and exit.
- --no-user-prompt       Skips the initial user creation prompt (ideal for non-interactive installs).
- --minimize-downtime    EXPERIMENTAL: try to keep accepting events for as long as possible while upgrading.
-                        This will disable cleanup on error, and might leave your installation in partially upgraded state.
-                        This option might not reload all configuration, and is only meant for in-place upgrades.
-EOF
-}
-
-while (( $# )); do
-  case "$1" in
-    -h | --help) show_help; exit;;
-    --no-user-prompt) SKIP_USER_PROMPT=1;;
-    --minimize-downtime) MINIMIZE_DOWNTIME=1;;
-    --) ;;
-    *) echo "Unexpected argument: $1. Use --help for usage information."; exit 1;;
-  esac
-  shift
-done
-
-# Courtesy of https://stackoverflow.com/a/2183063/90297
-trap_with_arg() {
-  func="$1" ; shift
-  for sig ; do
-    trap "$func $sig "'$LINENO' "$sig"
-  done
-}
-
-DID_CLEAN_UP=0
-# the cleanup function will be the exit point
-cleanup () {
-  if [[ "$DID_CLEAN_UP" -eq 1 ]]; then
-    return 0;
-  fi
-  DID_CLEAN_UP=1
-
-  if [[ "$1" != "EXIT" ]]; then
-    echo "An error occurred, caught SIG$1 on line $2";
-
-    if [[ -n "$MINIMIZE_DOWNTIME" ]]; then
-      echo "*NOT* cleaning up, to clean your environment run \"docker-compose stop\"."
-    else
-      echo "Cleaning up..."
-    fi
-  fi
-
-  if [[ -z "$MINIMIZE_DOWNTIME" ]]; then
-    $dc stop -t $STOP_TIMEOUT &> /dev/null
-  fi
-}
+# Pre-flight. No impact yet.
+source install/parse-cli.sh
+source install/detect-platform.sh
+source install/dc-detect-version.sh
+source install/error-handling.sh
+# We set the trap at the top level so that we get better tracebacks.
 trap_with_arg cleanup ERR INT TERM EXIT
-
-
-echo "Checking minimum requirements..."
-
-DOCKER_VERSION=$(docker version --format '{{.Server.Version}}')
-COMPOSE_VERSION=$($dc --version | sed 's/docker-compose version \(.\{1,\}\),.*/\1/')
-RAM_AVAILABLE_IN_DOCKER=$(docker run --rm busybox free -m 2>/dev/null | awk '/Mem/ {print $2}');
-
-# Compare dot-separated strings - function below is inspired by https://stackoverflow.com/a/37939589/808368
-function ver () { echo "$@" | awk -F. '{ printf("%d%03d%03d", $1,$2,$3); }'; }
-
-# Thanks to https://stackoverflow.com/a/25123013/90297 for the quick `sed` pattern
-function ensure_file_from_example {
-  if [[ -f "$1" ]]; then
-    echo "$1 already exists, skipped creation."
-  else
-    echo "Creating $1..."
-    cp -n $(echo "$1" | sed 's/\.[^.]*$/.example&/') "$1"
-  fi
-}
-
-if [[ "$(ver $DOCKER_VERSION)" -lt "$(ver $MIN_DOCKER_VERSION)" ]]; then
-  echo "FAIL: Expected minimum Docker version to be $MIN_DOCKER_VERSION but found $DOCKER_VERSION"
-  exit 1
-fi
-
-if [[ "$(ver $COMPOSE_VERSION)" -lt "$(ver $MIN_COMPOSE_VERSION)" ]]; then
-  echo "FAIL: Expected minimum docker-compose version to be $MIN_COMPOSE_VERSION but found $COMPOSE_VERSION"
-  exit 1
-fi
-
-if [[ "$RAM_AVAILABLE_IN_DOCKER" -lt "$MIN_RAM_HARD" ]]; then
-  echo "FAIL: Required minimum RAM available to Docker is $MIN_RAM_HARD MB, found $RAM_AVAILABLE_IN_DOCKER MB"
-  exit 1
-elif [[ "$RAM_AVAILABLE_IN_DOCKER" -lt "$MIN_RAM_SOFT" ]]; then
-  echo "WARN: Recommended minimum RAM available to Docker is $MIN_RAM_SOFT MB, found $RAM_AVAILABLE_IN_DOCKER MB"
-fi
-
-#SSE4.2 required by Clickhouse (https://clickhouse.yandex/docs/en/operations/requirements/)
-# On KVM, cpuinfo could falsely not report SSE 4.2 support, so skip the check. https://github.com/ClickHouse/ClickHouse/issues/20#issuecomment-226849297
-IS_KVM=$(docker run --rm busybox grep -c 'Common KVM processor' /proc/cpuinfo || :)
-if [[ "$IS_KVM" -eq 0 ]]; then
-  SUPPORTS_SSE42=$(docker run --rm busybox grep -c sse4_2 /proc/cpuinfo || :)
-  if [[ "$SUPPORTS_SSE42" -eq 0 ]]; then
-    echo "FAIL: The CPU your machine is running on does not support the SSE 4.2 instruction set, which is required for one of the services Sentry uses (Clickhouse). See https://git.io/JvLDt for more info."
-    exit 1
-  fi
-fi
-
-echo ""
-echo "Creating volumes for persistent storage..."
-echo "Created $(docker volume create --name=sentry-data)."
-echo "Created $(docker volume create --name=sentry-postgres)."
-echo "Created $(docker volume create --name=sentry-redis)."
-echo "Created $(docker volume create --name=sentry-zookeeper)."
-echo "Created $(docker volume create --name=sentry-kafka)."
-echo "Created $(docker volume create --name=sentry-clickhouse)."
-echo "Created $(docker volume create --name=sentry-symbolicator)."
-
-echo ""
-ensure_file_from_example $SENTRY_CONFIG_PY
-ensure_file_from_example $SENTRY_CONFIG_YML
-ensure_file_from_example $SENTRY_EXTRA_REQUIREMENTS
-ensure_file_from_example $SYMBOLICATOR_CONFIG_YML
-ensure_file_from_example $RELAY_CONFIG_YML
-
-if grep -xq "system.secret-key: '!!changeme!!'" $SENTRY_CONFIG_YML ; then
-  echo ""
-  echo "Generating secret key..."
-  # This is to escape the secret key to be used in sed below
-  # Note the need to set LC_ALL=C due to BSD tr and sed always trying to decode
-  # whatever is passed to them. Kudos to https://stackoverflow.com/a/23584470/90297
-  SECRET_KEY=$(export LC_ALL=C; head /dev/urandom | tr -dc "a-z0-9@#%^&*(-_=+)" | head -c 50 | sed -e 's/[\/&]/\\&/g')
-  sed -i -e 's/^system.secret-key:.*$/system.secret-key: '"'$SECRET_KEY'"'/' $SENTRY_CONFIG_YML
-  echo "Secret key written to $SENTRY_CONFIG_YML"
-fi
-
-replace_tsdb() {
-  if (
-    [[ -f "$SENTRY_CONFIG_PY" ]] &&
-    ! grep -xq 'SENTRY_TSDB = "sentry.tsdb.redissnuba.RedisSnubaTSDB"' "$SENTRY_CONFIG_PY"
-  ); then
-    # Do NOT indent the following string as it would be reflected in the end result,
-    # breaking the final config file. See getsentry/onpremise#624.
-    tsdb_settings="\
-SENTRY_TSDB = \"sentry.tsdb.redissnuba.RedisSnubaTSDB\"
-
-# Automatic switchover 90 days after $(date). Can be removed afterwards.
-SENTRY_TSDB_OPTIONS = {\"switchover_timestamp\": $(date +%s) + (90 * 24 * 3600)}\
-"
-
-    if grep -q 'SENTRY_TSDB_OPTIONS = ' "$SENTRY_CONFIG_PY"; then
-      echo "Not attempting automatic TSDB migration due to presence of SENTRY_TSDB_OPTIONS"
-    else
-      echo "Attempting to automatically migrate to new TSDB"
-      # Escape newlines for sed
-      tsdb_settings="${tsdb_settings//$'\n'/\\n}"
-      cp "$SENTRY_CONFIG_PY" "$SENTRY_CONFIG_PY.bak"
-      sed -i -e "s/^SENTRY_TSDB = .*$/${tsdb_settings}/g" "$SENTRY_CONFIG_PY" || true
-
-      if grep -xq 'SENTRY_TSDB = "sentry.tsdb.redissnuba.RedisSnubaTSDB"' "$SENTRY_CONFIG_PY"; then
-        echo "Migrated TSDB to Snuba. Old configuration file backed up to $SENTRY_CONFIG_PY.bak"
-        return
-      fi
-
-      echo "Failed to automatically migrate TSDB. Reverting..."
-      mv "$SENTRY_CONFIG_PY.bak" "$SENTRY_CONFIG_PY"
-      echo "$SENTRY_CONFIG_PY restored from backup."
-    fi
-
-    echo "WARN: Your Sentry configuration uses a legacy data store for time-series data. Remove the options SENTRY_TSDB and SENTRY_TSDB_OPTIONS from $SENTRY_CONFIG_PY and add:"
-    echo ""
-    echo "$tsdb_settings"
-    echo ""
-    echo "For more information please refer to https://github.com/getsentry/onpremise/pull/430"
-  fi
-}
-
-replace_tsdb
-
-echo ""
-echo "Fetching and updating Docker images..."
-echo ""
-# We tag locally built images with an '-onpremise-local' suffix. docker-compose pull tries to pull these too and
-# shows a 404 error on the console which is confusing and unnecessary. To overcome this, we add the stderr>stdout
-# redirection below and pass it through grep, ignoring all lines having this '-onpremise-local' suffix.
-$dc pull -q --ignore-pull-failures 2>&1 | grep -v -- -onpremise-local || true
-
-# We may not have the set image on the repo (local images) so allow fails
-docker pull ${SENTRY_IMAGE}${SENTRY_PYTHON2:+-py2} || true;
-
-echo ""
-echo "Building and tagging Docker images..."
-echo ""
-# Build the sentry onpremise image first as it is needed for the cron image
-$dc build --force-rm web
-$dc build --force-rm --parallel
-echo ""
-echo "Docker images built."
-
-if [[ -n "$MINIMIZE_DOWNTIME" ]]; then
-  # Stop everything but relay and nginx
-  $dc rm -fsv $($dc config --services | grep -v -E '^(nginx|relay)$')
-else
-  # Clean up old stuff and ensure nothing is working while we install/update
-  # This is for older versions of on-premise:
-  $dc -p onpremise down -t $STOP_TIMEOUT --rmi local --remove-orphans
-  # This is for newer versions
-  $dc down -t $STOP_TIMEOUT --rmi local --remove-orphans
-fi
-
-ZOOKEEPER_SNAPSHOT_FOLDER_EXISTS=$($dcr zookeeper bash -c 'ls 2>/dev/null -Ubad1 -- /var/lib/zookeeper/data/version-2 | wc -l | tr -d '[:space:]'')
-if [[ "$ZOOKEEPER_SNAPSHOT_FOLDER_EXISTS" -eq 1 ]]; then
-  ZOOKEEPER_LOG_FILE_COUNT=$($dcr zookeeper bash -c 'ls 2>/dev/null -Ubad1 -- /var/lib/zookeeper/log/version-2/* | wc -l | tr -d '[:space:]'')
-  ZOOKEEPER_SNAPSHOT_FILE_COUNT=$($dcr zookeeper bash -c 'ls 2>/dev/null -Ubad1 -- /var/lib/zookeeper/data/version-2/* | wc -l | tr -d '[:space:]'')
-  # This is a workaround for a ZK upgrade bug: https://issues.apache.org/jira/browse/ZOOKEEPER-3056
-  if [[ "$ZOOKEEPER_LOG_FILE_COUNT" -gt 0 ]] && [[ "$ZOOKEEPER_SNAPSHOT_FILE_COUNT" -eq 0 ]]; then
-    $dcr -v $(pwd)/zookeeper:/temp zookeeper bash -c 'cp /temp/snapshot.0 /var/lib/zookeeper/data/version-2/snapshot.0'
-    $dc run -d -e ZOOKEEPER_SNAPSHOT_TRUST_EMPTY=true zookeeper
-  fi
-fi
-
-echo "Bootstrapping and migrating Snuba..."
-$dcr snuba-api bootstrap --no-migrate --force
-$dcr snuba-api migrations migrate --force
-echo ""
-
-# NOTE: This step relies on `kafka` being available from the previous `snuba-api bootstrap` step
-# XXX(BYK): We cannot use auto.create.topics as Confluence and Apache hates it now (and makes it very hard to enable)
-EXISTING_KAFKA_TOPICS=$($dcr kafka kafka-topics --list --bootstrap-server kafka:9092 2>/dev/null)
-NEEDED_KAFKA_TOPICS="ingest-attachments ingest-transactions ingest-events"
-for topic in $NEEDED_KAFKA_TOPICS; do
-  if ! echo "$EXISTING_KAFKA_TOPICS" | grep -wq $topic; then
-    echo "Creating additional Kafka topics..."
-    $dcr kafka kafka-topics --create --topic $topic --bootstrap-server kafka:9092
-    echo ""
-  fi
-done
-
-# Very naively check whether there's an existing sentry-postgres volume and the PG version in it
-if [[ -n "$(docker volume ls -q --filter name=sentry-postgres)" && "$(docker run --rm -v sentry-postgres:/db busybox cat /db/PG_VERSION 2>/dev/null)" == "9.5" ]]; then
-  docker volume rm sentry-postgres-new || true
-  # If this is Postgres 9.5 data, start upgrading it to 9.6 in a new volume
-  docker run --rm \
-  -v sentry-postgres:/var/lib/postgresql/9.5/data \
-  -v sentry-postgres-new:/var/lib/postgresql/9.6/data \
-  tianon/postgres-upgrade:9.5-to-9.6
-
-  # Get rid of the old volume as we'll rename the new one to that
-  docker volume rm sentry-postgres
-  docker volume create --name sentry-postgres
-  # There's no rename volume in Docker so copy the contents from old to new name
-  # Also append the `host all all all trust` line as `tianon/postgres-upgrade:9.5-to-9.6`
-  # doesn't do that automatically.
-  docker run --rm -v sentry-postgres-new:/from -v sentry-postgres:/to alpine ash -c \
-    "cd /from ; cp -av . /to ; echo 'host all all all trust' >> /to/pg_hba.conf"
-  # Finally, remove the new old volume as we are all in sentry-postgres now
-  docker volume rm sentry-postgres-new
-fi
-
-echo ""
-echo "Setting up database..."
-if [[ -n "$CI" || "$SKIP_USER_PROMPT" == 1 ]]; then
-  $dcr web upgrade --noinput
-  echo ""
-  echo "Did not prompt for user creation due to non-interactive shell."
-  echo "Run the following command to create one yourself (recommended):"
-  echo ""
-  echo "  docker-compose run --rm web createuser"
-  echo ""
-else
-  $dcr web upgrade
-fi
-
-
-SENTRY_DATA_NEEDS_MIGRATION=$(docker run --rm -v sentry-data:/data alpine ash -c "[ ! -d '/data/files' ] && ls -A1x /data | wc -l || true")
-if [[ -n "$SENTRY_DATA_NEEDS_MIGRATION" ]]; then
-  echo "Migrating file storage..."
-  # Use the web (Sentry) image so the file owners are kept as sentry:sentry
-  # The `\"` escape pattern is to make this compatible w/ Git Bash on Windows. See #329.
-  $dcr --entrypoint \"/bin/bash\" web -c \
-    "mkdir -p /tmp/files; mv /data/* /tmp/files/; mv /tmp/files /data/files; chown -R sentry:sentry /data"
-fi
-
-
-if [[ ! -f "$RELAY_CREDENTIALS_JSON" ]]; then
-  echo ""
-  echo "Generating Relay credentials..."
-
-  # We need the ugly hack below as `relay generate credentials` tries to read the config and the credentials
-  # even with the `--stdout` and `--overwrite` flags and then errors out when the credentials file exists but
-  # not valid JSON. We hit this case as we redirect output to the same config folder, creating an empty
-  # credentials file before relay runs.
-  $dcr --no-deps -v $(pwd)/$RELAY_CONFIG_YML:/tmp/config.yml relay --config /tmp credentials generate --stdout > "$RELAY_CREDENTIALS_JSON"
-  echo "Relay credentials written to $RELAY_CREDENTIALS_JSON"
-fi
-
-
-source ./install/geoip.sh
-
-
-if [[ "$MINIMIZE_DOWNTIME" ]]; then
-  # Start the whole setup, except nginx and relay.
-  $dc up -d --remove-orphans $($dc config --services | grep -v -E '^(nginx|relay)$')
-  $dc exec -T nginx service nginx reload
-
-  echo "Waiting for Sentry to start..."
-  docker run --rm --network="${COMPOSE_PROJECT_NAME}_default" alpine ash \
-    -c 'while [[ "$(wget -T 1 -q -O- http://web:9000/_health/)" != "ok" ]]; do sleep 0.5; done'
-
-  # Make sure everything is up. This should only touch relay and nginx
-  $dc up -d
-else
-  echo ""
-  echo "----------------"
-  echo "You're all done! Run the following command to get Sentry running:"
-  echo ""
-  echo "  docker-compose up -d"
-  echo ""
-fi
-
-source ./install/py2-warning.sh
+source install/check-latest-commit.sh
+source install/check-minimum-requirements.sh
+
+# Let's go! Start impacting things.
+source install/turn-things-off.sh
+source install/create-docker-volumes.sh
+source install/ensure-files-from-examples.sh
+source install/ensure-relay-credentials.sh
+source install/generate-secret-key.sh
+source install/update-docker-images.sh
+source install/build-docker-images.sh
+source install/install-wal2json.sh
+source install/bootstrap-snuba.sh
+source install/create-kafka-topics.sh
+source install/upgrade-postgres.sh
+source install/set-up-and-migrate-database.sh
+source install/geoip.sh
+source install/wrap-up.sh
diff --git a/install/_lib.sh b/install/_lib.sh
new file mode 100644
index 0000000..3a76d86
--- /dev/null
+++ b/install/_lib.sh
@@ -0,0 +1,55 @@
+set -euo pipefail
+test "${DEBUG:-}" && set -x
+
+# Override any user-supplied umask that could cause problems, see #1222
+umask 002
+
+# Thanks to https://unix.stackexchange.com/a/145654/108960
+log_file=sentry_install_log-$(date +'%Y-%m-%d_%H-%M-%S').txt
+exec &> >(tee -a "$log_file")
+
+# Allow `.env` overrides using the `.env.custom` file.
+# We pass this to docker compose in a couple places.
+if [[ -f .env.custom ]]; then
+  _ENV=.env.custom
+else
+  _ENV=.env
+fi
+
+# Read .env for default values with a tip o' the hat to https://stackoverflow.com/a/59831605/90297
+t=$(mktemp) && export -p >"$t" && set -a && . $_ENV && set +a && . "$t" && rm "$t" && unset t
+
+if [ "${GITHUB_ACTIONS:-}" = "true" ]; then
+  _group="::group::"
+  _endgroup="::endgroup::"
+else
+  _group=" "
+  _endgroup=""
+fi
+
+# A couple of the config files are referenced from other subscripts, so they
+# get vars, while multiple subscripts call ensure_file_from_example.
+function ensure_file_from_example {
+  target="$1"
+  if [[ -f "$target" ]]; then
+    echo "$target already exists, skipped creation."
+  else
+    # sed from https://stackoverflow.com/a/25123013/90297
+    example="$(echo "$target" | sed 's/\.[^.]*$/.example&/')"
+    if [[ ! -f "$example" ]]; then
+      echo "Oops! Where did $example go?  We need it in order to create $target."
+      exit
+    fi
+    echo "Creating $target ..."
+    cp -n "$example" "$target"
+  fi
+}
+
+SENTRY_CONFIG_PY=sentry/sentry.conf.py
+SENTRY_CONFIG_YML=sentry/config.yml
+
+# Increase the default 10 second SIGTERM timeout
+# to ensure celery queues are properly drained
+# between upgrades as task signatures may change across
+# versions
+STOP_TIMEOUT=60 # seconds
diff --git a/install/_min-requirements.sh b/install/_min-requirements.sh
new file mode 100644
index 0000000..fb1b8a1
--- /dev/null
+++ b/install/_min-requirements.sh
@@ -0,0 +1,7 @@
+# Don't forget to update the README and othes docs when you change these!
+MIN_DOCKER_VERSION='19.03.6'
+MIN_COMPOSE_VERSION='1.28.0'
+MIN_RAM_HARD=3800 # MB
+MIN_RAM_SOFT=7800 # MB
+MIN_CPU_HARD=2
+MIN_CPU_SOFT=4
diff --git a/install/bootstrap-snuba.sh b/install/bootstrap-snuba.sh
new file mode 100644
index 0000000..2952ed0
--- /dev/null
+++ b/install/bootstrap-snuba.sh
@@ -0,0 +1,6 @@
+echo "${_group}Bootstrapping and migrating Snuba ..."
+
+$dcr snuba-api bootstrap --no-migrate --force
+$dcr snuba-api migrations migrate --force
+
+echo "${_endgroup}"
diff --git a/install/build-docker-images.sh b/install/build-docker-images.sh
new file mode 100644
index 0000000..c793b9e
--- /dev/null
+++ b/install/build-docker-images.sh
@@ -0,0 +1,14 @@
+echo "${_group}Building and tagging Docker images ..."
+
+echo ""
+# Build any service that provides the image sentry-self-hosted-local first,
+# as it is used as the base image for sentry-cleanup-self-hosted-local.
+$dcb --force-rm web
+# Build each other service individually to localize potential failures better.
+for service in $($dc config --services); do
+  $dcb --force-rm "$service"
+done
+echo ""
+echo "Docker images built."
+
+echo "${_endgroup}"
diff --git a/install/check-latest-commit.sh b/install/check-latest-commit.sh
new file mode 100644
index 0000000..cf3acb2
--- /dev/null
+++ b/install/check-latest-commit.sh
@@ -0,0 +1,15 @@
+echo "${_group}Checking for latest commit ... "
+
+# Checks if we are on latest commit from github if it is running from master branch
+if [[ -d "../.git" && "${SKIP_COMMIT_CHECK:-0}" != 1 ]]; then
+  if [[ $(git branch | sed -n '/\* /s///p') == "master" ]]; then
+    if [[ $(git rev-parse HEAD) != $(git ls-remote $(git rev-parse --abbrev-ref @{u} | sed 's/\// /g') | cut -f1) ]]; then
+      echo "Seems like you are not using the latest commit from the self-hosted repository. Please pull the latest changes and try again, or suppress this check with --skip-commit-check."
+      exit 1
+    fi
+  fi
+else
+  echo "skipped"
+fi
+
+echo "${_endgroup}"
diff --git a/install/check-minimum-requirements.sh b/install/check-minimum-requirements.sh
new file mode 100644
index 0000000..01488e8
--- /dev/null
+++ b/install/check-minimum-requirements.sh
@@ -0,0 +1,63 @@
+echo "${_group}Checking minimum requirements ..."
+
+source install/_min-requirements.sh
+
+# Check the version of $1 is greater than or equal to $2 using sort. Note: versions must be stripped of "v"
+function vergte() {
+  printf "%s\n%s" $1 $2 | sort --version-sort --check=quiet --reverse
+  echo $?
+}
+
+DOCKER_VERSION=$(docker version --format '{{.Server.Version}}' || echo '')
+if [[ -z "$DOCKER_VERSION" ]]; then
+  echo "FAIL: Unable to get docker version, is the docker daemon running?"
+  exit 1
+fi
+
+if [[ "$(vergte ${DOCKER_VERSION//v/} $MIN_DOCKER_VERSION)" -eq 1 ]]; then
+  echo "FAIL: Expected minimum docker version to be $MIN_DOCKER_VERSION but found $DOCKER_VERSION"
+  exit 1
+fi
+echo "Found Docker version $DOCKER_VERSION"
+
+COMPOSE_VERSION=$($dc_base version --short || echo '')
+if [[ -z "$COMPOSE_VERSION" ]]; then
+  echo "FAIL: Docker compose is required to run self-hosted"
+  exit 1
+fi
+
+if [[ "$(vergte ${COMPOSE_VERSION//v/} $MIN_COMPOSE_VERSION)" -eq 1 ]]; then
+  echo "FAIL: Expected minimum $dc_base version to be $MIN_COMPOSE_VERSION but found $COMPOSE_VERSION"
+  exit 1
+fi
+echo "Found Docker Compose version $COMPOSE_VERSION"
+
+CPU_AVAILABLE_IN_DOCKER=$(docker run --rm busybox nproc --all)
+if [[ "$CPU_AVAILABLE_IN_DOCKER" -lt "$MIN_CPU_HARD" ]]; then
+  echo "FAIL: Required minimum CPU cores available to Docker is $MIN_CPU_HARD, found $CPU_AVAILABLE_IN_DOCKER"
+  exit 1
+elif [[ "$CPU_AVAILABLE_IN_DOCKER" -lt "$MIN_CPU_SOFT" ]]; then
+  echo "WARN: Recommended minimum CPU cores available to Docker is $MIN_CPU_SOFT, found $CPU_AVAILABLE_IN_DOCKER"
+fi
+
+RAM_AVAILABLE_IN_DOCKER=$(docker run --rm busybox free -m 2>/dev/null | awk '/Mem/ {print $2}')
+if [[ "$RAM_AVAILABLE_IN_DOCKER" -lt "$MIN_RAM_HARD" ]]; then
+  echo "FAIL: Required minimum RAM available to Docker is $MIN_RAM_HARD MB, found $RAM_AVAILABLE_IN_DOCKER MB"
+  exit 1
+elif [[ "$RAM_AVAILABLE_IN_DOCKER" -lt "$MIN_RAM_SOFT" ]]; then
+  echo "WARN: Recommended minimum RAM available to Docker is $MIN_RAM_SOFT MB, found $RAM_AVAILABLE_IN_DOCKER MB"
+fi
+
+#SSE4.2 required by Clickhouse (https://clickhouse.yandex/docs/en/operations/requirements/)
+# On KVM, cpuinfo could falsely not report SSE 4.2 support, so skip the check. https://github.com/ClickHouse/ClickHouse/issues/20#issuecomment-226849297
+# This may also happen on other virtualization software such as on VMWare ESXi hosts.
+IS_KVM=$(docker run --rm busybox grep -c 'Common KVM processor' /proc/cpuinfo || :)
+if [[ ! "$SKIP_SSE42_REQUIREMENTS" -eq 1 && "$IS_KVM" -eq 0 && "$DOCKER_ARCH" = "x86_64" ]]; then
+  SUPPORTS_SSE42=$(docker run --rm busybox grep -c sse4_2 /proc/cpuinfo || :)
+  if [[ "$SUPPORTS_SSE42" -eq 0 ]]; then
+    echo "FAIL: The CPU your machine is running on does not support the SSE 4.2 instruction set, which is required for one of the services Sentry uses (Clickhouse). See https://github.com/getsentry/self-hosted/issues/340 for more info."
+    exit 1
+  fi
+fi
+
+echo "${_endgroup}"
diff --git a/install/create-docker-volumes.sh b/install/create-docker-volumes.sh
new file mode 100644
index 0000000..ca3ef0b
--- /dev/null
+++ b/install/create-docker-volumes.sh
@@ -0,0 +1,11 @@
+echo "${_group}Creating volumes for persistent storage ..."
+
+echo "Created $(docker volume create --name=sentry-clickhouse)."
+echo "Created $(docker volume create --name=sentry-data)."
+echo "Created $(docker volume create --name=sentry-kafka)."
+echo "Created $(docker volume create --name=sentry-postgres)."
+echo "Created $(docker volume create --name=sentry-redis)."
+echo "Created $(docker volume create --name=sentry-symbolicator)."
+echo "Created $(docker volume create --name=sentry-zookeeper)."
+
+echo "${_endgroup}"
diff --git a/install/create-kafka-topics.sh b/install/create-kafka-topics.sh
new file mode 100644
index 0000000..78534ac
--- /dev/null
+++ b/install/create-kafka-topics.sh
@@ -0,0 +1,14 @@
+echo "${_group}Creating additional Kafka topics ..."
+
+# NOTE: This step relies on `kafka` being available from the previous `snuba-api bootstrap` step
+# XXX(BYK): We cannot use auto.create.topics as Confluence and Apache hates it now (and makes it very hard to enable)
+EXISTING_KAFKA_TOPICS=$($dcr -T kafka kafka-topics --list --bootstrap-server kafka:9092 2>/dev/null)
+NEEDED_KAFKA_TOPICS="ingest-attachments ingest-transactions ingest-events ingest-replay-recordings"
+for topic in $NEEDED_KAFKA_TOPICS; do
+  if ! echo "$EXISTING_KAFKA_TOPICS" | grep -wq $topic; then
+    $dcr kafka kafka-topics --create --topic $topic --bootstrap-server kafka:9092
+    echo ""
+  fi
+done
+
+echo "${_endgroup}"
diff --git a/install/dc-detect-version.sh b/install/dc-detect-version.sh
new file mode 100644
index 0000000..6f67988
--- /dev/null
+++ b/install/dc-detect-version.sh
@@ -0,0 +1,23 @@
+if [ "${GITHUB_ACTIONS:-}" = "true" ]; then
+  _group="::group::"
+  _endgroup="::endgroup::"
+else
+  _group=" "
+  _endgroup=""
+fi
+
+echo "${_group}Initializing Docker Compose ..."
+
+# Some environments still use `docker-compose` even for Docker Compose v2.
+dc_base="$(docker compose version &>/dev/null && echo 'docker compose' || echo 'docker-compose')"
+if [[ "$(basename $0)" = "install.sh" ]]; then
+  dc="$dc_base --ansi never --env-file ${_ENV}"
+else
+  dc="$dc_base --ansi never"
+fi
+proxy_args="--build-arg http_proxy=${http_proxy:-} --build-arg https_proxy=${https_proxy:-} --build-arg no_proxy=${no_proxy:-}"
+dcr="$dc run --rm"
+dcb="$dc build $proxy_args"
+dbuild="docker build $proxy_args"
+
+echo "${_endgroup}"
diff --git a/install/detect-platform.sh b/install/detect-platform.sh
new file mode 100644
index 0000000..13aa70f
--- /dev/null
+++ b/install/detect-platform.sh
@@ -0,0 +1,29 @@
+echo "${_group}Detecting Docker platform"
+
+# Sentry SaaS uses stock Yandex ClickHouse, but they don't provide images that
+# support ARM, which is relevant especially for Apple M1 laptops, Sentry's
+# standard developer environment. As a workaround, we use an altinity image
+# targeting ARM.
+#
+# See https://github.com/getsentry/self-hosted/issues/1385#issuecomment-1101824274
+#
+# Images built on ARM also need to be tagged to use linux/arm64 on Apple
+# silicon Macs to work around an issue where they are built for
+# linux/amd64 by default due to virtualization.
+# See https://github.com/docker/cli/issues/3286 for the Docker bug.
+
+export DOCKER_ARCH=$(docker info --format '{{.Architecture}}')
+
+if [[ "$DOCKER_ARCH" = "x86_64" ]]; then
+  export DOCKER_PLATFORM="linux/amd64"
+  export CLICKHOUSE_IMAGE="yandex/clickhouse-server:20.3.9.70"
+elif [[ "$DOCKER_ARCH" = "aarch64" ]]; then
+  export DOCKER_PLATFORM="linux/arm64"
+  export CLICKHOUSE_IMAGE="altinity/clickhouse-server:21.6.1.6734-testing-arm"
+else
+  echo "FAIL: Unsupported docker architecture $DOCKER_ARCH."
+  exit 1
+fi
+echo "Detected Docker platform is $DOCKER_PLATFORM"
+
+echo "${_endgroup}"
diff --git a/install/docker-aliases.sh b/install/docker-aliases.sh
deleted file mode 100755
index e19384b..0000000
--- a/install/docker-aliases.sh
+++ /dev/null
@@ -1,3 +0,0 @@
-#!/usr/bin/env bash
-dc="docker-compose --no-ansi"
-dcr="$dc run --rm"
diff --git a/install/ensure-files-from-examples.sh b/install/ensure-files-from-examples.sh
new file mode 100644
index 0000000..97a7ed9
--- /dev/null
+++ b/install/ensure-files-from-examples.sh
@@ -0,0 +1,7 @@
+echo "${_group}Ensuring files from examples ..."
+
+ensure_file_from_example "$SENTRY_CONFIG_PY"
+ensure_file_from_example "$SENTRY_CONFIG_YML"
+ensure_file_from_example symbolicator/config.yml
+
+echo "${_endgroup}"
diff --git a/install/ensure-relay-credentials.sh b/install/ensure-relay-credentials.sh
new file mode 100644
index 0000000..d1eaaa2
--- /dev/null
+++ b/install/ensure-relay-credentials.sh
@@ -0,0 +1,42 @@
+echo "${_group}Ensuring Relay credentials ..."
+
+RELAY_CONFIG_YML=relay/config.yml
+RELAY_CREDENTIALS_JSON=relay/credentials.json
+
+ensure_file_from_example $RELAY_CONFIG_YML
+
+if [[ -f "$RELAY_CREDENTIALS_JSON" ]]; then
+  echo "$RELAY_CREDENTIALS_JSON already exists, skipped creation."
+else
+
+  # There are a couple gotchas here:
+  #
+  # 1. We need to use a tmp file because if we redirect output directly to
+  #    credentials.json, then the shell will create an empty file that relay
+  #    will then try to read from (regardless of options such as --stdout or
+  #    --overwrite) and fail because it is empty.
+  #
+  # 2. We pull relay:nightly before invoking `run relay credentials generate`
+  #    because an implicit pull under the run causes extra stdout that results
+  #    in a garbage credentials.json.
+  #
+  # 3. We need to use -T to ensure that we receive output on Docker Compose
+  #    1.x and 2.2.3+ (funny story about that ... ;). Note that the long opt
+  #    --no-tty doesn't exist in Docker Compose 1.
+
+  $dc pull relay
+  creds="$dcr --no-deps -T relay credentials"
+  $creds generate --stdout >"$RELAY_CREDENTIALS_JSON".tmp
+  mv "$RELAY_CREDENTIALS_JSON".tmp "$RELAY_CREDENTIALS_JSON"
+  if ! grep -q Credentials <($creds show); then
+    # Let's fail early if creds failed, to make debugging easier.
+    echo "Failed to create relay credentials in $RELAY_CREDENTIALS_JSON."
+    echo "--- credentials.json v ---------------------------------------"
+    cat -v "$RELAY_CREDENTIALS_JSON" || true
+    echo "--- credentials.json ^ ---------------------------------------"
+    exit 1
+  fi
+  echo "Relay credentials written to $RELAY_CREDENTIALS_JSON."
+fi
+
+echo "${_endgroup}"
diff --git a/install/error-handling.sh b/install/error-handling.sh
new file mode 100644
index 0000000..ba30fff
--- /dev/null
+++ b/install/error-handling.sh
@@ -0,0 +1,222 @@
+echo "${_group}Setting up error handling ..."
+
+export SENTRY_DSN='https://19555c489ded4769978daae92f2346ca@self-hosted.getsentry.net/3'
+export SENTRY_ORG=self-hosted
+export SENTRY_PROJECT=installer
+
+$dbuild -t sentry-self-hosted-jq-local --platform="$DOCKER_PLATFORM" jq
+
+jq="docker run --rm -i sentry-self-hosted-jq-local"
+sentry_cli="docker run --rm -v /tmp:/work -e SENTRY_ORG=$SENTRY_ORG -e SENTRY_PROJECT=$SENTRY_PROJECT -e SENTRY_DSN=$SENTRY_DSN getsentry/sentry-cli"
+
+send_envelope() {
+  # Send envelope
+  $sentry_cli send-envelope "$envelope_file"
+}
+
+generate_breadcrumb_json() {
+  cat $log_file | $jq -R -c 'split("\n") | {"message": (.[0]//""), "category": "log", "level": "info"}'
+}
+
+send_event() {
+  # Use traceback hash as the UUID since it is 32 characters long
+  local event_hash=$1
+  local error_msg=$2
+  local traceback_json=$3
+  local breadcrumbs=$4
+  local envelope_file="sentry-envelope-${event_hash}"
+  local envelope_file_path="/tmp/$envelope_file"
+  # If the envelope file exists, we've already sent it
+  if [[ -f $envelope_file_path ]]; then
+    echo "Looks like you've already sent this error to us, we're on it :)"
+    return
+  fi
+  # If we haven't sent the envelope file, make it and send to Sentry
+  # The format is documented at https://develop.sentry.dev/sdk/envelopes/
+  # Grab length of log file, needed for the envelope header to send an attachment
+  local file_length=$(wc -c <$log_file | awk '{print $1}')
+
+  # Add header for initial envelope information
+  $jq -n -c --arg event_id "$event_hash" \
+    --arg dsn "$SENTRY_DSN" \
+    '$ARGS.named' >"$envelope_file_path"
+  # Add header to specify the event type of envelope to be sent
+  echo '{"type":"event"}' >>"$envelope_file_path"
+
+  # Next we construct the meat of the event payload, which we build up
+  # inside out using jq
+  # See https://develop.sentry.dev/sdk/event-payloads/
+  # for details about the event payload
+
+  # Then we need the exception payload
+  # https://develop.sentry.dev/sdk/event-payloads/exception/
+  # but first we need to make the stacktrace which goes in the exception payload
+  frames=$(echo "$traceback_json" | $jq -s -c)
+  stacktrace=$($jq -n -c --argjson frames "$frames" '$ARGS.named')
+  exception=$(
+    $jq -n -c --arg "type" Error \
+      --arg value "$error_msg" \
+      --argjson stacktrace "$stacktrace" \
+      '$ARGS.named'
+  )
+  event_body=$(
+    $jq -n -c --arg level error \
+      --argjson exception "{\"values\":[$exception]}" \
+      --argjson breadcrumbs "{\"values\": $breadcrumbs}" \
+      '$ARGS.named'
+  )
+  echo "$event_body" >>$envelope_file_path
+  # Add attachment to the event
+  attachment=$(
+    $jq -n -c --arg "type" attachment \
+      --arg length "$file_length" \
+      --arg content_type "text/plain" \
+      --arg filename install_log.txt \
+      '{"type": $type,"length": $length|tonumber,"content_type": $content_type,"filename": $filename}'
+  )
+  echo "$attachment" >>$envelope_file_path
+  cat $log_file >>$envelope_file_path
+  # Send envelope
+  send_envelope $envelope_file
+}
+
+if [[ -z "${REPORT_SELF_HOSTED_ISSUES:-}" ]]; then
+  echo
+  echo "Hey, so ... we would love to automatically find out about issues with your"
+  echo "Sentry instance so that we can improve the product. Turns out there is an app"
+  echo "for that, called Sentry. Would you be willing to let us automatically send data"
+  echo "about your instance upstream to Sentry for development and debugging purposes?"
+  echo
+  echo "  y / yes / 1"
+  echo "  n / no / 0"
+  echo
+  echo "(Btw, we send this to our own self-hosted Sentry instance, not to Sentry SaaS,"
+  echo "so that we can be in this together.)"
+  echo
+  echo "Here's the info we may collect:"
+  echo
+  echo "  - OS username"
+  echo "  - IP address"
+  echo "  - install log"
+  echo "  - runtime errors"
+  echo "  - performance data"
+  echo
+  echo "Thirty (30) day retention. No marketing. Privacy policy at sentry.io/privacy."
+  echo
+
+  yn=""
+  until [ ! -z "$yn" ]; do
+    read -p "y or n? " yn
+    case $yn in
+    y | yes | 1)
+      export REPORT_SELF_HOSTED_ISSUES=1
+      echo
+      echo -n "Thank you."
+      ;;
+    n | no | 0)
+      export REPORT_SELF_HOSTED_ISSUES=0
+      echo
+      echo -n "Understood."
+      ;;
+    *) yn="" ;;
+    esac
+  done
+
+  echo " To avoid this prompt in the future, use one of these flags:"
+  echo
+  echo "  --report-self-hosted-issues"
+  echo "  --no-report-self-hosted-issues"
+  echo
+  echo "or set the REPORT_SELF_HOSTED_ISSUES environment variable:"
+  echo
+  echo "  REPORT_SELF_HOSTED_ISSUES=1 to send data"
+  echo "  REPORT_SELF_HOSTED_ISSUES=0 to not send data"
+  echo
+  sleep 5
+fi
+
+# Make sure we can use sentry-cli if we need it.
+if [ "$REPORT_SELF_HOSTED_ISSUES" == 1 ]; then
+  if ! docker pull getsentry/sentry-cli:latest; then
+    echo "Failed to pull sentry-cli, won't report to Sentry after all."
+    export REPORT_SELF_HOSTED_ISSUES=0
+  fi
+fi
+
+# Courtesy of https://stackoverflow.com/a/2183063/90297
+trap_with_arg() {
+  func="$1"
+  shift
+  for sig; do
+    trap "$func $sig" "$sig"
+  done
+}
+
+DID_CLEAN_UP=0
+# the cleanup function will be the exit point
+cleanup() {
+  local retcode=$?
+  local cmd="${BASH_COMMAND}"
+  if [[ "$DID_CLEAN_UP" -eq 1 ]]; then
+    return 0
+  fi
+  DID_CLEAN_UP=1
+  if [[ "$1" != "EXIT" ]]; then
+    set +o xtrace
+    # Save the error message that comes from the last line of the log file
+    error_msg=$(tail -n 1 "$log_file")
+    # Create the breadcrumb payload now before stacktrace is printed
+    # https://develop.sentry.dev/sdk/event-payloads/breadcrumbs/
+    # Use sed to remove the last line, that is reported through the error message
+    breadcrumbs=$(generate_breadcrumb_json | sed '$d' | $jq -s -c)
+    printf -v err '%s' "Error in ${BASH_SOURCE[1]}:${BASH_LINENO[0]}."
+    printf -v cmd_exit '%s' "'$cmd' exited with status $retcode"
+    printf '%s\n%s\n' "$err" "$cmd_exit"
+    local stack_depth=${#FUNCNAME[@]}
+    local traceback=""
+    local traceback_json=""
+    if [ $stack_depth -gt 2 ]; then
+      for ((i = $(($stack_depth - 1)), j = 1; i > 0; i--, j++)); do
+        local indent="$(yes a | head -$j | tr -d '\n')"
+        local src=${BASH_SOURCE[$i]}
+        local lineno=${BASH_LINENO[$i - 1]}
+        local funcname=${FUNCNAME[$i]}
+        JSON=$(
+          $jq -n -c --arg filename "$src" \
+            --arg "function" "$funcname" \
+            --arg lineno "$lineno" \
+            '{"filename": $filename, "function": $function, "lineno": $lineno|tonumber}'
+        )
+        # If we're in the stacktrace of the file we failed on, we can add a context line with the command run that failed
+        if [[ $i -eq 1 ]]; then
+          JSON=$(
+            $jq -n -c --arg cmd "$cmd" \
+              --argjson json "$JSON" \
+              '$json + {"context_line": $cmd}'
+          )
+        fi
+        printf -v traceback_json '%s\n' "$traceback_json$JSON"
+        printf -v traceback '%s\n' "$traceback${indent//a/-}> $src:$funcname:$lineno"
+      done
+    fi
+    echo "$traceback"
+
+    # Only send event when report issues flag is set and if trap signal is not INT (ctrl+c)
+    if [[ "$REPORT_SELF_HOSTED_ISSUES" == 1 && "$1" != "INT" ]]; then
+      local event_hash=$(echo -n "$cmd_exit $traceback" | docker run -i --rm busybox md5sum | cut -d' ' -f1)
+      send_event "$event_hash" "$error_msg" "$traceback_json" "$breadcrumbs"
+    fi
+
+    if [[ -n "$MINIMIZE_DOWNTIME" ]]; then
+      echo "*NOT* cleaning up, to clean your environment run \"docker compose stop\"."
+    else
+      echo "Cleaning up..."
+    fi
+  fi
+
+  if [[ -z "$MINIMIZE_DOWNTIME" ]]; then
+    $dc stop -t $STOP_TIMEOUT &>/dev/null
+  fi
+}
+
+echo "${_endgroup}"
diff --git a/install/generate-secret-key.sh b/install/generate-secret-key.sh
new file mode 100644
index 0000000..1a33c6d
--- /dev/null
+++ b/install/generate-secret-key.sh
@@ -0,0 +1,15 @@
+echo "${_group}Generating secret key ..."
+
+if grep -xq "system.secret-key: '!!changeme!!'" $SENTRY_CONFIG_YML; then
+  # This is to escape the secret key to be used in sed below
+  # Note the need to set LC_ALL=C due to BSD tr and sed always trying to decode
+  # whatever is passed to them. Kudos to https://stackoverflow.com/a/23584470/90297
+  SECRET_KEY=$(
+    export LC_ALL=C
+    head /dev/urandom | tr -dc "a-z0-9@#%^&*(-_=+)" | head -c 50 | sed -e 's/[\/&]/\\&/g'
+  )
+  sed -i -e 's/^system.secret-key:.*$/system.secret-key: '"'$SECRET_KEY'"'/' $SENTRY_CONFIG_YML
+  echo "Secret key written to $SENTRY_CONFIG_YML"
+fi
+
+echo "${_endgroup}"
diff --git a/install/geoip.sh b/install/geoip.sh
old mode 100755
new mode 100644
index c90b56d..577b6ba
--- a/install/geoip.sh
+++ b/install/geoip.sh
@@ -1,12 +1,8 @@
-#!/usr/bin/env bash
-
-if [[ ! -f 'install.sh' ]]; then echo 'Where are you?'; exit 1; fi
-
-source ./install/docker-aliases.sh
+echo "${_group}Setting up GeoIP integration ..."
 
 install_geoip() {
-  local mmdb='geoip/GeoLite2-City.mmdb'
-  local conf='geoip/GeoIP.conf'
+  local mmdb=geoip/GeoLite2-City.mmdb
+  local conf=geoip/GeoIP.conf
   local result='Done'
 
   echo "Setting up IP address geolocation ..."
@@ -34,3 +30,5 @@ install_geoip() {
 }
 
 install_geoip
+
+echo "${_endgroup}"
diff --git a/install/install-wal2json.sh b/install/install-wal2json.sh
new file mode 100644
index 0000000..9df0df7
--- /dev/null
+++ b/install/install-wal2json.sh
@@ -0,0 +1,45 @@
+echo "${_group}Downloading and installing wal2json ..."
+
+WAL2JSON_DIR=postgres/wal2json
+FILE_TO_USE="$WAL2JSON_DIR/wal2json.so"
+ARCH=$(uname -m)
+FILE_NAME="wal2json-Linux-$ARCH-glibc.so"
+
+docker_curl() {
+  # The environment variables can be specified in lower case or upper case.
+  # The lower case version has precedence. http_proxy is an exception as it is only available in lower case.
+  docker run --rm -e http_proxy -e https_proxy -e HTTPS_PROXY -e no_proxy -e NO_PROXY curlimages/curl:7.77.0 \
+    --connect-timeout 5 \
+    --max-time 10 \
+    --retry 5 \
+    --retry-max-time 60 \
+    "$@"
+}
+
+if [[ $WAL2JSON_VERSION == "latest" ]]; then
+  # Hard-code this. Super-hacky. We were curling the GitHub API here but
+  # hitting rate limits in CI. This library hasn't seen a new release for a
+  # year and a half at time of writing.
+  #
+  # If you're reading this do us a favor and go check:
+  #
+  #   https://github.com/getsentry/wal2json/releases
+  #
+  # If there's a new release can you update this please? If not maybe subscribe
+  # for notifications on the repo with "Watch > Custom > Releases". Together we
+  # can make a difference.
+  VERSION=0.0.2
+else
+  VERSION=$WAL2JSON_VERSION
+fi
+
+mkdir -p "$WAL2JSON_DIR"
+if [ ! -f "$WAL2JSON_DIR/$VERSION/$FILE_NAME" ]; then
+  mkdir -p "$WAL2JSON_DIR/$VERSION"
+  docker_curl -L \
+    "https://github.com/getsentry/wal2json/releases/download/$VERSION/$FILE_NAME" \
+    >"$WAL2JSON_DIR/$VERSION/$FILE_NAME"
+fi
+cp "$WAL2JSON_DIR/$VERSION/$FILE_NAME" "$FILE_TO_USE"
+
+echo "${_endgroup}"
diff --git a/install/parse-cli.sh b/install/parse-cli.sh
new file mode 100644
index 0000000..0390b54
--- /dev/null
+++ b/install/parse-cli.sh
@@ -0,0 +1,79 @@
+echo "${_group}Parsing command line ..."
+
+show_help() {
+  cat <<EOF
+Usage: $0 [options]
+
+Install Sentry with \`docker compose\`.
+
+Options:
+ -h, --help             Show this message and exit.
+ --minimize-downtime    EXPERIMENTAL: try to keep accepting events for as long
+                          as possible while upgrading. This will disable cleanup
+                          on error, and might leave your installation in a
+                          partially upgraded state. This option might not reload
+                          all configuration, and is only meant for in-place
+                          upgrades.
+ --skip-commit-check    Skip the check for the latest commit when on the master
+                          branch of a \`self-hosted\` Git working copy.
+ --skip-user-creation   Skip the initial user creation prompt (ideal for non-
+                          	interactive installs).
+ --skip-sse42-requirements
+			Skip checking that your environment meets the
+			  requirements to run Sentry. Only do this if you know
+			  what you are doing.
+ --report-self-hosted-issues
+                        Report error and performance data about your self-hosted
+                          instance upstream to Sentry. See sentry.io/privacy for
+                          our privacy policy.
+ --no-report-self-hosted-issues
+                        Do not report error and performance data about your
+                          self-hosted instance upstream to Sentry.
+EOF
+}
+
+depwarn() {
+  echo "WARNING The $1 is deprecated. Please use $2 instead."
+}
+
+if [ ! -z "${SKIP_USER_PROMPT:-}" ]; then
+  depwarn "SKIP_USER_PROMPT variable" "SKIP_USER_CREATION"
+  SKIP_USER_CREATION="${SKIP_USER_PROMPT}"
+fi
+
+SKIP_USER_CREATION="${SKIP_USER_CREATION:-}"
+MINIMIZE_DOWNTIME="${MINIMIZE_DOWNTIME:-}"
+SKIP_COMMIT_CHECK="${SKIP_COMMIT_CHECK:-}"
+REPORT_SELF_HOSTED_ISSUES="${REPORT_SELF_HOSTED_ISSUES:-}"
+SKIP_SSE42_REQUIREMENTS="${SKIP_SSE42_REQUIREMENTS:-}"
+
+while (($#)); do
+  case "$1" in
+  -h | --help)
+    show_help
+    exit
+    ;;
+  --no-user-prompt)
+    SKIP_USER_CREATION=1
+    depwarn "--no-user-prompt flag" "--skip-user-creation"
+    ;;
+  --skip-user-prompt)
+    SKIP_USER_CREATION=1
+    depwarn "--skip-user-prompt flag" "--skip-user-creation"
+    ;;
+  --skip-user-creation) SKIP_USER_CREATION=1 ;;
+  --minimize-downtime) MINIMIZE_DOWNTIME=1 ;;
+  --skip-commit-check) SKIP_COMMIT_CHECK=1 ;;
+  --report-self-hosted-issues) REPORT_SELF_HOSTED_ISSUES=1 ;;
+  --no-report-self-hosted-issues) REPORT_SELF_HOSTED_ISSUES=0 ;;
+  --skip-sse42-requirements) SKIP_SSE42_REQUIREMENTS=1 ;;
+  --) ;;
+  *)
+    echo "Unexpected argument: $1. Use --help for usage information."
+    exit 1
+    ;;
+  esac
+  shift
+done
+
+echo "${_endgroup}"
diff --git a/install/py2-warning.sh b/install/py2-warning.sh
deleted file mode 100755
index 2457893..0000000
--- a/install/py2-warning.sh
+++ /dev/null
@@ -1,22 +0,0 @@
-#!/usr/bin/env bash
-
-if [[ ! -f 'install.sh' ]]; then echo 'Where are you?'; exit 1; fi
-
-source ./install/docker-aliases.sh
-
-# Note the stderr>stdout redirection because Python thinks `--version` should
-# be on stderr: https://stackoverflow.com/a/31715011/90297
-if $dcr --no-deps --entrypoint python web --version 2>&1 | grep -q 'Python 2'; then
-  echo "
- _  _   ____      ____  _       _______     ____  _____  _____  ____  _____   ______   _  _
-| || | |_  _|    |_  _|/ \     |_   __ \   |_   \|_   _||_   _||_   \|_   _|.' ___  | | || |
-| || |   \ \  /\  / / / _ \      | |__) |    |   \ | |    | |    |   \ | | / .'   \_| | || |
-| || |    \ \/  \/ / / ___ \     |  __ /     | |\ \| |    | |    | |\ \| | | |   ____ | || |
-|_||_|     \  /\  /_/ /   \ \_  _| |  \ \_  _| |_\   |_  _| |_  _| |_\   |_\ \`.___]  ||_||_|
-(_)(_)      \/  \/|____| |____||____| |___||_____|\____||_____||_____|\____|\`._____.' (_)(_)
-
-"
-  echo '-----------------------------------------------------------'
-  echo 'You are using Sentry with Python 2, which is deprecated.'
-  echo 'Sentry 21.1 will be the last version with Python 2 support.'
-fi
diff --git a/install/set-up-and-migrate-database.sh b/install/set-up-and-migrate-database.sh
new file mode 100644
index 0000000..6e393bb
--- /dev/null
+++ b/install/set-up-and-migrate-database.sh
@@ -0,0 +1,15 @@
+echo "${_group}Setting up / migrating database ..."
+
+if [[ -n "${CI:-}" || "${SKIP_USER_CREATION:-0}" == 1 ]]; then
+  $dcr web upgrade --noinput
+  echo ""
+  echo "Did not prompt for user creation. Run the following command to create one"
+  echo "yourself (recommended):"
+  echo ""
+  echo "  $dc_base run --rm web createuser"
+  echo ""
+else
+  $dcr web upgrade
+fi
+
+echo "${_endgroup}"
diff --git a/install/turn-things-off.sh b/install/turn-things-off.sh
new file mode 100644
index 0000000..270dc4e
--- /dev/null
+++ b/install/turn-things-off.sh
@@ -0,0 +1,11 @@
+echo "${_group}Turning things off ..."
+
+if [[ -n "$MINIMIZE_DOWNTIME" ]]; then
+  # Stop everything but relay and nginx
+  $dc rm -fsv $($dc config --services | grep -v -E '^(nginx|relay)$')
+else
+  # Clean up old stuff and ensure nothing is working while we install/update
+  $dc down -t $STOP_TIMEOUT --rmi local --remove-orphans
+fi
+
+echo "${_endgroup}"
diff --git a/install/update-docker-images.sh b/install/update-docker-images.sh
new file mode 100644
index 0000000..a235585
--- /dev/null
+++ b/install/update-docker-images.sh
@@ -0,0 +1,14 @@
+echo "${_group}Fetching and updating Docker images ..."
+
+# We tag locally built images with a '-self-hosted-local' suffix. `docker
+# compose pull` tries to pull these too and shows a 404 error on the console
+# which is confusing and unnecessary. To overcome this, we add the
+# stderr>stdout redirection below and pass it through grep, ignoring all lines
+# having this '-onpremise-local' suffix.
+
+$dc pull -q --ignore-pull-failures 2>&1 | grep -v -- -self-hosted-local || true
+
+# We may not have the set image on the repo (local images) so allow fails
+docker pull ${SENTRY_IMAGE} || true
+
+echo "${_endgroup}"
diff --git a/install/upgrade-postgres.sh b/install/upgrade-postgres.sh
new file mode 100644
index 0000000..bae6be4
--- /dev/null
+++ b/install/upgrade-postgres.sh
@@ -0,0 +1,44 @@
+echo "${_group}Ensuring proper PostgreSQL version ..."
+
+if [[ -n "$(docker volume ls -q --filter name=sentry-postgres)" && "$(docker run --rm -v sentry-postgres:/db busybox cat /db/PG_VERSION 2>/dev/null)" == "9.6" ]]; then
+  docker volume rm sentry-postgres-new || true
+  # If this is Postgres 9.6 data, start upgrading it to 14.0 in a new volume
+  docker run --rm \
+    -v sentry-postgres:/var/lib/postgresql/9.6/data \
+    -v sentry-postgres-new:/var/lib/postgresql/14/data \
+    tianon/postgres-upgrade:9.6-to-14
+
+  # Get rid of the old volume as we'll rename the new one to that
+  docker volume rm sentry-postgres
+  docker volume create --name sentry-postgres
+  # There's no rename volume in Docker so copy the contents from old to new name
+  # Also append the `host all all all trust` line as `tianon/postgres-upgrade:9.6-to-14`
+  # doesn't do that automatically.
+  docker run --rm -v sentry-postgres-new:/from -v sentry-postgres:/to alpine ash -c \
+    "cd /from ; cp -av . /to ; echo 'host all all all trust' >> /to/pg_hba.conf"
+  # Finally, remove the new old volume as we are all in sentry-postgres now.
+  docker volume rm sentry-postgres-new
+  echo "Re-indexing due to glibc change, this may take a while..."
+  echo "Starting up new PostgreSQL version"
+  $dc up -d postgres
+
+  # Wait for postgres
+  RETRIES=5
+  until docker exec sentry-self-hosted-postgres-1 psql -U postgres -c "select 1" >/dev/null 2>&1 || [ $RETRIES -eq 0 ]; do
+    echo "Waiting for postgres server, $((RETRIES--)) remaining attempts..."
+    sleep 1
+  done
+
+  # VOLUME_NAME is the same as container name
+  # Reindex all databases and their system catalogs which are not templates
+  DBS=$(docker exec sentry-self-hosted-postgres-1 psql -qAt -U postgres -c "SELECT datname FROM pg_database WHERE datistemplate = false;")
+  for db in ${DBS}; do
+    echo "Re-indexing database: ${db}"
+    docker exec sentry-self-hosted-postgres-1 psql -qAt -U postgres -d ${db} -c "reindex system ${db}"
+    docker exec sentry-self-hosted-postgres-1 psql -qAt -U postgres -d ${db} -c "reindex database ${db};"
+  done
+
+  $dc stop postgres
+fi
+
+echo "${_endgroup}"
diff --git a/install/wrap-up.sh b/install/wrap-up.sh
new file mode 100644
index 0000000..a811f81
--- /dev/null
+++ b/install/wrap-up.sh
@@ -0,0 +1,30 @@
+if [[ "$MINIMIZE_DOWNTIME" ]]; then
+  echo "${_group}Waiting for Sentry to start ..."
+
+  # Start the whole setup, except nginx and relay.
+  $dc up -d --remove-orphans $($dc config --services | grep -v -E '^(nginx|relay)$')
+  $dc restart relay
+  $dc exec -T nginx nginx -s reload
+
+  docker run --rm --network="${COMPOSE_PROJECT_NAME}_default" alpine ash \
+    -c 'while [[ "$(wget -T 1 -q -O- http://web:9000/_health/)" != "ok" ]]; do sleep 0.5; done'
+
+  # Make sure everything is up. This should only touch relay and nginx
+  $dc up -d
+
+  echo "${_endgroup}"
+else
+  echo ""
+  echo "-----------------------------------------------------------------"
+  echo ""
+  echo "You're all done! Run the following command to get Sentry running:"
+  echo ""
+  if [[ "${_ENV}" =~ ".env.custom" ]]; then
+    echo "  $dc_base --env-file ${_ENV} up -d"
+  else
+    echo "  $dc_base up -d"
+  fi
+  echo ""
+  echo "-----------------------------------------------------------------"
+  echo ""
+fi
diff --git a/integration-test.sh b/integration-test.sh
new file mode 100755
index 0000000..10477f2
--- /dev/null
+++ b/integration-test.sh
@@ -0,0 +1,29 @@
+#!/usr/bin/env bash
+set -ex
+
+echo "Reset customizations"
+rm -f sentry/enhance-image.sh
+rm -f sentry/requirements.txt
+export REPORT_SELF_HOSTED_ISSUES=0
+
+echo "Testing initial install"
+./install.sh
+_integration-test/run.sh
+_integration-test/ensure-customizations-not-present.sh
+_integration-test/ensure-backup-restore-works.sh
+
+echo "Make customizations"
+cat <<EOT >sentry/enhance-image.sh
+#!/bin/bash
+touch /created-by-enhance-image
+apt-get update
+apt-get install -y gcc libsasl2-dev python-dev libldap2-dev libssl-dev
+EOT
+chmod +x sentry/enhance-image.sh
+printf "python-ldap" >sentry/requirements.txt
+
+echo "Testing in-place upgrade and customizations"
+./install.sh --minimize-downtime
+_integration-test/run.sh
+_integration-test/ensure-customizations-work.sh
+_integration-test/ensure-backup-restore-works.sh
diff --git a/jq/Dockerfile b/jq/Dockerfile
new file mode 100644
index 0000000..3e5541a
--- /dev/null
+++ b/jq/Dockerfile
@@ -0,0 +1,11 @@
+FROM debian:bullseye-slim
+
+LABEL MAINTAINER="oss@sentry.io"
+
+RUN set -x \
+  && apt-get update \
+  && DEBIAN_FRONTEND=noninteractive apt-get install -y --no-install-recommends jq \
+  && apt-get clean \
+  && rm -rf /var/lib/apt/lists/*
+
+ENTRYPOINT ["jq"]
diff --git a/nginx/nginx.conf b/nginx/nginx.conf
index e8d5644..b497429 100644
--- a/nginx/nginx.conf
+++ b/nginx/nginx.conf
@@ -1,5 +1,5 @@
 user nginx;
-worker_processes 1;
+worker_processes auto;
 
 error_log /var/log/nginx/error.log warn;
 pid /var/run/nginx.pid;
@@ -37,6 +37,9 @@ http {
 	proxy_http_version 1.1;
 	proxy_redirect off;
 	proxy_buffering off;
+	proxy_buffer_size          128k;
+	proxy_buffers              4 256k;
+	proxy_busy_buffers_size    256k;
 	proxy_next_upstream error timeout invalid_header http_502 http_503 non_idempotent;
 	proxy_next_upstream_tries 2;
 
@@ -44,7 +47,6 @@ http {
 	# it could be "close" to close a keepalive connection
 	proxy_set_header Connection '';
 	proxy_set_header Host $host;
-	proxy_set_header X-Real-IP $remote_addr;
 	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 	proxy_set_header X-Forwarded-Proto $scheme;
 	proxy_set_header X-Request-Id $request_id;
diff --git a/postgres/init_hba.sh b/postgres/init_hba.sh
new file mode 100755
index 0000000..9952ab1
--- /dev/null
+++ b/postgres/init_hba.sh
@@ -0,0 +1,7 @@
+#!/bin/bash
+# Initializes the pg_hba file with access permissions to the replication
+# slots.
+
+set -e
+
+{ echo "host replication all all trust"; } >>"$PGDATA/pg_hba.conf"
diff --git a/postgres/postgres-entrypoint.sh b/postgres/postgres-entrypoint.sh
new file mode 100755
index 0000000..68a469f
--- /dev/null
+++ b/postgres/postgres-entrypoint.sh
@@ -0,0 +1,46 @@
+#!/bin/bash
+# This script replaces the default docker entrypoint for postgres in the
+# development environment.
+# Its job is to ensure postgres is properly configured to support the
+# Change Data Capture pipeline (by setting access permissions and installing
+# the replication plugin we use for CDC). Unfortunately the default
+# Postgres image does not allow this level of configurability so we need
+# to do it this way in order not to have to publish and maintain our own
+# Postgres image.
+#
+# This then, at the end, transfers control to the default entrypoint.
+
+set -e
+
+prep_init_db() {
+  cp /opt/sentry/init_hba.sh /docker-entrypoint-initdb.d/init_hba.sh
+}
+
+cdc_setup_hba_conf() {
+  # Ensure pg-hba is properly configured to allow connections
+  # to the replication slots.
+
+  PG_HBA="$PGDATA/pg_hba.conf"
+  if [ ! -f "$PG_HBA" ]; then
+    echo "DB not initialized. Postgres will take care of pg_hba"
+  elif [ "$(grep -c -E "^host\s+replication" "$PGDATA"/pg_hba.conf)" != 0 ]; then
+    echo "Replication config already present in pg_hba. Not changing anything."
+  else
+    # Execute the same script we run on DB initialization
+    /opt/sentry/init_hba.sh
+  fi
+}
+
+bind_wal2json() {
+  # Copy the file in the right place
+  cp /opt/sentry/wal2json/wal2json.so $(pg_config --pkglibdir)/wal2json.so
+}
+
+echo "Setting up Change Data Capture"
+
+prep_init_db
+if [ "$1" = 'postgres' ]; then
+  cdc_setup_hba_conf
+  bind_wal2json
+fi
+exec /usr/local/bin/docker-entrypoint.sh "$@"
diff --git a/relay/config.example.yml b/relay/config.example.yml
index 0d70d0a..52e6630 100644
--- a/relay/config.example.yml
+++ b/relay/config.example.yml
@@ -8,8 +8,6 @@ processing:
   enabled: true
   kafka_config:
     - {name: "bootstrap.servers", value: "kafka:9092"}
-    - {name: "message.max.bytes", value: 50000000} #50MB or bust
+    - {name: "message.max.bytes", value: 50000000} # 50MB
   redis: redis://redis:6379
   geoip_path: "/geoip/GeoLite2-City.mmdb"
-http:
-  _client: "reqwest"
diff --git a/scripts/_lib.sh b/scripts/_lib.sh
new file mode 100755
index 0000000..67aef42
--- /dev/null
+++ b/scripts/_lib.sh
@@ -0,0 +1,94 @@
+#!/usr/bin/env bash
+
+set -eEuo pipefail
+
+if [ -n "${DEBUG:-}" ]; then
+  set -x
+fi
+
+function confirm() {
+  read -p "$1 [y/n] " confirmation
+  if [ "$confirmation" != "y" ]; then
+    echo "Canceled. "
+    exit
+  fi
+}
+
+# The purpose of this script is to make it easy to reset a local self-hosted
+# install to a clean state, optionally targeting a particular version.
+
+function clean() {
+  # If we have a version given, validate it.
+  # ----------------------------------------
+  # Note that arbitrary git refs won't work, because the *_IMAGE variables in
+  # .env will almost certainly point to :latest. Tagged releases are generally
+  # the only refs where these component versions are pinned, so enforce that
+  # we're targeting a valid tag here. Do this early in order to fail fast.
+  if [ -n "$version" ]; then
+    set +e
+    git rev-parse --verify --quiet "refs/tags/$version" >/dev/null
+    if [ $? -gt 0 ]; then
+      echo "Bad version: $version"
+      exit
+    fi
+    set -e
+  fi
+
+  # Make sure they mean it.
+  if [ "${FORCE_CLEAN:-}" == "1" ]; then
+    echo "  Seeing FORCE=1, forcing cleanup."
+    echo
+  else
+    confirm "  Warning!  This is highly destructive!  Are you sure you wish to proceed?"
+    echo "Okay ... good luck! "
+  fi
+
+  # Hit the reset button.
+  $dc down --volumes --remove-orphans --rmi local
+
+  # Remove any remaining (likely external) volumes with name matching 'sentry-.*'.
+  for volume in $(docker volume list --format '{{ .Name }}' | grep '^sentry-'); do
+    docker volume remove $volume >/dev/null &&
+      echo "Removed volume: $volume" ||
+      echo "Skipped volume: $volume"
+  done
+
+  # If we have a version given, switch to it.
+  if [ -n "$version" ]; then
+    git checkout "$version"
+  fi
+}
+
+function backup() {
+  touch $(pwd)/sentry/backup.json
+  chmod 666 $(pwd)/sentry/backup.json
+  docker-compose run -v $(pwd)/sentry:/sentry-data/backup --rm -T -e SENTRY_LOG_LEVEL=CRITICAL web export /sentry-data/backup/backup.json
+}
+
+function restore() {
+  docker-compose run --rm -T web import /etc/sentry/backup.json
+}
+
+# Needed variables to source error-handling script
+MINIMIZE_DOWNTIME="${MINIMIZE_DOWNTIME:-}"
+STOP_TIMEOUT=60
+
+# Save logs in order to send envelope to Sentry
+log_file=sentry_"$cmd"_log-$(date +'%Y-%m-%d_%H-%M-%S').txt
+exec &> >(tee -a "$log_file")
+version=""
+
+while (($#)); do
+  case "$1" in
+  --report-self-hosted-issues) REPORT_SELF_HOSTED_ISSUES=1 ;;
+  --no-report-self-hosted-issues) REPORT_SELF_HOSTED_ISSUES=0 ;;
+  *) version=$1 ;;
+  esac
+  shift
+done
+
+# Source files needed to set up error-handling
+source install/dc-detect-version.sh
+source install/detect-platform.sh
+source install/error-handling.sh
+trap_with_arg cleanup ERR INT TERM EXIT
diff --git a/scripts/backup.sh b/scripts/backup.sh
new file mode 100755
index 0000000..b2b5a62
--- /dev/null
+++ b/scripts/backup.sh
@@ -0,0 +1,4 @@
+#!/usr/bin/env bash
+cmd=backup
+source scripts/_lib.sh
+$cmd
diff --git a/scripts/bump-version.sh b/scripts/bump-version.sh
index 4c8bb5a..b6a1000 100755
--- a/scripts/bump-version.sh
+++ b/scripts/bump-version.sh
@@ -1,18 +1,18 @@
 #!/bin/bash
 set -eu
 
-SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
-cd $SCRIPT_DIR/..
-
 OLD_VERSION="$1"
 NEW_VERSION="$2"
 
 SYMBOLICATOR_VERSION=${SYMBOLICATOR_VERSION:-$(curl -s "https://api.github.com/repos/getsentry/symbolicator/releases/latest" | grep -Po '"tag_name": "\K.*?(?=")')}
+WAL2JSON_VERSION=${WAL2JSON_VERSION:-$(curl -s "https://api.github.com/repos/getsentry/wal2json/releases/latest" | grep -Po '"tag_name": "\K.*?(?=")')}
 
 sed -i -e "s/^SYMBOLICATOR_IMAGE=\([^:]\+\):.\+\$/SYMBOLICATOR_IMAGE=\1:$SYMBOLICATOR_VERSION/" .env
+sed -i -e "s/^WAL2JSON_VERSION=\([^:]\+\):.\+\$/WAL2JSON_VERSION=\1:$WAL2JSON_VERSION/" .env
 sed -i -e "s/^\(SENTRY\|SNUBA\|RELAY\)_IMAGE=\([^:]\+\):.\+\$/\1_IMAGE=\2:$NEW_VERSION/" .env
 sed -i -e "s/^\# Self-Hosted Sentry .*/# Self-Hosted Sentry $NEW_VERSION/" README.md
 sed -i -e "s/\(Change Date:\s*\)[-0-9]\+\$/\\1$(date +'%Y-%m-%d' -d '3 years')/" LICENSE
 
 echo "New version: $NEW_VERSION"
 echo "New Symbolicator version: $SYMBOLICATOR_VERSION"
+echo "New wal2json version: $WAL2JSON_VERSION"
diff --git a/scripts/post-release.sh b/scripts/post-release.sh
index ff8e706..225de19 100755
--- a/scripts/post-release.sh
+++ b/scripts/post-release.sh
@@ -1,10 +1,7 @@
 #!/bin/bash
 set -eu
 
-SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
-cd $SCRIPT_DIR/..
-
 # Bring master back to nightlies after merge from release branch
-
+git checkout master && git pull --rebase
 SYMBOLICATOR_VERSION=nightly ./scripts/bump-version.sh '' 'nightly'
-git diff --quiet || git commit -anm 'build: Set master version to nightly' && git push
+git diff --quiet || git commit -anm $'build: Set master version to nightly\n\n#skip-changelog' && git pull --rebase && git push
diff --git a/scripts/reset.sh b/scripts/reset.sh
new file mode 100755
index 0000000..f519435
--- /dev/null
+++ b/scripts/reset.sh
@@ -0,0 +1,4 @@
+#!/usr/bin/env bash
+cmd=reset
+source scripts/_lib.sh
+$cmd
diff --git a/scripts/restore.sh b/scripts/restore.sh
new file mode 100755
index 0000000..e8c9ebb
--- /dev/null
+++ b/scripts/restore.sh
@@ -0,0 +1,4 @@
+#!/usr/bin/env bash
+cmd=restore
+source scripts/_lib.sh
+$cmd
diff --git a/sentry/.dockerignore b/sentry/.dockerignore
deleted file mode 100644
index 693a7e0..0000000
--- a/sentry/.dockerignore
+++ /dev/null
@@ -1,5 +0,0 @@
-# Ignore everything
-*
-
-# Only allow requirements.txt
-!/requirements.txt
diff --git a/sentry/Dockerfile b/sentry/Dockerfile
index 812056e..5afe9c2 100644
--- a/sentry/Dockerfile
+++ b/sentry/Dockerfile
@@ -1,8 +1,13 @@
 ARG SENTRY_IMAGE
-ARG SENTRY_PYTHON2
-FROM ${SENTRY_IMAGE}${SENTRY_PYTHON2:+-py2}
+FROM ${SENTRY_IMAGE}
 
 COPY . /usr/src/sentry
 
-# Hook for installing additional plugins
-RUN if [ -s /usr/src/sentry/requirements.txt ]; then pip install -r /usr/src/sentry/requirements.txt; fi
+RUN if [ -s /usr/src/sentry/enhance-image.sh ]; then \
+    /usr/src/sentry/enhance-image.sh; \
+fi
+
+RUN if [ -s /usr/src/sentry/requirements.txt ]; then \
+    echo "sentry/requirements.txt is deprecated, use sentry/enhance-image.sh - see https://github.com/getsentry/self-hosted#enhance-sentry-image"; \
+    pip install -r /usr/src/sentry/requirements.txt; \
+fi
diff --git a/sentry/config.example.yml b/sentry/config.example.yml
index f42be82..fd81a21 100644
--- a/sentry/config.example.yml
+++ b/sentry/config.example.yml
@@ -13,8 +13,21 @@ mail.host: 'smtp'
 # mail.username: ''
 # mail.password: ''
 # mail.use-tls: false
+# mail.use-ssl: false
+
+# NOTE: The following 2 configs (mail.from and mail.list-namespace) are set
+#       through SENTRY_MAIL_HOST in sentry.conf.py so remove those first if
+#       you want your values in this file to be effective!
+
+
 # The email address to send on behalf of
-# mail.from: 'root@localhost'
+# mail.from: 'root@localhost' or ...
+# mail.from: 'System Administrator <root@localhost>'
+
+# The mailing list namespace for emails sent by this Sentry server.
+# This should be a domain you own (often the same domain as the domain
+# part of the `mail.from` configuration parameter value) or `localhost`.
+# mail.list-namespace: 'localhost'
 
 # If you'd like to configure email replies, enable this.
 # mail.enable-replies: true
@@ -76,7 +89,9 @@ transaction-events.force-disable-internal-project: true
 # GitHub Integration #
 ######################
 
-# github-app.extended-permissions: ['repo']
+# Refer to https://develop.sentry.dev/integrations/github/ for setup instructions.
+
+# github-login.extended-permissions: ['repo']
 # github-app.id: GITHUB_APP_ID
 # github-app.name: 'GITHUB_APP_NAME'
 # github-app.webhook-secret: 'GITHUB_WEBHOOK_SECRET' # Use only if configured in GitHub
@@ -100,7 +115,5 @@ transaction-events.force-disable-internal-project: true
 # slack.client-id: <'client id'>
 # slack.client-secret: <client secret>
 # slack.signing-secret: <signing secret>
-## If you made your slack bot before july 2020 set legacy-app to True
-slack.legacy-app: False
 ## If legacy-app is True use verfication-token instead of signing-secret
 # slack.verification-token: <verification token>
diff --git a/sentry/enhance-image.example.sh b/sentry/enhance-image.example.sh
new file mode 100755
index 0000000..e5b3182
--- /dev/null
+++ b/sentry/enhance-image.example.sh
@@ -0,0 +1,7 @@
+#!/bin/bash
+
+# Enhance the base $SENTRY_IMAGE with additional dependencies, plugins - see https://github.com/getsentry/self-hosted#enhance-sentry-image
+# For example:
+# apt-get update
+# apt-get install -y gcc libsasl2-dev python-dev libldap2-dev libssl-dev
+# pip install python-ldap
diff --git a/sentry/entrypoint.sh b/sentry/entrypoint.sh
new file mode 100755
index 0000000..552de05
--- /dev/null
+++ b/sentry/entrypoint.sh
@@ -0,0 +1,12 @@
+#!/bin/bash
+set -e
+
+if [ "$(ls -A /usr/local/share/ca-certificates/)" ]; then
+  update-ca-certificates
+fi
+
+if [ -e /etc/sentry/requirements.txt ]; then
+  echo "sentry/requirements.txt is deprecated, use sentry/enhance-image.sh - see https://github.com/getsentry/self-hosted#enhance-sentry-image"
+fi
+
+source /docker-entrypoint.sh
diff --git a/sentry/requirements.example.txt b/sentry/requirements.example.txt
index b4659b6..e7b63dc 100644
--- a/sentry/requirements.example.txt
+++ b/sentry/requirements.example.txt
@@ -1 +1 @@
-# Add plugins here
+# sentry/requirements.txt is deprecated, use sentry/enhance-image.sh - see https://github.com/getsentry/self-hosted#enhance-sentry-image
diff --git a/sentry/sentry.conf.example.py b/sentry/sentry.conf.example.py
index 2d89b56..9113c2e 100644
--- a/sentry/sentry.conf.example.py
+++ b/sentry/sentry.conf.example.py
@@ -3,8 +3,15 @@
 
 from sentry.conf.server import *  # NOQA
 
+BYTE_MULTIPLIER = 1024
+UNITS = ("K", "M", "G")
+def unit_text_to_bytes(text):
+    unit = text[-1].upper()
+    power = UNITS.index(unit) + 1
+    return float(text[:-1])*(BYTE_MULTIPLIER**power)
 
-# Generously adapted from pynetlinux: https://git.io/JJmga
+
+# Generously adapted from pynetlinux: https://github.com/rlisagor/pynetlinux/blob/e3f16978855c6649685f0c43d4c3fcf768427ae5/pynetlinux/ifconfig.py#L197-L223
 def get_internal_network():
     import ctypes
     import fcntl
@@ -107,6 +114,9 @@ CACHES = {
         "BACKEND": "django.core.cache.backends.memcached.MemcachedCache",
         "LOCATION": ["memcached:11211"],
         "TIMEOUT": 3600,
+        "OPTIONS": {
+            "server_max_value_length": unit_text_to_bytes(env("SENTRY_MAX_EXTERNAL_SOURCEMAP_SIZE", "1M")),
+        },
     }
 }
 
@@ -187,7 +197,7 @@ SENTRY_WEB_PORT = 9000
 SENTRY_WEB_OPTIONS = {
     "http": "%s:%s" % (SENTRY_WEB_HOST, SENTRY_WEB_PORT),
     "protocol": "uwsgi",
-    # This is needed in order to prevent https://git.io/fj7Lw
+    # This is needed in order to prevent https://github.com/getsentry/sentry/blob/c6f9660e37fcd9c1bbda8ff4af1dcfd0442f5155/src/sentry/services/http.py#L70
     "uwsgi-socket": None,
     "so-keepalive": True,
     # Keep this between 15s-75s as that's what Relay supports
@@ -222,12 +232,20 @@ SENTRY_WEB_OPTIONS = {
 # header and enable the settings below
 
 # SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')
+# USE_X_FORWARDED_HOST = True
 # SESSION_COOKIE_SECURE = True
 # CSRF_COOKIE_SECURE = True
 # SOCIAL_AUTH_REDIRECT_IS_HTTPS = True
 
 # End of SSL/TLS settings
 
+########
+# Mail #
+########
+
+SENTRY_OPTIONS["mail.list-namespace"] = env('SENTRY_MAIL_HOST', 'localhost')
+SENTRY_OPTIONS["mail.from"] = f"sentry@{SENTRY_OPTIONS['mail.list-namespace']}"
+
 ############
 # Features #
 ############
@@ -250,6 +268,7 @@ SENTRY_FEATURES.update(
             "organizations:sso-saml2",
             "organizations:performance-view",
             "organizations:advanced-search",
+            "organizations:session-replay",
             "projects:custom-inbound-filters",
             "projects:data-forwarding",
             "projects:discard-groups",
diff --git a/test.sh b/test.sh
index 91cfc80..c7831de 100755
--- a/test.sh
+++ b/test.sh
@@ -1,107 +1,6 @@
 #!/usr/bin/env bash
 set -e
 
-export SENTRY_TEST_HOST="${SENTRY_TEST_HOST:-http://localhost:9000}"
-TEST_USER='test@example.com'
-TEST_PASS='test123TEST'
-COOKIE_FILE=$(mktemp)
+# This file runs in https://github.com/getsentry/sentry/blob/fe4795f5eae9e0d7c33e0ecb736c9d1369535eca/docker/cloudbuild.yaml#L59
 
-# Courtesy of https://stackoverflow.com/a/2183063/90297
-trap_with_arg() {
-  func="$1" ; shift
-  for sig ; do
-    trap "$func $sig "'$LINENO' "$sig"
-  done
-}
-
-DID_CLEAN_UP=0
-# the cleanup function will be the exit point
-cleanup () {
-  if [ "$DID_CLEAN_UP" -eq 1 ]; then
-    return 0;
-  fi
-  DID_CLEAN_UP=1
-
-  if [ "$1" != "EXIT" ]; then
-    echo "An error occurred, caught SIG$1 on line $2";
-  fi
-
-  echo "Cleaning up..."
-  rm $COOKIE_FILE
-  echo "Done."
-}
-trap_with_arg cleanup ERR INT TERM EXIT
-
-# Disable beacon for e2e tests
-echo 'SENTRY_BEACON=False' >> sentry/sentry.conf.py
-docker-compose run --rm web createuser --superuser --email $TEST_USER --password $TEST_PASS || true
-docker-compose up -d
-printf "Waiting for Sentry to be up"; timeout 60 bash -c 'until $(curl -Isf -o /dev/null $SENTRY_TEST_HOST); do printf '.'; sleep 0.5; done'
-
-get_csrf_token () { awk '$6 == "sc" { print $7 }' $COOKIE_FILE; }
-sentry_api_request () { curl -s -H 'Accept: application/json; charset=utf-8' -H "Referer: $SENTRY_TEST_HOST" -H 'Content-Type: application/json' -H "X-CSRFToken: $(get_csrf_token)" -b "$COOKIE_FILE" -c "$COOKIE_FILE" "$SENTRY_TEST_HOST/api/0/$1" ${@:2}; }
-
-login () {
-  INITIAL_AUTH_REDIRECT=$(curl -sL -o /dev/null $SENTRY_TEST_HOST -w %{url_effective})
-  if [ "$INITIAL_AUTH_REDIRECT" != "$SENTRY_TEST_HOST/auth/login/sentry/" ]; then
-    echo "Initial /auth/login/ redirect failed, exiting..."
-    echo "$INITIAL_AUTH_REDIRECT"
-    exit -1
-  fi
-
-  CSRF_TOKEN_FOR_LOGIN=$(curl $SENTRY_TEST_HOST -sL -c "$COOKIE_FILE" | awk -F "'" '
-    /csrfmiddlewaretoken/ {
-    print $4 "=" $6;
-    exit;
-  }')
-
-  curl -sL --data-urlencode 'op=login' --data-urlencode "username=$TEST_USER" --data-urlencode "password=$TEST_PASS" --data-urlencode "$CSRF_TOKEN_FOR_LOGIN" "$SENTRY_TEST_HOST/auth/login/sentry/" -H "Referer: $SENTRY_TEST_HOST/auth/login/sentry/" -b "$COOKIE_FILE" -c "$COOKIE_FILE";
-}
-
-LOGIN_RESPONSE=$(login);
-declare -a LOGIN_TEST_STRINGS=(
-  '"isAuthenticated":true'
-  '"username":"test@example.com"'
-  '"isSuperuser":true'
-)
-for i in "${LOGIN_TEST_STRINGS[@]}"
-do
-  echo "Testing '$i'..."
-  echo "$LOGIN_RESPONSE" | grep "$i[,}]" >& /dev/null
-  echo "Pass."
-done
-
-# Set up initial/required settings (InstallWizard request)
-sentry_api_request "internal/options/?query=is:required" -X PUT --data '{"mail.use-tls":false,"mail.username":"","mail.port":25,"system.admin-email":"ben@byk.im","mail.password":"","mail.from":"root@localhost","system.url-prefix":"'"$SENTRY_TEST_HOST"'","auth.allow-registration":false,"beacon.anonymous":true}' > /dev/null
-
-SENTRY_DSN=$(sentry_api_request "projects/sentry/internal/keys/" | awk 'BEGIN { RS=",|:{\n"; FS="\""; } $2 == "public" && $4 ~ "^http" { print $4; exit; }')
-# We ignore the protocol and the host as we already know those
-DSN_PIECES=(`echo $SENTRY_DSN | sed -ne 's|^https\?://\([0-9a-z]\+\)@[^/]\+/\([0-9]\+\)$|\1\n\2|p'`)
-SENTRY_KEY=${DSN_PIECES[0]}
-PROJECT_ID=${DSN_PIECES[1]}
-
-TEST_EVENT_ID=$(export LC_ALL=C; head /dev/urandom | tr -dc "a-f0-9" | head -c 32)
-# Thanks @untitaker - https://forum.sentry.io/t/how-can-i-post-with-curl-a-sentry-event-which-authentication-credentials/4759/2?u=byk
-echo "Creating test event..."
-curl -sf --data '{"event_id": "'"$TEST_EVENT_ID"'","level":"error","message":"a failure","extra":{"object":"42"}}' -H 'Content-Type: application/json' -H "X-Sentry-Auth: Sentry sentry_version=7, sentry_key=$SENTRY_KEY, sentry_client=test-bash/0.1" "$SENTRY_TEST_HOST/api/$PROJECT_ID/store/" -o /dev/null
-
-EVENT_PATH="projects/sentry/internal/events/$TEST_EVENT_ID/"
-export -f sentry_api_request get_csrf_token
-export SENTRY_TEST_HOST COOKIE_FILE EVENT_PATH
-printf "Getting the test event back"
-timeout 30 bash -c 'until $(sentry_api_request "$EVENT_PATH" -Isf -X GET -o /dev/null); do printf '.'; sleep 0.5; done'
-echo "";
-
-EVENT_RESPONSE=$(sentry_api_request "$EVENT_PATH")
-declare -a EVENT_TEST_STRINGS=(
-  '"eventID":"'"$TEST_EVENT_ID"'"'
-  '"message":"a failure"'
-  '"title":"a failure"'
-  '"object":"42"'
-)
-for i in "${EVENT_TEST_STRINGS[@]}"
-do
-  echo "Testing '$i'..."
-  echo "$EVENT_RESPONSE" | grep "$i[,}]" >& /dev/null
-  echo "Pass."
-done
+_integration-test/run.sh
diff --git a/unit-test.sh b/unit-test.sh
new file mode 100755
index 0000000..333159a
--- /dev/null
+++ b/unit-test.sh
@@ -0,0 +1,14 @@
+#!/usr/bin/env bash
+
+FORCE_CLEAN=1 "./scripts/reset.sh"
+fail=0
+for test_file in _unit-test/*-test.sh; do
+  echo " Running $test_file ..."
+  $test_file
+  if [ $? != 0 ]; then
+    echo fail 
+    fail=1
+  fi
+done
+
+exit $fail
diff --git a/zookeeper/snapshot.0 b/zookeeper/snapshot.0
deleted file mode 100644
index 3e6deee..0000000
Binary files a/zookeeper/snapshot.0 and /dev/null differ

2023-04-20 13:51:43,436 p=538321 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:51:43,464 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 13:51:43,758 p=538321 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 13:51:43,784 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 13:59:21,622 p=538321 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 13:59:21,646 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 13:59:21,672 p=538321 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:59:21,697 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 13:59:21,896 p=538321 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 13:59:21,921 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 13:59:21,943 p=538321 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 13:59:21,968 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 14:01:21,325 p=538321 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:01:21,352 p=538321 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 14:02:36,719 p=538321 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'email': 'admin@example.com', 'password': 's4FquyhvM37afzMBR/hEjzsJZSC2RBwc'})
2023-04-20 14:02:36,842 p=538321 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 14:02:36,842 p=538321 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=9    changed=4    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-20 14:07:34,208 p=567838 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 14:07:34,239 p=567838 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:07:35,961 p=567838 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:07:35,986 p=567838 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 14:07:37,609 p=567838 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:07:37,683 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 14:07:38,004 p=567838 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 14:07:38,032 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 14:07:39,406 p=567838 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:07:39,431 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 14:07:39,740 p=567838 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 14:07:39,768 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 14:07:39,786 p=567838 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:07:39,813 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 14:07:39,838 p=567838 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:07:39,863 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 14:07:40,084 p=567838 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:07:40,131 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 14:07:40,154 p=567838 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:07:40,180 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 14:08:36,104 p=567838 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:08:36,147 p=567838 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 14:10:01,590 p=567838 u=ubuntu n=ansible | failed: [gat-20.eu.galaxy.training] (item={'email': 'admin@example.com', 'password': 's4FquyhvM37afzMBR/hEjzsJZSC2RBwc'}) => changed=true 
  ansible_loop_var: item
  cmd:
  - docker-compose
  - run
  - --rm
  - web
  - createuser
  - --email
  - admin@example.com
  - --password
  - s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  - --superuser
  - --no-input
  delta: '0:01:25.091161'
  end: '2023-04-20 14:10:01.542560'
  item:
    email: admin@example.com
    password: s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  msg: non-zero return code
  rc: 1
  start: '2023-04-20 14:08:36.451399'
  stderr: |-
    Container sentry-self-hosted_memcached_1  Recreate
    Container sentry-self-hosted_zookeeper_1  Recreate
    Container sentry-self-hosted_clickhouse_1  Recreate
    Container sentry-self-hosted_symbolicator_1  Recreate
    Container sentry-self-hosted_redis_1  Recreate
    Container sentry-self-hosted_smtp_1  Recreate
    Container sentry-self-hosted_postgres_1  Recreate
    Container sentry-self-hosted_smtp_1  Recreated
    Container sentry-self-hosted_redis_1  Recreated
    Container sentry-self-hosted_zookeeper_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreate
    Container sentry-self-hosted_postgres_1  Recreated
    Container sentry-self-hosted_clickhouse_1  Recreated
    Container sentry-self-hosted_memcached_1  Recreated
    Container sentry-self-hosted_symbolicator_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreated
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-consumer_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreate
    Container sentry-self-hosted_snuba-api_1  Recreate
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreate
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreate
    Container sentry-self-hosted_snuba-replacer_1  Recreate
    Container sentry-self-hosted_snuba-replacer_1  Recreated
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-consumer_1  Recreated
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreated
    Container sentry-self-hosted_snuba-api_1  Recreated
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreated
    Container sentry-self-hosted-symbolicator-1  Starting
    Container sentry-self-hosted-memcached-1  Starting
    Container sentry-self-hosted-zookeeper-1  Starting
    Container sentry-self-hosted-clickhouse-1  Starting
    Container sentry-self-hosted-postgres-1  Starting
    Container sentry-self-hosted-smtp-1  Starting
    Container sentry-self-hosted-redis-1  Starting
    Container sentry-self-hosted-symbolicator-1  Started
    Container sentry-self-hosted-memcached-1  Started
    Container sentry-self-hosted-postgres-1  Started
    Container sentry-self-hosted-redis-1  Started
    Container sentry-self-hosted-zookeeper-1  Started
    Container sentry-self-hosted-zookeeper-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Started
    Container sentry-self-hosted-smtp-1  Started
    Container sentry-self-hosted-zookeeper-1  Healthy
    Container sentry-self-hosted-kafka-1  Starting
    Container sentry-self-hosted-kafka-1  Started
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-replacer-1  Starting
    Container sentry-self-hosted-snuba-api-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-consumer-1  Starting
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-transactions-consumer-1  Starting
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Starting
    Container sentry-self-hosted-snuba-sessions-consumer-1  Starting
    Container sentry-self-hosted-snuba-api-1  Started
    Container sentry-self-hosted-snuba-replacer-1  Started
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Started
    Container sentry-self-hosted-snuba-consumer-1  Started
    Container sentry-self-hosted-snuba-transactions-consumer-1  Started
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Started
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Started
    Container sentry-self-hosted-snuba-sessions-consumer-1  Started
    Error: User: admin@example.com exists, use --force-update to force.
  stderr_lines: <omitted>
  stdout: |-
    Updating certificates in /etc/ssl/certs...
    0 added, 0 removed; done.
    Running hooks in /etc/ca-certificates/update.d...
    done.
    14:10:00 [INFO] sentry.plugins.github: apps-not-configured
  stdout_lines: <omitted>
2023-04-20 14:10:01,592 p=567838 u=ubuntu n=ansible | ...ignoring
2023-04-20 14:10:01,720 p=567838 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 14:10:01,720 p=567838 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 14:10:23,598 p=575225 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 14:10:23,635 p=575225 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:10:25,273 p=575225 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:10:25,300 p=575225 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 14:10:26,639 p=575225 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:10:26,714 p=575225 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 14:10:27,027 p=575225 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 14:10:27,054 p=575225 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 14:10:28,219 p=575225 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:10:28,245 p=575225 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 14:10:28,554 p=575225 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 14:10:28,582 p=575225 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 14:10:28,596 p=575225 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:10:28,621 p=575225 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 14:10:28,643 p=575225 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:10:28,668 p=575225 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 14:10:28,847 p=575225 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:10:28,872 p=575225 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 14:10:28,894 p=575225 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:10:28,921 p=575225 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 14:11:01,747 p=575225 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 14:14:34,630 p=578801 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 14:14:34,663 p=578801 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:14:36,192 p=578801 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:14:36,216 p=578801 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 14:14:37,469 p=578801 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:14:37,540 p=578801 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 14:14:37,828 p=578801 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 14:14:37,856 p=578801 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 14:14:38,896 p=578801 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:14:38,921 p=578801 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 14:14:39,193 p=578801 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 14:14:39,220 p=578801 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 14:14:39,238 p=578801 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:14:39,262 p=578801 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 14:14:39,283 p=578801 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:14:39,308 p=578801 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 14:14:39,493 p=578801 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:14:39,518 p=578801 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 14:14:39,566 p=578801 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:14:39,590 p=578801 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 14:14:56,474 p=578801 u=ubuntu n=ansible |  [ERROR]: User interrupted execution

2023-04-20 14:15:04,452 p=580178 u=ubuntu n=ansible | PLAY [sentryservers] *************************************************************************************************
2023-04-20 14:15:04,478 p=580178 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:15:05,968 p=580178 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:15:05,995 p=580178 u=ubuntu n=ansible | TASK [pip] ***********************************************************************************************************
2023-04-20 14:15:07,240 p=580178 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:15:07,307 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Prepare folder for sentry docker-compose project] **********************************
2023-04-20 14:15:07,589 p=580178 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/sentry)
2023-04-20 14:15:07,618 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Checkout sentry self hosted docker-compose project] ********************************
2023-04-20 14:15:08,724 p=580178 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:15:08,747 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Adjust .env] ***********************************************************************
2023-04-20 14:15:09,090 p=580178 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'key': 'SENTRY_BIND', 'value': 9000})
2023-04-20 14:15:09,116 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Run install.sh] ********************************************************************
2023-04-20 14:15:09,129 p=580178 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:15:09,152 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry email settings] ***************************************************
2023-04-20 14:15:09,175 p=580178 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:15:09,199 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry url prefix] *******************************************************
2023-04-20 14:15:09,388 p=580178 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:15:09,417 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Configure sentry misc settings] ****************************************************
2023-04-20 14:15:09,442 p=580178 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:15:09,467 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Start sentry self hosted docker-compose project] ***********************************
2023-04-20 14:15:14,013 p=580178 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:15:14,045 p=580178 u=ubuntu n=ansible | TASK [mvdbeek.sentry_selfhosted : Add sentry super users] ************************************************************
2023-04-20 14:16:37,799 p=580178 u=ubuntu n=ansible | failed: [gat-20.eu.galaxy.training] (item={'email': 'admin@example.com', 'password': 's4FquyhvM37afzMBR/hEjzsJZSC2RBwc'}) => changed=true 
  ansible_loop_var: item
  cmd:
  - docker-compose
  - run
  - --rm
  - web
  - createuser
  - --email
  - admin@example.com
  - --password
  - s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  - --superuser
  - --no-input
  delta: '0:01:23.393042'
  end: '2023-04-20 14:16:37.753128'
  item:
    email: admin@example.com
    password: s4FquyhvM37afzMBR/hEjzsJZSC2RBwc
  msg: non-zero return code
  rc: 1
  start: '2023-04-20 14:15:14.360086'
  stderr: |-
    Container sentry-self-hosted_postgres_1  Recreate
    Container sentry-self-hosted_memcached_1  Recreate
    Container sentry-self-hosted_clickhouse_1  Recreate
    Container sentry-self-hosted_symbolicator_1  Recreate
    Container sentry-self-hosted_smtp_1  Recreate
    Container sentry-self-hosted_zookeeper_1  Recreate
    Container sentry-self-hosted_redis_1  Recreate
    Container sentry-self-hosted_redis_1  Recreated
    Container sentry-self-hosted_smtp_1  Recreated
    Container sentry-self-hosted_postgres_1  Recreated
    Container sentry-self-hosted_memcached_1  Recreated
    Container sentry-self-hosted_zookeeper_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreate
    Container sentry-self-hosted_clickhouse_1  Recreated
    Container sentry-self-hosted_symbolicator_1  Recreated
    Container sentry-self-hosted_kafka_1  Recreated
    Container sentry-self-hosted_snuba-consumer_1  Recreate
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-api_1  Recreate
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreate
    Container sentry-self-hosted_snuba-replacer_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreate
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreate
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreate
    Container sentry-self-hosted_snuba-transactions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-consumer_1  Recreated
    Container sentry-self-hosted_snuba-replacer_1  Recreated
    Container sentry-self-hosted_snuba-outcomes-consumer_1  Recreated
    Container sentry-self-hosted_snuba-api_1  Recreated
    Container sentry-self-hosted_snuba-sessions-consumer_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-transactions_1  Recreated
    Container sentry-self-hosted_snuba-subscription-consumer-events_1  Recreated
    Container sentry-self-hosted-memcached-1  Starting
    Container sentry-self-hosted-postgres-1  Starting
    Container sentry-self-hosted-clickhouse-1  Starting
    Container sentry-self-hosted-smtp-1  Starting
    Container sentry-self-hosted-zookeeper-1  Starting
    Container sentry-self-hosted-redis-1  Starting
    Container sentry-self-hosted-symbolicator-1  Starting
    Container sentry-self-hosted-postgres-1  Started
    Container sentry-self-hosted-redis-1  Started
    Container sentry-self-hosted-zookeeper-1  Started
    Container sentry-self-hosted-zookeeper-1  Waiting
    Container sentry-self-hosted-smtp-1  Started
    Container sentry-self-hosted-symbolicator-1  Started
    Container sentry-self-hosted-clickhouse-1  Started
    Container sentry-self-hosted-memcached-1  Started
    Container sentry-self-hosted-zookeeper-1  Healthy
    Container sentry-self-hosted-kafka-1  Starting
    Container sentry-self-hosted-kafka-1  Started
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-redis-1  Waiting
    Container sentry-self-hosted-kafka-1  Waiting
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-redis-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-clickhouse-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Starting
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-replacer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-consumer-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Starting
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-kafka-1  Healthy
    Container sentry-self-hosted-snuba-transactions-consumer-1  Starting
    Container sentry-self-hosted-snuba-sessions-consumer-1  Starting
    Container sentry-self-hosted-snuba-api-1  Starting
    Container sentry-self-hosted-snuba-outcomes-consumer-1  Started
    Container sentry-self-hosted-snuba-subscription-consumer-events-1  Started
    Container sentry-self-hosted-snuba-subscription-consumer-transactions-1  Started
    Container sentry-self-hosted-snuba-api-1  Started
    Container sentry-self-hosted-snuba-replacer-1  Started
    Container sentry-self-hosted-snuba-sessions-consumer-1  Started
    Container sentry-self-hosted-snuba-consumer-1  Started
    Container sentry-self-hosted-snuba-transactions-consumer-1  Started
    Error: User: admin@example.com exists, use --force-update to force.
  stderr_lines: <omitted>
  stdout: |-
    Updating certificates in /etc/ssl/certs...
    0 added, 0 removed; done.
    Running hooks in /etc/ca-certificates/update.d...
    done.
    14:16:36 [INFO] sentry.plugins.github: apps-not-configured
  stdout_lines: <omitted>
2023-04-20 14:16:37,808 p=580178 u=ubuntu n=ansible | ...ignoring
2023-04-20 14:16:37,922 p=580178 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 14:16:37,922 p=580178 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=8    changed=2    unreachable=0    failed=0    skipped=3    rescued=0    ignored=1   
2023-04-20 14:16:58,723 p=585520 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 14:16:58,936 p=585520 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 14:16:58,954 p=585520 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:17:00,430 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:00,443 p=585520 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 14:17:01,467 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:01,501 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:17:01,540 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:01,555 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 14:17:01,582 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:01,596 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 14:17:01,619 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:01,632 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 14:17:01,655 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:01,667 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 14:17:02,472 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:02,485 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 14:17:02,798 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:02,818 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 14:17:02,861 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:02,874 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 14:17:03,701 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:03,714 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 14:17:03,739 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:03,754 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 14:17:03,786 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:03,798 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 14:17:03,824 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:03,837 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 14:17:03,863 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:03,877 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:17:03,891 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:03,904 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 14:17:04,205 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:04,218 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 14:17:04,507 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:04,520 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 14:17:04,540 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:04,554 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 14:17:04,741 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:04,755 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 14:17:05,341 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:05,354 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 14:17:05,736 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:05,749 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:17:05,786 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:05,803 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 14:17:06,013 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 14:17:06,180 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 14:17:06,194 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 14:17:06,382 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:06,395 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 14:17:06,753 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 14:17:06,769 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 14:17:07,101 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 14:17:07,116 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 14:17:07,474 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:07,487 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 14:17:07,865 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:07,877 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 14:17:08,043 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:08,059 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 14:17:08,598 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:08,621 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 14:17:08,653 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 14:17:08,659 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-20 14:17:08,662 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:08,675 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 14:17:08,715 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-20 14:17:08,724 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-20 14:17:08,734 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-20 14:17:08,743 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-20 14:17:08,745 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:08,758 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 14:17:08,795 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 14:17:08,797 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:08,810 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 14:17:09,178 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:17:09,417 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:17:09,438 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 14:17:09,455 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:09,469 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 14:17:09,494 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:09,507 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 14:17:09,520 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:09,533 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 14:17:09,960 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:17:09,978 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 14:17:10,442 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:17:10,704 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:17:10,981 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:17:11,260 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:17:11,370 p=585520 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 14:17:11,443 p=585520 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:17:12,767 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:12,792 p=585520 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 14:17:13,605 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:13,635 p=585520 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 14:17:13,651 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:13,679 p=585520 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 14:17:14,508 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:14,537 p=585520 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 14:17:15,288 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:15,364 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 14:17:15,983 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,012 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 14:17:16,034 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,060 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 14:17:16,330 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,357 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 14:17:16,559 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,586 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 14:17:16,649 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,678 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 14:17:16,698 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,724 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 14:17:16,742 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,769 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 14:17:16,786 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,813 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 14:17:16,830 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,856 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 14:17:16,874 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:16,901 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 14:17:16,967 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:17,018 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 14:17:17,031 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:17,057 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 14:17:17,104 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 14:17:17,118 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:17,173 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 14:17:17,638 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:17,666 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 14:17:17,684 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:17,712 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 14:17:17,734 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:17,762 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 14:17:17,782 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:17,833 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 14:17:17,850 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:17,877 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 14:17:17,946 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:17,991 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 14:17:18,839 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:18,864 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 14:17:18,881 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:18,910 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 14:17:18,985 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:19,011 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:17:19,029 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:19,055 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 14:17:19,096 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:19,137 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 14:17:19,163 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 14:17:19,165 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 14:17:19,167 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 14:17:19,169 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:19,199 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 14:17:19,270 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:19,311 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 14:17:20,164 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:20,192 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 14:17:20,209 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:20,235 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 14:17:20,306 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:20,332 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:17:20,351 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:20,377 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 14:17:20,418 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:20,459 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 14:17:20,529 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 14:17:20,533 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 14:17:20,535 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 14:17:20,537 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:20,563 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 14:17:20,579 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:20,605 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 14:17:21,438 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:21,463 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:17:21,480 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:21,506 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 14:17:21,524 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:21,550 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 14:17:22,012 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:22,048 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 14:17:22,099 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:22,141 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 14:17:22,348 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:22,374 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 14:17:22,399 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:22,426 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 14:17:22,739 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:22,764 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 14:17:22,779 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:22,805 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 14:17:23,117 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:23,147 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 14:17:23,469 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:23,519 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 14:17:23,836 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:23,861 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 14:17:24,673 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:24,726 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 14:17:24,746 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 14:17:24,772 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 14:17:24,817 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:24,843 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 14:17:24,879 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:24,906 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 14:17:24,941 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 14:17:24,947 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 14:17:24,959 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 14:17:24,963 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 14:17:24,971 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 14:17:24,981 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 14:17:24,990 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 14:17:24,994 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 14:17:24,998 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 14:17:25,025 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 14:17:25,091 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 14:17:25,128 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 14:17:25,165 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 14:17:25,198 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 14:17:25,200 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:25,225 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 14:17:25,310 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 14:17:25,355 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 14:17:25,398 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 14:17:25,424 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 14:17:25,486 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:25,530 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 14:17:25,640 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:25,668 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 14:17:26,264 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:26,289 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 14:17:26,399 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:26,425 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 14:17:26,755 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:17:26,909 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 14:17:26,938 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 14:17:27,135 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:17:27,301 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 14:17:27,328 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 14:17:27,414 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:27,440 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 14:17:27,459 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:27,485 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 14:17:27,532 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:27,578 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 14:17:27,936 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:27,963 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 14:17:28,340 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 14:17:28,680 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 14:17:29,001 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 14:17:29,337 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 14:17:29,689 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 14:17:29,718 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 14:17:30,078 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 14:17:30,420 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 14:17:30,740 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 14:17:31,056 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 14:17:31,391 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 14:17:31,723 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 14:17:32,049 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 14:17:32,368 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 14:17:32,691 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 14:17:33,010 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 14:17:33,039 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 14:17:33,111 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:33,164 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 14:17:34,796 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:34,830 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 14:17:34,931 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:34,957 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 14:17:36,827 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:36,853 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 14:17:38,702 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:38,733 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 14:17:38,839 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:38,866 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 14:17:38,881 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:38,907 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 14:17:38,921 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:38,947 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 14:17:39,012 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:39,063 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 14:17:39,194 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:39,240 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 14:17:39,704 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:39,730 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 14:17:39,936 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:39,962 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 14:17:40,523 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 14:17:40,997 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 14:17:41,025 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 14:17:41,538 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 14:17:41,568 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 14:17:42,122 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 14:17:42,601 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 14:17:43,088 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 14:17:43,572 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 14:17:43,601 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 14:17:44,120 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 14:17:44,151 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 14:17:44,678 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:44,704 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 14:17:44,908 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:44,933 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 14:17:45,040 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:45,065 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 14:17:45,080 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:45,106 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 14:17:45,120 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:45,147 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 14:17:45,162 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:45,188 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 14:17:45,203 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:45,231 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 14:17:45,803 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:45,829 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 14:17:45,941 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:45,967 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 14:17:46,079 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:17:46,104 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 14:17:47,148 p=585520 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-5855201uwd9naq/tmp6pfuzzfz/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -128,6 +128,8 @@[0m
[0;36m[0m     openid_config_file: /srv/galaxy/server/config/openid_conf.xml.sample
     outputs_to_working_directory: true
     retry_job_output_collection: 3
[0;32m+    sentry_dsn: https://39a44ae8b29a4e1784fe3d7d9903b339@gat.gat-20.eu.galaxy.training/2[0m
[0;32m[0m[0;32m+    sentry_traces_sample_rate: 0.5[0m
[0;32m[0m     shed_data_manager_config_file: /srv/galaxy/var/config/shed_data_manager_conf.xml
     shed_tool_config_file: /srv/galaxy/var/config/shed_tool_conf.xml
     shed_tool_data_table_config: /srv/galaxy/var/config/shed_tool_data_table_conf.xml


2023-04-20 14:17:47,149 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:17:47,175 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 14:17:47,235 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 14:17:47,294 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 14:17:48,996 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:49,023 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 14:17:50,904 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:50,930 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 14:17:56,112 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:56,140 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 14:17:56,756 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:17:56,783 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 14:18:00,274 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:18:00,300 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 14:18:01,989 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:02,015 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 14:18:02,072 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:02,130 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 14:18:02,243 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:02,271 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 14:18:02,835 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 14:18:02,861 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 14:18:03,344 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 14:18:03,670 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 14:18:03,698 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 14:18:04,105 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 14:18:04,427 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 14:18:04,454 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 14:18:04,502 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:04,561 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 14:18:06,227 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:06,253 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 14:18:07,877 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:07,903 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 14:18:08,010 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:08,037 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 14:18:08,142 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:08,169 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 14:18:08,251 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:08,318 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 14:18:08,695 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:08,721 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 14:18:09,063 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:09,092 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 14:18:09,468 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:09,495 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 14:18:09,891 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:09,918 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 14:18:10,111 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:10,138 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 14:18:10,349 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:10,374 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 14:18:10,499 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:10,530 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 14:18:10,648 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:10,674 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 14:18:10,790 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:10,818 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 14:18:10,925 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:10,954 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 14:18:11,065 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:11,096 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 14:18:11,205 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:11,234 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 14:18:11,339 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:11,366 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 14:18:11,483 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:11,516 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 14:18:11,533 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:11,560 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 14:18:11,617 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:11,787 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 14:18:11,895 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:11,921 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 14:18:12,564 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:12,590 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 14:18:12,614 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:12,644 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 14:18:12,664 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:12,691 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 14:18:12,739 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:12,817 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 14:18:13,264 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:13,290 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 14:18:13,401 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:13,457 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 14:18:13,640 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:13,666 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 14:18:13,986 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:14,012 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 14:18:16,583 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:18:16,633 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 14:18:16,818 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:16,847 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 14:18:16,864 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:16,890 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 14:18:17,377 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,402 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 14:18:17,440 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,466 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 14:18:17,483 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,510 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 14:18:17,526 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,553 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 14:18:17,584 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,610 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 14:18:17,637 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,664 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 14:18:17,681 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,731 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 14:18:17,750 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,775 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 14:18:17,807 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:17,836 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 14:18:18,017 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:18,042 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 14:18:18,380 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:18,406 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:18:18,422 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:18,449 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:18:18,498 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:18,537 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 14:18:19,338 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:19,364 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:18:19,379 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:19,408 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 14:18:19,710 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:19,759 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 14:18:20,070 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:20,096 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 14:18:20,307 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:20,334 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 14:18:20,634 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:20,659 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 14:18:20,689 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:20,716 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 14:18:20,900 p=585520 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1681996128.601702[0m
[0;31m[0m[0;31m-mtime: 1681996242.508693[0m
[0;31m[0m[0;32m+atime: 1682000300.8767118[0m
[0;32m[0m[0;32m+mtime: 1682000300.8767118[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 14:18:20,900 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:18:20,925 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 14:18:21,105 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:21,137 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 14:18:21,957 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:21,985 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 14:18:23,069 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:23,095 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 14:18:23,274 p=585520 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 14:18:23,275 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:18:23,300 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 14:18:24,813 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:24,839 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 14:18:25,166 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:25,191 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 14:18:25,546 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:25,574 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 14:18:26,161 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:26,211 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:18:26,257 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:26,295 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 14:18:27,082 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,107 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 14:18:27,280 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,306 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:18:27,321 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,347 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:18:27,361 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,386 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 14:18:27,560 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,588 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 14:18:27,620 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,649 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 14:18:27,681 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,707 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 14:18:27,723 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,749 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 14:18:27,764 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,790 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:18:27,806 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,834 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 14:18:27,858 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:27,884 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 14:18:28,244 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:28,270 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 14:18:28,301 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:28,329 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 14:18:28,676 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 14:18:28,705 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 14:18:28,899 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 14:18:28,931 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 14:18:29,135 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:29,165 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 14:18:29,256 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:29,295 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 14:18:29,345 p=585520 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-20 14:18:29,363 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:29,390 p=585520 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 14:18:29,409 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:29,437 p=585520 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 14:18:29,457 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:29,487 p=585520 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 14:18:30,194 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:18:30,220 p=585520 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 14:18:45,171 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:18:45,199 p=585520 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 14:18:45,418 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 14:18:45,468 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:45,514 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 14:18:46,468 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:46,494 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 14:18:46,518 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:46,545 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 14:18:46,575 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:46,603 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 14:18:46,622 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:46,653 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 14:18:46,677 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:46,709 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 14:18:46,773 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:46,843 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 14:18:47,111 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:47,156 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 14:18:47,192 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:47,219 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 14:18:47,249 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:47,281 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 14:18:47,587 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:47,625 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 14:18:47,660 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 14:18:47,689 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 14:18:47,745 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:47,798 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 14:18:47,833 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:47,859 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 14:18:48,391 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:48,417 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 14:18:48,465 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 14:18:48,516 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:48,569 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 14:18:48,821 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:48,877 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 14:18:49,071 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:49,106 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 14:18:49,530 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:49,556 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 14:18:49,807 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:49,839 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 14:18:50,055 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:50,081 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 14:18:50,133 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:50,176 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 14:18:50,606 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:18:50,956 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-20 14:18:50,989 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 14:18:51,248 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:18:51,435 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-20 14:18:51,508 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 14:18:51,731 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:51,765 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 14:18:51,800 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:51,836 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 14:18:52,193 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:52,259 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 14:18:52,287 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:52,313 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:18:52,330 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:52,360 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:18:52,411 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:52,453 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 14:18:53,042 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:53,075 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 14:18:53,943 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:53,984 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 14:18:54,001 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:54,028 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 14:18:54,881 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:54,907 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 14:18:55,500 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:55,528 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 14:18:55,561 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:55,587 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 14:18:55,624 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:55,657 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 14:18:56,031 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:56,059 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 14:18:56,079 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:56,127 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 14:18:56,966 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:56,998 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 14:18:57,037 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:57,074 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 14:18:57,104 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:57,132 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 14:18:57,173 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:57,204 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 14:18:57,242 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:57,272 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 14:18:57,659 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:57,689 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 14:18:57,736 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:18:57,803 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:57,845 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 14:18:58,086 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,113 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 14:18:58,174 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,207 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 14:18:58,245 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,270 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 14:18:58,326 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,357 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 14:18:58,392 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,422 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 14:18:58,441 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,476 p=585520 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:18:58,498 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,549 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:18:58,597 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 14:18:58,649 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 14:18:58,682 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,711 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 14:18:58,735 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,807 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 14:18:58,829 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:18:58,858 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 14:18:59,074 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:18:59,103 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 14:18:59,537 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 14:19:00,347 p=585520 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-5855201uwd9naq/tmp9vb91l2k/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-I1YIrEqdk3UeOPd5[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+TsYOAoM73GpEwGlm[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 14:19:00,349 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 14:19:00,387 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:19:00,456 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 14:19:00,516 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 14:19:00,570 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:00,606 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 14:19:00,622 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:00,652 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 14:19:01,332 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:01,362 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 14:19:01,378 p=585520 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 14:19:01,379 p=585520 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 14:19:21,381 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:21,407 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:19:21,447 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 14:19:21,489 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 14:19:22,907 p=585520 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 14:19:22,907 p=585520 u=ubuntu n=ansible | ...ignoring
2023-04-20 14:19:22,933 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 14:19:26,667 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 14:19:26,696 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 14:19:26,767 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 14:19:26,788 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 14:19:26,807 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 14:19:26,828 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 14:19:26,875 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:19:27,921 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:27,950 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:19:28,981 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:29,008 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:19:29,025 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:29,055 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:19:29,072 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:29,107 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:19:30,215 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:30,242 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:19:31,285 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:31,310 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:19:32,443 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:32,470 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:19:33,467 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:33,493 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:19:33,508 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:33,586 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:19:33,603 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:33,631 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:19:34,795 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:34,828 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:19:34,849 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:34,878 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:19:35,869 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:35,900 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:19:36,942 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:36,970 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:19:36,988 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:37,015 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:19:37,031 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:37,058 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:19:38,111 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:38,139 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:19:38,160 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:38,188 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:19:39,191 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:39,218 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:19:40,416 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:40,444 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:19:40,462 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:40,490 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:19:40,511 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:40,542 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:19:41,680 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:41,707 p=585520 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:19:42,853 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:19:42,905 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] ***************************************************************************
2023-04-20 14:19:43,130 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:43,160 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ********************************************************************
2023-04-20 14:19:43,379 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:43,407 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] **********************************************************
2023-04-20 14:19:43,586 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:43,615 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] ***********************************************************************
2023-04-20 14:19:44,577 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:44,605 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *********************************************************************
2023-04-20 14:19:44,940 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:44,967 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] **************************************************************
2023-04-20 14:19:46,545 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:46,572 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] ***************************************************
2023-04-20 14:19:46,756 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:46,782 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] ****************************************************************************
2023-04-20 14:19:47,186 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:47,212 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] *****************************************************************
2023-04-20 14:19:47,391 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:47,420 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] ***************************************************************
2023-04-20 14:19:47,668 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:47,694 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] **************************************************************
2023-04-20 14:19:48,041 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:48,067 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] *************************************************************************
2023-04-20 14:19:48,420 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:48,452 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] ************************************************************************
2023-04-20 14:19:48,470 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:48,498 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] *************************************************************
2023-04-20 14:19:49,138 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:49,168 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] ***************************************************
2023-04-20 14:19:49,361 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:49,387 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *******************************************************************
2023-04-20 14:19:49,918 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:49,943 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] *************************************************************
2023-04-20 14:19:49,988 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-20 14:19:49,995 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-20 14:19:50,012 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-20 14:19:50,019 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-20 14:19:50,026 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-20 14:19:50,033 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-20 14:19:50,040 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-20 14:19:50,047 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-20 14:19:50,054 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-20 14:19:50,063 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-20 14:19:50,070 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-20 14:19:50,074 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-20 14:19:50,079 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:50,105 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] ***************************************************************
2023-04-20 14:19:50,129 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:50,161 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] ************************************************************
2023-04-20 14:19:50,543 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-20 14:19:50,881 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-20 14:19:51,241 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-20 14:19:51,571 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-20 14:19:51,927 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-20 14:19:52,250 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-20 14:19:52,611 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-20 14:19:52,972 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-20 14:19:53,319 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-20 14:19:53,649 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-20 14:19:53,979 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-20 14:19:54,305 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-20 14:19:54,335 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] **************************************************************
2023-04-20 14:19:55,131 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:55,162 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ****
2023-04-20 14:19:55,369 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:55,420 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 14:19:56,063 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:56,089 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 14:19:56,279 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:56,311 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 14:19:56,329 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:56,356 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 14:19:56,536 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:56,563 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 14:19:56,750 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:56,778 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 14:19:56,956 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:56,983 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 14:19:57,171 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:57,198 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 14:19:57,540 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:57,594 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 14:19:57,636 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:57,664 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 14:19:57,704 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:57,733 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 14:19:57,751 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:57,777 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 14:19:57,816 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:57,844 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 14:19:57,936 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 14:19:58,003 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 14:19:58,067 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:19:58,108 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 14:19:58,985 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:59,011 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 14:19:59,717 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:19:59,743 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:19:59,762 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:19:59,790 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:20:00,109 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:00,137 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:20:00,163 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:00,198 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 14:20:01,018 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:01,045 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 14:20:01,088 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 14:20:01,133 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 14:20:01,343 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 14:20:01,372 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 14:20:01,738 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 14:20:01,773 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 14:20:02,070 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:02,096 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 14:20:02,453 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:02,486 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 14:20:02,503 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:02,531 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 14:20:02,891 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:02,916 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 14:20:03,275 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:03,307 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 14:20:03,493 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:03,519 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 14:20:03,536 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:03,563 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 14:20:03,930 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:03,957 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 14:20:04,004 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 14:20:04,048 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 14:20:04,062 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,091 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 14:20:04,120 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,152 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 14:20:04,183 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,211 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 14:20:04,398 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,426 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 14:20:04,459 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,486 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 14:20:04,701 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,729 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 14:20:04,759 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,788 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 14:20:04,806 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,835 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 14:20:04,852 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,879 p=585520 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 14:20:04,896 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,948 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] ************************************************************************
2023-04-20 14:20:04,964 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:04,991 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] ************************************************************************
2023-04-20 14:20:05,050 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:20:05,118 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] *****************************************************
2023-04-20 14:20:05,135 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:05,168 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] *************************************************
2023-04-20 14:20:05,189 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:05,218 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] *****************************
2023-04-20 14:20:05,239 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:05,267 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ******************************
2023-04-20 14:20:05,284 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:05,313 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***************************
2023-04-20 14:20:05,512 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:05,539 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] *****************************************************
2023-04-20 14:20:05,557 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:05,589 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *******************************************************
2023-04-20 14:20:05,652 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:05,683 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] *************************************
2023-04-20 14:20:05,898 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:05,926 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] ************************************************
2023-04-20 14:20:05,978 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:06,005 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ********************************************************
2023-04-20 14:20:06,353 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:06,385 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ******************************************
2023-04-20 14:20:06,443 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:06,470 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *********************************************
2023-04-20 14:20:06,851 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:06,877 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *********************************************************
2023-04-20 14:20:06,908 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:06,937 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 14:20:14,910 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:14,937 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 14:20:17,385 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,413 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] **********************************************
2023-04-20 14:20:17,430 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,457 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] ***********************************************
2023-04-20 14:20:17,474 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,502 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] **************************************
2023-04-20 14:20:17,519 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,547 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] **************************************************************************
2023-04-20 14:20:17,569 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,601 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] ***********************************************************************
2023-04-20 14:20:17,617 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,649 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] *************************************************************************
2023-04-20 14:20:17,669 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,705 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] ****************************************************************************
2023-04-20 14:20:17,723 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,750 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] ***********************************************************************
2023-04-20 14:20:17,811 p=585520 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-20 14:20:17,893 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] ***********************************************************************
2023-04-20 14:20:17,912 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,938 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] **************************************************************************
2023-04-20 14:20:17,955 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:17,981 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] ****************************************************
2023-04-20 14:20:17,998 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:18,074 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] **************************************************
2023-04-20 14:20:18,092 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:18,119 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] *************************************************
2023-04-20 14:20:18,794 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:18,821 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] *****************************
2023-04-20 14:20:18,838 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:18,864 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ********************************************************
2023-04-20 14:20:18,881 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:18,913 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ********************************************************
2023-04-20 14:20:18,929 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:18,956 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] **************************************************************
2023-04-20 14:20:19,468 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-20 14:20:19,500 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] ************************************************************
2023-04-20 14:20:19,550 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-20 14:20:19,552 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:19,579 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] ************************************************
2023-04-20 14:20:19,626 p=585520 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 14:20:26,742 p=585520 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:20:26,777 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] ****************************************************
2023-04-20 14:20:27,138 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,169 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ********************************************************
2023-04-20 14:20:27,188 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,216 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ********************************************************************
2023-04-20 14:20:27,234 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,262 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ********************************************************************
2023-04-20 14:20:27,286 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,315 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] ************************************************
2023-04-20 14:20:27,334 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,363 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] **************************************************************
2023-04-20 14:20:27,380 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,409 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] **************************************************************
2023-04-20 14:20:27,426 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,455 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] **************************************************
2023-04-20 14:20:27,471 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,503 p=585520 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] ****************************************************
2023-04-20 14:20:27,521 p=585520 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,633 p=585520 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 14:20:27,847 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:27,872 p=585520 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 14:20:28,773 p=585520 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:20:28,826 p=585520 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 14:20:28,827 p=585520 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=271  changed=25   unreachable=0    failed=0    skipped=167  rescued=0    ignored=1   
2023-04-20 14:32:25,846 p=605741 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 14:32:26,054 p=605741 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 14:32:26,072 p=605741 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:32:27,719 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:27,733 p=605741 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 14:32:28,745 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:28,782 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:32:28,813 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:28,828 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 14:32:28,851 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:28,864 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 14:32:28,890 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:28,902 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 14:32:28,925 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:28,938 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 14:32:29,776 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:29,789 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 14:32:30,097 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:30,111 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 14:32:30,153 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:30,166 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 14:32:31,009 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,021 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 14:32:31,045 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,060 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 14:32:31,092 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,104 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 14:32:31,130 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,142 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 14:32:31,170 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,183 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:32:31,198 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,210 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 14:32:31,498 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,510 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 14:32:31,807 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,820 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 14:32:31,840 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:31,853 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 14:32:32,029 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:32,043 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 14:32:32,672 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:32,686 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 14:32:33,081 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:33,094 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:32:33,133 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:33,156 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 14:32:33,354 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 14:32:33,517 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 14:32:33,532 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 14:32:33,711 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:33,724 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 14:32:34,071 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 14:32:34,088 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 14:32:34,456 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 14:32:34,470 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 14:32:34,853 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:34,866 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 14:32:35,188 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:35,203 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 14:32:35,383 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:35,399 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 14:32:35,896 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:35,920 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 14:32:35,947 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 14:32:35,952 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-20 14:32:35,954 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:35,969 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 14:32:36,008 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-20 14:32:36,017 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-20 14:32:36,027 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-20 14:32:36,034 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-20 14:32:36,036 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:36,050 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 14:32:36,092 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 14:32:36,094 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:36,107 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 14:32:36,516 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:32:36,753 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:32:36,769 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 14:32:36,782 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:36,797 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 14:32:36,821 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:36,835 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 14:32:36,883 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:36,898 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 14:32:37,296 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:32:37,312 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 14:32:37,754 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:32:38,008 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:32:38,269 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:32:38,546 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:32:38,654 p=605741 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 14:32:38,734 p=605741 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:32:40,089 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:40,114 p=605741 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 14:32:40,996 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:41,020 p=605741 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 14:32:41,035 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:41,060 p=605741 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 14:32:41,886 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:41,913 p=605741 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 14:32:42,667 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:42,743 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 14:32:43,372 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:43,398 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 14:32:43,420 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:43,447 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 14:32:43,720 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:43,746 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 14:32:43,945 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:43,971 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 14:32:44,029 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,054 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 14:32:44,071 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,100 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 14:32:44,117 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,144 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 14:32:44,161 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,189 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 14:32:44,206 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,235 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 14:32:44,251 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,280 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 14:32:44,324 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:44,366 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 14:32:44,379 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,406 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 14:32:44,456 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 14:32:44,470 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,522 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 14:32:44,961 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:44,987 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 14:32:45,002 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:45,029 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 14:32:45,048 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:45,076 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 14:32:45,096 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:45,146 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 14:32:45,163 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:45,192 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 14:32:45,264 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:45,309 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 14:32:46,117 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:46,146 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 14:32:46,164 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:46,192 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 14:32:46,268 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:46,293 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:32:46,311 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:46,341 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 14:32:46,385 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:46,431 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 14:32:46,455 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 14:32:46,458 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 14:32:46,460 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 14:32:46,462 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:46,487 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 14:32:46,563 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:46,607 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 14:32:47,442 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:47,468 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 14:32:47,485 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:47,511 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 14:32:47,588 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:47,614 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:32:47,633 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:47,661 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 14:32:47,707 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:47,750 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 14:32:47,776 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 14:32:47,780 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 14:32:47,782 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 14:32:47,784 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:47,811 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 14:32:47,827 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:47,855 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 14:32:48,715 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:48,741 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:32:48,761 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:48,790 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 14:32:48,807 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:48,834 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 14:32:49,303 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:49,331 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 14:32:49,378 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:49,418 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 14:32:49,608 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:49,636 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 14:32:49,663 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:49,691 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 14:32:49,988 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:50,014 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 14:32:50,030 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:50,057 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 14:32:50,370 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:50,396 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 14:32:50,721 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:50,773 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 14:32:51,095 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:51,122 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 14:32:51,943 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:51,992 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 14:32:52,016 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 14:32:52,043 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 14:32:52,101 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:52,130 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 14:32:52,169 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:52,197 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 14:32:52,232 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 14:32:52,238 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 14:32:52,246 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 14:32:52,254 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 14:32:52,264 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 14:32:52,271 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 14:32:52,275 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 14:32:52,283 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 14:32:52,287 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 14:32:52,316 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 14:32:52,383 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 14:32:52,418 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 14:32:52,453 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 14:32:52,491 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 14:32:52,494 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:52,520 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 14:32:52,610 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 14:32:52,665 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 14:32:52,710 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 14:32:52,737 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 14:32:52,803 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:52,848 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 14:32:52,951 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:52,977 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 14:32:53,600 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:53,626 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 14:32:53,746 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:32:53,774 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 14:32:54,063 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:32:54,231 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 14:32:54,259 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 14:32:54,445 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:32:54,611 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 14:32:54,645 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 14:32:54,737 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:54,763 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 14:32:54,783 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:54,811 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 14:32:54,855 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 14:32:54,900 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 14:32:55,252 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:32:55,278 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 14:32:55,638 p=605741 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 14:32:55,640 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 14:32:55,975 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 14:32:56,296 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 14:32:56,622 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 14:32:56,956 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 14:32:56,986 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 14:32:57,341 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 14:32:57,687 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 14:32:58,010 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 14:32:58,335 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 14:32:58,682 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 14:32:59,014 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 14:32:59,341 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 14:32:59,671 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 14:32:59,982 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 14:33:00,309 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 14:33:00,340 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 14:33:00,418 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:00,466 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 14:33:02,121 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:02,147 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 14:33:02,257 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:02,283 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 14:33:04,147 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:04,175 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 14:33:06,015 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:06,041 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 14:33:06,146 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:06,177 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 14:33:06,192 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:06,218 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 14:33:06,234 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:06,260 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 14:33:06,324 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:06,376 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 14:33:06,552 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:06,596 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 14:33:07,017 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:07,044 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 14:33:07,249 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:07,275 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 14:33:07,796 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 14:33:08,275 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 14:33:08,962 p=605741 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/config/error_reports.yml[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+- type: sentry[0m
[0;32m[0m[0;32m+  user_submission: false[0m
[0;32m[0m

2023-04-20 14:33:08,964 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/error_reports.yml', 'dest': '/srv/galaxy/config/error_reports_file.yml'})
2023-04-20 14:33:08,992 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 14:33:09,467 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 14:33:09,494 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 14:33:10,067 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 14:33:10,574 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 14:33:11,075 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 14:33:11,567 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 14:33:11,600 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 14:33:12,137 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 14:33:12,746 p=605741 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/tools/job_properties.xml[0m
[0;32m[0m[0;36m@@ -0,0 +1,65 @@[0m
[0;36m[0m[0;32m+<tool id="job_properties" name="Test Job Properties" version="1.0.0">[0m
[0;32m[0m[0;32m+    <stdio>[0m
[0;32m[0m[0;32m+            <exit_code range="127" level="fatal" description="Failing exit code." />[0m
[0;32m[0m[0;32m+	        </stdio>[0m
[0;32m[0m[0;32m+		    <version_command>echo 'v1.1'</version_command>[0m
[0;32m[0m[0;32m+		        <command><![CDATA[[0m
[0;32m[0m[0;32m+			#if $thebool[0m
[0;32m[0m[0;32m+			    echo 'The bool is true' &&[0m
[0;32m[0m[0;32m+			        echo 'The bool is really true' 1>&2 &&[0m
[0;32m[0m[0;32m+				    echo 'This is a line of text.' > '$out_file1' &&[0m
[0;32m[0m[0;32m+				        cp '$out_file1' '$one' &&[0m
[0;32m[0m[0;32m+					    cp '$out_file1' '$two' &&[0m
[0;32m[0m[0;32m+					        sleep $sleepsecs[0m
[0;32m[0m[0;32m+						#else[0m
[0;32m[0m[0;32m+						    echo 'The bool is not true' &&[0m
[0;32m[0m[0;32m+						        echo 'The bool is very not true' 1>&2 &&[0m
[0;32m[0m[0;32m+							    echo 'This is a different line of text.' > '$out_file1' &&[0m
[0;32m[0m[0;32m+							        sleep $sleepsecs &&[0m
[0;32m[0m[0;32m+								    sh -c 'exit 2'[0m
[0;32m[0m[0;32m+								    #end if[0m
[0;32m[0m[0;32m+								    #if $failbool[0m
[0;32m[0m[0;32m+								        ## use ';' to concatenate commands so that the next one is run independently[0m
[0;32m[0m[0;32m+									    ## of the exit code of the previous one[0m
[0;32m[0m[0;32m+									        ; exit 127[0m
[0;32m[0m[0;32m+										#end if[0m
[0;32m[0m[0;32m+										    ]]></command>[0m
[0;32m[0m[0;32m+										        <inputs>[0m
[0;32m[0m[0;32m+											        <param name="sleepsecs" type="integer" value="0" label="Sleep this many seconds"/>[0m
[0;32m[0m[0;32m+												        <param name="thebool" type="boolean" label="The boolean property" />[0m
[0;32m[0m[0;32m+													        <param name="failbool" type="boolean" label="The failure property" checked="false" />[0m
[0;32m[0m[0;32m+														    </inputs>[0m
[0;32m[0m[0;32m+														        <outputs>[0m
[0;32m[0m[0;32m+															        <data name="out_file1" format="txt" />[0m
[0;32m[0m[0;32m+																        <collection name="list_output" type="list" label="A list output">[0m
[0;32m[0m[0;32m+																	            <data name="one" format="txt" />[0m
[0;32m[0m[0;32m+																		                    <has_line line="The bool is true" />[0m
[0;32m[0m[0;32m+																				                </assert_stdout>[0m
[0;32m[0m[0;32m+																						            <assert_stderr>[0m
[0;32m[0m[0;32m+																							                    <has_line line="The bool is really true" />[0m
[0;32m[0m[0;32m+																									                </assert_stderr>[0m
[0;32m[0m[0;32m+																											            <assert_command_version>[0m
[0;32m[0m[0;32m+																												                    <has_text text="v1.1" />[0m
[0;32m[0m[0;32m+																														                </assert_command_version>[0m
[0;32m[0m[0;32m+																																        </test>[0m
[0;32m[0m[0;32m+																																	        <test expect_exit_code="2">[0m
[0;32m[0m[0;32m+																																		            <param name="thebool" value="false" />[0m
[0;32m[0m[0;32m+																																			                <output name="out_file1" file="simple_line_alternative.txt" />[0m
[0;32m[0m[0;32m+																																					            <assert_command>[0m
[0;32m[0m[0;32m+																																						                    <has_text text="very not" />[0m
[0;32m[0m[0;32m+																																								                </assert_command>[0m
[0;32m[0m[0;32m+																																										            <assert_stdout>[0m
[0;32m[0m[0;32m+																																											                    <has_line line="The bool is not true" />[0m
[0;32m[0m[0;32m+																																													                </assert_stdout>[0m
[0;32m[0m[0;32m+																																															            <assert_stderr>[0m
[0;32m[0m[0;32m+																																																                    <has_line line="The bool is very not true" />[0m
[0;32m[0m[0;32m+																																																		                </assert_stderr>[0m
[0;32m[0m[0;32m+																																																				        </test>[0m
[0;32m[0m[0;32m+																																																					        <test expect_exit_code="127" expect_failure="true">[0m
[0;32m[0m[0;32m+																																																						            <param name="thebool" value="true" />[0m
[0;32m[0m[0;32m+																																																							                <param name="failbool" value="true" />[0m
[0;32m[0m[0;32m+																																																									        </test>[0m
[0;32m[0m[0;32m+																																																										    </tests>[0m
[0;32m[0m[0;32m+																																																										        <help>[0m
[0;32m[0m[0;32m+																																																											    </help>[0m
[0;32m[0m[0;32m+																																																											    </tool>[0m
[0;32m[0m

2023-04-20 14:33:12,748 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=job_properties.xml)
2023-04-20 14:33:12,777 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 14:33:13,594 p=605741 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/local_tool_conf.xml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-605741i34ld1ry/tmp7r9tta_n/local_tool_conf.xml.j2[0m
[0;32m[0m[0;36m@@ -1,4 +1,5 @@[0m
[0;36m[0m <?xml version='1.0' encoding='utf-8'?>
 <toolbox monitor="true" tool_path="/srv/galaxy/local_tools">
     <tool file="testing.xml" />
[0;32m+    <tool file="job_properties.xml" />[0m
[0;32m[0m </toolbox>


2023-04-20 14:33:13,595 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:33:13,621 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 14:33:13,818 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:13,844 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 14:33:13,951 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:13,987 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 14:33:14,005 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:14,041 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 14:33:14,064 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:14,091 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 14:33:14,112 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:14,146 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 14:33:14,170 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:14,201 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 14:33:14,901 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:14,938 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 14:33:15,055 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:15,086 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 14:33:15,208 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:15,235 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 14:33:16,237 p=605741 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-605741i34ld1ry/tmps58vqgmi/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -60,6 +60,7 @@[0m
[0;36m[0m     enable_celery_tasks: true
     enable_per_request_sql_debugging: true
     enable_quotas: true
[0;32m+    error_report_file: /srv/galaxy/config/error_reports_file.yml[0m
[0;32m[0m     expose_dataset_path: true
     expose_potentially_sensitive_job_metrics: true
     expose_user_name: true


2023-04-20 14:33:16,238 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:33:16,265 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 14:33:16,332 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:16,390 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 14:33:18,095 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:18,122 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 14:33:20,021 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:20,050 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 14:33:25,381 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:25,407 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 14:33:26,040 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:26,067 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 14:33:27,889 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:27,917 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 14:33:29,670 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:29,697 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 14:33:29,755 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:29,815 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 14:33:29,923 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:29,949 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 14:33:30,534 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 14:33:30,563 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 14:33:31,034 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 14:33:31,365 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 14:33:31,393 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 14:33:31,803 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 14:33:32,130 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 14:33:32,158 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 14:33:32,209 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:32,271 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 14:33:33,762 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:33,790 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 14:33:35,180 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:35,207 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 14:33:35,313 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:35,340 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 14:33:35,443 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:35,469 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 14:33:35,547 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:35,611 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 14:33:35,969 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:35,995 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 14:33:36,336 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:36,362 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 14:33:36,707 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:36,733 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 14:33:37,091 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:37,118 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 14:33:37,324 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:37,349 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 14:33:37,534 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:37,561 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 14:33:37,672 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:37,701 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 14:33:37,805 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:37,831 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 14:33:37,934 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:37,960 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 14:33:38,064 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:38,092 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 14:33:38,215 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:38,243 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 14:33:38,349 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:38,376 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 14:33:38,480 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:38,509 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 14:33:38,618 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:38,647 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 14:33:38,665 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:38,693 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 14:33:38,744 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:38,828 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 14:33:38,940 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:38,967 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 14:33:39,613 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:39,640 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 14:33:39,662 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:39,693 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 14:33:39,710 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:39,738 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 14:33:39,784 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:39,855 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 14:33:40,285 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:40,316 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 14:33:40,427 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:40,478 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 14:33:40,668 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:40,695 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 14:33:41,131 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:41,157 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 14:33:43,994 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,044 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 14:33:44,229 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,255 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 14:33:44,272 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,299 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 14:33:44,702 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,727 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 14:33:44,766 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,793 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 14:33:44,809 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,836 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 14:33:44,852 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,881 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 14:33:44,906 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,934 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 14:33:44,959 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:44,990 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 14:33:45,007 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:45,058 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 14:33:45,077 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:45,104 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 14:33:45,135 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:45,161 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 14:33:45,347 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:45,420 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 14:33:45,767 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:45,793 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:33:45,809 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:45,835 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:33:45,878 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:45,917 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 14:33:46,787 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:46,813 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:33:46,829 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:46,855 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 14:33:47,166 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:47,220 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 14:33:47,523 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:47,552 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 14:33:47,775 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:47,802 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 14:33:48,116 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:48,144 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 14:33:48,186 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:48,222 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 14:33:48,405 p=605741 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1682000300.8728807[0m
[0;31m[0m[0;31m-mtime: 1682000434.9477127[0m
[0;31m[0m[0;32m+atime: 1682001228.381709[0m
[0;32m[0m[0;32m+mtime: 1682001228.381709[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 14:33:48,405 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:33:48,435 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 14:33:48,615 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:48,641 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 14:33:49,447 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:49,472 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 14:33:50,626 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:50,653 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 14:33:50,832 p=605741 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 14:33:50,833 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:33:50,859 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 14:33:52,411 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:52,441 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 14:33:52,782 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:52,811 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 14:33:53,158 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:53,185 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 14:33:53,796 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:53,847 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:33:53,890 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:53,929 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 14:33:54,744 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:54,769 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 14:33:54,939 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:54,965 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:33:54,982 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,010 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:33:55,028 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,055 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 14:33:55,235 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,261 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 14:33:55,293 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,320 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 14:33:55,352 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,378 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 14:33:55,395 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,421 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 14:33:55,437 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,463 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:33:55,480 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,507 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 14:33:55,535 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,566 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 14:33:55,967 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:55,992 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 14:33:56,024 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:56,053 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 14:33:56,395 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 14:33:56,424 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 14:33:56,621 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 14:33:56,655 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 14:33:57,119 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:33:57,147 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 14:33:57,239 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 14:33:57,277 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 14:33:57,325 p=605741 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-20 14:33:57,342 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:57,369 p=605741 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 14:33:57,389 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:57,421 p=605741 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 14:33:57,439 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:33:57,467 p=605741 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-20 14:33:58,131 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:33:58,158 p=605741 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-20 14:34:16,566 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:34:16,606 p=605741 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 14:34:16,867 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 14:34:16,933 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:16,992 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 14:34:18,081 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:18,126 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 14:34:18,155 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:18,186 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 14:34:18,221 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:18,275 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 14:34:18,302 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:18,343 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 14:34:18,363 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:18,395 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 14:34:18,448 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:18,525 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 14:34:18,825 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:18,863 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 14:34:18,899 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:18,941 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 14:34:18,977 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:19,005 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 14:34:19,328 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:19,364 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 14:34:19,407 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 14:34:19,449 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 14:34:19,516 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:19,572 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 14:34:19,603 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:19,631 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 14:34:20,162 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:20,237 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 14:34:20,286 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 14:34:20,339 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:20,390 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 14:34:20,606 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:20,659 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 14:34:20,880 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:20,913 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 14:34:21,303 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:21,331 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 14:34:21,532 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:21,559 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 14:34:21,776 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:21,812 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 14:34:21,882 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:21,927 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 14:34:22,343 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:34:22,717 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-20 14:34:22,766 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 14:34:23,016 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:34:23,230 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-20 14:34:23,268 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 14:34:23,742 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:23,771 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 14:34:23,797 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:23,830 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 14:34:24,196 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:24,253 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 14:34:24,288 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:24,316 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:34:24,336 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:24,367 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:34:24,420 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:24,462 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 14:34:25,196 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:25,225 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 14:34:26,222 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:26,260 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 14:34:26,282 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:26,308 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 14:34:27,226 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:27,259 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 14:34:27,867 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:27,905 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 14:34:27,941 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:27,973 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 14:34:28,014 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:28,062 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 14:34:28,417 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:28,446 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 14:34:28,470 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:28,515 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 14:34:29,489 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:29,525 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 14:34:29,567 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:29,663 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 14:34:29,704 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:29,739 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 14:34:29,781 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:29,812 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 14:34:29,857 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:29,886 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 14:34:30,270 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:30,309 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 14:34:30,361 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:34:30,452 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:30,506 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 14:34:30,869 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:30,900 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 14:34:30,971 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,009 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 14:34:31,069 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,103 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 14:34:31,152 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,179 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 14:34:31,213 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,241 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 14:34:31,255 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,285 p=605741 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:34:31,304 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,359 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:34:31,403 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:31,455 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 14:34:31,477 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,504 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 14:34:31,524 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,556 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 14:34:31,573 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,602 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 14:34:31,787 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:31,815 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 14:34:32,157 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 14:34:32,798 p=605741 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-605741i34ld1ry/tmpwbwyk_mw/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-TsYOAoM73GpEwGlm[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+uTWDdhl5drCAQToV[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 14:34:32,800 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 14:34:32,829 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:34:32,871 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:32,911 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 14:34:32,962 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:32,989 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 14:34:33,005 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:34:33,032 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 14:34:33,727 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:33,755 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 14:34:33,772 p=605741 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 14:34:33,772 p=605741 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 14:34:53,775 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:34:53,801 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:34:53,844 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 14:34:53,886 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 14:34:55,203 p=605741 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 14:34:55,203 p=605741 u=ubuntu n=ansible | ...ignoring
2023-04-20 14:34:55,229 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 14:34:59,041 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 14:34:59,069 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 14:34:59,139 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 14:34:59,160 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 14:34:59,180 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 14:34:59,200 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 14:34:59,242 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:35:00,342 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:00,367 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:35:01,411 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:01,437 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:35:01,453 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:01,478 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:35:01,494 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:01,520 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:35:02,609 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:02,636 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:35:03,761 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:03,788 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:35:04,793 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:04,819 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:35:05,827 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:05,855 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:35:05,871 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:05,898 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:35:05,914 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:05,940 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:35:06,966 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:06,995 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:35:07,014 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:07,042 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:35:08,054 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:08,080 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:35:09,144 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:09,171 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:35:09,188 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:09,216 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:35:09,231 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:09,257 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:35:10,285 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:10,311 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:35:10,331 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:10,359 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:35:11,352 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:11,379 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:35:12,450 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:12,476 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:35:12,491 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:12,524 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:35:12,541 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:12,569 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:35:13,558 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:13,592 p=605741 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:35:14,654 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:14,707 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] ***************************************************************************
2023-04-20 14:35:14,908 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:14,936 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ********************************************************************
2023-04-20 14:35:15,134 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:15,160 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] **********************************************************
2023-04-20 14:35:15,336 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:15,361 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] ***********************************************************************
2023-04-20 14:35:16,382 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:16,407 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *********************************************************************
2023-04-20 14:35:16,740 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:16,766 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] **************************************************************
2023-04-20 14:35:18,302 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:18,327 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] ***************************************************
2023-04-20 14:35:18,510 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:18,538 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] ****************************************************************************
2023-04-20 14:35:18,918 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:18,943 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] *****************************************************************
2023-04-20 14:35:19,116 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:19,142 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] ***************************************************************
2023-04-20 14:35:19,409 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:19,436 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] **************************************************************
2023-04-20 14:35:19,776 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:19,804 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] *************************************************************************
2023-04-20 14:35:20,141 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:20,168 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] ************************************************************************
2023-04-20 14:35:20,193 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:20,222 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] *************************************************************
2023-04-20 14:35:20,843 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:20,868 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] ***************************************************
2023-04-20 14:35:21,042 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:21,070 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *******************************************************************
2023-04-20 14:35:21,574 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:21,600 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] *************************************************************
2023-04-20 14:35:21,641 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-20 14:35:21,653 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-20 14:35:21,660 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-20 14:35:21,669 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-20 14:35:21,679 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-20 14:35:21,684 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-20 14:35:21,691 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-20 14:35:21,699 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-20 14:35:21,706 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-20 14:35:21,713 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-20 14:35:21,720 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-20 14:35:21,724 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-20 14:35:21,727 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:21,755 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] ***************************************************************
2023-04-20 14:35:21,777 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:21,803 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] ************************************************************
2023-04-20 14:35:22,141 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-20 14:35:22,466 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-20 14:35:22,782 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-20 14:35:23,100 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-20 14:35:23,421 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-20 14:35:23,753 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-20 14:35:24,068 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-20 14:35:24,392 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-20 14:35:24,718 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-20 14:35:25,030 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-20 14:35:25,355 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-20 14:35:25,673 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-20 14:35:25,702 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] **************************************************************
2023-04-20 14:35:26,466 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:26,493 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ****
2023-04-20 14:35:26,700 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:26,750 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 14:35:27,360 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:27,391 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 14:35:27,573 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:27,600 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 14:35:27,616 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:27,643 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 14:35:27,826 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:27,852 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 14:35:28,024 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:28,049 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 14:35:28,223 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:28,250 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 14:35:28,425 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:28,457 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 14:35:28,759 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:28,810 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 14:35:28,844 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:28,870 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 14:35:28,906 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:28,932 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 14:35:28,948 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:28,974 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 14:35:29,019 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:29,046 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 14:35:29,190 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 14:35:29,254 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 14:35:29,321 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:35:29,361 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 14:35:30,231 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:30,259 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 14:35:30,932 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:30,960 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:35:30,977 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:31,004 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:35:31,310 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:31,337 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:35:31,353 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:31,380 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 14:35:32,193 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:32,221 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 14:35:32,265 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 14:35:32,310 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 14:35:32,530 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 14:35:32,565 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 14:35:32,922 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 14:35:32,950 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 14:35:33,238 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:33,265 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 14:35:33,564 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:33,590 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 14:35:33,606 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:33,633 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 14:35:33,966 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:33,992 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 14:35:34,337 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:34,363 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 14:35:34,548 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:34,574 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 14:35:34,590 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:34,617 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 14:35:34,966 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:34,993 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 14:35:35,037 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 14:35:35,078 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 14:35:35,092 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,122 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 14:35:35,150 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,177 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 14:35:35,204 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,232 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 14:35:35,422 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,447 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 14:35:35,476 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,502 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 14:35:35,687 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,713 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 14:35:35,742 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,769 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 14:35:35,784 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,810 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 14:35:35,825 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,851 p=605741 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 14:35:35,867 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,918 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] ************************************************************************
2023-04-20 14:35:35,934 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:35,961 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] ************************************************************************
2023-04-20 14:35:36,016 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:35:36,081 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] *****************************************************
2023-04-20 14:35:36,097 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,124 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] *************************************************
2023-04-20 14:35:36,144 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,170 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] *****************************
2023-04-20 14:35:36,189 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,215 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ******************************
2023-04-20 14:35:36,230 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,257 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***************************
2023-04-20 14:35:36,439 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,466 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] *****************************************************
2023-04-20 14:35:36,482 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,508 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *******************************************************
2023-04-20 14:35:36,559 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,585 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] *************************************
2023-04-20 14:35:36,797 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,822 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] ************************************************
2023-04-20 14:35:36,872 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:36,898 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ********************************************************
2023-04-20 14:35:37,217 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:37,243 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ******************************************
2023-04-20 14:35:37,297 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:37,323 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *********************************************
2023-04-20 14:35:37,687 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:37,714 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *********************************************************
2023-04-20 14:35:37,747 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:37,773 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 14:35:40,080 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:40,107 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 14:35:42,414 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,440 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] **********************************************
2023-04-20 14:35:42,457 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,485 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] ***********************************************
2023-04-20 14:35:42,502 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,531 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] **************************************
2023-04-20 14:35:42,548 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,576 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] **************************************************************************
2023-04-20 14:35:42,592 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,623 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] ***********************************************************************
2023-04-20 14:35:42,639 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,667 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] *************************************************************************
2023-04-20 14:35:42,683 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,712 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] ****************************************************************************
2023-04-20 14:35:42,729 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,755 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] ***********************************************************************
2023-04-20 14:35:42,814 p=605741 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-20 14:35:42,899 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] ***********************************************************************
2023-04-20 14:35:42,915 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,942 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] **************************************************************************
2023-04-20 14:35:42,958 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:42,984 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] ****************************************************
2023-04-20 14:35:43,001 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:43,027 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] **************************************************
2023-04-20 14:35:43,043 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:43,069 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] *************************************************
2023-04-20 14:35:43,652 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:43,679 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] *****************************
2023-04-20 14:35:43,699 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:43,742 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ********************************************************
2023-04-20 14:35:43,758 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:43,785 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ********************************************************
2023-04-20 14:35:43,801 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:43,829 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] **************************************************************
2023-04-20 14:35:44,355 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-20 14:35:44,385 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] ************************************************************
2023-04-20 14:35:44,432 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-20 14:35:44,434 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:44,463 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] ************************************************
2023-04-20 14:35:44,513 p=605741 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 14:35:51,480 p=605741 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:35:51,508 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] ****************************************************
2023-04-20 14:35:51,845 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:51,872 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ********************************************************
2023-04-20 14:35:51,889 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:51,922 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ********************************************************************
2023-04-20 14:35:51,938 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:51,965 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ********************************************************************
2023-04-20 14:35:51,982 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:52,010 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] ************************************************
2023-04-20 14:35:52,028 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:52,055 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] **************************************************************
2023-04-20 14:35:52,072 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:52,098 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] **************************************************************
2023-04-20 14:35:52,116 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:52,143 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] **************************************************
2023-04-20 14:35:52,159 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:52,187 p=605741 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] ****************************************************
2023-04-20 14:35:52,202 p=605741 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:35:52,310 p=605741 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 14:35:52,490 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:52,524 p=605741 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 14:35:53,443 p=605741 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:35:53,495 p=605741 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 14:35:53,495 p=605741 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=271  changed=28   unreachable=0    failed=0    skipped=167  rescued=0    ignored=1   
2023-04-20 14:41:06,228 p=622553 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-20 14:41:06,430 p=622553 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-20 14:41:06,448 p=622553 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:41:07,942 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:07,954 p=622553 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 14:41:08,913 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:08,947 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:41:08,978 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:08,993 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-20 14:41:09,015 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:09,028 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-20 14:41:09,051 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:09,063 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-20 14:41:09,091 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:09,105 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-20 14:41:09,916 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:09,929 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-20 14:41:10,226 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:10,240 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 14:41:10,281 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:10,294 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-20 14:41:11,096 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:11,109 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-20 14:41:11,134 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:11,147 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-20 14:41:11,181 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:11,193 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-20 14:41:11,222 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:11,236 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-20 14:41:11,268 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:11,280 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:41:11,295 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:11,308 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-20 14:41:11,637 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:11,650 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-20 14:41:11,970 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:11,983 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-20 14:41:12,004 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:12,016 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-20 14:41:12,209 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:12,224 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-20 14:41:12,736 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:12,751 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-20 14:41:13,133 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:13,152 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-20 14:41:13,197 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:13,216 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-20 14:41:13,410 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-20 14:41:13,581 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-20 14:41:13,599 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-20 14:41:13,789 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:13,804 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-20 14:41:14,149 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-20 14:41:14,165 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-20 14:41:14,501 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-20 14:41:14,517 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-20 14:41:14,895 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:14,910 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-20 14:41:15,258 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:15,271 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-20 14:41:15,444 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:15,458 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-20 14:41:16,021 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:16,044 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-20 14:41:16,076 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-20 14:41:16,080 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-20 14:41:16,082 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:16,095 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-20 14:41:16,137 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-20 14:41:16,149 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-20 14:41:16,161 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-20 14:41:16,173 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-20 14:41:16,176 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:16,193 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-20 14:41:16,229 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-20 14:41:16,232 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:16,245 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-20 14:41:16,638 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:41:16,890 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:41:16,904 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-20 14:41:16,917 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:16,930 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-20 14:41:16,957 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:16,970 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-20 14:41:16,982 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:16,997 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-20 14:41:17,428 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:41:17,443 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-20 14:41:17,854 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:41:18,109 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:41:18,369 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:41:18,637 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-20 14:41:18,748 p=622553 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-20 14:41:18,822 p=622553 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-20 14:41:20,139 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:20,165 p=622553 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-20 14:41:20,995 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:21,019 p=622553 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-20 14:41:21,033 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:21,059 p=622553 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-20 14:41:21,881 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:21,906 p=622553 u=ubuntu n=ansible | TASK [git] ***********************************************************************************************************
2023-04-20 14:41:22,648 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:22,723 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-20 14:41:23,315 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:23,341 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-20 14:41:23,364 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:23,389 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-20 14:41:23,626 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:23,653 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-20 14:41:23,838 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:23,865 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-20 14:41:23,918 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:23,943 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-20 14:41:23,959 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:23,986 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-20 14:41:24,004 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,031 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-20 14:41:24,048 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,074 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-20 14:41:24,091 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,118 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-20 14:41:24,135 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,165 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-20 14:41:24,209 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:24,252 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-20 14:41:24,268 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,294 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-20 14:41:24,341 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-20 14:41:24,355 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,406 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] ************************************************************
2023-04-20 14:41:24,838 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,865 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] *****************************************************************
2023-04-20 14:41:24,882 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,909 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] *****************************************************
2023-04-20 14:41:24,928 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:24,954 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***********************************
2023-04-20 14:41:24,973 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:25,024 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] *************************************************************
2023-04-20 14:41:25,039 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:25,064 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] ***************************************************
2023-04-20 14:41:25,132 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:25,171 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *******************************************************
2023-04-20 14:41:26,016 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:26,042 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] ************************************************************
2023-04-20 14:41:26,058 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:26,084 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 14:41:26,161 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:26,188 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:41:26,207 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:26,235 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 14:41:26,275 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:26,313 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 14:41:26,339 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 14:41:26,342 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 14:41:26,344 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 14:41:26,346 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:26,371 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] ***********************************************
2023-04-20 14:41:26,442 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:26,485 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] ***************************************************
2023-04-20 14:41:27,272 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:27,298 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] ************************************************************
2023-04-20 14:41:27,315 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:27,341 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] **************************************************************
2023-04-20 14:41:27,468 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:27,494 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:41:27,512 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:27,539 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] *****************************************************
2023-04-20 14:41:27,580 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:27,620 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] ****************************************************
2023-04-20 14:41:27,648 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-20 14:41:27,651 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-20 14:41:27,653 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-20 14:41:27,655 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:27,714 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] ***********************************************************
2023-04-20 14:41:27,730 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:27,755 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ********************************************************************
2023-04-20 14:41:28,600 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:28,625 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *******************************************************
2023-04-20 14:41:28,644 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:28,670 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ******************************************************
2023-04-20 14:41:28,687 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:28,717 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] **********************************************************************
2023-04-20 14:41:29,168 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:29,195 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *********************************************************************
2023-04-20 14:41:29,243 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:29,284 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] *************************************************************************
2023-04-20 14:41:29,472 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:29,499 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] ***********************************************************************
2023-04-20 14:41:29,523 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:29,553 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] *****************************************************
2023-04-20 14:41:29,854 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:29,880 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] **************************************************
2023-04-20 14:41:29,898 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:29,926 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] *************************************************
2023-04-20 14:41:30,270 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:30,296 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] ****************************************************
2023-04-20 14:41:30,614 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:30,663 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-20 14:41:30,978 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:31,005 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-20 14:41:31,870 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:31,920 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-20 14:41:31,941 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-20 14:41:31,966 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-20 14:41:32,018 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:32,045 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-20 14:41:32,081 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:32,107 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-20 14:41:32,140 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-20 14:41:32,150 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-20 14:41:32,157 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-20 14:41:32,165 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-20 14:41:32,171 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-20 14:41:32,180 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-20 14:41:32,187 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-20 14:41:32,197 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-20 14:41:32,204 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-20 14:41:32,239 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-20 14:41:32,320 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-20 14:41:32,355 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-20 14:41:32,400 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-20 14:41:32,434 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-20 14:41:32,436 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:32,462 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-20 14:41:32,552 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-20 14:41:32,597 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-20 14:41:32,646 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-20 14:41:32,674 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-20 14:41:32,741 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:32,785 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-20 14:41:32,891 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:32,918 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-20 14:41:33,504 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:33,534 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-20 14:41:33,646 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:33,676 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-20 14:41:34,021 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:41:34,191 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 14:41:34,259 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-20 14:41:34,458 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:41:34,633 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-20 14:41:34,665 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-20 14:41:34,751 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:34,778 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-20 14:41:34,797 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:34,823 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-20 14:41:34,868 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:34,913 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-20 14:41:35,296 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:35,323 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-20 14:41:35,727 p=622553 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 14:41:35,729 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-20 14:41:36,079 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-20 14:41:36,427 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-20 14:41:36,796 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-20 14:41:37,116 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-20 14:41:37,146 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-20 14:41:37,530 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-20 14:41:37,876 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 14:41:38,204 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-20 14:41:38,530 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-20 14:41:38,872 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-20 14:41:39,185 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-20 14:41:39,522 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-20 14:41:39,850 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-20 14:41:40,208 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-20 14:41:40,548 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-20 14:41:40,578 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-20 14:41:40,655 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:40,704 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-20 14:41:42,035 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:42,061 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-20 14:41:42,177 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:42,206 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 14:41:44,063 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:44,092 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 14:41:46,012 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:46,040 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-20 14:41:46,144 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:46,170 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-20 14:41:46,189 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:46,217 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-20 14:41:46,234 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:46,261 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-20 14:41:46,327 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:46,389 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 14:41:46,524 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:46,567 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-20 14:41:47,049 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:47,076 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-20 14:41:47,307 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:47,333 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-20 14:41:47,877 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-20 14:41:48,361 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-20 14:41:48,845 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/error_reports.yml', 'dest': '/srv/galaxy/config/error_reports_file.yml'})
2023-04-20 14:41:48,874 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-20 14:41:49,404 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-20 14:41:49,431 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-20 14:41:49,976 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-20 14:41:50,453 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-20 14:41:50,972 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-20 14:41:51,463 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-20 14:41:51,492 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-20 14:41:52,055 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-20 14:41:52,990 p=622553 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/local_tools/job_properties.xml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/tools/job_properties.xml[0m
[0;32m[0m[0;36m@@ -33,33 +33,44 @@[0m
[0;36m[0m 															        <data name="out_file1" format="txt" />
 																        <collection name="list_output" type="list" label="A list output">
 																	            <data name="one" format="txt" />
[0;31m-																		                    <has_line line="The bool is true" />[0m
[0;31m[0m[0;31m-																				                </assert_stdout>[0m
[0;31m[0m[0;31m-																						            <assert_stderr>[0m
[0;31m[0m[0;31m-																							                    <has_line line="The bool is really true" />[0m
[0;31m[0m[0;31m-																									                </assert_stderr>[0m
[0;31m[0m[0;31m-																											            <assert_command_version>[0m
[0;31m[0m[0;31m-																												                    <has_text text="v1.1" />[0m
[0;31m[0m[0;31m-																														                </assert_command_version>[0m
[0;31m[0m[0;31m-																																        </test>[0m
[0;31m[0m[0;31m-																																	        <test expect_exit_code="2">[0m
[0;31m[0m[0;31m-																																		            <param name="thebool" value="false" />[0m
[0;31m[0m[0;31m-																																			                <output name="out_file1" file="simple_line_alternative.txt" />[0m
[0;31m[0m[0;31m-																																					            <assert_command>[0m
[0;31m[0m[0;31m-																																						                    <has_text text="very not" />[0m
[0;31m[0m[0;31m-																																								                </assert_command>[0m
[0;31m[0m[0;31m-																																										            <assert_stdout>[0m
[0;31m[0m[0;31m-																																											                    <has_line line="The bool is not true" />[0m
[0;31m[0m[0;31m-																																													                </assert_stdout>[0m
[0;31m[0m[0;31m-																																															            <assert_stderr>[0m
[0;31m[0m[0;31m-																																																                    <has_line line="The bool is very not true" />[0m
[0;31m[0m[0;31m-																																																		                </assert_stderr>[0m
[0;31m[0m[0;31m-																																																				        </test>[0m
[0;31m[0m[0;31m-																																																					        <test expect_exit_code="127" expect_failure="true">[0m
[0;31m[0m[0;31m-																																																						            <param name="thebool" value="true" />[0m
[0;31m[0m[0;31m-																																																							                <param name="failbool" value="true" />[0m
[0;31m[0m[0;31m-																																																									        </test>[0m
[0;31m[0m[0;31m-																																																										    </tests>[0m
[0;31m[0m[0;31m-																																																										        <help>[0m
[0;31m[0m[0;31m-																																																											    </help>[0m
[0;31m[0m[0;31m-																																																											    </tool>[0m
[0;31m[0m[0;32m+																		                <data name="two" format="txt" />[0m
[0;32m[0m[0;32m+																				        </collection>[0m
[0;32m[0m[0;32m+																					    </outputs>[0m
[0;32m[0m[0;32m+																					        <tests>[0m
[0;32m[0m[0;32m+																						        <test expect_exit_code="0">[0m
[0;32m[0m[0;32m+																							            <param name="thebool" value="true" />[0m
[0;32m[0m[0;32m+																								                <output name="out_file1" file="simple_line.txt" />[0m
[0;32m[0m[0;32m+																										            <assert_command>[0m
[0;32m[0m[0;32m+																											                    <has_text text="really" />[0m
[0;32m[0m[0;32m+																													                </assert_command>[0m
[0;32m[0m[0;32m+																															            <assert_stdout>[0m
[0;32m[0m[0;32m+																																                    <has_line line="The bool is true" />[0m
[0;32m[0m[0;32m+																																		                </assert_stdout>[0m
[0;32m[0m[0;32m+																																				            <assert_stderr>[0m
[0;32m[0m[0;32m+																																					                    <has_line line="The bool is really true" />[0m
[0;32m[0m[0;32m+																																							                </assert_stderr>[0m
[0;32m[0m[0;32m+																																									            <assert_command_version>[0m
[0;32m[0m[0;32m+																																										                    <has_text text="v1.1" />[0m
[0;32m[0m[0;32m+																																												                </assert_command_version>[0m
[0;32m[0m[0;32m+																																														        </test>[0m
[0;32m[0m[0;32m+																																															        <test expect_exit_code="2">[0m
[0;32m[0m[0;32m+																																																            <param name="thebool" value="false" />[0m
[0;32m[0m[0;32m+																																																	                <output name="out_file1" file="simple_line_alternative.txt" />[0m
[0;32m[0m[0;32m+																																																			            <assert_command>[0m
[0;32m[0m[0;32m+																																																				                    <has_text text="very not" />[0m
[0;32m[0m[0;32m+																																																						                </assert_command>[0m
[0;32m[0m[0;32m+																																																								            <assert_stdout>[0m
[0;32m[0m[0;32m+																																																									                    <has_line line="The bool is not true" />[0m
[0;32m[0m[0;32m+																																																											                </assert_stdout>[0m
[0;32m[0m[0;32m+																																																													            <assert_stderr>[0m
[0;32m[0m[0;32m+																																																														                    <has_line line="The bool is very not true" />[0m
[0;32m[0m[0;32m+																																																																                </assert_stderr>[0m
[0;32m[0m[0;32m+																																																																		        </test>[0m
[0;32m[0m[0;32m+																																																																			        <test expect_exit_code="127" expect_failure="true">[0m
[0;32m[0m[0;32m+																																																																				            <param name="thebool" value="true" />[0m
[0;32m[0m[0;32m+																																																																					                <param name="failbool" value="true" />[0m
[0;32m[0m[0;32m+																																																																							        </test>[0m
[0;32m[0m[0;32m+																																																																								    </tests>[0m
[0;32m[0m[0;32m+																																																																								        <help>[0m
[0;32m[0m[0;32m+																																																																									    </help>[0m
[0;32m[0m[0;32m+																																																																									    </tool>[0m
[0;32m[0m

2023-04-20 14:41:52,992 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=job_properties.xml)
2023-04-20 14:41:53,020 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-20 14:41:53,535 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:53,561 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-20 14:41:53,762 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:53,787 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-20 14:41:53,892 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:53,918 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-20 14:41:53,934 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:53,959 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-20 14:41:53,973 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:53,999 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-20 14:41:54,014 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:54,040 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-20 14:41:54,056 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:54,083 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-20 14:41:54,655 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:54,685 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-20 14:41:54,801 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:54,830 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-20 14:41:54,941 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:41:54,969 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-20 14:41:55,576 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:55,602 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-20 14:41:55,666 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-20 14:41:55,737 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-20 14:41:57,505 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:57,535 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-20 14:41:59,512 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:41:59,542 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-20 14:42:04,949 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:04,978 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-20 14:42:05,654 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:05,680 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-20 14:42:07,486 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:07,512 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-20 14:42:09,199 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:09,227 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-20 14:42:09,285 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:09,346 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-20 14:42:09,498 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:09,524 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-20 14:42:10,051 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-20 14:42:10,082 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-20 14:42:10,554 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-20 14:42:10,867 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-20 14:42:10,895 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-20 14:42:11,293 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-20 14:42:11,618 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-20 14:42:11,647 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-20 14:42:11,693 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:11,759 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-20 14:42:13,244 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:13,270 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-20 14:42:14,687 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:14,714 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-20 14:42:14,836 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:14,866 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-20 14:42:14,989 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:15,020 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-20 14:42:15,108 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:15,181 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-20 14:42:15,548 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:15,574 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-20 14:42:15,937 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:15,966 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-20 14:42:16,325 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:16,352 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-20 14:42:16,722 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:16,752 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 14:42:16,938 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:16,964 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-20 14:42:17,160 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:17,188 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-20 14:42:17,295 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:17,323 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-20 14:42:17,432 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:17,460 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-20 14:42:17,567 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:17,594 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-20 14:42:17,709 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:17,736 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-20 14:42:17,840 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:17,866 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-20 14:42:17,969 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:17,996 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-20 14:42:18,102 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:18,131 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-20 14:42:18,244 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:18,270 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-20 14:42:18,285 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:18,311 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-20 14:42:18,360 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:18,439 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-20 14:42:18,542 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:18,609 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-20 14:42:19,269 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:19,296 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-20 14:42:19,317 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:19,343 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-20 14:42:19,359 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:19,385 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-20 14:42:19,427 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:19,496 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-20 14:42:19,921 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:19,946 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-20 14:42:20,052 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:20,110 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] ***********************************************************
2023-04-20 14:42:20,284 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:20,311 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] ****************************************************
2023-04-20 14:42:20,657 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:20,686 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] *************************************************
2023-04-20 14:42:23,366 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:42:23,416 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-20 14:42:23,597 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:23,624 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-20 14:42:23,641 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:23,667 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-20 14:42:24,047 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,072 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-20 14:42:24,108 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,136 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-20 14:42:24,154 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,180 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-20 14:42:24,198 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,227 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-20 14:42:24,253 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,282 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-20 14:42:24,307 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,333 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-20 14:42:24,349 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,400 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] ************************************************************
2023-04-20 14:42:24,420 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,446 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *********************************************************************
2023-04-20 14:42:24,473 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,503 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] ****************************************************
2023-04-20 14:42:24,695 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:24,722 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] ***************************************************************
2023-04-20 14:42:25,068 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:25,094 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:42:25,110 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:25,139 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:42:25,188 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:25,228 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] ****************************************************************
2023-04-20 14:42:26,035 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:26,062 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] *****************************************************************************
2023-04-20 14:42:26,078 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:26,104 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] **********************************************
2023-04-20 14:42:26,408 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:26,456 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *********************************************************************
2023-04-20 14:42:26,755 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:26,781 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] **********************************************************************
2023-04-20 14:42:26,988 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:27,014 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *******************************************************
2023-04-20 14:42:27,272 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:27,300 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *********************************************************************
2023-04-20 14:42:27,330 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:27,356 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] *************************************************************
2023-04-20 14:42:27,527 p=622553 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1682001228.3756013[0m
[0;31m[0m[0;31m-mtime: 1682001359.7983406[0m
[0;31m[0m[0;32m+atime: 1682001747.5035076[0m
[0;32m[0m[0;32m+mtime: 1682001747.5035076[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-20 14:42:27,527 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:42:27,553 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] **********************************************************
2023-04-20 14:42:27,728 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:27,754 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] *****************************************************
2023-04-20 14:42:28,579 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:28,606 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] **********************************************************************
2023-04-20 14:42:29,698 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:29,724 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] ************************************************************
2023-04-20 14:42:29,892 p=622553 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-20 14:42:29,892 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:42:29,918 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] ***********************************************
2023-04-20 14:42:31,428 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:31,455 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *********************************************
2023-04-20 14:42:31,788 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:31,814 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *******************************************************
2023-04-20 14:42:32,176 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:32,202 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] ***************************************************************************
2023-04-20 14:42:32,799 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:32,855 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:42:32,898 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:32,936 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-20 14:42:33,756 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:33,782 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-20 14:42:33,954 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:33,981 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:42:33,996 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,022 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:42:34,038 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,064 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-20 14:42:34,236 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,264 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-20 14:42:34,297 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,322 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-20 14:42:34,353 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,379 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-20 14:42:34,394 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,421 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-20 14:42:34,435 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,461 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-20 14:42:34,475 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,501 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-20 14:42:34,532 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,557 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-20 14:42:34,909 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,935 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-20 14:42:34,967 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:34,993 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-20 14:42:35,355 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 14:42:35,384 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-20 14:42:35,572 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-20 14:42:35,599 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-20 14:42:35,803 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:35,829 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-20 14:42:35,918 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:35,957 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-20 14:42:36,005 p=622553 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-20 14:42:36,253 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-20 14:42:36,298 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:36,344 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-20 14:42:37,210 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:37,237 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-20 14:42:37,256 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:37,284 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-20 14:42:37,307 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:37,340 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-20 14:42:37,357 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:37,386 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-20 14:42:37,404 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:37,430 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-20 14:42:37,477 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:37,548 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-20 14:42:42,605 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:42,635 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-20 14:42:42,661 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:42,694 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-20 14:42:42,726 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:42,756 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-20 14:42:42,972 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:42,998 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-20 14:42:43,023 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-20 14:42:43,048 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-20 14:42:43,097 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:43,146 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-20 14:42:43,166 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:43,193 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-20 14:42:43,579 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:43,604 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-20 14:42:43,655 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-20 14:42:43,703 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:43,761 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-20 14:42:43,976 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:44,028 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-20 14:42:44,199 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:44,225 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-20 14:42:44,604 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:44,632 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-20 14:42:44,823 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:44,863 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-20 14:42:45,165 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:45,192 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-20 14:42:45,241 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:45,284 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-20 14:42:45,671 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:42:45,986 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-20 14:42:46,014 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-20 14:42:46,207 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-20 14:42:46,369 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-20 14:42:46,403 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-20 14:42:46,607 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:46,634 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-20 14:42:46,654 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:46,681 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-20 14:42:46,974 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:47,025 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *******************************************************************
2023-04-20 14:42:47,048 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:47,074 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:42:47,089 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:47,114 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:42:47,163 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:47,248 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] *****************************************
2023-04-20 14:42:47,839 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:47,865 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *******************************************************
2023-04-20 14:42:48,685 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:48,716 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-20 14:42:48,733 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:48,761 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***********************
2023-04-20 14:42:49,537 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:49,565 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] **********************************************************************
2023-04-20 14:42:49,993 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:50,020 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***********************************
2023-04-20 14:42:50,048 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:50,073 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] **************************
2023-04-20 14:42:50,103 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:50,130 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *******************************************************************
2023-04-20 14:42:50,453 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:50,480 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] *****************************************************************
2023-04-20 14:42:50,499 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:50,530 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] *****************************************
2023-04-20 14:42:51,372 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:51,398 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] ***********************************************************
2023-04-20 14:42:51,428 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:51,454 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***********************************
2023-04-20 14:42:51,483 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:51,510 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] ****************************************************
2023-04-20 14:42:51,543 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:51,571 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *********************************************************
2023-04-20 14:42:51,609 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:51,639 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ********************************************
2023-04-20 14:42:51,962 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:51,987 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ****************************
2023-04-20 14:42:52,034 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:42:52,092 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:52,142 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] ****************************************************
2023-04-20 14:42:52,373 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:52,401 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *********************************************************************************
2023-04-20 14:42:52,452 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:52,478 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ********************************
2023-04-20 14:42:52,513 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:52,539 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] **************************************************
2023-04-20 14:42:52,592 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:52,619 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ******************************************************
2023-04-20 14:42:52,653 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:52,679 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] *********************************
2023-04-20 14:42:52,693 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:52,722 p=622553 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] ****************************************************************************
2023-04-20 14:42:52,741 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:52,798 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:42:52,862 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:52,911 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] ************************************************************************
2023-04-20 14:42:52,937 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:52,962 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] *****************************************************************************
2023-04-20 14:42:52,982 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:53,009 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] *********************************
2023-04-20 14:42:53,025 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:53,050 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***************************************
2023-04-20 14:42:53,234 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:53,260 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ******************************************************************
2023-04-20 14:42:53,650 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-20 14:42:54,249 p=622553 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-622553orq_nw27/tmpkvupt8ea/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-uTWDdhl5drCAQToV[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+2LzpFgqh78rBpdmk[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-20 14:42:54,251 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-20 14:42:54,285 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:42:54,331 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-20 14:42:54,376 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ****************************************
2023-04-20 14:42:54,427 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:54,457 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *******************************************
2023-04-20 14:42:54,473 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:42:54,505 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ******************************************************
2023-04-20 14:42:55,233 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:42:55,263 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] *****************
2023-04-20 14:42:55,281 p=622553 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-20 14:42:55,282 p=622553 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-20 14:43:15,284 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:15,313 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *******************************************************************
2023-04-20 14:43:15,355 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-20 14:43:15,396 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] ***************************************************************
2023-04-20 14:43:16,723 p=622553 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-20 14:43:16,723 p=622553 u=ubuntu n=ansible | ...ignoring
2023-04-20 14:43:16,752 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ******************************************************************
2023-04-20 14:43:20,585 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-20 14:43:20,612 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *********************************************************
2023-04-20 14:43:20,684 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-20 14:43:20,704 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-20 14:43:20,723 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-20 14:43:20,742 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-20 14:43:20,787 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:43:21,893 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:21,920 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:43:23,033 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:23,061 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:43:23,077 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:23,103 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:43:23,118 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:23,144 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:43:24,180 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:24,207 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:43:25,308 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:25,335 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:43:26,328 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:26,355 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:43:27,365 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:27,394 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:43:27,410 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:27,436 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:43:27,453 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:27,482 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:43:28,574 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:28,604 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:43:28,625 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:28,652 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:43:29,666 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:29,692 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:43:30,829 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:30,856 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:43:30,873 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:30,900 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:43:30,916 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:30,942 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:43:32,017 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:32,044 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:43:32,064 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:32,092 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *******************************************************************
2023-04-20 14:43:33,265 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:33,292 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] *************************************************************
2023-04-20 14:43:34,322 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:34,348 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:43:34,365 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:34,393 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ********************************************
2023-04-20 14:43:34,409 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:34,437 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *********************************************************
2023-04-20 14:43:35,523 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:35,549 p=622553 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] ****************************************************************
2023-04-20 14:43:36,637 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:43:36,687 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] ***************************************************************************
2023-04-20 14:43:36,898 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:36,926 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ********************************************************************
2023-04-20 14:43:37,165 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:37,200 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] **********************************************************
2023-04-20 14:43:37,388 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:37,414 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] ***********************************************************************
2023-04-20 14:43:38,382 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:38,407 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *********************************************************************
2023-04-20 14:43:38,737 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:38,765 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] **************************************************************
2023-04-20 14:43:40,389 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:40,416 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] ***************************************************
2023-04-20 14:43:40,600 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:40,628 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] ****************************************************************************
2023-04-20 14:43:41,021 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:41,049 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] *****************************************************************
2023-04-20 14:43:41,223 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:41,250 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] ***************************************************************
2023-04-20 14:43:41,441 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:41,468 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] **************************************************************
2023-04-20 14:43:41,812 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:41,838 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] *************************************************************************
2023-04-20 14:43:42,170 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:42,199 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] ************************************************************************
2023-04-20 14:43:42,216 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:42,244 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] *************************************************************
2023-04-20 14:43:42,864 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:42,890 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] ***************************************************
2023-04-20 14:43:43,060 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:43,087 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *******************************************************************
2023-04-20 14:43:43,620 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:43,647 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] *************************************************************
2023-04-20 14:43:43,686 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-20 14:43:43,693 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-20 14:43:43,700 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-20 14:43:43,708 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-20 14:43:43,715 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-20 14:43:43,722 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-20 14:43:43,729 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-20 14:43:43,737 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-20 14:43:43,744 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-20 14:43:43,752 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-20 14:43:43,759 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-20 14:43:43,763 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-20 14:43:43,766 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:43,794 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] ***************************************************************
2023-04-20 14:43:43,815 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:43,842 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] ************************************************************
2023-04-20 14:43:44,206 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-20 14:43:44,538 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-20 14:43:44,881 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-20 14:43:45,231 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-20 14:43:45,562 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-20 14:43:45,911 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-20 14:43:46,244 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-20 14:43:46,565 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-20 14:43:46,889 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-20 14:43:47,231 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-20 14:43:47,552 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-20 14:43:47,877 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-20 14:43:47,908 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] **************************************************************
2023-04-20 14:43:48,722 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:48,749 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ****
2023-04-20 14:43:48,954 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:49,003 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-20 14:43:49,631 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:49,657 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-20 14:43:49,853 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:49,879 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-20 14:43:49,895 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:49,921 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-20 14:43:50,116 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:50,144 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-20 14:43:50,320 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:50,347 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-20 14:43:50,521 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:50,549 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-20 14:43:50,729 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:50,758 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-20 14:43:51,055 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:51,104 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-20 14:43:51,140 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:51,167 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-20 14:43:51,208 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:51,234 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-20 14:43:51,248 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:51,278 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-20 14:43:51,317 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:51,343 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-20 14:43:51,441 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-20 14:43:51,504 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-20 14:43:51,625 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:43:51,664 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-20 14:43:52,478 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:52,505 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-20 14:43:53,171 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:53,203 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:43:53,234 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:53,264 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:43:53,582 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:53,608 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-20 14:43:53,625 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:53,652 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-20 14:43:54,447 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:54,472 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-20 14:43:54,515 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-20 14:43:54,561 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-20 14:43:54,769 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-20 14:43:54,797 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-20 14:43:55,150 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-20 14:43:55,177 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-20 14:43:55,452 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:55,478 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-20 14:43:55,778 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:55,805 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-20 14:43:55,823 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:55,850 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-20 14:43:56,186 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:56,213 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-20 14:43:56,579 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:56,605 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-20 14:43:56,788 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:56,814 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-20 14:43:56,829 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:56,854 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-20 14:43:57,205 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:57,231 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-20 14:43:57,275 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-20 14:43:57,320 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-20 14:43:57,334 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:57,363 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-20 14:43:57,389 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:57,415 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-20 14:43:57,442 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:57,470 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-20 14:43:57,655 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:57,682 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-20 14:43:57,711 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:57,737 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-20 14:43:57,917 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:57,945 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-20 14:43:57,974 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,001 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-20 14:43:58,017 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,042 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-20 14:43:58,058 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,085 p=622553 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-20 14:43:58,100 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,151 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] ************************************************************************
2023-04-20 14:43:58,168 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,195 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] ************************************************************************
2023-04-20 14:43:58,249 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-20 14:43:58,320 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] *****************************************************
2023-04-20 14:43:58,337 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,369 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] *************************************************
2023-04-20 14:43:58,389 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,415 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] *****************************
2023-04-20 14:43:58,434 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,461 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ******************************
2023-04-20 14:43:58,477 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,510 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***************************
2023-04-20 14:43:58,711 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,739 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] *****************************************************
2023-04-20 14:43:58,756 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,783 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *******************************************************
2023-04-20 14:43:58,835 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:58,862 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] *************************************
2023-04-20 14:43:59,130 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:59,156 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] ************************************************
2023-04-20 14:43:59,208 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:43:59,237 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ********************************************************
2023-04-20 14:43:59,560 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:59,590 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ******************************************
2023-04-20 14:43:59,646 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:43:59,674 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *********************************************
2023-04-20 14:44:00,029 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:44:00,058 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *********************************************************
2023-04-20 14:44:00,089 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:00,116 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 14:44:02,273 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:44:02,301 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] *************************************************
2023-04-20 14:44:04,612 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:44:04,638 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] **********************************************
2023-04-20 14:44:04,655 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:04,683 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] ***********************************************
2023-04-20 14:44:04,699 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:04,726 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] **************************************
2023-04-20 14:44:04,744 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:04,770 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] **************************************************************************
2023-04-20 14:44:04,786 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:04,813 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] ***********************************************************************
2023-04-20 14:44:04,830 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:04,860 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] *************************************************************************
2023-04-20 14:44:04,876 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:04,902 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] ****************************************************************************
2023-04-20 14:44:04,918 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:04,944 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] ***********************************************************************
2023-04-20 14:44:05,003 p=622553 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-20 14:44:05,088 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] ***********************************************************************
2023-04-20 14:44:05,106 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:05,135 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] **************************************************************************
2023-04-20 14:44:05,152 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:05,178 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] ****************************************************
2023-04-20 14:44:05,195 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:05,222 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] **************************************************
2023-04-20 14:44:05,239 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:05,268 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] *************************************************
2023-04-20 14:44:05,844 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:44:05,871 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] *****************************
2023-04-20 14:44:05,887 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:05,913 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ********************************************************
2023-04-20 14:44:05,930 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:05,956 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ********************************************************
2023-04-20 14:44:05,974 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:06,004 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] **************************************************************
2023-04-20 14:44:06,502 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-20 14:44:06,533 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] ************************************************************
2023-04-20 14:44:06,586 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-20 14:44:06,589 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:06,627 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] ************************************************
2023-04-20 14:44:06,676 p=622553 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *******************************************************
2023-04-20 14:44:13,614 p=622553 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-20 14:44:13,642 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] ****************************************************
2023-04-20 14:44:13,973 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,003 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ********************************************************
2023-04-20 14:44:14,021 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,048 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ********************************************************************
2023-04-20 14:44:14,064 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,100 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ********************************************************************
2023-04-20 14:44:14,118 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,147 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] ************************************************
2023-04-20 14:44:14,165 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,194 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] **************************************************************
2023-04-20 14:44:14,214 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,242 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] **************************************************************
2023-04-20 14:44:14,262 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,292 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] **************************************************
2023-04-20 14:44:14,309 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,338 p=622553 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] ****************************************************
2023-04-20 14:44:14,358 p=622553 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,463 p=622553 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-20 14:44:14,666 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:44:14,693 p=622553 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *******************************************************************************************
2023-04-20 14:44:15,706 p=622553 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-20 14:44:15,764 p=622553 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-20 14:44:15,765 p=622553 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=269  changed=23   unreachable=0    failed=0    skipped=164  rescued=0    ignored=1   
2023-04-21 06:32:38,739 p=1085914 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-21 06:32:38,946 p=1085914 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-21 06:32:38,965 p=1085914 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-21 06:32:40,543 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:40,557 p=1085914 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-21 06:32:41,554 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:41,590 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 06:32:41,623 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-21 06:32:41,639 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-21 06:32:41,666 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:41,680 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-21 06:32:41,704 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:41,718 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-21 06:32:41,741 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:41,754 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-21 06:32:42,558 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:42,570 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-21 06:32:42,893 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:42,906 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-21 06:32:42,954 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:42,967 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-21 06:32:43,781 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:43,794 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-21 06:32:43,822 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:43,835 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-21 06:32:43,870 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:43,882 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-21 06:32:43,909 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:43,922 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-21 06:32:43,952 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:43,969 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 06:32:43,983 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:43,999 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-21 06:32:44,297 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:44,309 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-21 06:32:44,625 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:44,639 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-21 06:32:44,662 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:44,676 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-21 06:32:44,856 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:44,869 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-21 06:32:45,346 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:45,359 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-21 06:32:45,738 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:45,752 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 06:32:45,793 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-21 06:32:45,811 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-21 06:32:46,010 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-21 06:32:46,179 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-21 06:32:46,194 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-21 06:32:46,372 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:46,389 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-21 06:32:46,745 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-21 06:32:46,760 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-21 06:32:47,144 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-21 06:32:47,159 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-21 06:32:47,522 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:47,535 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-21 06:32:47,840 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:47,853 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-21 06:32:48,029 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:48,042 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-21 06:32:48,550 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:48,574 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-21 06:32:48,604 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-21 06:32:48,607 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-21 06:32:48,609 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:48,623 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-21 06:32:48,663 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-21 06:32:48,674 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-21 06:32:48,684 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-21 06:32:48,692 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-21 06:32:48,694 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:48,707 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-21 06:32:48,742 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-21 06:32:48,745 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:48,757 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-21 06:32:49,179 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 06:32:49,403 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 06:32:49,418 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-21 06:32:49,430 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:49,445 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-21 06:32:49,474 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:49,487 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-21 06:32:49,499 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:49,512 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-21 06:32:49,922 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 06:32:49,939 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-21 06:32:50,382 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 06:32:50,759 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 06:32:51,058 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 06:32:51,327 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 06:32:51,434 p=1085914 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-21 06:32:51,516 p=1085914 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-21 06:32:52,970 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:52,995 p=1085914 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-21 06:32:53,835 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:53,862 p=1085914 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-21 06:32:53,876 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:53,907 p=1085914 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-21 06:32:54,715 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:54,741 p=1085914 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-21 06:32:55,517 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:55,593 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-21 06:32:56,177 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:56,208 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-21 06:32:56,230 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:56,256 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-21 06:32:56,707 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:56,733 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-21 06:32:56,923 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:56,950 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-21 06:32:57,006 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,037 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-21 06:32:57,053 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,080 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-21 06:32:57,096 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,123 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-21 06:32:57,139 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,166 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-21 06:32:57,183 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,215 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-21 06:32:57,234 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,260 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-21 06:32:57,306 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-21 06:32:57,348 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-21 06:32:57,363 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,390 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-21 06:32:57,437 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-21 06:32:57,452 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,508 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-21 06:32:57,964 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:57,989 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-21 06:32:58,004 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:58,030 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-21 06:32:58,050 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:58,077 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-21 06:32:58,096 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:58,147 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-21 06:32:58,164 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:58,190 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-21 06:32:58,260 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-21 06:32:58,300 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-21 06:32:59,083 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:32:59,109 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-21 06:32:59,129 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:59,159 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-21 06:32:59,236 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:59,265 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 06:32:59,281 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:59,308 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-21 06:32:59,349 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-21 06:32:59,392 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-21 06:32:59,417 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-21 06:32:59,421 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-21 06:32:59,423 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-21 06:32:59,425 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:32:59,452 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-21 06:32:59,525 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-21 06:32:59,566 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-21 06:33:00,395 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:00,422 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-21 06:33:00,440 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:00,469 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-21 06:33:00,544 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:00,570 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 06:33:00,586 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:00,615 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-21 06:33:00,660 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:00,699 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-21 06:33:00,723 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-21 06:33:00,727 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-21 06:33:00,729 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-21 06:33:00,731 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:00,759 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-21 06:33:00,774 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:00,801 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-21 06:33:01,609 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:01,635 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 06:33:01,658 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:01,684 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-21 06:33:01,702 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:01,730 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-21 06:33:02,199 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:02,224 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-21 06:33:02,269 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:02,308 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-21 06:33:02,483 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:02,510 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-21 06:33:02,534 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:02,560 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-21 06:33:02,863 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:02,889 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-21 06:33:02,907 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:02,933 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-21 06:33:03,231 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:03,257 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-21 06:33:03,561 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:03,610 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-21 06:33:03,957 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:03,988 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-21 06:33:04,848 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:04,898 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-21 06:33:04,921 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-21 06:33:04,948 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-21 06:33:05,045 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:05,071 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-21 06:33:05,110 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:05,137 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-21 06:33:05,173 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-21 06:33:05,180 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-21 06:33:05,187 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-21 06:33:05,195 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-21 06:33:05,205 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-21 06:33:05,216 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-21 06:33:05,223 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-21 06:33:05,227 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-21 06:33:05,230 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-21 06:33:05,259 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-21 06:33:05,330 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-21 06:33:05,365 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-21 06:33:05,401 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-21 06:33:05,434 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-21 06:33:05,436 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:05,462 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-21 06:33:05,545 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-21 06:33:05,592 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-21 06:33:05,634 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-21 06:33:05,663 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-21 06:33:05,728 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:05,772 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-21 06:33:05,885 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:05,913 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-21 06:33:06,566 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:06,593 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-21 06:33:06,704 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:06,730 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-21 06:33:07,084 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 06:33:07,242 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-21 06:33:07,271 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-21 06:33:07,471 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 06:33:07,634 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-21 06:33:07,664 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-21 06:33:07,748 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:07,773 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-21 06:33:07,792 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:07,817 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-21 06:33:07,865 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:07,909 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-21 06:33:08,257 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:08,283 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-21 06:33:08,655 p=1085914 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-21 06:33:08,658 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-21 06:33:08,989 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-21 06:33:09,337 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-21 06:33:09,666 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-21 06:33:10,015 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-21 06:33:10,044 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-21 06:33:10,415 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-21 06:33:10,751 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-21 06:33:11,071 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-21 06:33:11,398 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-21 06:33:11,724 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-21 06:33:12,044 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-21 06:33:12,354 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-21 06:33:12,679 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-21 06:33:13,001 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-21 06:33:13,330 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-21 06:33:13,360 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-21 06:33:13,439 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:13,489 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-21 06:33:14,935 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:14,969 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-21 06:33:15,076 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:15,103 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-21 06:33:17,102 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:17,129 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-21 06:33:19,083 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:19,108 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-21 06:33:19,216 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:19,242 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-21 06:33:19,258 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:19,284 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-21 06:33:19,299 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:19,325 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-21 06:33:19,397 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:19,449 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-21 06:33:19,585 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:19,630 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-21 06:33:20,100 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:20,127 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-21 06:33:20,327 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:20,353 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-21 06:33:20,883 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-21 06:33:21,351 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-21 06:33:21,816 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/error_reports.yml', 'dest': '/srv/galaxy/config/error_reports_file.yml'})
2023-04-21 06:33:21,844 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-21 06:33:22,347 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-21 06:33:22,377 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-21 06:33:22,954 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-21 06:33:23,432 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-21 06:33:23,920 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-21 06:33:24,443 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-21 06:33:24,473 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-21 06:33:24,976 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-21 06:33:25,456 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_properties.xml)
2023-04-21 06:33:25,485 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-21 06:33:25,993 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:26,023 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-21 06:33:26,216 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:26,243 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-21 06:33:26,345 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:26,371 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-21 06:33:26,387 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:26,415 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-21 06:33:26,430 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:26,457 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-21 06:33:26,473 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:26,502 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-21 06:33:26,520 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:26,546 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-21 06:33:27,083 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:27,108 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-21 06:33:27,212 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:27,240 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-21 06:33:27,344 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:27,370 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-21 06:33:28,031 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:28,056 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-21 06:33:28,163 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:28,219 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-21 06:33:29,938 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:29,971 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-21 06:33:31,898 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:31,925 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-21 06:33:37,346 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:37,376 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-21 06:33:38,046 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:38,075 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-21 06:33:39,858 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:39,885 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-21 06:33:41,599 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:41,625 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-21 06:33:41,682 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:41,742 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-21 06:33:41,850 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:41,876 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-21 06:33:42,403 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-21 06:33:42,435 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-21 06:33:42,924 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-21 06:33:43,265 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-21 06:33:43,293 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-21 06:33:43,715 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-21 06:33:44,036 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-21 06:33:44,065 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-21 06:33:44,120 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:44,189 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-21 06:33:45,941 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:45,975 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-21 06:33:47,358 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:47,386 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-21 06:33:47,492 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:47,518 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-21 06:33:47,626 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:47,658 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-21 06:33:47,742 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:47,807 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-21 06:33:48,150 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:48,175 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-21 06:33:48,516 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:48,544 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-21 06:33:48,902 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:48,929 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-21 06:33:49,299 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:49,326 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-21 06:33:49,514 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:49,541 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-21 06:33:49,723 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:49,751 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-21 06:33:49,856 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:49,883 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-21 06:33:49,986 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:50,019 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-21 06:33:50,128 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:50,155 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-21 06:33:50,266 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:50,293 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-21 06:33:50,400 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:50,426 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-21 06:33:50,537 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:50,563 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-21 06:33:50,667 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:50,694 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-21 06:33:50,803 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:50,829 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-21 06:33:50,845 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:50,872 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-21 06:33:50,922 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:51,003 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-21 06:33:51,116 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:51,144 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-21 06:33:51,779 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:51,806 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-21 06:33:51,828 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:51,855 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-21 06:33:51,870 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:51,897 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-21 06:33:51,944 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:52,012 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-21 06:33:52,452 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:52,484 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-21 06:33:52,602 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:52,652 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] *********************
2023-04-21 06:33:52,837 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:52,865 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] **************
2023-04-21 06:33:53,197 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:53,223 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] ***********
2023-04-21 06:33:56,145 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:33:56,194 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-21 06:33:56,376 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:56,401 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-21 06:33:56,418 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:56,448 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-21 06:33:56,899 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:56,924 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-21 06:33:56,964 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:56,991 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-21 06:33:57,007 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,035 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-21 06:33:57,051 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,077 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-21 06:33:57,103 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,130 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-21 06:33:57,155 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,180 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-21 06:33:57,195 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,249 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] **********************
2023-04-21 06:33:57,268 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,294 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *******************************
2023-04-21 06:33:57,323 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,350 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] **************
2023-04-21 06:33:57,556 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,581 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] *************************
2023-04-21 06:33:57,925 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,952 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 06:33:57,970 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:57,997 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 06:33:58,040 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-21 06:33:58,083 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] **************************
2023-04-21 06:33:58,889 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:58,915 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 06:33:58,931 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:33:58,958 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] ********
2023-04-21 06:33:59,248 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:59,300 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *******************************
2023-04-21 06:33:59,600 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:59,625 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] ********************************
2023-04-21 06:33:59,853 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:33:59,880 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *****************
2023-04-21 06:34:00,198 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:00,225 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *******************************
2023-04-21 06:34:00,258 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:00,284 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] ***********************
2023-04-21 06:34:00,460 p=1085914 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1682001747.5026999[0m
[0;31m[0m[0;31m-mtime: 1682001861.9536397[0m
[0;31m[0m[0;32m+atime: 1682058840.4350426[0m
[0;32m[0m[0;32m+mtime: 1682058840.4350426[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-21 06:34:00,460 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:00,487 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] ********************
2023-04-21 06:34:00,666 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:00,694 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] ***************
2023-04-21 06:34:01,474 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:01,500 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] ********************************
2023-04-21 06:34:02,829 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:02,856 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] **********************
2023-04-21 06:34:03,026 p=1085914 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-21 06:34:03,026 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:03,053 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] *********
2023-04-21 06:34:04,586 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:04,612 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *******
2023-04-21 06:34:04,938 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:04,963 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *****************
2023-04-21 06:34:05,323 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:05,350 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] *************************************
2023-04-21 06:34:05,935 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:05,987 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 06:34:06,032 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:06,075 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-21 06:34:06,873 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:06,897 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-21 06:34:07,072 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,108 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 06:34:07,124 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,150 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 06:34:07,166 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,191 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-21 06:34:07,377 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,406 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-21 06:34:07,439 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,466 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-21 06:34:07,499 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,527 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-21 06:34:07,544 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,574 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-21 06:34:07,590 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,617 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 06:34:07,633 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,662 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-21 06:34:07,685 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:07,712 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-21 06:34:08,065 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:08,094 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-21 06:34:08,125 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:08,152 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-21 06:34:08,493 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-21 06:34:08,522 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-21 06:34:08,714 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-21 06:34:08,743 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-21 06:34:09,207 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:09,237 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-21 06:34:09,338 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:09,377 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-21 06:34:09,425 p=1085914 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-21 06:34:09,635 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-21 06:34:09,681 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:09,722 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-21 06:34:10,634 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:10,663 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-21 06:34:10,684 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:10,713 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-21 06:34:10,733 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:10,760 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-21 06:34:10,776 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:10,803 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-21 06:34:10,819 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:10,848 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-21 06:34:10,896 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:10,968 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-21 06:34:11,182 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:11,209 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-21 06:34:11,234 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:11,262 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-21 06:34:11,287 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:11,313 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-21 06:34:11,536 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:11,562 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-21 06:34:11,587 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-21 06:34:11,613 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-21 06:34:11,664 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:11,712 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-21 06:34:11,731 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:11,758 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-21 06:34:12,132 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:12,158 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-21 06:34:12,207 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-21 06:34:12,251 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:12,300 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-21 06:34:12,544 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:12,595 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-21 06:34:12,770 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:12,797 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-21 06:34:13,180 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:13,207 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-21 06:34:13,377 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:13,403 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-21 06:34:13,569 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:13,595 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-21 06:34:13,647 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:13,689 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-21 06:34:14,046 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 06:34:14,358 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-21 06:34:14,386 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-21 06:34:14,602 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 06:34:14,750 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-21 06:34:14,781 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-21 06:34:14,973 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:15,003 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-21 06:34:15,022 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:15,049 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-21 06:34:15,345 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:15,395 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *****************************
2023-04-21 06:34:15,417 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:15,443 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 06:34:15,457 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:15,483 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 06:34:15,532 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:15,573 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] ***
2023-04-21 06:34:16,100 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:16,131 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *****************
2023-04-21 06:34:16,891 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:16,917 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-21 06:34:16,932 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:16,958 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***
2023-04-21 06:34:17,766 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:17,793 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] ********************************
2023-04-21 06:34:18,253 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:18,280 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***
2023-04-21 06:34:18,308 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:18,335 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] ***
2023-04-21 06:34:18,362 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:18,389 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *****************************
2023-04-21 06:34:18,713 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:18,739 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] ***************************
2023-04-21 06:34:18,756 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:18,781 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] ***
2023-04-21 06:34:19,727 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:19,753 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] *********************
2023-04-21 06:34:19,780 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:19,806 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***
2023-04-21 06:34:19,836 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:19,864 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] **************
2023-04-21 06:34:19,897 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:19,922 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *******************
2023-04-21 06:34:19,957 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:19,983 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ******
2023-04-21 06:34:20,293 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:20,319 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ***
2023-04-21 06:34:20,365 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 06:34:20,422 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:20,466 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] **************
2023-04-21 06:34:20,679 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:20,705 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *******************************************
2023-04-21 06:34:20,759 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:20,787 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ***
2023-04-21 06:34:20,884 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:20,908 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] ************
2023-04-21 06:34:20,958 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:20,989 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ****************
2023-04-21 06:34:21,025 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:21,058 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] ***
2023-04-21 06:34:21,072 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:21,100 p=1085914 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 06:34:21,119 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:21,178 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 06:34:21,221 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:21,273 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] **********************************
2023-04-21 06:34:21,296 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:21,324 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] ***************************************
2023-04-21 06:34:21,345 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:21,373 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] ***
2023-04-21 06:34:21,388 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:21,417 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***
2023-04-21 06:34:21,597 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:21,623 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ****************************
2023-04-21 06:34:21,981 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-21 06:34:22,668 p=1085914 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-1085914g5osk4r7/tmp7y0awxry/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-2LzpFgqh78rBpdmk[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+kAzcDVYlUNuOL9A7[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-21 06:34:22,674 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-21 06:34:22,710 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 06:34:22,752 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:22,791 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ***
2023-04-21 06:34:22,841 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:22,868 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *****
2023-04-21 06:34:22,885 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:22,913 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ****************
2023-04-21 06:34:23,550 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:23,577 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] ***
2023-04-21 06:34:23,595 p=1085914 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-21 06:34:23,595 p=1085914 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-21 06:34:43,598 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:34:43,624 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 06:34:43,664 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-21 06:34:43,709 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] *************************
2023-04-21 06:34:45,228 p=1085914 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-21 06:34:45,229 p=1085914 u=ubuntu n=ansible | ...ignoring
2023-04-21 06:34:45,254 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ****************************
2023-04-21 06:34:49,103 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-21 06:34:49,132 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *******************
2023-04-21 06:34:49,204 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-21 06:34:49,227 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-21 06:34:49,251 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-21 06:34:49,269 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-21 06:34:49,312 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 06:34:50,371 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:50,404 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 06:34:51,473 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:51,500 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 06:34:51,515 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:51,542 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 06:34:51,558 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:51,584 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 06:34:52,672 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:52,706 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 06:34:53,672 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:53,698 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 06:34:54,751 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:54,778 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 06:34:55,843 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:55,870 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 06:34:55,885 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:55,911 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 06:34:55,927 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:55,954 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 06:34:56,988 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:57,015 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 06:34:57,034 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:57,062 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 06:34:58,103 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:58,130 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 06:34:59,123 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:34:59,150 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 06:34:59,166 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:59,193 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 06:34:59,209 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:34:59,237 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 06:35:00,453 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:35:00,479 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 06:35:00,501 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:00,530 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 06:35:01,554 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:35:01,581 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 06:35:02,625 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:35:02,651 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 06:35:02,667 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:02,695 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 06:35:02,711 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:02,738 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 06:35:03,755 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:35:03,782 p=1085914 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 06:35:04,959 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:35:05,011 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] *************************************
2023-04-21 06:35:05,224 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:05,252 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ******************************
2023-04-21 06:35:05,486 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:05,515 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] ********************
2023-04-21 06:35:05,692 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:05,718 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] *********************************
2023-04-21 06:35:06,715 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:06,742 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *******************************
2023-04-21 06:35:07,087 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:07,115 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] ************************
2023-04-21 06:35:08,830 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:08,860 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] *************
2023-04-21 06:35:09,034 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:09,063 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] **************************************
2023-04-21 06:35:09,464 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:09,491 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] ***************************
2023-04-21 06:35:09,671 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:09,698 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] *************************
2023-04-21 06:35:10,013 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:10,043 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] ************************
2023-04-21 06:35:10,387 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:10,414 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] ***********************************
2023-04-21 06:35:10,760 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:10,786 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] **********************************
2023-04-21 06:35:10,802 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:10,830 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] ***********************
2023-04-21 06:35:11,479 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:11,508 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] *************
2023-04-21 06:35:11,733 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:11,757 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *****************************
2023-04-21 06:35:12,265 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:12,293 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] ***********************
2023-04-21 06:35:12,331 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-21 06:35:12,338 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-21 06:35:12,347 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-21 06:35:12,352 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-21 06:35:12,361 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-21 06:35:12,368 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-21 06:35:12,374 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-21 06:35:12,381 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-21 06:35:12,388 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-21 06:35:12,395 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-21 06:35:12,403 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-21 06:35:12,407 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-21 06:35:12,409 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:12,437 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] *************************
2023-04-21 06:35:12,456 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:12,483 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] **********************
2023-04-21 06:35:12,847 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-21 06:35:13,190 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-21 06:35:13,537 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-21 06:35:13,869 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-21 06:35:14,191 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-21 06:35:14,535 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-21 06:35:14,856 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-21 06:35:15,190 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-21 06:35:15,522 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-21 06:35:15,837 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-21 06:35:16,158 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-21 06:35:16,479 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-21 06:35:16,509 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] ************************
2023-04-21 06:35:17,282 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:17,309 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ***
2023-04-21 06:35:17,515 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:17,573 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-21 06:35:18,197 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:18,223 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-21 06:35:18,409 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:18,437 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-21 06:35:18,454 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:18,481 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-21 06:35:18,660 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:18,686 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-21 06:35:18,864 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:18,892 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-21 06:35:19,073 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:19,098 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-21 06:35:19,283 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:19,309 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-21 06:35:19,637 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:19,695 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-21 06:35:19,732 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:19,759 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-21 06:35:19,801 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:19,830 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-21 06:35:19,847 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:19,874 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-21 06:35:19,912 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:19,940 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-21 06:35:20,036 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-21 06:35:20,104 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-21 06:35:20,170 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-21 06:35:20,214 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-21 06:35:21,022 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:21,050 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-21 06:35:21,756 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:21,784 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 06:35:21,803 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:21,830 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 06:35:22,145 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:22,172 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 06:35:22,190 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:22,216 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-21 06:35:23,027 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:23,058 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-21 06:35:23,106 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-21 06:35:23,148 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-21 06:35:23,361 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-21 06:35:23,390 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-21 06:35:23,760 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-21 06:35:23,788 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-21 06:35:24,076 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:24,102 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-21 06:35:24,424 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:24,450 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-21 06:35:24,468 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:24,496 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-21 06:35:24,872 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:24,903 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-21 06:35:25,279 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:25,305 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-21 06:35:25,490 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:25,517 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-21 06:35:25,532 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:25,559 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-21 06:35:25,927 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:25,955 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-21 06:35:25,998 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-21 06:35:26,040 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-21 06:35:26,055 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,082 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-21 06:35:26,110 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,138 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-21 06:35:26,166 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,195 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-21 06:35:26,395 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,424 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-21 06:35:26,452 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,481 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-21 06:35:26,668 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,694 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-21 06:35:26,722 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,749 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-21 06:35:26,767 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,795 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-21 06:35:26,812 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,839 p=1085914 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-21 06:35:26,856 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,907 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] **********************************
2023-04-21 06:35:26,923 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:26,951 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] **********************************
2023-04-21 06:35:27,009 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-21 06:35:27,076 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] ***************
2023-04-21 06:35:27,093 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,120 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] ***********
2023-04-21 06:35:27,139 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,167 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] ***
2023-04-21 06:35:27,187 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,214 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ***
2023-04-21 06:35:27,230 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,259 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***
2023-04-21 06:35:27,447 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,476 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] ***************
2023-04-21 06:35:27,493 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,520 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *****************
2023-04-21 06:35:27,572 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,599 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] ***
2023-04-21 06:35:27,821 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,848 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] **********
2023-04-21 06:35:27,903 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:27,931 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ******************
2023-04-21 06:35:28,275 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:28,301 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ****
2023-04-21 06:35:28,358 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:28,385 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *******
2023-04-21 06:35:28,759 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:28,786 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *******************
2023-04-21 06:35:28,819 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:28,846 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] ***********
2023-04-21 06:35:33,943 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:33,970 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] ***********
2023-04-21 06:35:36,273 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,301 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] ********
2023-04-21 06:35:36,318 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,345 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] *********
2023-04-21 06:35:36,361 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,389 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] ***
2023-04-21 06:35:36,405 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,436 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] ************************************
2023-04-21 06:35:36,453 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,482 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] *********************************
2023-04-21 06:35:36,500 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,581 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] ***********************************
2023-04-21 06:35:36,599 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,627 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] **************************************
2023-04-21 06:35:36,647 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,674 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] *********************************
2023-04-21 06:35:36,734 p=1085914 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-21 06:35:36,824 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] *********************************
2023-04-21 06:35:36,841 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,867 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] ************************************
2023-04-21 06:35:36,884 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,911 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] **************
2023-04-21 06:35:36,927 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:36,954 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] ************
2023-04-21 06:35:36,972 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:37,000 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] ***********
2023-04-21 06:35:37,627 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:37,654 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] ***
2023-04-21 06:35:37,671 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:37,698 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ******************
2023-04-21 06:35:37,715 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:37,742 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ******************
2023-04-21 06:35:37,758 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:37,790 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] ************************
2023-04-21 06:35:38,293 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-21 06:35:38,323 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] **********************
2023-04-21 06:35:38,372 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-21 06:35:38,374 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:38,403 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] **********
2023-04-21 06:35:38,454 p=1085914 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *****************
2023-04-21 06:35:45,619 p=1085914 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 06:35:45,646 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] **************
2023-04-21 06:35:45,976 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,004 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ******************
2023-04-21 06:35:46,022 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,050 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ******************************
2023-04-21 06:35:46,066 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,093 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ******************************
2023-04-21 06:35:46,109 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,137 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] **********
2023-04-21 06:35:46,153 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,182 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] ************************
2023-04-21 06:35:46,199 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,230 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] ************************
2023-04-21 06:35:46,246 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,273 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] ************
2023-04-21 06:35:46,288 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,316 p=1085914 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] **************
2023-04-21 06:35:46,337 p=1085914 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,448 p=1085914 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-21 06:35:46,632 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:46,660 p=1085914 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *****************************************************
2023-04-21 06:35:47,467 p=1085914 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 06:35:47,520 p=1085914 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-21 06:35:47,521 p=1085914 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=269  changed=22   unreachable=0    failed=0    skipped=164  rescued=0    ignored=1   
2023-04-21 07:44:52,835 p=1133320 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-21 07:44:53,041 p=1133320 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-21 07:44:53,058 p=1133320 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-21 07:44:54,646 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:54,659 p=1133320 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-21 07:44:55,666 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:55,701 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 07:44:55,735 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:44:55,751 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-21 07:44:55,775 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:44:55,789 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-21 07:44:55,816 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:44:55,830 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-21 07:44:55,854 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:44:55,867 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-21 07:44:56,786 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:56,801 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-21 07:44:57,129 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:57,144 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-21 07:44:57,190 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:57,203 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-21 07:44:58,056 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,070 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-21 07:44:58,096 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,109 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-21 07:44:58,143 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,161 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-21 07:44:58,194 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,214 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-21 07:44:58,246 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,260 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 07:44:58,275 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,288 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-21 07:44:58,580 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,594 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-21 07:44:58,911 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,924 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-21 07:44:58,942 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:44:58,956 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-21 07:44:59,141 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:59,155 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-21 07:44:59,647 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:44:59,661 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-21 07:45:00,046 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:00,061 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 07:45:00,105 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:00,123 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-21 07:45:00,342 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-21 07:45:00,506 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-21 07:45:00,522 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-21 07:45:00,707 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:00,720 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-21 07:45:01,093 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-21 07:45:01,110 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-21 07:45:01,447 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-21 07:45:01,461 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-21 07:45:01,818 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:01,836 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-21 07:45:02,167 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:02,180 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-21 07:45:02,365 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:02,381 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-21 07:45:02,909 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:02,933 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-21 07:45:02,962 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-21 07:45:02,965 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-21 07:45:02,967 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:02,984 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-21 07:45:03,024 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-21 07:45:03,034 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-21 07:45:03,045 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-21 07:45:03,053 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-21 07:45:03,055 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:03,069 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-21 07:45:03,108 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-21 07:45:03,110 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:03,126 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-21 07:45:03,569 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:45:03,801 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:45:03,817 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-21 07:45:03,830 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:03,845 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-21 07:45:03,870 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:03,883 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-21 07:45:03,896 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:03,909 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-21 07:45:04,342 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:45:04,364 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-21 07:45:04,808 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:45:05,077 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:45:05,337 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:45:05,587 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:45:05,692 p=1133320 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-21 07:45:05,768 p=1133320 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-21 07:45:07,136 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:07,162 p=1133320 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-21 07:45:07,993 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:08,017 p=1133320 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-21 07:45:08,032 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:08,057 p=1133320 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-21 07:45:08,883 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:08,910 p=1133320 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-21 07:45:09,696 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:09,768 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-21 07:45:10,362 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:10,389 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-21 07:45:10,409 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:10,436 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-21 07:45:10,677 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:10,704 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-21 07:45:10,901 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:10,927 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-21 07:45:10,984 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,011 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-21 07:45:11,028 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,060 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-21 07:45:11,076 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,103 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-21 07:45:11,118 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,144 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-21 07:45:11,161 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,187 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-21 07:45:11,202 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,230 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-21 07:45:11,275 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:11,316 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-21 07:45:11,330 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,357 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-21 07:45:11,404 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-21 07:45:11,418 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,469 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-21 07:45:11,935 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:11,971 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-21 07:45:11,989 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:12,016 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-21 07:45:12,038 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:12,067 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-21 07:45:12,087 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:12,139 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-21 07:45:12,155 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:12,181 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-21 07:45:12,251 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:12,291 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-21 07:45:13,152 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:13,180 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-21 07:45:13,200 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:13,228 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-21 07:45:13,302 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:13,333 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 07:45:13,351 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:13,410 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-21 07:45:13,450 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:13,490 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-21 07:45:13,516 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-21 07:45:13,519 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-21 07:45:13,521 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-21 07:45:13,523 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:13,550 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-21 07:45:13,623 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:13,666 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-21 07:45:14,492 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:14,520 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-21 07:45:14,538 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:14,564 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-21 07:45:14,642 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:14,668 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 07:45:14,687 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:14,713 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-21 07:45:14,752 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:14,793 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-21 07:45:14,817 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-21 07:45:14,821 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-21 07:45:14,823 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-21 07:45:14,825 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:14,852 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-21 07:45:14,867 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:14,896 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-21 07:45:15,742 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:15,769 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 07:45:15,788 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:15,814 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-21 07:45:15,831 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:15,860 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-21 07:45:16,336 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:16,362 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-21 07:45:16,410 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:16,449 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-21 07:45:16,633 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:16,663 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-21 07:45:16,687 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:16,714 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-21 07:45:17,026 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:17,052 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-21 07:45:17,068 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:17,094 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-21 07:45:17,401 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:17,427 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-21 07:45:17,740 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:17,790 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-21 07:45:18,091 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:18,117 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-21 07:45:19,033 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:19,086 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-21 07:45:19,107 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-21 07:45:19,133 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-21 07:45:19,185 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:19,212 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-21 07:45:19,276 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:19,307 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-21 07:45:19,347 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-21 07:45:19,358 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-21 07:45:19,375 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-21 07:45:19,390 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-21 07:45:19,401 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-21 07:45:19,409 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-21 07:45:19,424 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-21 07:45:19,432 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-21 07:45:19,439 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-21 07:45:19,470 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-21 07:45:19,564 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-21 07:45:19,593 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-21 07:45:19,630 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-21 07:45:19,664 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-21 07:45:19,665 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:19,693 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-21 07:45:19,780 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-21 07:45:19,829 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-21 07:45:19,872 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-21 07:45:19,900 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-21 07:45:19,966 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:20,051 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-21 07:45:20,159 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:20,185 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-21 07:45:20,782 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:20,812 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-21 07:45:20,929 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:20,957 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-21 07:45:21,254 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:45:21,441 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-21 07:45:21,470 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-21 07:45:21,685 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:45:21,847 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-21 07:45:21,884 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-21 07:45:21,983 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:22,015 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-21 07:45:22,035 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:22,075 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-21 07:45:22,133 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:22,184 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-21 07:45:22,584 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:22,615 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-21 07:45:23,009 p=1133320 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-21 07:45:23,012 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-21 07:45:23,337 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-21 07:45:23,701 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-21 07:45:24,039 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-21 07:45:24,388 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-21 07:45:24,417 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-21 07:45:24,801 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-21 07:45:25,132 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-21 07:45:25,451 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-21 07:45:25,803 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-21 07:45:26,124 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-21 07:45:26,484 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-21 07:45:26,819 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-21 07:45:27,149 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-21 07:45:27,474 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-21 07:45:27,815 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-21 07:45:27,848 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-21 07:45:27,928 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:27,983 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-21 07:45:29,298 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:29,324 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-21 07:45:29,446 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:29,477 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-21 07:45:31,588 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:31,617 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-21 07:45:33,563 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:33,594 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-21 07:45:33,697 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:33,727 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-21 07:45:33,743 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:33,772 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-21 07:45:33,788 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:33,817 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-21 07:45:33,884 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:33,935 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-21 07:45:34,068 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:34,111 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-21 07:45:34,580 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:34,613 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-21 07:45:34,817 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:34,845 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-21 07:45:35,362 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-21 07:45:35,847 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-21 07:45:36,332 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/error_reports.yml', 'dest': '/srv/galaxy/config/error_reports_file.yml'})
2023-04-21 07:45:36,362 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-21 07:45:36,878 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-21 07:45:36,910 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-21 07:45:37,471 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-21 07:45:38,005 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-21 07:45:38,483 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-21 07:45:38,997 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-21 07:45:39,025 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-21 07:45:39,540 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-21 07:45:40,048 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_properties.xml)
2023-04-21 07:45:40,076 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-21 07:45:40,643 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:40,672 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-21 07:45:40,878 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:40,908 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-21 07:45:41,017 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:41,045 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-21 07:45:41,067 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:41,094 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-21 07:45:41,110 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:41,137 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-21 07:45:41,153 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:41,183 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-21 07:45:41,200 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:41,231 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-21 07:45:41,799 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:41,827 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-21 07:45:41,935 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:41,964 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-21 07:45:42,085 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:42,112 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-21 07:45:43,220 p=1133320 u=ubuntu n=ansible | [0;31m--- before: /srv/galaxy/config/galaxy.yml[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-1133320ld8oftj0/tmpms3njcjr/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -129,7 +129,7 @@[0m
[0;36m[0m     openid_config_file: /srv/galaxy/server/config/openid_conf.xml.sample
     outputs_to_working_directory: true
     retry_job_output_collection: 3
[0;31m-    sentry_dsn: https://39a44ae8b29a4e1784fe3d7d9903b339@gat.gat-20.eu.galaxy.training/2[0m
[0;31m[0m[0;32m+    sentry_dsn: http://39a44ae8b29a4e1784fe3d7d9903b339@gat.gat-20.eu.galaxy.training/2[0m
[0;32m[0m     sentry_traces_sample_rate: 0.5
     shed_data_manager_config_file: /srv/galaxy/var/config/shed_data_manager_conf.xml
     shed_tool_config_file: /srv/galaxy/var/config/shed_tool_conf.xml


2023-04-21 07:45:43,220 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:45:43,249 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-21 07:45:43,312 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:43,370 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-21 07:45:45,181 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:45,210 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-21 07:45:47,125 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:47,153 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-21 07:45:52,449 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:52,478 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-21 07:45:53,137 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:53,164 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-21 07:45:54,941 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:54,967 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-21 07:45:56,655 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:45:56,684 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-21 07:45:56,742 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:56,801 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-21 07:45:56,921 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:45:56,948 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-21 07:45:57,469 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-21 07:45:57,501 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-21 07:45:57,979 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-21 07:45:58,291 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-21 07:45:58,319 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-21 07:45:58,758 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-21 07:45:59,087 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-21 07:45:59,116 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-21 07:45:59,162 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-21 07:45:59,222 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-21 07:46:00,685 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:00,712 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-21 07:46:02,113 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:02,141 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-21 07:46:02,248 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:02,274 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-21 07:46:02,381 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:02,414 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-21 07:46:02,492 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:02,560 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-21 07:46:02,912 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:02,939 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-21 07:46:03,283 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:03,310 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-21 07:46:03,660 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:03,687 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-21 07:46:04,068 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:04,095 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-21 07:46:04,297 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:04,323 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-21 07:46:04,524 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:04,552 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-21 07:46:04,708 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:04,736 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-21 07:46:04,850 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:04,877 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-21 07:46:04,981 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:05,009 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-21 07:46:05,115 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:05,144 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-21 07:46:05,252 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:05,279 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-21 07:46:05,385 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:05,411 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-21 07:46:05,524 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:05,551 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-21 07:46:05,660 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:05,686 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-21 07:46:05,702 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:05,729 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-21 07:46:05,779 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:05,864 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-21 07:46:05,970 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:05,997 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-21 07:46:06,639 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:06,666 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-21 07:46:06,687 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:06,718 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-21 07:46:06,733 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:06,760 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-21 07:46:06,807 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:06,875 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-21 07:46:07,295 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:07,321 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-21 07:46:07,425 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:07,479 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] *********************
2023-04-21 07:46:07,670 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:07,698 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] **************
2023-04-21 07:46:08,026 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:08,054 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] ***********
2023-04-21 07:46:10,812 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:46:10,864 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-21 07:46:11,060 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,087 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-21 07:46:11,104 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,137 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-21 07:46:11,537 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,571 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-21 07:46:11,608 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,635 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-21 07:46:11,652 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,683 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-21 07:46:11,699 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,726 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-21 07:46:11,752 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,780 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-21 07:46:11,806 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,831 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-21 07:46:11,850 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,925 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] **********************
2023-04-21 07:46:11,945 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:11,987 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *******************************
2023-04-21 07:46:12,017 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:12,045 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] **************
2023-04-21 07:46:12,270 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:12,295 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] *************************
2023-04-21 07:46:12,639 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:12,665 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 07:46:12,681 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:12,708 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 07:46:12,751 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:12,793 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] **************************
2023-04-21 07:46:13,608 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:13,633 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 07:46:13,650 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:13,676 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] ********
2023-04-21 07:46:13,994 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:14,046 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *******************************
2023-04-21 07:46:14,356 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:14,383 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] ********************************
2023-04-21 07:46:14,619 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:14,646 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *****************
2023-04-21 07:46:15,010 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:15,036 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *******************************
2023-04-21 07:46:15,074 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:15,100 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] ***********************
2023-04-21 07:46:15,283 p=1133320 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1682058840.4325004[0m
[0;31m[0m[0;31m-mtime: 1682058953.719612[0m
[0;31m[0m[0;32m+atime: 1682063175.2565804[0m
[0;32m[0m[0;32m+mtime: 1682063175.2565804[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-21 07:46:15,284 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:46:15,309 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] ********************
2023-04-21 07:46:15,526 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:15,558 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] ***************
2023-04-21 07:46:16,332 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:16,359 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] ********************************
2023-04-21 07:46:17,502 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:17,533 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] **********************
2023-04-21 07:46:17,741 p=1133320 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-21 07:46:17,741 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:46:17,771 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] *********
2023-04-21 07:46:19,433 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:19,464 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *******
2023-04-21 07:46:19,864 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:19,890 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *****************
2023-04-21 07:46:20,247 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:20,274 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] *************************************
2023-04-21 07:46:20,888 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:20,938 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 07:46:20,984 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:21,023 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-21 07:46:21,904 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:21,931 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-21 07:46:22,117 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,144 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 07:46:22,161 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,189 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 07:46:22,208 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,247 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-21 07:46:22,436 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,462 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-21 07:46:22,495 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,523 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-21 07:46:22,560 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,590 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-21 07:46:22,607 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,634 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-21 07:46:22,650 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,681 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 07:46:22,700 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,730 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-21 07:46:22,755 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:22,782 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-21 07:46:23,168 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:23,198 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-21 07:46:23,232 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:23,261 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-21 07:46:23,622 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-21 07:46:23,651 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-21 07:46:23,847 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-21 07:46:23,877 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-21 07:46:24,351 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:24,377 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-21 07:46:24,471 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:24,513 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-21 07:46:24,561 p=1133320 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *******************
2023-04-21 07:46:24,580 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:24,606 p=1133320 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-21 07:46:24,628 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:24,654 p=1133320 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-21 07:46:24,674 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:24,701 p=1133320 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] **********************
2023-04-21 07:46:25,394 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:46:25,421 p=1133320 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ****************
2023-04-21 07:46:45,413 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:46:45,442 p=1133320 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-21 07:46:45,683 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-21 07:46:45,743 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:45,785 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-21 07:46:46,720 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:46,764 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-21 07:46:46,793 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:46,824 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-21 07:46:46,852 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:46,879 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-21 07:46:46,897 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:46,929 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-21 07:46:46,946 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:46,974 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-21 07:46:47,026 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:47,124 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-21 07:46:47,368 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:47,396 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-21 07:46:47,429 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:47,455 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-21 07:46:47,488 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:47,516 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-21 07:46:47,790 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:47,823 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-21 07:46:47,851 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-21 07:46:47,881 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-21 07:46:47,962 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:48,028 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-21 07:46:48,058 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:48,086 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-21 07:46:48,576 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:48,611 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-21 07:46:48,661 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-21 07:46:48,712 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:48,763 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-21 07:46:49,010 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:49,066 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-21 07:46:49,254 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:49,297 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-21 07:46:49,829 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:49,861 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-21 07:46:50,142 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:50,172 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-21 07:46:50,358 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:50,386 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-21 07:46:50,444 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:50,487 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-21 07:46:50,938 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:46:51,333 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-21 07:46:51,368 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-21 07:46:51,622 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:46:51,807 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-21 07:46:51,837 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-21 07:46:52,126 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:52,166 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-21 07:46:52,207 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:52,239 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-21 07:46:52,699 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:52,757 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *****************************
2023-04-21 07:46:52,783 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:52,815 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 07:46:52,833 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:52,865 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 07:46:52,916 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:46:52,956 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] ***
2023-04-21 07:46:53,660 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:53,699 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *****************
2023-04-21 07:46:54,869 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:54,902 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-21 07:46:54,940 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:46:54,984 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***
2023-04-21 07:46:55,909 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:46:55,939 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] ********************************
2023-04-21 07:47:01,099 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:01,133 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***
2023-04-21 07:47:01,167 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:01,200 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] ***
2023-04-21 07:47:01,233 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:01,258 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *****************************
2023-04-21 07:47:01,645 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:01,672 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] ***************************
2023-04-21 07:47:01,695 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:01,723 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] ***
2023-04-21 07:47:02,548 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:02,581 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] *********************
2023-04-21 07:47:02,612 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:02,640 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***
2023-04-21 07:47:02,669 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:02,699 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] **************
2023-04-21 07:47:02,734 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:02,760 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *******************
2023-04-21 07:47:02,795 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:02,822 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ******
2023-04-21 07:47:03,138 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:03,166 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ***
2023-04-21 07:47:03,215 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 07:47:03,273 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-21 07:47:03,318 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] **************
2023-04-21 07:47:03,566 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:03,599 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *******************************************
2023-04-21 07:47:03,645 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:03,674 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ***
2023-04-21 07:47:03,717 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:03,749 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] ************
2023-04-21 07:47:03,804 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:03,831 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ****************
2023-04-21 07:47:03,864 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:03,891 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] ***
2023-04-21 07:47:03,905 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:03,935 p=1133320 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 07:47:03,956 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:04,007 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 07:47:04,052 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-21 07:47:04,104 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] **********************************
2023-04-21 07:47:04,127 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:04,154 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] ***************************************
2023-04-21 07:47:04,178 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:04,206 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] ***
2023-04-21 07:47:04,222 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:04,252 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***
2023-04-21 07:47:04,456 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:04,489 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ****************************
2023-04-21 07:47:04,885 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-21 07:47:05,582 p=1133320 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-1133320ld8oftj0/tmpmw1omdb9/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-kAzcDVYlUNuOL9A7[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+Pb6sTqMPsfcTro1f[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-21 07:47:05,584 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-21 07:47:05,613 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 07:47:05,657 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-21 07:47:05,699 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ***
2023-04-21 07:47:05,750 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:05,776 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *****
2023-04-21 07:47:05,794 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:05,820 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ****************
2023-04-21 07:47:06,509 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:06,535 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] ***
2023-04-21 07:47:06,554 p=1133320 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-21 07:47:06,554 p=1133320 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-21 07:47:26,557 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:26,589 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 07:47:26,637 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-21 07:47:26,678 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] *************************
2023-04-21 07:47:28,400 p=1133320 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-21 07:47:28,401 p=1133320 u=ubuntu n=ansible | ...ignoring
2023-04-21 07:47:28,430 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ****************************
2023-04-21 07:47:32,389 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-21 07:47:32,420 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *******************
2023-04-21 07:47:32,488 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-21 07:47:32,507 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-21 07:47:32,526 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-21 07:47:32,543 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-21 07:47:32,587 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 07:47:33,733 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:33,759 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 07:47:34,813 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:34,842 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:47:34,857 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:34,886 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:47:34,903 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:34,937 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 07:47:35,983 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:36,010 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 07:47:37,042 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:37,069 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 07:47:38,135 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:38,162 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 07:47:39,124 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:39,154 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:47:39,170 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:39,201 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:47:39,219 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:39,247 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 07:47:40,423 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:40,450 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 07:47:40,470 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:40,499 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 07:47:41,656 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:41,686 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 07:47:42,873 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:42,902 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:47:42,918 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:42,952 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:47:42,968 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:42,995 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 07:47:44,041 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:44,067 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 07:47:44,091 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:44,119 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 07:47:45,196 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:45,222 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 07:47:46,294 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:46,326 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:47:46,342 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:46,369 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:47:46,386 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:46,412 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 07:47:47,484 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:47,515 p=1133320 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 07:47:48,569 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:47:48,619 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] *************************************
2023-04-21 07:47:48,827 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:48,856 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ******************************
2023-04-21 07:47:49,067 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:49,094 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] ********************
2023-04-21 07:47:49,286 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:49,314 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] *********************************
2023-04-21 07:47:50,569 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:50,595 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *******************************
2023-04-21 07:47:50,939 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:50,967 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] ************************
2023-04-21 07:47:52,590 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:52,616 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] *************
2023-04-21 07:47:52,790 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:52,816 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] **************************************
2023-04-21 07:47:53,188 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:53,214 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] ***************************
2023-04-21 07:47:53,395 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:53,421 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] *************************
2023-04-21 07:47:53,622 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:53,647 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] ************************
2023-04-21 07:47:54,000 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:54,026 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] ***********************************
2023-04-21 07:47:54,355 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:54,383 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] **********************************
2023-04-21 07:47:54,399 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:54,432 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] ***********************
2023-04-21 07:47:55,013 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:55,041 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] *************
2023-04-21 07:47:55,253 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:55,280 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *****************************
2023-04-21 07:47:55,791 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:47:55,818 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] ***********************
2023-04-21 07:47:55,854 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-21 07:47:55,860 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-21 07:47:55,867 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-21 07:47:55,875 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-21 07:47:55,883 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-21 07:47:55,892 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-21 07:47:55,898 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-21 07:47:55,905 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-21 07:47:55,912 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-21 07:47:55,920 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-21 07:47:55,927 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-21 07:47:55,931 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-21 07:47:55,933 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:55,960 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] *************************
2023-04-21 07:47:55,980 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:47:56,008 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] **********************
2023-04-21 07:47:56,368 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-21 07:47:56,696 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-21 07:47:57,024 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-21 07:47:57,340 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-21 07:47:57,659 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-21 07:47:57,990 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-21 07:47:58,300 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-21 07:47:58,621 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-21 07:47:58,943 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-21 07:47:59,252 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-21 07:47:59,575 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-21 07:47:59,912 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-21 07:47:59,942 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] ************************
2023-04-21 07:48:00,702 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:00,732 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ***
2023-04-21 07:48:00,927 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:00,978 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-21 07:48:01,732 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:01,759 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-21 07:48:01,937 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:01,962 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-21 07:48:01,978 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:02,004 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-21 07:48:02,181 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:02,207 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-21 07:48:02,384 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:02,413 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-21 07:48:02,592 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:02,619 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-21 07:48:02,802 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:02,831 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-21 07:48:03,152 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:03,206 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-21 07:48:03,241 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:03,267 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-21 07:48:03,306 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:03,334 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-21 07:48:03,349 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:03,375 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-21 07:48:03,411 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:03,436 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-21 07:48:03,527 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-21 07:48:03,595 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-21 07:48:03,660 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:48:03,702 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-21 07:48:04,519 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:04,548 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-21 07:48:05,249 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:05,277 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 07:48:05,294 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:05,320 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 07:48:05,630 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:05,658 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 07:48:05,677 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:05,704 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-21 07:48:06,499 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:06,526 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-21 07:48:06,570 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-21 07:48:06,614 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-21 07:48:06,843 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-21 07:48:06,875 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-21 07:48:07,233 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-21 07:48:07,263 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-21 07:48:07,544 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:07,575 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-21 07:48:07,886 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:07,915 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-21 07:48:07,932 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:07,958 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-21 07:48:08,312 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:08,339 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-21 07:48:08,699 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:08,726 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-21 07:48:08,923 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:08,952 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-21 07:48:08,967 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:08,995 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-21 07:48:09,368 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:09,394 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-21 07:48:09,438 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-21 07:48:09,481 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-21 07:48:09,496 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:09,524 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-21 07:48:09,553 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:09,580 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-21 07:48:09,609 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:09,637 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-21 07:48:09,826 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:09,853 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-21 07:48:09,883 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:09,910 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-21 07:48:10,138 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,165 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-21 07:48:10,195 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,222 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-21 07:48:10,238 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,265 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-21 07:48:10,282 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,310 p=1133320 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-21 07:48:10,326 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,378 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] **********************************
2023-04-21 07:48:10,393 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,422 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] **********************************
2023-04-21 07:48:10,483 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:48:10,550 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] ***************
2023-04-21 07:48:10,567 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,594 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] ***********
2023-04-21 07:48:10,618 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,646 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] ***
2023-04-21 07:48:10,667 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,694 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ***
2023-04-21 07:48:10,712 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,740 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***
2023-04-21 07:48:10,927 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:10,960 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] ***************
2023-04-21 07:48:10,975 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:11,004 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *****************
2023-04-21 07:48:11,059 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:11,086 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] ***
2023-04-21 07:48:11,302 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:11,330 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] **********
2023-04-21 07:48:11,385 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:11,412 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ******************
2023-04-21 07:48:11,736 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:11,764 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ****
2023-04-21 07:48:11,822 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:11,848 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *******
2023-04-21 07:48:12,209 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:12,235 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *******************
2023-04-21 07:48:12,265 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:12,337 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] ***********
2023-04-21 07:48:17,387 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:17,413 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] ***********
2023-04-21 07:48:19,588 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:19,615 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] ********
2023-04-21 07:48:19,631 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:19,658 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] *********
2023-04-21 07:48:19,678 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:19,704 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] ***
2023-04-21 07:48:19,719 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:19,748 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] ************************************
2023-04-21 07:48:19,762 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:19,789 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] *********************************
2023-04-21 07:48:19,804 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:19,833 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] ***********************************
2023-04-21 07:48:19,854 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:19,880 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] **************************************
2023-04-21 07:48:19,896 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:19,922 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] *********************************
2023-04-21 07:48:19,983 p=1133320 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-21 07:48:20,089 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] *********************************
2023-04-21 07:48:20,107 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:20,137 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] ************************************
2023-04-21 07:48:20,154 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:20,181 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] **************
2023-04-21 07:48:20,196 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:20,226 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] ************
2023-04-21 07:48:20,242 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:20,268 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] ***********
2023-04-21 07:48:20,848 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:20,876 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] ***
2023-04-21 07:48:20,892 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:20,919 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ******************
2023-04-21 07:48:20,935 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:20,963 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ******************
2023-04-21 07:48:20,979 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:21,004 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] ************************
2023-04-21 07:48:21,495 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-21 07:48:21,525 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] **********************
2023-04-21 07:48:21,572 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-21 07:48:21,574 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:21,602 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] **********
2023-04-21 07:48:21,649 p=1133320 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *****************
2023-04-21 07:48:28,708 p=1133320 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:48:28,734 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] **************
2023-04-21 07:48:29,067 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,101 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ******************
2023-04-21 07:48:29,118 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,146 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ******************************
2023-04-21 07:48:29,162 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,190 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ******************************
2023-04-21 07:48:29,213 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,242 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] **********
2023-04-21 07:48:29,259 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,288 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] ************************
2023-04-21 07:48:29,305 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,335 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] ************************
2023-04-21 07:48:29,351 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,387 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] ************
2023-04-21 07:48:29,404 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,432 p=1133320 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] **************
2023-04-21 07:48:29,449 p=1133320 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,555 p=1133320 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-21 07:48:29,743 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:29,773 p=1133320 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *****************************************************
2023-04-21 07:48:30,658 p=1133320 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:48:30,713 p=1133320 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-21 07:48:30,713 p=1133320 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=271  changed=25   unreachable=0    failed=0    skipped=167  rescued=0    ignored=1   
2023-04-21 07:52:11,339 p=1149530 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-21 07:52:11,544 p=1149530 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-21 07:52:11,562 p=1149530 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-21 07:52:13,012 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:13,029 p=1149530 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-21 07:52:13,994 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:14,028 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 07:52:14,063 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:14,082 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-21 07:52:14,105 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:14,118 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-21 07:52:14,141 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:14,154 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-21 07:52:14,181 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:14,194 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-21 07:52:14,962 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:14,975 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-21 07:52:15,273 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:15,286 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-21 07:52:15,329 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:15,342 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-21 07:52:16,134 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,147 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-21 07:52:16,172 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,184 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-21 07:52:16,217 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,230 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-21 07:52:16,256 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,268 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-21 07:52:16,294 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,308 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 07:52:16,325 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,340 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-21 07:52:16,621 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,634 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-21 07:52:16,919 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,932 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-21 07:52:16,949 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:16,963 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-21 07:52:17,132 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:17,144 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-21 07:52:17,614 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:17,626 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-21 07:52:17,992 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:18,004 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-21 07:52:18,044 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:18,061 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-21 07:52:18,260 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-21 07:52:18,410 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-21 07:52:18,426 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-21 07:52:18,597 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:18,611 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-21 07:52:18,975 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-21 07:52:18,991 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-21 07:52:19,326 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-21 07:52:19,341 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-21 07:52:19,685 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:19,698 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-21 07:52:20,041 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:20,058 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-21 07:52:20,236 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:20,252 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-21 07:52:20,772 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:20,796 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-21 07:52:20,824 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-21 07:52:20,828 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tiaas) 
2023-04-21 07:52:20,829 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:20,842 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-21 07:52:20,879 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'galaxy_user,galaxy_session,job,history,workflow,workflow_invocation', 'type': 'table', 'privs': 'SELECT'}) 
2023-04-21 07:52:20,889 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'user_group_association,galaxy_group,role,group_role_association', 'type': 'table', 'privs': 'SELECT,INSERT'}) 
2023-04-21 07:52:20,899 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'group_role_association', 'type': 'table', 'privs': 'DELETE'}) 
2023-04-21 07:52:20,906 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'database': 'galaxy', 'roles': 'tiaas', 'objs': 'role_id_seq,galaxy_group_id_seq,group_role_association_id_seq,user_group_association_id_seq', 'type': 'sequence', 'privs': 'USAGE,SELECT'}) 
2023-04-21 07:52:20,908 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:20,921 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-21 07:52:20,972 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-21 07:52:20,974 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:20,987 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-21 07:52:21,409 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:52:21,630 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:52:21,645 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-21 07:52:21,657 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:21,670 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-21 07:52:21,695 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:21,710 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-21 07:52:21,723 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:21,737 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-21 07:52:22,263 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:52:22,277 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-21 07:52:22,715 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:52:22,970 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:52:23,236 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:52:23,487 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tiaas)
2023-04-21 07:52:23,595 p=1149530 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-21 07:52:23,674 p=1149530 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-21 07:52:24,989 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:25,015 p=1149530 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-21 07:52:25,812 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:25,836 p=1149530 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-21 07:52:25,853 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:25,880 p=1149530 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-21 07:52:26,688 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:26,714 p=1149530 u=ubuntu n=ansible | TASK [git] *********************************************************************
2023-04-21 07:52:27,429 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:27,504 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-21 07:52:28,103 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,130 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-21 07:52:28,152 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,182 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-21 07:52:28,447 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,473 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-21 07:52:28,651 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,677 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-21 07:52:28,736 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,761 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-21 07:52:28,778 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,807 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-21 07:52:28,824 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,850 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-21 07:52:28,867 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,893 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-21 07:52:28,909 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,936 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-21 07:52:28,952 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:28,978 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-21 07:52:29,021 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:29,066 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-21 07:52:29,083 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:29,109 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-21 07:52:29,156 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-21 07:52:29,171 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:29,220 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add slurm-drmaa PPA (Ubuntu)] **********************
2023-04-21 07:52:29,666 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:29,692 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.repos : Add repository (RedHat)] ***************************
2023-04-21 07:52:29,708 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:29,734 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that source GPG key is known] ***************
2023-04-21 07:52:29,752 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:29,779 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.repos : Ensure that galaxyproject depot sources are available] ***
2023-04-21 07:52:29,799 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:29,852 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include user creation tasks] ***********************
2023-04-21 07:52:29,868 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:29,893 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include controller installation tasks] *************
2023-04-21 07:52:29,963 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmctld.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:30,007 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm controller packages] *****************
2023-04-21 07:52:30,843 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:30,870 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm state directory] **********************
2023-04-21 07:52:30,887 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:30,914 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-21 07:52:30,991 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:31,016 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 07:52:31,032 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:31,063 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-21 07:52:31,104 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:31,144 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-21 07:52:31,170 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-21 07:52:31,173 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-21 07:52:31,175 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-21 07:52:31,177 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:31,202 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include execution host installation tasks] *********
2023-04-21 07:52:31,273 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/slurmd.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:31,315 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm execution host packages] *************
2023-04-21 07:52:32,108 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:32,135 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm spool directory] **********************
2023-04-21 07:52:32,154 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:32,185 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Create slurm log directory] ************************
2023-04-21 07:52:32,264 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:32,290 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 07:52:32,309 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:32,335 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include extra config creation tasks] ***************
2023-04-21 07:52:32,376 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/_inc_extra_configs.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:32,418 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install extra execution host configs] **************
2023-04-21 07:52:32,441 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=acct_gather.conf) 
2023-04-21 07:52:32,444 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=cgroup.conf) 
2023-04-21 07:52:32,447 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=gres.conf) 
2023-04-21 07:52:32,449 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:32,475 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include DB installation tasks] *********************
2023-04-21 07:52:32,491 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:32,518 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install Slurm client] ******************************
2023-04-21 07:52:33,330 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:33,356 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include config dir creation tasks] *****************
2023-04-21 07:52:33,373 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:33,400 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install log rotation configuration] ****************
2023-04-21 07:52:33,419 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:33,445 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install slurm.conf] ********************************
2023-04-21 07:52:33,904 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:33,930 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Include munge tasks] *******************************
2023-04-21 07:52:33,977 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.slurm/tasks/munge.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:34,018 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Check munge dir] ***********************************
2023-04-21 07:52:34,198 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:34,227 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Install munge key] *********************************
2023-04-21 07:52:34,251 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:34,278 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure Munge is enabled and running] ***************
2023-04-21 07:52:34,605 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:34,632 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmdbd is enabled and running] ************
2023-04-21 07:52:34,650 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:34,680 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmctld is enabled and running] ***********
2023-04-21 07:52:34,973 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:34,999 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.slurm : Ensure slurmd is enabled and running] **************
2023-04-21 07:52:35,312 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:35,365 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-21 07:52:35,668 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:35,695 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-21 07:52:36,508 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:36,557 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-21 07:52:36,576 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-21 07:52:36,602 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-21 07:52:36,648 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:36,675 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-21 07:52:36,710 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:36,737 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-21 07:52:36,771 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-21 07:52:36,776 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-21 07:52:36,783 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-21 07:52:36,794 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-21 07:52:36,805 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-21 07:52:36,809 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-21 07:52:36,815 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-21 07:52:36,828 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-21 07:52:36,832 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-21 07:52:36,861 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-21 07:52:36,928 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-21 07:52:36,963 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-21 07:52:36,998 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-21 07:52:37,033 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-21 07:52:37,035 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:37,060 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-21 07:52:37,146 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-21 07:52:37,195 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-21 07:52:37,238 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-21 07:52:37,267 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-21 07:52:37,334 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:37,378 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-21 07:52:37,483 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:37,509 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-21 07:52:38,076 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:38,101 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-21 07:52:38,216 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:38,244 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-21 07:52:38,578 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:52:38,734 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-21 07:52:38,761 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-21 07:52:38,955 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:52:39,107 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-21 07:52:39,135 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-21 07:52:39,225 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:39,251 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-21 07:52:39,273 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:39,299 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-21 07:52:39,345 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:39,390 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-21 07:52:39,740 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:39,765 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-21 07:52:40,129 p=1149530 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-21 07:52:40,131 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-21 07:52:40,474 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-21 07:52:40,798 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-21 07:52:41,134 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-21 07:52:41,457 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/total_perspective_vortex)
2023-04-21 07:52:41,488 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-21 07:52:41,848 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-21 07:52:42,191 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-21 07:52:42,539 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-21 07:52:42,876 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-21 07:52:43,200 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-21 07:52:43,533 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-21 07:52:43,861 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-21 07:52:44,185 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-21 07:52:44,503 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-21 07:52:44,831 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config/TPV_DO_NOT_TOUCH)
2023-04-21 07:52:44,863 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-21 07:52:44,935 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:44,981 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-21 07:52:46,191 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:46,216 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-21 07:52:46,322 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:46,349 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-21 07:52:48,195 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:48,220 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-21 07:52:50,133 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:50,165 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-21 07:52:50,272 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:50,298 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-21 07:52:50,313 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:50,340 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-21 07:52:50,357 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:50,383 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-21 07:52:50,448 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:50,499 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-21 07:52:50,640 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:50,685 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-21 07:52:51,150 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:51,177 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-21 07:52:51,423 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:51,449 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-21 07:52:52,005 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-21 07:52:52,492 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/tpv_rules_local.yml', 'dest': '/srv/galaxy/var/total_perspective_vortex/tpv_rules_local.yml'})
2023-04-21 07:52:52,960 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/config/error_reports.yml', 'dest': '/srv/galaxy/config/error_reports_file.yml'})
2023-04-21 07:52:52,987 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-21 07:52:53,478 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-21 07:52:53,506 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-21 07:52:54,050 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-21 07:52:54,529 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-21 07:52:55,015 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/job_resource_params_conf.xml.j2', 'dest': '/srv/galaxy/config/job_resource_params_conf.xml'})
2023-04-21 07:52:55,490 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/reports.yml', 'dest': '/srv/galaxy/config/reports.yml'})
2023-04-21 07:52:55,518 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-21 07:52:56,046 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=testing.xml)
2023-04-21 07:52:56,505 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_properties.xml)
2023-04-21 07:52:56,532 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-21 07:52:57,044 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:57,070 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-21 07:52:57,266 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:57,293 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-21 07:52:57,401 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:57,428 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-21 07:52:57,444 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:57,469 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-21 07:52:57,484 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:57,514 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-21 07:52:57,528 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:57,555 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-21 07:52:57,569 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:57,595 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-21 07:52:58,132 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:58,161 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-21 07:52:58,273 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:58,305 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-21 07:52:58,410 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:52:58,435 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-21 07:52:59,037 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:52:59,062 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-21 07:52:59,122 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-21 07:52:59,181 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-21 07:53:00,893 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:00,920 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-21 07:53:02,852 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:02,879 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-21 07:53:08,175 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:08,202 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-21 07:53:08,814 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:08,841 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-21 07:53:10,624 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:10,650 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-21 07:53:12,397 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:12,423 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-21 07:53:12,503 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:12,570 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-21 07:53:12,692 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:12,720 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-21 07:53:13,251 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-21 07:53:13,280 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-21 07:53:13,747 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-21 07:53:14,081 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-21 07:53:14,110 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-21 07:53:14,557 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-21 07:53:14,884 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-21 07:53:14,914 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-21 07:53:14,961 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:15,023 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-21 07:53:16,545 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:16,572 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-21 07:53:17,958 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:17,984 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-21 07:53:18,088 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:18,116 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-21 07:53:18,224 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:18,250 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-21 07:53:18,330 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:18,393 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-21 07:53:18,751 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:18,778 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-21 07:53:19,124 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:19,151 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-21 07:53:19,496 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:19,522 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-21 07:53:19,895 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:19,923 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-21 07:53:20,116 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:20,142 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-21 07:53:20,331 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:20,358 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-21 07:53:20,465 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:20,491 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-21 07:53:20,596 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:20,626 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-21 07:53:20,729 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:20,797 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-21 07:53:20,902 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:20,931 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-21 07:53:21,036 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:21,064 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-21 07:53:21,180 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:21,206 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-21 07:53:21,312 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:21,339 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-21 07:53:21,449 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:21,475 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-21 07:53:21,490 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:21,517 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-21 07:53:21,569 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:21,650 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-21 07:53:21,759 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:21,787 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-21 07:53:22,419 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:22,445 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-21 07:53:22,466 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:22,495 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-21 07:53:22,529 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:22,559 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-21 07:53:22,617 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:22,687 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-21 07:53:23,117 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:23,143 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-21 07:53:23,254 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:23,306 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Create TPV mutable dir] *********************
2023-04-21 07:53:23,479 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:23,505 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Copy TPV lint-and-copy-script] **************
2023-04-21 07:53:23,834 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:23,860 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.tpv_auto_lint : Execute TPV lint-and-copy-script] ***********
2023-04-21 07:53:26,601 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:53:26,650 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-21 07:53:26,830 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:26,862 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-21 07:53:26,880 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:26,906 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-21 07:53:27,301 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,327 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-21 07:53:27,364 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,390 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-21 07:53:27,406 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,432 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-21 07:53:27,448 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,474 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-21 07:53:27,499 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,526 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-21 07:53:27,552 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,579 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-21 07:53:27,594 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,645 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : Include OS-specific variables.] **********************
2023-04-21 07:53:27,664 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,692 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : Define redis_package.] *******************************
2023-04-21 07:53:27,722 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,749 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis configuration dir exists.] **************
2023-04-21 07:53:27,936 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:27,965 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is configured.] *************************
2023-04-21 07:53:28,323 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:28,349 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 07:53:28,366 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:28,395 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 07:53:28,441 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.redis/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:28,483 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is installed.] **************************
2023-04-21 07:53:29,305 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:29,331 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : include_tasks] ***************************************
2023-04-21 07:53:29,348 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:29,374 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.redis : Ensure Redis is running and enabled on boot.] ********
2023-04-21 07:53:29,673 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:29,723 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure group exists] *******************************
2023-04-21 07:53:29,995 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:30,028 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure user exists] ********************************
2023-04-21 07:53:30,251 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:30,277 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Check if the app directory exists] *****************
2023-04-21 07:53:30,571 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:30,597 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Empty app directory] *******************************
2023-04-21 07:53:30,628 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:30,654 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure log directory exists] ***********************
2023-04-21 07:53:30,828 p=1149530 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-atime: 1682063175.253361[0m
[0;31m[0m[0;31m-mtime: 1682063316.9602501[0m
[0;31m[0m[0;32m+atime: 1682063610.804229[0m
[0;32m[0m[0;32m+mtime: 1682063610.804229[0m
[0;32m[0m path: /var/log/flower
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: touch[0m
[0;32m[0m

2023-04-21 07:53:30,828 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:53:30,855 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure config directory exists] ********************
2023-04-21 07:53:31,038 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:31,065 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python3 and pip is installed] ***************
2023-04-21 07:53:31,905 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:31,933 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Install virtualenv] ********************************
2023-04-21 07:53:33,057 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:33,083 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure venv directory exists] **********************
2023-04-21 07:53:33,262 p=1149530 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m[0;31m-group: 998[0m
[0;31m[0m[0;32m+group: 0[0m
[0;32m[0m path: /srv/galaxy/venv


2023-04-21 07:53:33,262 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:53:33,289 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Python Flower package is installed] *********
2023-04-21 07:53:34,886 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:34,914 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower configuration file is correct] *******
2023-04-21 07:53:35,251 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:35,281 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Ensure Flower unitfile is correct] *****************
2023-04-21 07:53:35,628 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:35,653 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.flower : Enable Flower] *************************************
2023-04-21 07:53:36,271 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:36,323 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 07:53:36,368 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:36,408 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-21 07:53:37,200 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,226 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-21 07:53:37,392 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,418 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 07:53:37,433 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,459 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 07:53:37,476 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,502 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-21 07:53:37,679 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,706 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-21 07:53:37,738 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,765 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-21 07:53:37,797 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,823 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-21 07:53:37,839 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,865 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-21 07:53:37,880 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,909 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-21 07:53:37,925 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:37,952 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-21 07:53:37,975 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:38,004 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-21 07:53:38,363 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:38,389 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-21 07:53:38,420 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:38,446 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-21 07:53:38,796 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-21 07:53:38,827 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-21 07:53:39,021 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-21 07:53:39,050 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-21 07:53:44,249 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:44,277 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-21 07:53:44,375 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:44,417 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-21 07:53:44,465 p=1149530 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-21 07:53:44,677 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-21 07:53:44,725 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:44,767 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-21 07:53:45,649 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:45,677 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-21 07:53:45,698 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:45,727 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-21 07:53:45,748 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:45,779 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-21 07:53:45,811 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:45,842 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-21 07:53:45,860 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:45,888 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-21 07:53:45,940 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:46,014 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-21 07:53:46,216 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:46,244 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-21 07:53:46,269 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:46,297 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-21 07:53:46,321 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:46,352 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-21 07:53:46,575 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:46,604 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-21 07:53:46,632 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-21 07:53:46,659 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-21 07:53:46,709 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:46,761 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-21 07:53:46,782 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:46,810 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-21 07:53:47,195 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:47,221 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-21 07:53:47,274 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-21 07:53:47,320 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:47,374 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-21 07:53:47,586 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:47,637 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-21 07:53:47,810 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:47,838 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-21 07:53:48,209 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:48,235 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-21 07:53:48,413 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:48,440 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-21 07:53:48,617 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:48,645 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-21 07:53:48,739 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:48,782 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-21 07:53:49,158 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:53:49,483 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-21 07:53:49,512 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-21 07:53:49,700 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-21 07:53:49,861 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=sentry)
2023-04-21 07:53:49,889 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-21 07:53:50,091 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:50,119 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-21 07:53:50,138 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:50,170 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-21 07:53:50,476 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:50,527 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Load OS-specific vars.] *****************************
2023-04-21 07:53:50,548 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:50,574 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 07:53:50,588 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:50,616 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 07:53:50,663 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/setup-Debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:50,705 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure old versions of Docker are not installed.] ***
2023-04-21 07:53:51,276 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:51,301 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure dependencies are installed.] *****************
2023-04-21 07:53:52,138 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:52,166 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu < 20.04 and any other systems).] ***
2023-04-21 07:53:52,182 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:52,209 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure additional dependencies are installed (on Ubuntu >= 20.04).] ***
2023-04-21 07:53:53,046 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:53,074 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key.] ********************************
2023-04-21 07:53:53,552 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:53,579 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure curl is present (on older systems without SNI).] ***
2023-04-21 07:53:53,606 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:53,633 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker apt key (alternative for older systems without SNI).] ***
2023-04-21 07:53:53,660 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:53,687 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Add Docker repository.] *****************************
2023-04-21 07:53:54,004 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:54,031 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages.] ***************************
2023-04-21 07:53:54,048 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:54,077 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker packages (with downgrade option).] ***
2023-04-21 07:53:54,896 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:54,922 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose plugin.] *********************
2023-04-21 07:53:54,950 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:54,978 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install docker-compose-plugin (with downgrade option).] ***
2023-04-21 07:53:55,008 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:55,037 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure /etc/docker/ directory exists.] **************
2023-04-21 07:53:55,072 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:55,098 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Configure Docker daemon options.] *******************
2023-04-21 07:53:55,137 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:55,165 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure Docker is started and enabled at boot.] ******
2023-04-21 07:53:55,493 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:55,518 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Ensure handlers are notified now to avoid firewall conflicts.] ***
2023-04-21 07:53:55,567 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 07:53:55,623 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/geerlingguy.docker/tasks/docker-compose.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:55,665 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check current docker-compose version.] **************
2023-04-21 07:53:55,867 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:55,893 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : set_fact] *******************************************
2023-04-21 07:53:55,939 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:55,967 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Delete existing docker-compose version if it's different.] ***
2023-04-21 07:53:56,000 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,027 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Install Docker Compose (if configured).] ************
2023-04-21 07:53:56,080 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,109 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Get docker group info using getent.] ****************
2023-04-21 07:53:56,157 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,193 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : Check if there are any users to add to the docker group.] ***
2023-04-21 07:53:56,209 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,239 p=1149530 u=ubuntu n=ansible | TASK [geerlingguy.docker : include_tasks] **************************************
2023-04-21 07:53:56,259 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,313 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 07:53:56,362 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/init.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:56,416 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Generate] **********************************
2023-04-21 07:53:56,440 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,472 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set] ***************************************
2023-04-21 07:53:56,498 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,526 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set the erlang_cookie with the predefined value] ***
2023-04-21 07:53:56,542 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,572 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create the directory if it does not exist] ***
2023-04-21 07:53:56,747 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:56,776 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Copy templates] ****************************
2023-04-21 07:53:57,121 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'rabbitmq.conf.j2', 'dest': '/opt/rabbitmq/rabbitmq.conf', 'mode': '0644'})
2023-04-21 07:53:57,820 p=1149530 u=ubuntu n=ansible | [0;31m--- before: /opt/rabbitmq/.erlang.cookie[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-1149530f_8ri635/tmpg6jwy0d6/erlang.cookie.j2[0m
[0;32m[0m[0;36m@@ -1 +1 @@[0m
[0;36m[0m[0;31m-Pb6sTqMPsfcTro1f[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+VFOg5wYs31qRxpKJ[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-21 07:53:57,822 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'erlang.cookie.j2', 'dest': '/opt/rabbitmq/.erlang.cookie', 'mode': '0600'})
2023-04-21 07:53:57,853 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 07:53:57,896 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/start.yml for gat-20.eu.galaxy.training
2023-04-21 07:53:57,936 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if standalone setup] ***
2023-04-21 07:53:57,987 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:58,013 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set container detail if cluster setup] *****
2023-04-21 07:53:58,029 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:53:58,056 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Start a rabbitmq container] ****************
2023-04-21 07:53:58,749 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:53:58,776 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Pause for some seconds to give time to the container to come up] ***
2023-04-21 07:53:58,793 p=1149530 u=ubuntu n=ansible | Pausing for 20 seconds
2023-04-21 07:53:58,793 p=1149530 u=ubuntu n=ansible | (ctrl+C then 'C' = continue early, ctrl+C then 'A' = abort)
2023-04-21 07:54:18,796 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:18,824 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : include_tasks] *****************************
2023-04-21 07:54:18,871 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/configure.yml for gat-20.eu.galaxy.training
2023-04-21 07:54:18,916 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Remove guest user] *************************
2023-04-21 07:54:20,200 p=1149530 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => changed=true 
  rc: 67
  stderr: |-
    Error:
    User "guest" does not exist
  stderr_lines: <omitted>
  stdout: Deleting user "guest" ...
  stdout_lines: <omitted>
2023-04-21 07:54:20,200 p=1149530 u=ubuntu n=ansible | ...ignoring
2023-04-21 07:54:20,231 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Enable plugins] ****************************
2023-04-21 07:54:24,370 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=rabbitmq_management)
2023-04-21 07:54:24,402 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create users and vhosts] *******************
2023-04-21 07:54:24,472 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'admin', 'password': 'tbNBbUyykYUWfErpxE7iuiWcc+DUo0QL', 'tags': 'administrator', 'vhost': '/'})
2023-04-21 07:54:24,490 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'pulsar_au', 'password': '3v9BOaduH3yvQ8Uo1NpTS+ARGFRFmx1N', 'vhost': '/pulsar/pulsar_au'})
2023-04-21 07:54:24,508 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'galaxy', 'password': 'hecVhf5kfHWv3uIiJH1BCSm4XeSAeUat', 'vhost': 'galaxy_internal'})
2023-04-21 07:54:24,526 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.rabbitmqserver/tasks/users_vhosts.yml for gat-20.eu.galaxy.training => (item={'user': 'flower', 'password': 'dOeKTqJn5jtQhnqBbaz0vyCqBy2mbDYd', 'tags': 'administrator', 'vhost': 'galaxy_internal'})
2023-04-21 07:54:24,570 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 07:54:25,630 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:25,661 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 07:54:26,707 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:26,733 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:54:26,750 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:26,778 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:54:26,794 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:26,821 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 07:54:27,863 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:27,890 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 07:54:29,035 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:29,062 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 07:54:30,174 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:30,201 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 07:54:31,256 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:31,283 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:54:31,300 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:31,328 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:54:31,345 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:31,372 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 07:54:32,404 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:32,430 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 07:54:32,450 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:32,477 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 07:54:33,604 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:33,631 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 07:54:34,702 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:34,730 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:54:34,747 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:34,778 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:54:34,794 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:34,823 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 07:54:35,880 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:35,907 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 07:54:35,926 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:36,005 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create vhosts] *****************************
2023-04-21 07:54:37,046 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:37,073 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Check if user is OK] ***********************
2023-04-21 07:54:38,143 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:38,173 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:54:38,189 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:38,216 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Create user if authentication failed] ******
2023-04-21 07:54:38,232 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:38,259 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set permission on users] *******************
2023-04-21 07:54:39,289 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:39,317 p=1149530 u=ubuntu n=ansible | TASK [usegalaxy_eu.rabbitmqserver : Set tags on user] **************************
2023-04-21 07:54:40,460 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:54:40,517 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create group] *************************************
2023-04-21 07:54:40,732 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:40,759 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create user account] ******************************
2023-04-21 07:54:40,982 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:41,008 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure directory is available] ********************
2023-04-21 07:54:41,183 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:41,212 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Clone repository] *********************************
2023-04-21 07:54:42,140 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:42,168 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send gunicorn conf] *******************************
2023-04-21 07:54:42,503 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:42,530 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install base dependencies] ************************
2023-04-21 07:54:44,185 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:44,212 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure config directory is available] *************
2023-04-21 07:54:44,388 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:44,416 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Send config] **************************************
2023-04-21 07:54:44,803 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:44,830 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create style directory] ***************************
2023-04-21 07:54:45,016 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:45,043 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy Galaxy's stylesheet] *************************
2023-04-21 07:54:45,245 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:45,273 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install systemd unit file] ************************
2023-04-21 07:54:45,625 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:45,652 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Install socket] ***********************************
2023-04-21 07:54:46,004 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:46,034 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Update database] **********************************
2023-04-21 07:54:46,051 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:46,078 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Create superuser if needed] ***********************
2023-04-21 07:54:46,712 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:46,739 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Ensure static directory is available] *************
2023-04-21 07:54:46,912 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:46,940 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Collect static files] *****************************
2023-04-21 07:54:47,451 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:47,477 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom HTML templates] ***********************
2023-04-21 07:54:47,513 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'}) 
2023-04-21 07:54:47,519 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'}) 
2023-04-21 07:54:47,527 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'}) 
2023-04-21 07:54:47,534 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'}) 
2023-04-21 07:54:47,541 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'}) 
2023-04-21 07:54:47,552 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'}) 
2023-04-21 07:54:47,556 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'}) 
2023-04-21 07:54:47,563 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'}) 
2023-04-21 07:54:47,570 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'}) 
2023-04-21 07:54:47,577 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'}) 
2023-04-21 07:54:47,584 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'}) 
2023-04-21 07:54:47,589 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'}) 
2023-04-21 07:54:47,591 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:47,617 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy custom static files] *************************
2023-04-21 07:54:47,637 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:47,664 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default HTML templates] **********************
2023-04-21 07:54:48,024 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'footer.html', 'dest': '/srv/tiaas/code/templates/snippets/footer.html'})
2023-04-21 07:54:48,357 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/about/1_intro.html'})
2023-04-21 07:54:48,670 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/2_why_tiaas_funding.txt', 'dest': '/srv/tiaas/code/templates/snippets/about/2_why_tiaas_funding.txt'})
2023-04-21 07:54:49,014 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/3_eligibility.html', 'dest': '/srv/tiaas/code/templates/snippets/about/3_eligibility.html'})
2023-04-21 07:54:49,338 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'about/4_how_does_it_work.html', 'dest': '/srv/tiaas/code/templates/snippets/about/4_how_does_it_work.html'})
2023-04-21 07:54:49,666 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'calendar/intro.html', 'dest': '/srv/tiaas/code/templates/snippets/calendar/intro.html'})
2023-04-21 07:54:49,985 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/1_intro.html', 'dest': '/srv/tiaas/code/templates/snippets/register/1_intro.html'})
2023-04-21 07:54:50,324 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/2_about_the_course.html', 'dest': '/srv/tiaas/code/templates/snippets/register/2_about_the_course.html'})
2023-04-21 07:54:50,687 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/3_resource_usage.html', 'dest': '/srv/tiaas/code/templates/snippets/register/3_resource_usage.html'})
2023-04-21 07:54:51,024 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/4_advertising.html', 'dest': '/srv/tiaas/code/templates/snippets/register/4_advertising.html'})
2023-04-21 07:54:51,382 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/5_conclusion.html', 'dest': '/srv/tiaas/code/templates/snippets/register/5_conclusion.html'})
2023-04-21 07:54:51,718 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'register/6_thanks.html', 'dest': '/srv/tiaas/code/templates/snippets/register/6_thanks.html'})
2023-04-21 07:54:51,748 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Copy default static files] ************************
2023-04-21 07:54:52,530 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:52,556 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.tiaas2 : Schedule cron job to disassociate training groups from roles after training expires] ***
2023-04-21 07:54:52,749 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:52,801 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-21 07:54:53,395 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:53,420 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-21 07:54:53,601 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:53,628 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-21 07:54:53,644 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:53,670 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-21 07:54:53,836 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:53,862 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-21 07:54:54,044 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:54,073 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-21 07:54:54,246 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:54,273 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-21 07:54:54,465 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:54,492 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-21 07:54:54,803 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:54,855 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-21 07:54:54,891 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:54,917 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-21 07:54:54,955 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:54,981 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-21 07:54:54,996 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:55,023 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-21 07:54:55,060 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:55,086 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-21 07:54:55,177 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-21 07:54:55,246 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-21 07:54:55,309 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:54:55,354 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-21 07:54:56,162 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:56,187 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-21 07:54:56,880 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:56,906 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 07:54:56,922 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:56,950 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 07:54:57,244 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:57,270 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-21 07:54:57,287 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:57,314 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-21 07:54:58,096 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:58,123 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-21 07:54:58,164 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-21 07:54:58,206 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-21 07:54:58,417 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-21 07:54:58,446 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-21 07:54:58,800 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-21 07:54:58,837 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-21 07:54:59,127 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:59,157 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-21 07:54:59,466 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:59,493 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-21 07:54:59,509 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:54:59,536 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-21 07:54:59,877 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:54:59,903 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-21 07:55:00,259 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:00,287 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-21 07:55:00,464 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:00,491 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-21 07:55:00,505 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:00,533 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-21 07:55:00,888 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:00,914 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-21 07:55:01,008 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-21 07:55:01,048 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-21 07:55:01,065 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,094 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-21 07:55:01,123 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,151 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-21 07:55:01,177 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,204 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-21 07:55:01,409 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,439 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-21 07:55:01,470 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,497 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-21 07:55:01,691 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,721 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-21 07:55:01,750 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,778 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-21 07:55:01,794 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,824 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-21 07:55:01,840 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,868 p=1149530 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-21 07:55:01,884 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,936 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on RedHat] **********************************
2023-04-21 07:55:01,952 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:01,980 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Debian] **********************************
2023-04-21 07:55:02,047 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/Debian.yml for gat-20.eu.galaxy.training
2023-04-21 07:55:02,118 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set name if state != latest] ***************
2023-04-21 07:55:02,134 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:02,168 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch] ***********
2023-04-21 07:55:02,192 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:02,222 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for x86_64] ***
2023-04-21 07:55:02,245 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:02,274 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set telegraf_agent_package_arch specific for arm64] ***
2023-04-21 07:55:02,291 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:02,322 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the system can use the HTTPS transport for APT] ***
2023-04-21 07:55:02,518 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:02,545 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install APT HTTPS transport] ***************
2023-04-21 07:55:02,563 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:02,595 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf apt key] *****************
2023-04-21 07:55:02,652 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:02,680 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Ensure the shared keyrings directory exists] ***
2023-04-21 07:55:02,894 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:02,921 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Create shared keyrings directory] **********
2023-04-21 07:55:02,980 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:03,008 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf apt key] ******************
2023-04-21 07:55:03,337 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:03,365 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Set Telegraf apt repository parameters] ****
2023-04-21 07:55:03,425 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:03,455 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository (using LSB)] *******
2023-04-21 07:55:03,833 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:03,861 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Add Telegraf repository] *******************
2023-04-21 07:55:03,895 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:03,921 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] ***********
2023-04-21 07:55:09,326 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:09,355 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (repo)] ***********
2023-04-21 07:55:11,658 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:11,686 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Download Telegraf package (online)] ********
2023-04-21 07:55:11,701 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:11,730 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install Telegraf package (online)] *********
2023-04-21 07:55:11,747 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:11,775 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Remove repository (online/offline install)] ***
2023-04-21 07:55:11,792 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:11,820 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on Suse] ************************************
2023-04-21 07:55:11,837 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:11,866 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on FreeBSD] *********************************
2023-04-21 07:55:11,883 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:11,915 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install on MacOS] ***********************************
2023-04-21 07:55:11,932 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:11,961 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : include_tasks] **************************************
2023-04-21 07:55:11,979 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:12,006 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Configure Telegraf] *********************************
2023-04-21 07:55:12,063 p=1149530 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/dj-wasabi.telegraf/tasks/configure_linux.yml for gat-20.eu.galaxy.training
2023-04-21 07:55:12,157 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve ec2 facts] *********************************
2023-04-21 07:55:12,175 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:12,202 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add prefix path] ************************************
2023-04-21 07:55:12,219 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:12,247 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Retrieve all ec2 tags on the instance] **************
2023-04-21 07:55:12,265 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:12,292 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions < 0.10.0] ************
2023-04-21 07:55:12,309 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:12,340 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy the template for versions >= 0.10.0] ***********
2023-04-21 07:55:12,929 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:12,955 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Check if extra plugins directory exists in case of exclusive] ***
2023-04-21 07:55:12,973 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:13,000 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Delete telegraf extra plugin path] ******************
2023-04-21 07:55:13,016 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:13,044 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Create telegraf extra plugin path] ******************
2023-04-21 07:55:13,060 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:13,089 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Copy telegraf extra plugins] ************************
2023-04-21 07:55:13,639 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes)
2023-04-21 07:55:13,668 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Remove telegraf extra plugins] **********************
2023-04-21 07:55:13,717 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=listen_galaxy_routes) 
2023-04-21 07:55:13,720 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:13,802 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Force restart service after reread config] **********
2023-04-21 07:55:13,852 p=1149530 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.rabbitmqserver : docker restart] *****************
2023-04-21 07:55:20,819 p=1149530 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-21 07:55:20,847 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Start Telegraf (If it wasn't running)] **************
2023-04-21 07:55:21,207 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,241 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Add telegraf user to docker group] ******************
2023-04-21 07:55:21,257 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,285 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install smartmontools] ******************************
2023-04-21 07:55:21,303 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,332 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Find path of smartctl] ******************************
2023-04-21 07:55:21,349 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,381 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Ensure telegraf user can execute smartctl] **********
2023-04-21 07:55:21,399 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,427 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Debian | Install lm-sensors] ************************
2023-04-21 07:55:21,444 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,476 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : RedHat | Install lm-sensors] ************************
2023-04-21 07:55:21,495 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,525 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on Windows] ************
2023-04-21 07:55:21,542 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,574 p=1149530 u=ubuntu n=ansible | TASK [dj-wasabi.telegraf : Install / Configure telegraf on MacOS] **************
2023-04-21 07:55:21,592 p=1149530 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,715 p=1149530 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-21 07:55:21,952 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:21,983 p=1149530 u=ubuntu n=ansible | TASK [Install slurm-drmaa] *****************************************************
2023-04-21 07:55:22,943 p=1149530 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-21 07:55:23,005 p=1149530 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-21 07:55:23,006 p=1149530 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=269  changed=22   unreachable=0    failed=0    skipped=164  rescued=0    ignored=1   
