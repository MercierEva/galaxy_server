2023-04-18 20:42:26,784 p=78142 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:42:26,811 p=78142 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:42:27,829 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:27,847 p=78142 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:42:28,733 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:28,784 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:42:28,819 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:28,864 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:42:28,885 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:28,903 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:42:28,923 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:28,942 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:42:28,963 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:28,982 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:42:29,683 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:29,701 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:42:29,966 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:29,985 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:42:30,025 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,043 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:42:30,742 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,760 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:42:30,783 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,801 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:42:30,831 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,848 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:42:30,877 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,894 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:42:30,918 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,936 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:42:30,948 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:30,966 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:42:31,233 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:31,251 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:42:31,515 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:31,533 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:42:31,550 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:31,568 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:42:31,728 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:31,747 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:42:32,184 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:32,202 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:42:32,553 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:32,571 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:42:32,613 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:32,647 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:42:32,836 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:42:32,976 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:42:32,998 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:42:33,158 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:33,176 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:42:33,490 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:42:33,511 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:42:33,814 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:42:33,835 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:42:34,152 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:34,170 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:42:34,482 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:34,501 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:42:34,654 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:34,675 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:42:35,166 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,200 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:42:35,223 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:42:35,225 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,243 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:42:35,254 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,273 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:42:35,305 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:42:35,307 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,326 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:42:35,675 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:42:35,695 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:42:35,706 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,724 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:42:35,746 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,767 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:42:35,778 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:35,796 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:42:36,141 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:42:36,161 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:42:36,173 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:36,259 p=78142 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:42:36,275 p=78142 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:42:37,348 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:37,354 p=78142 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:42:38,088 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,094 p=78142 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:42:38,107 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,113 p=78142 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:42:38,831 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,847 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:42:38,862 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:42:38,868 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:42:38,910 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,916 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:42:38,952 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:38,958 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:42:38,991 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:42:39,001 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:42:39,004 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:42:39,007 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:42:39,018 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:42:39,028 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:42:39,031 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:42:39,035 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:42:39,038 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:42:39,047 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:42:39,100 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:42:39,126 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:42:39,152 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:42:39,176 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:42:39,178 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:39,184 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:42:39,252 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:42:39,291 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:42:39,324 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:42:39,332 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:42:39,371 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:39,383 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:42:39,477 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:39,484 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:42:40,020 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:40,027 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:42:40,136 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:40,143 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:42:40,434 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:42:40,586 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:42:40,594 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:42:40,770 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:42:40,919 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:42:40,927 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:42:41,005 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:41,011 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:42:41,028 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:41,034 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:42:41,055 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:41,069 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:42:41,398 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:41,404 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:42:41,736 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:42:42,045 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:42:42,348 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:42:42,655 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:42:42,663 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:42:43,006 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:42:43,300 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:42:43,596 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:42:43,893 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:42:44,194 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:42:44,492 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/datasets)
2023-04-18 20:42:44,796 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/jobs)
2023-04-18 20:42:45,115 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:42:45,415 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:42:45,736 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:42:45,745 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:42:45,772 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:45,810 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:42:47,197 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:47,204 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:42:47,301 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:47,308 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:42:48,199 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:48,205 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:42:49,153 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,160 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:42:49,260 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,266 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:42:49,278 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,284 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:42:49,296 p=78142 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,302 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:42:49,332 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:49,352 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:42:49,459 p=78142 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:42:49,472 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:42:49,892 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:49,899 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:42:50,101 p=78142 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:42:50,107 p=78142 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:42:50,210 p=78142 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: "[{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection':
    3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'},
    'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion':
    True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{
    galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. [{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{
    vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml',
    'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection':
    'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml',
    'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined"
2023-04-18 20:42:50,211 p=78142 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 20:42:50,211 p=78142 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=52   changed=0    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
2023-04-18 20:46:43,419 p=83787 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:46:43,445 p=83787 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:46:44,467 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:44,485 p=83787 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:46:45,348 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:45,400 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:46:45,436 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:46:45,480 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:46:45,502 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:45,520 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:46:45,540 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:45,559 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:46:45,581 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:45,600 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:46:46,313 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:46,331 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:46:46,595 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:46,614 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:46:46,653 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:46,670 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:46:47,373 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,391 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:46:47,414 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,433 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:46:47,462 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,480 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:46:47,505 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,523 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:46:47,547 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,565 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:46:47,577 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,595 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:46:47,857 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:47,875 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:46:48,139 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:48,157 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:46:48,174 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:48,192 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:46:48,351 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:48,369 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:46:48,788 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:48,806 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:46:49,155 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:49,174 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:46:49,217 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:46:49,251 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:46:49,431 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:46:49,581 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:46:49,602 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:46:49,768 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:49,787 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:46:50,106 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:46:50,127 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:46:50,450 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:46:50,470 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:46:50,788 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:50,807 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:46:51,116 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,134 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:46:51,289 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,307 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:46:51,780 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,816 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:46:51,838 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:46:51,841 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,859 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:46:51,870 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,888 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:46:51,922 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:46:51,924 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:51,943 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:46:52,304 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:46:52,323 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:46:52,334 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:52,353 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:46:52,374 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:52,392 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:46:52,403 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:52,420 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:46:52,777 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:46:52,797 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:46:52,808 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:52,894 p=83787 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:46:52,910 p=83787 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:46:53,703 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:53,709 p=83787 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:46:54,421 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:54,427 p=83787 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:46:54,439 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:54,445 p=83787 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:46:55,152 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,167 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:46:55,183 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:46:55,189 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:46:55,230 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,236 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:46:55,269 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,275 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:46:55,304 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:46:55,310 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:46:55,323 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:46:55,333 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:46:55,343 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:46:55,354 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:46:55,357 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:46:55,361 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:46:55,364 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:46:55,372 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:46:55,428 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:46:55,455 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:46:55,482 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:46:55,506 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:46:55,508 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,514 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:46:55,585 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:46:55,625 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:46:55,660 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:46:55,667 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:46:55,705 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:46:55,718 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:46:55,823 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:55,829 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:46:56,379 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:56,386 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:46:56,490 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:46:56,496 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:46:56,795 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:46:56,944 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:46:56,953 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:46:57,126 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:46:57,280 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:46:57,288 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:46:57,365 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:57,371 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:46:57,388 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:57,394 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:46:57,417 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:46:57,430 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:46:57,749 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:46:57,756 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:46:58,093 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:46:58,396 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:46:58,703 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:46:59,016 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:46:59,025 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:46:59,358 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:46:59,656 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:46:59,972 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:47:00,272 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:47:00,576 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:47:00,881 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/datasets)
2023-04-18 20:47:01,174 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/jobs)
2023-04-18 20:47:01,476 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:47:01,777 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:47:02,091 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:47:02,099 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:47:02,125 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:47:02,140 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:47:03,537 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:03,544 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:47:03,662 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:47:03,668 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:47:04,578 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:04,584 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:47:05,539 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:05,546 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:47:05,643 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:47:05,649 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:47:05,660 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:47:05,666 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:47:05,679 p=83787 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:47:05,685 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:47:05,714 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:47:05,735 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:47:05,845 p=83787 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:47:05,857 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:47:06,276 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:06,283 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:47:06,490 p=83787 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:47:06,496 p=83787 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:47:06,599 p=83787 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: "[{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection':
    3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'},
    'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion':
    True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{
    galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. [{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{
    vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml',
    'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection':
    'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml',
    'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined"
2023-04-18 20:47:06,599 p=83787 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 20:47:06,600 p=83787 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=52   changed=0    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
2023-04-18 20:53:28,460 p=91689 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:53:28,487 p=91689 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:53:29,750 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:29,768 p=91689 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:53:30,628 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:30,679 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:53:30,715 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:30,759 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:53:30,781 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:30,799 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:53:30,820 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:30,838 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:53:30,859 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:30,877 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:53:31,605 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:31,624 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:53:31,902 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:31,921 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:53:31,962 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:31,981 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:53:32,694 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,712 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:53:32,736 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,754 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:53:32,784 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,802 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:53:32,826 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,844 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:53:32,868 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,886 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:53:32,898 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:32,917 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:53:33,188 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:33,206 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:53:33,465 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:33,484 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:53:33,501 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:33,519 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:53:33,690 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:33,709 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:53:34,147 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:34,165 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:53:34,514 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:34,533 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:53:34,576 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:34,611 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:53:34,790 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:53:34,932 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:53:34,953 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:53:35,111 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:35,129 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:53:35,451 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:53:35,473 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:53:35,786 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:53:35,806 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:53:36,128 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:36,147 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:53:36,459 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:36,477 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:53:36,631 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:36,650 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:53:37,134 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,168 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:53:37,191 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:53:37,193 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,211 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:53:37,221 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,240 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:53:37,300 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:53:37,302 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,319 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:53:37,656 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:53:37,676 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:53:37,687 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,705 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:53:37,728 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,746 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:53:37,758 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:37,776 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:53:38,111 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:53:38,132 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:53:38,146 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:38,233 p=91689 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:53:38,250 p=91689 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:53:39,017 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:39,022 p=91689 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:53:39,769 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:39,777 p=91689 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:53:39,791 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:39,797 p=91689 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:53:40,512 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:40,529 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:53:40,545 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:53:40,551 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:53:40,593 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:40,599 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:53:40,633 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:40,640 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:53:40,677 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:53:40,681 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:53:40,692 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:53:40,696 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:53:40,706 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:53:40,716 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:53:40,723 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:53:40,726 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:53:40,730 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:53:40,737 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:53:40,795 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:53:40,820 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:53:40,846 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:53:40,869 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:53:40,871 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:40,877 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:53:40,947 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:53:40,984 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:53:41,017 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:53:41,025 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:53:41,067 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:41,079 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:53:41,176 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:41,182 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:53:41,705 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:41,712 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:53:41,811 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:41,817 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:53:42,100 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:53:42,259 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:53:42,267 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:53:42,451 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:53:42,600 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:53:42,609 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:53:42,686 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:42,693 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:53:42,709 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:42,715 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:53:42,735 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:42,748 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:53:43,068 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:43,075 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:53:43,409 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:53:43,723 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:53:44,028 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:53:44,327 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:53:44,335 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:53:44,677 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:53:44,971 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:53:45,266 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:53:45,572 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:53:45,868 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:53:46,166 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/datasets)
2023-04-18 20:53:46,472 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/jobs)
2023-04-18 20:53:46,775 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:53:47,079 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:53:47,384 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:53:47,393 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:53:47,420 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:47,435 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:53:48,744 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:48,750 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:53:48,848 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:48,854 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:53:49,735 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:49,741 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:53:50,674 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:50,681 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:53:50,777 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:50,783 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:53:50,795 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:50,801 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:53:50,812 p=91689 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:53:50,818 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:53:50,847 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:50,867 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:53:50,970 p=91689 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:53:50,982 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:53:51,378 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:51,384 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:53:51,575 p=91689 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:53:51,582 p=91689 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:53:51,688 p=91689 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: "[{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection':
    3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'},
    'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion':
    True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{
    galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. [{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{
    vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml',
    'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection':
    'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml',
    'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined"
2023-04-18 20:53:51,689 p=91689 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 20:53:51,689 p=91689 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=52   changed=0    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
2023-04-18 20:55:00,735 p=94815 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:55:00,750 p=94815 u=ubuntu n=ansible | ERROR! vars file group_vars/secret.yml was not found
Could not find file on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-04-18 20:55:41,074 p=95433 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:55:41,100 p=95433 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:55:42,074 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:42,093 p=95433 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:55:42,931 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:42,983 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:55:43,019 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:55:43,063 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:55:43,086 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:43,104 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:55:43,126 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:43,144 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:55:43,166 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:43,184 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:55:43,928 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:43,947 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:55:44,207 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:44,226 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:55:44,263 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:44,285 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:55:45,012 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,031 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:55:45,054 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,072 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:55:45,104 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,122 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:55:45,146 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,164 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:55:45,187 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,207 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:55:45,219 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,237 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:55:45,512 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,530 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:55:45,789 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,807 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:55:45,825 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:45,843 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:55:46,013 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:46,031 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:55:46,467 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:46,485 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:55:46,835 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:46,853 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:55:46,896 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:55:46,932 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:55:47,135 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:55:47,281 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:55:47,302 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:55:47,481 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:47,500 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:55:47,818 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:55:47,839 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:55:48,165 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:55:48,185 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:55:48,503 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:48,521 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:55:48,835 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:48,853 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:55:49,012 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,030 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:55:49,515 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,550 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:55:49,599 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:55:49,600 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,618 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:55:49,629 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,648 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:55:49,680 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:55:49,682 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:49,700 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:55:50,035 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:55:50,056 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:55:50,066 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:50,085 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:55:50,106 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:50,124 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:55:50,135 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:50,153 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:55:50,511 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:55:50,532 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:55:50,543 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:50,629 p=95433 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:55:50,645 p=95433 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:55:51,657 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:51,664 p=95433 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:55:52,404 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:52,410 p=95433 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:55:52,423 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:52,428 p=95433 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:55:53,131 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,146 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:55:53,162 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:55:53,168 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:55:53,209 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,215 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:55:53,246 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,252 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:55:53,280 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:55:53,287 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:55:53,299 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:55:53,302 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:55:53,309 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:55:53,320 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:55:53,323 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:55:53,328 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:55:53,331 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:55:53,339 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:55:53,392 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:55:53,417 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:55:53,443 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:55:53,465 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:55:53,468 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,474 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:55:53,544 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:55:53,582 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:55:53,614 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:55:53,621 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:55:53,658 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:55:53,675 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:55:53,776 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:53,782 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:55:54,306 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:54,312 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:55:54,411 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:55:54,417 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:55:54,710 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:55:54,864 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:55:54,872 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:55:55,050 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:55:55,200 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:55:55,208 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:55:55,285 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:55,291 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:55:55,308 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:55,314 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:55:55,334 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:55:55,347 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:55:55,671 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:55:55,677 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:55:56,027 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:55:56,334 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:55:56,636 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:55:56,945 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:55:56,954 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:55:57,291 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:55:57,598 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:55:57,900 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:55:58,205 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:55:58,509 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:55:58,811 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/datasets)
2023-04-18 20:55:59,117 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/jobs)
2023-04-18 20:55:59,409 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:55:59,715 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:56:00,033 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:56:00,043 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:56:00,071 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:56:00,087 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:56:01,523 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:01,530 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:56:01,624 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:56:01,631 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:56:02,515 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:02,522 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:56:03,454 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:03,461 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:56:03,560 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:56:03,566 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:56:03,579 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:56:03,585 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:56:03,597 p=95433 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:56:03,603 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:56:03,632 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:56:03,653 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:56:03,760 p=95433 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:56:03,773 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:56:04,178 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:04,184 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:56:04,375 p=95433 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:56:04,381 p=95433 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:56:04,481 p=95433 u=ubuntu n=ansible | fatal: [gat-20.eu.galaxy.training]: FAILED! => 
  msg: "[{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection':
    3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'},
    'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion':
    True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{
    galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. [{'src': 'files/galaxy/themes.yml', 'dest': '{{ galaxy_config.galaxy.themes_config_file }}'}]: {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection': 'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{
    vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml', 'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml',
    'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined. {'galaxy': {'brand': 'Mars \U0001F680', 'logo_src': 'https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png', 'themes_config_file': '{{ galaxy_config_dir }}/themes.yml', 'admin_users': ['admin@example.org'], 'database_connection':
    'postgresql:///{{ galaxy_db_name }}?host=/var/run/postgresql', 'file_path': '/data/datasets', 'job_working_directory': '/data/jobs', 'object_store_store_by': 'uuid', 'id_secret': '{{ vault_id_secret }}', 'job_config': '{{ galaxy_job_config }}', 'slow_query_log_threshold': 5, 'enable_per_request_sql_debugging': True, 'nginx_x_accel_redirect_base': '/_x_accel_redirect', 'watch_job_rules': 'auto', 'allow_path_paste': True, 'enable_quotas': True, 'allow_user_deletion': True, 'show_welcome_with_login': True, 'expose_user_name': True, 'expose_dataset_path': True, 'expose_potentially_sensitive_job_metrics': True, 'retry_job_output_collection': 3, 'cleanup_job': 'onsuccess', 'allow_user_impersonation': True, 'outputs_to_working_directory': True, 'new_user_dataset_access_role_default_private': True, 'galaxy_infrastructure_url': 'https://{{ inventory_hostname }}', 'tus_upload_store': '{{ galaxy_tus_upload_store }}', 'tool_data_table_config_path': '/cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml',
    'dependency_resolvers_config_file': '{{ galaxy_config_dir }}/dependency_resolvers_conf.xml', 'containers_resolvers_config_file': '{{ galaxy_config_dir }}/container_resolvers_conf.yml'}, 'gravity': {'process_manager': 'systemd', 'galaxy_root': '{{ galaxy_root }}/server', 'galaxy_user': '{{ galaxy_user_name }}', 'virtualenv': '{{ galaxy_venv_dir }}', 'gunicorn': {'bind': 'unix:{{ galaxy_mutable_config_dir }}/gunicorn.sock', 'workers': 2, 'extra_args': '--forwarded-allow-ips=\"*\"', 'preload': True}, 'celery': {'concurrency': 2, 'loglevel': 'DEBUG'}, 'tusd': {'enable': True, 'tusd_path': '/usr/local/sbin/tusd', 'upload_dir': '{{ galaxy_tus_upload_store }}'}, 'handlers': {'handler': {'processes': 2, 'pools': ['job-handlers', 'workflow-schedulers']}}}}: 'vault_id_secret' is undefined. 'vault_id_secret' is undefined"
2023-04-18 20:56:04,482 p=95433 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 20:56:04,482 p=95433 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=52   changed=0    unreachable=0    failed=1    skipped=21   rescued=0    ignored=0   
2023-04-18 20:58:47,736 p=99975 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You are using an internal name to access 
the community.general.make modules. This has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in version 9.0.0. Deprecation warnings 
can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-04-18 20:58:47,814 p=99975 u=ubuntu n=ansible | PLAY [dbservers] *****************************************************************************************************
2023-04-18 20:58:47,828 p=99975 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:58:49,043 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:49,050 p=99975 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:58:49,938 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:49,954 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:58:49,977 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-18 20:58:49,986 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] *************************************************************
2023-04-18 20:58:50,007 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:50,013 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] *************************************
2023-04-18 20:58:50,036 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:50,042 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] **********************************************
2023-04-18 20:58:50,065 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:50,071 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ********************************************************
2023-04-18 20:58:50,767 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:50,774 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] **************************************************************
2023-04-18 20:58:51,049 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,056 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:58:51,095 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,100 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *******************************************************************
2023-04-18 20:58:51,807 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,813 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *******************************************************************
2023-04-18 20:58:51,835 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,841 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] **********************************************************
2023-04-18 20:58:51,871 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,877 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ********************************************************************
2023-04-18 20:58:51,902 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,908 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ******************************************************************
2023-04-18 20:58:51,931 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,938 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:58:51,951 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:51,957 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] **********************************************************************
2023-04-18 20:58:52,222 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:52,228 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ****************************************
2023-04-18 20:58:52,495 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:52,500 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] **********************************************
2023-04-18 20:58:52,516 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:52,522 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] *******************************
2023-04-18 20:58:52,692 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:52,698 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] *****************************************************************
2023-04-18 20:58:53,133 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:53,138 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] ****************************************************************
2023-04-18 20:58:53,502 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:53,508 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] **********************************************************************
2023-04-18 20:58:53,537 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-18 20:58:53,547 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] **********************************************************
2023-04-18 20:58:53,729 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-18 20:58:53,881 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-18 20:58:53,889 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] *****************************************************
2023-04-18 20:58:54,057 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:54,063 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] ****************************************************
2023-04-18 20:58:54,392 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-18 20:58:54,400 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ********************************************************
2023-04-18 20:58:54,706 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-18 20:58:54,714 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] *****************************************************
2023-04-18 20:58:55,030 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:55,036 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *******************************************************************
2023-04-18 20:58:55,345 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:55,351 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] **************************************
2023-04-18 20:58:55,501 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:55,508 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *******************************************************
2023-04-18 20:58:56,006 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,017 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] **********************************
2023-04-18 20:58:56,039 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-18 20:58:56,041 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,048 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] ****************************************************
2023-04-18 20:58:56,059 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,066 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] *************************************************************
2023-04-18 20:58:56,098 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-18 20:58:56,100 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,106 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ******************************************************
2023-04-18 20:58:56,453 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:58:56,461 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] **************************************************************
2023-04-18 20:58:56,472 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,478 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ********************************************
2023-04-18 20:58:56,500 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,506 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] ****************************************************************
2023-04-18 20:58:56,516 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,522 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] ***********************************************************
2023-04-18 20:58:56,899 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:58:56,907 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] *****************************************************
2023-04-18 20:58:56,918 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:56,983 p=99975 u=ubuntu n=ansible | PLAY [galaxyservers] *************************************************************************************************
2023-04-18 20:58:57,028 p=99975 u=ubuntu n=ansible | TASK [Gathering Facts] ***********************************************************************************************
2023-04-18 20:58:57,808 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:57,826 p=99975 u=ubuntu n=ansible | TASK [Install Dependencies] ******************************************************************************************
2023-04-18 20:58:58,516 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:58,534 p=99975 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] ***************************************************************
2023-04-18 20:58:58,546 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:58:58,564 p=99975 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *******************************************************************
2023-04-18 20:58:59,253 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:59,305 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] ****************************************************
2023-04-18 20:58:59,840 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:59,859 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] ***********************************************************
2023-04-18 20:58:59,878 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:58:59,897 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] *****************************************************************
2023-04-18 20:59:00,108 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,129 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] *****************************************************************
2023-04-18 20:59:00,300 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,319 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] ************************************************************
2023-04-18 20:59:00,372 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,391 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *******************************************************
2023-04-18 20:59:00,407 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,425 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] *************************************************************
2023-04-18 20:59:00,439 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,457 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] **********************************************************************
2023-04-18 20:59:00,472 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,490 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] **********************************************************************
2023-04-18 20:59:00,504 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,522 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] ****************************************************************************
2023-04-18 20:59:00,536 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,555 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ********************************************************************
2023-04-18 20:59:00,586 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:00,619 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] ****************************************************************
2023-04-18 20:59:00,631 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,649 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] ***************************************************************************
2023-04-18 20:59:00,685 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] *********************************
2023-04-18 20:59:00,699 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:00,734 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] ***********************************************************
2023-04-18 20:59:01,130 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:01,148 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ********************************************************************
2023-04-18 20:59:01,880 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:01,915 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] *************************************
2023-04-18 20:59:01,931 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-18 20:59:01,950 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *********************************************
2023-04-18 20:59:01,992 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:02,015 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ********************************************************************
2023-04-18 20:59:02,047 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:02,067 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *******************************************
2023-04-18 20:59:02,101 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-18 20:59:02,111 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-18 20:59:02,114 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-18 20:59:02,118 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-18 20:59:02,129 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-18 20:59:02,132 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-18 20:59:02,142 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-18 20:59:02,146 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-18 20:59:02,149 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-18 20:59:02,169 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-18 20:59:02,227 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-18 20:59:02,257 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-18 20:59:02,287 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-18 20:59:02,315 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-18 20:59:02,317 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:02,336 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-18 20:59:02,410 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-18 20:59:02,451 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-18 20:59:02,487 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-18 20:59:02,507 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] ************************************************************
2023-04-18 20:59:02,557 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:02,592 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ********************************************************************
2023-04-18 20:59:02,693 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:02,711 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *********************************************************************
2023-04-18 20:59:03,236 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:03,255 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] ************************************************
2023-04-18 20:59:03,357 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:03,375 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *********************************************************
2023-04-18 20:59:03,665 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:59:03,814 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:59:03,834 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *******************************************************
2023-04-18 20:59:04,014 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 20:59:04,176 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-18 20:59:04,197 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ******************************************************************
2023-04-18 20:59:04,275 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:04,293 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] *************************************
2023-04-18 20:59:04,311 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:04,329 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] **********************************************************
2023-04-18 20:59:04,363 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:04,400 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *********************************************************************
2023-04-18 20:59:04,724 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:04,742 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] **************************************
2023-04-18 20:59:05,087 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-18 20:59:05,400 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-18 20:59:05,716 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-18 20:59:06,041 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-18 20:59:06,061 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] **********************************************************
2023-04-18 20:59:06,402 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-18 20:59:06,699 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 20:59:06,998 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-18 20:59:07,321 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-18 20:59:07,620 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-18 20:59:07,916 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /data/datasets
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 20:59:07,918 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-18 20:59:08,216 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m[0;31m-group: 0[0m
[0;31m[0m[0;31m-owner: 0[0m
[0;31m[0m[0;32m+group: 998[0m
[0;32m[0m[0;32m+owner: 998[0m
[0;32m[0m path: /data/jobs
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 20:59:08,218 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-18 20:59:08,536 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-18 20:59:08,841 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-18 20:59:09,132 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-18 20:59:09,154 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ********************************************************************
2023-04-18 20:59:09,218 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:09,257 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *********************************************************
2023-04-18 20:59:10,549 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:10,568 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] ***********************************************************
2023-04-18 20:59:10,668 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:10,686 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:59:11,571 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:11,591 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:59:12,512 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:12,532 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ****************************************
2023-04-18 20:59:12,630 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:12,648 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] *****************************************************************
2023-04-18 20:59:12,660 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:12,678 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] ***************************************************
2023-04-18 20:59:12,690 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:12,708 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ******************************************************
2023-04-18 20:59:12,760 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:12,804 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 20:59:12,925 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:12,960 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] ************************************************************
2023-04-18 20:59:13,376 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:13,394 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] ***************************************************************
2023-04-18 20:59:13,597 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:13,617 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ****************************************
2023-04-18 20:59:14,330 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/themes.yml[0m
[0;32m[0m[0;36m@@ -0,0 +1,82 @@[0m
[0;36m[0m[0;32m+# Our Martian Theme[0m
[0;32m[0m[0;32m+mars:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+    color: "#e03e1d"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+blue:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+    color: "#2c3143"[0m
[0;32m[0m[0;32m+    text:[0m
[0;32m[0m[0;32m+      color: "#f8f9fa"[0m
[0;32m[0m[0;32m+      hover: gold[0m
[0;32m[0m[0;32m+      active: white[0m
[0;32m[0m[0;32m+    link:[0m
[0;32m[0m[0;32m+      color: transparent[0m
[0;32m[0m[0;32m+      hover: transparent[0m
[0;32m[0m[0;32m+      active: "#181a24"[0m
[0;32m[0m[0;32m+    logo:[0m
[0;32m[0m[0;32m+      img: "/static/favicon.svg"[0m
[0;32m[0m[0;32m+      img-secondary: null[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+lightblue:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+    color: "#384E77"[0m
[0;32m[0m[0;32m+    text:[0m
[0;32m[0m[0;32m+      color: white[0m
[0;32m[0m[0;32m+      hover: "#E6F9AF"[0m
[0;32m[0m[0;32m+      active: white[0m
[0;32m[0m[0;32m+    link:[0m
[0;32m[0m[0;32m+      color: transparent[0m
[0;32m[0m[0;32m+      hover: transparent[0m
[0;32m[0m[0;32m+      active: "#18314F"[0m
[0;32m[0m[0;32m+    logo:[0m
[0;32m[0m[0;32m+      img: "/static/favicon.svg"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+pride:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+      color: >[0m
[0;32m[0m[0;32m+        linear-gradient(120deg,[0m
[0;32m[0m[0;32m+          #3c476d 0px 130px,[0m
[0;32m[0m[0;32m+          #fdda0f 131px 139px,[0m
[0;32m[0m[0;32m+          #fff 140px 148px,[0m
[0;32m[0m[0;32m+          #f4b0c9 149px 157px,[0m
[0;32m[0m[0;32m+          #7ccee6 158px 166px,[0m
[0;32m[0m[0;32m+          #93540c 167px 175px,[0m
[0;32m[0m[0;32m+          #000 176px 184px,[0m
[0;32m[0m[0;32m+          transparent 185px),[0m
[0;32m[0m[0;32m+        linear-gradient(270deg,[0m
[0;32m[0m[0;32m+          #3c476d 0px 110px,[0m
[0;32m[0m[0;32m+          #3c476d00 110px),[0m
[0;32m[0m[0;32m+        linear-gradient(180deg,[0m
[0;32m[0m[0;32m+          #FE0000 16.66%,[0m
[0;32m[0m[0;32m+          #FD8C00 16.66% 33.32%,[0m
[0;32m[0m[0;32m+          #FFE500 33.32% 49.98%,[0m
[0;32m[0m[0;32m+          #119F0B 49.98% 66.64%,[0m
[0;32m[0m[0;32m+          #0644B3 66.64% 83.3%,[0m
[0;32m[0m[0;32m+          #C22EDC 83.3%)[0m
[0;32m[0m[0;32m+      text:[0m
[0;32m[0m[0;32m+        color: white[0m
[0;32m[0m[0;32m+        hover: gold[0m
[0;32m[0m[0;32m+        active: white[0m
[0;32m[0m[0;32m+      link:[0m
[0;32m[0m[0;32m+        color: "#3c476d"[0m
[0;32m[0m[0;32m+        hover: "#323a53"[0m
[0;32m[0m[0;32m+        active: "#6170a6"[0m
[0;32m[0m[0;32m+      logo:[0m
[0;32m[0m[0;32m+        img: "/static/favicon.svg"[0m
[0;32m[0m[0;32m+        img-secondary: null[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+smoky:[0m
[0;32m[0m[0;32m+  masthead:[0m
[0;32m[0m[0;32m+    color: "#0C0F0A"[0m
[0;32m[0m[0;32m+    text:[0m
[0;32m[0m[0;32m+      color: white[0m
[0;32m[0m[0;32m+      hover: "#FBFF12"[0m
[0;32m[0m[0;32m+      active: white[0m
[0;32m[0m[0;32m+    link:[0m
[0;32m[0m[0;32m+      color: transparent[0m
[0;32m[0m[0;32m+      hover: transparent[0m
[0;32m[0m[0;32m+      active: "#FF206E"[0m
[0;32m[0m[0;32m+    logo:[0m
[0;32m[0m[0;32m+      img: "/static/favicon.svg"[0m
[0;32m[0m[0;32m+  [0m
[0;32m[0m

2023-04-18 20:59:14,332 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-18 20:59:14,357 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ********************************
2023-04-18 20:59:14,940 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/files/galaxy/welcome.html[0m
[0;32m[0m[0;36m@@ -0,0 +1,11 @@[0m
[0;36m[0m[0;32m+<!DOCTYPE html>[0m
[0;32m[0m[0;32m+<html lang="en">[0m
[0;32m[0m[0;32m+    <head>[0m
[0;32m[0m[0;32m+        <meta charset="utf-8">[0m
[0;32m[0m[0;32m+        <link href="/static/dist/base.css" rel="stylesheet" type="text/css" />[0m
[0;32m[0m[0;32m+    </head>[0m
[0;32m[0m[0;32m+    <body>[0m
[0;32m[0m[0;32m+        <h1>Welcome to the Galaxy Mars instance!</h1>[0m
[0;32m[0m[0;32m+        <p>The only Galaxy instance on mars.</p>[0m
[0;32m[0m[0;32m+    </body>[0m
[0;32m[0m[0;32m+</html>[0m
[0;32m[0m

2023-04-18 20:59:14,942 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-18 20:59:14,967 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] **************************************
2023-04-18 20:59:15,587 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpj23lda0i/container_resolvers_conf.yml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,12 @@[0m
[0;36m[0m[0;32m+container_resolvers:[0m
[0;32m[0m[0;32m+  - type: cached_explicit_singularity[0m
[0;32m[0m[0;32m+    cache_directory: "/srv/galaxy/var/cache/singularity/explicit/"[0m
[0;32m[0m[0;32m+  - type: cached_mulled_singularity[0m
[0;32m[0m[0;32m+    cache_directory: "/srv/galaxy/var/cache/singularity/mulled/"[0m
[0;32m[0m[0;32m+  - type: mulled_singularity[0m
[0;32m[0m[0;32m+    auto_install: False[0m
[0;32m[0m[0;32m+    cache_directory: "/srv/galaxy/var/cache/singularity/mulled/"[0m
[0;32m[0m[0;32m+  - type: build_mulled_singularity[0m
[0;32m[0m[0;32m+    auto_install: False[0m
[0;32m[0m[0;32m+    cache_directory: "/srv/galaxy/var/cache/singularity/built/"[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-18 20:59:15,590 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-18 20:59:16,161 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp6ldphxze/dependency_resolvers_conf.xml[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+<dependency_resolvers>[0m
[0;32m[0m[0;32m+</dependency_resolvers>[0m
[0;32m[0m

2023-04-18 20:59:16,163 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-18 20:59:16,184 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ********************************************************************
2023-04-18 20:59:16,212 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,230 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] ************************************************************
2023-04-18 20:59:16,332 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,350 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ********************
2023-04-18 20:59:16,450 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,469 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] *********************
2023-04-18 20:59:16,567 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,585 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] **************************************************
2023-04-18 20:59:16,598 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,616 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] *****************************************************
2023-04-18 20:59:16,629 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,647 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] ***************************************************
2023-04-18 20:59:16,661 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,680 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] ************************************************
2023-04-18 20:59:16,694 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,712 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *******************************************
2023-04-18 20:59:16,811 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,829 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] **********************************
2023-04-18 20:59:16,928 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:16,946 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***********************************
2023-04-18 20:59:17,046 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 20:59:17,064 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *******************************************************
2023-04-18 20:59:17,739 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmps8_wwii2/galaxy.yml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,108 @@[0m
[0;36m[0m[0;32m+---[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+## This file is managed by Ansible.  ALL CHANGES WILL BE OVERWRITTEN.[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+gravity:[0m
[0;32m[0m[0;32m+    celery:[0m
[0;32m[0m[0;32m+        concurrency: 2[0m
[0;32m[0m[0;32m+        loglevel: DEBUG[0m
[0;32m[0m[0;32m+    galaxy_root: /srv/galaxy/server[0m
[0;32m[0m[0;32m+    galaxy_user: galaxy[0m
[0;32m[0m[0;32m+    gunicorn:[0m
[0;32m[0m[0;32m+        bind: unix:/srv/galaxy/var/config/gunicorn.sock[0m
[0;32m[0m[0;32m+        extra_args: --forwarded-allow-ips="*"[0m
[0;32m[0m[0;32m+        preload: true[0m
[0;32m[0m[0;32m+        workers: 2[0m
[0;32m[0m[0;32m+    handlers:[0m
[0;32m[0m[0;32m+        handler:[0m
[0;32m[0m[0;32m+            pools:[0m
[0;32m[0m[0;32m+            - job-handlers[0m
[0;32m[0m[0;32m+            - workflow-schedulers[0m
[0;32m[0m[0;32m+            processes: 2[0m
[0;32m[0m[0;32m+    process_manager: systemd[0m
[0;32m[0m[0;32m+    tusd:[0m
[0;32m[0m[0;32m+        enable: true[0m
[0;32m[0m[0;32m+        tusd_path: /usr/local/sbin/tusd[0m
[0;32m[0m[0;32m+        upload_dir: /data/tus[0m
[0;32m[0m[0;32m+    virtualenv: /srv/galaxy/venv[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+galaxy:[0m
[0;32m[0m[0;32m+    admin_users:[0m
[0;32m[0m[0;32m+    - admin@example.org[0m
[0;32m[0m[0;32m+    allow_path_paste: true[0m
[0;32m[0m[0;32m+    allow_user_deletion: true[0m
[0;32m[0m[0;32m+    allow_user_impersonation: true[0m
[0;32m[0m[0;32m+    brand: "Mars \U0001F680"[0m
[0;32m[0m[0;32m+    builds_file_path: /srv/galaxy/server/tool-data/shared/ucsc/builds.txt.sample[0m
[0;32m[0m[0;32m+    cleanup_job: onsuccess[0m
[0;32m[0m[0;32m+    container_resolvers_config_file: ''[0m
[0;32m[0m[0;32m+    containers_resolvers_config_file: /srv/galaxy/config/container_resolvers_conf.yml[0m
[0;32m[0m[0;32m+    data_dir: /srv/galaxy/var[0m
[0;32m[0m[0;32m+    data_manager_config_file: /srv/galaxy/server/config/data_manager_conf.xml.sample[0m
[0;32m[0m[0;32m+    database_connection: postgresql:///galaxy?host=/var/run/postgresql[0m
[0;32m[0m[0;32m+    datatypes_config_file: /srv/galaxy/server/config/datatypes_conf.xml.sample[0m
[0;32m[0m[0;32m+    dependency_resolvers_config_file: /srv/galaxy/config/dependency_resolvers_conf.xml[0m
[0;32m[0m[0;32m+    enable_per_request_sql_debugging: true[0m
[0;32m[0m[0;32m+    enable_quotas: true[0m
[0;32m[0m[0;32m+    expose_dataset_path: true[0m
[0;32m[0m[0;32m+    expose_potentially_sensitive_job_metrics: true[0m
[0;32m[0m[0;32m+    expose_user_name: true[0m
[0;32m[0m[0;32m+    external_service_type_config_file: /srv/galaxy/server/config/external_service_types_conf.xml.sample[0m
[0;32m[0m[0;32m+    file_path: /data/datasets[0m
[0;32m[0m[0;32m+    galaxy_infrastructure_url: https://gat-20.eu.galaxy.training[0m
[0;32m[0m[0;32m+    id_secret: S21ATLTHw2biuLuUEBVP9GBh5iqVO0Em[0m
[0;32m[0m[0;32m+    integrated_tool_panel_config: /srv/galaxy/var/config/integrated_tool_panel.xml[0m
[0;32m[0m[0;32m+    job_config:[0m
[0;32m[0m[0;32m+        execution:[0m
[0;32m[0m[0;32m+            default: singularity[0m
[0;32m[0m[0;32m+            environments:[0m
[0;32m[0m[0;32m+                local_env:[0m
[0;32m[0m[0;32m+                    runner: local_runner[0m
[0;32m[0m[0;32m+                    tmp_dir: true[0m
[0;32m[0m[0;32m+                singularity:[0m
[0;32m[0m[0;32m+                    env:[0m
[0;32m[0m[0;32m+                    -   name: LC_ALL[0m
[0;32m[0m[0;32m+                        value: C[0m
[0;32m[0m[0;32m+                    -   name: APPTAINER_CACHEDIR[0m
[0;32m[0m[0;32m+                        value: /tmp/singularity[0m
[0;32m[0m[0;32m+                    -   name: APPTAINER_TMPDIR[0m
[0;32m[0m[0;32m+                        value: /tmp[0m
[0;32m[0m[0;32m+                    runner: local_runner[0m
[0;32m[0m[0;32m+                    singularity_enabled: true[0m
[0;32m[0m[0;32m+        handling:[0m
[0;32m[0m[0;32m+            assign:[0m
[0;32m[0m[0;32m+            - db-skip-locked[0m
[0;32m[0m[0;32m+        runners:[0m
[0;32m[0m[0;32m+            local_runner:[0m
[0;32m[0m[0;32m+                load: galaxy.jobs.runners.local:LocalJobRunner[0m
[0;32m[0m[0;32m+                workers: 4[0m
[0;32m[0m[0;32m+        tools:[0m
[0;32m[0m[0;32m+        -   class: local[0m
[0;32m[0m[0;32m+            environment: local_env[0m
[0;32m[0m[0;32m+    job_metrics_config_file: /srv/galaxy/config/job_metrics_conf.xml[0m
[0;32m[0m[0;32m+    job_working_directory: /data/jobs[0m
[0;32m[0m[0;32m+    logo_src: https://training.galaxyproject.org/training-material/topics/admin/tutorials/customization/images/logo.png[0m
[0;32m[0m[0;32m+    migrated_tools_config: /srv/galaxy/var/config/migrated_tools_conf.xml[0m
[0;32m[0m[0;32m+    new_user_dataset_access_role_default_private: true[0m
[0;32m[0m[0;32m+    nginx_x_accel_redirect_base: /_x_accel_redirect[0m
[0;32m[0m[0;32m+    object_store_store_by: uuid[0m
[0;32m[0m[0;32m+    openid_config_file: /srv/galaxy/server/config/openid_conf.xml.sample[0m
[0;32m[0m[0;32m+    outputs_to_working_directory: true[0m
[0;32m[0m[0;32m+    retry_job_output_collection: 3[0m
[0;32m[0m[0;32m+    shed_data_manager_config_file: /srv/galaxy/var/config/shed_data_manager_conf.xml[0m
[0;32m[0m[0;32m+    shed_tool_config_file: /srv/galaxy/var/config/shed_tool_conf.xml[0m
[0;32m[0m[0;32m+    shed_tool_data_table_config: /srv/galaxy/var/config/shed_tool_data_table_conf.xml[0m
[0;32m[0m[0;32m+    show_welcome_with_login: true[0m
[0;32m[0m[0;32m+    slow_query_log_threshold: 5[0m
[0;32m[0m[0;32m+    themes_config_file: /srv/galaxy/config/themes.yml[0m
[0;32m[0m[0;32m+    tool_config_file: /srv/galaxy/server/config/tool_conf.xml.sample[0m
[0;32m[0m[0;32m+    tool_data_path: /srv/galaxy/var/tool_data[0m
[0;32m[0m[0;32m+    tool_data_table_config_path: /cvmfs/data.galaxyproject.org/byhand/location/tool_data_table_conf.xml,/cvmfs/data.galaxyproject.org/managed/location/tool_data_table_conf.xml[0m
[0;32m[0m[0;32m+    tool_dependency_dir: /srv/galaxy/var/dependencies[0m
[0;32m[0m[0;32m+    tool_sheds_config_file: /srv/galaxy/server/config/tool_sheds_conf.xml.sample[0m
[0;32m[0m[0;32m+    tus_upload_store: /data/tus[0m
[0;32m[0m[0;32m+    ucsc_build_sites: /srv/galaxy/server/tool-data/shared/ucsc/ucsc_build_sites.txt.sample[0m
[0;32m[0m[0;32m+    visualization_plugins_directory: config/plugins/visualizations[0m
[0;32m[0m[0;32m+    watch_job_rules: auto[0m
[0;32m[0m

2023-04-18 20:59:17,739 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 20:59:17,757 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *********************************************************
2023-04-18 20:59:17,806 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-18 20:59:17,853 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 20:59:18,623 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:18,642 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 20:59:19,604 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 20:59:19,624 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *******************************************************
2023-04-18 21:02:26,861 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:26,881 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ******************************
2023-04-18 21:02:27,482 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:27,500 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] ************************************************
2023-04-18 21:02:30,712 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:30,732 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] **************************
2023-04-18 21:02:30,829 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:30,847 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] *****************************************************
2023-04-18 21:02:30,893 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:30,943 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] ***********************************************************
2023-04-18 21:02:31,040 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:31,058 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] ****************************************************
2023-04-18 21:02:31,524 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-18 21:02:31,526 p=99975 u=ubuntu n=ansible | [WARNING]: Module remote_tmp /home/galaxy/.ansible/tmp did not exist and was created with a mode of 0700, this may
cause issues when running as another user. To avoid this, create the remote_tmp dir with the correct permissions
manually

2023-04-18 21:02:31,544 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] ************************************************
2023-04-18 21:02:32,224 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/files/shed_data_manager_conf.xml[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+<?xml version="1.0"?>[0m
[0;32m[0m[0;32m+<data_managers>[0m
[0;32m[0m[0;32m+</data_managers>[0m
[0;32m[0m

2023-04-18 21:02:32,226 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-18 21:02:32,786 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/files/shed_tool_data_table_conf.xml[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+<?xml version="1.0"?>[0m
[0;32m[0m[0;32m+<tables>[0m
[0;32m[0m[0;32m+</tables>[0m
[0;32m[0m

2023-04-18 21:02:32,788 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-18 21:02:32,809 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ********************************************
2023-04-18 21:02:33,467 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpcjbpp8wb/shed_tool_conf.xml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+<?xml version="1.0"?>[0m
[0;32m[0m[0;32m+<toolbox tool_path="/srv/galaxy/var/shed_tools">[0m
[0;32m[0m[0;32m+</toolbox>[0m
[0;32m[0m

2023-04-18 21:02:33,469 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-18 21:02:34,028 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp7ea2xk05/shed_tool_conf.xml.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+<?xml version="1.0"?>[0m
[0;32m[0m[0;32m+<toolbox tool_path="/srv/galaxy/var/shed_tools">[0m
[0;32m[0m[0;32m+</toolbox>[0m
[0;32m[0m

2023-04-18 21:02:34,030 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-18 21:02:34,050 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ******************************************************
2023-04-18 21:02:34,084 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:34,136 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] **********************************************************
2023-04-18 21:02:35,488 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:35,507 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] **********************************************************
2023-04-18 21:02:36,815 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:36,834 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] *************************************************
2023-04-18 21:02:36,934 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:36,953 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] **********************************************************************
2023-04-18 21:02:37,051 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:37,069 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] *************************************************************
2023-04-18 21:02:37,138 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:37,195 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] ****************************************************
2023-04-18 21:02:37,792 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp_8zebhht[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+new-unbuilt[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-18 21:02:37,792 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:37,810 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] ***********************************************************
2023-04-18 21:02:38,113 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:38,132 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] ***********************************************
2023-04-18 21:02:38,463 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:38,482 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] ***********************************************************
2023-04-18 21:02:38,822 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:38,841 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-18 21:02:39,018 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:39,037 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-18 21:02:39,211 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:39,230 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *********************************************************
2023-04-18 21:02:39,406 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => 
  msg: 'Galaxy client is out of date: new-unbuilt != 1a984f27ab755b71a817f2bb95139af9fd43c7aa'
2023-04-18 21:02:39,425 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ******************************************************
2023-04-18 21:02:39,580 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_node_version.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:39,630 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy Node.js version file] ****************************************************
2023-04-18 21:02:39,973 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:39,992 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy Node.js version fact] ********************************************************
2023-04-18 21:02:40,179 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:40,198 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Node.js version file version] ****************************************************
2023-04-18 21:02:40,374 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  galaxy_node_version: 18.12.1
2023-04-18 21:02:40,393 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Override Galaxy Node.js version] ********************************************************
2023-04-18 21:02:40,586 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:40,605 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check whether nodeenv is available] *****************************************************
2023-04-18 21:02:40,933 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:40,952 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] ***************************************************************
2023-04-18 21:02:41,058 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,078 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ******************************************************
2023-04-18 21:02:41,179 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,199 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install nodeenv if it doesn't exist] ****************************************************
2023-04-18 21:02:41,298 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,317 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report preferred Node.js version] *******************************************************
2023-04-18 21:02:41,492 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  galaxy_node_version: 18.12.1
2023-04-18 21:02:41,511 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] *************************************************************
2023-04-18 21:02:41,821 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,840 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *********************************************************
2023-04-18 21:02:41,940 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:02:41,959 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] **************************************
2023-04-18 21:02:42,283 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:02:42,302 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] ****************************************************************
2023-04-18 21:02:48,350 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:48,370 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] ***************************************************************************
2023-04-18 21:02:50,303 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:02:50,323 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] ***********************************************************
2023-04-18 21:02:50,453 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_client_build_make.yml for gat-20.eu.galaxy.training
2023-04-18 21:02:50,499 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Build client] ***************************************************************************
2023-04-18 21:21:56,592 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:21:56,612 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Fetch client version] *******************************************************************
2023-04-18 21:21:56,969 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:21:56,989 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] **********************************************************
2023-04-18 21:21:57,169 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:21:57,189 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that client update succeeded] ****************************************************
2023-04-18 21:21:57,305 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:57,324 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] *****************************************************
2023-04-18 21:21:57,341 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:57,360 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] ************************************************************
2023-04-18 21:21:57,400 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-18 21:21:57,473 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] **************************************
2023-04-18 21:21:57,572 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:57,591 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ********************************************************
2023-04-18 21:21:58,319 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpnwef99xp[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+#!/usr/bin/env sh[0m
[0;32m[0m[0;32m+export GRAVITY_CONFIG_FILE=/srv/galaxy/config/galaxy.yml[0m
[0;32m[0m[0;32m+exec /srv/galaxy/venv/bin/galaxyctl "$@"[0m
[0;32m[0m

2023-04-18 21:21:58,319 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:21:58,338 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] **********************************************
2023-04-18 21:21:58,357 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:58,376 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *********************************************
2023-04-18 21:21:58,391 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:58,410 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *******************************************************
2023-04-18 21:21:58,447 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-18 21:21:58,506 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ******************************************************
2023-04-18 21:21:58,913 p=99975 u=ubuntu n=ansible | [0;31m--- before: /etc/cron.d/ansible_galaxy_tmpclean[0m
[0;31m[0m[0;32m+++ after: /etc/cron.d/ansible_galaxy_tmpclean[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+#Ansible: galaxy_tmpclean[0m
[0;32m[0m[0;32m+@daily galaxy /usr/sbin/tmpreaper --all --mtime --mtime-dir --runtime=72000 30d /data/jobs /srv/galaxy/var/tmp [0m
[0;32m[0m

2023-04-18 21:21:58,913 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:21:58,932 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ******************************************************
2023-04-18 21:21:59,033 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:21:59,068 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *******************************************************
2023-04-18 21:21:59,235 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:21:59,257 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] ***************************************************************
2023-04-18 21:21:59,294 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.miniconda/tasks/install.yml for gat-20.eu.galaxy.training
2023-04-18 21:21:59,339 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create miniconda installer tempfile] *************************************************
2023-04-18 21:21:59,611 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:21:59,630 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda installer] *********************************************************
2023-04-18 21:22:01,161 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:22:01,180 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Run miniconda installer] *************************************************************
2023-04-18 21:22:06,083 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:22:06,102 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Remove minicoda installer] ***********************************************************
2023-04-18 21:22:06,276 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /tmp/ansible-miniconda-installer.u64xbmb4.sh
[0;31m-state: file[0m
[0;31m[0m[0;32m+state: absent[0m
[0;32m[0m

2023-04-18 21:22:06,276 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:22:06,294 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] ***********************************************************
2023-04-18 21:22:06,842 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:22:06,860 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] ****************************************************
2023-04-18 21:24:10,954 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:10,972 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] ***************************************************
2023-04-18 21:24:10,987 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,006 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ******************************************
2023-04-18 21:24:11,021 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,041 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *******************************************************************
2023-04-18 21:24:11,065 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,083 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *******************************************************************
2023-04-18 21:24:11,106 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,125 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] *************************************************************
2023-04-18 21:24:11,140 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:11,178 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-18 21:24:11,212 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:11,244 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *********************************************************************
2023-04-18 21:24:18,448 p=99975 u=ubuntu n=ansible | The following additional packages will be installed:
  libnginx-mod-http-auth-pam libnginx-mod-http-dav-ext libnginx-mod-http-echo
  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter
  libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair
  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream
  libnginx-mod-stream-geoip2 nginx-common nginx-core
Suggested packages:
  fcgiwrap nginx-doc
The following NEW packages will be installed:
  libnginx-mod-http-auth-pam libnginx-mod-http-dav-ext libnginx-mod-http-echo
  libnginx-mod-http-geoip2 libnginx-mod-http-image-filter
  libnginx-mod-http-subs-filter libnginx-mod-http-upstream-fair
  libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream
  libnginx-mod-stream-geoip2 nginx-common nginx-core nginx-full
0 upgraded, 14 newly installed, 0 to remove and 8 not upgraded.
2023-04-18 21:24:18,449 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,468 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *******************************************************************
2023-04-18 21:24:18,633 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/sites-enabled/default
[0;31m-state: link[0m
[0;31m[0m[0;32m+state: absent[0m
[0;32m[0m

2023-04-18 21:24:18,633 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,651 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-18 21:24:18,664 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,683 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-18 21:24:18,696 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,714 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] *****************************************************************
2023-04-18 21:24:18,872 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,891 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ******************************************************
2023-04-18 21:24:18,919 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,938 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] ***********************************************************
2023-04-18 21:24:18,966 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:18,985 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] **********************************************************
2023-04-18 21:24:18,998 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,017 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] **********************************************************
2023-04-18 21:24:19,030 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,050 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] ***************************************************************************
2023-04-18 21:24:19,064 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,083 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] ****************************************************************
2023-04-18 21:24:19,105 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,125 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] ***********************************************************
2023-04-18 21:24:19,585 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp3cq1wf6q/http_options.conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,29 @@[0m
[0;36m[0m[0;32m+##[0m
[0;32m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# included into http {}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+client_max_body_size 1g;[0m
[0;32m[0m[0;32m+gzip_comp_level 6;[0m
[0;32m[0m[0;32m+gzip_min_length 128;[0m
[0;32m[0m[0;32m+gzip_proxied any;[0m
[0;32m[0m[0;32m+gzip_static on;[0m
[0;32m[0m[0;32m+gzip_types text/plain[0m
[0;32m[0m[0;32m+text/css[0m
[0;32m[0m[0;32m+text/xml[0m
[0;32m[0m[0;32m+text/javascript[0m
[0;32m[0m[0;32m+application/javascript[0m
[0;32m[0m[0;32m+application/x-javascript[0m
[0;32m[0m[0;32m+application/json[0m
[0;32m[0m[0;32m+application/xml[0m
[0;32m[0m[0;32m+application/xml+rss[0m
[0;32m[0m[0;32m+application/xhtml+xml[0m
[0;32m[0m[0;32m+application/x-font-ttf[0m
[0;32m[0m[0;32m+application/x-font-opentype[0m
[0;32m[0m[0;32m+image/png[0m
[0;32m[0m[0;32m+image/svg+xml[0m
[0;32m[0m[0;32m+image/x-icon[0m
[0;32m[0m[0;32m+;[0m
[0;32m[0m[0;32m+gzip_vary on;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-18 21:24:19,585 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,604 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] *****************************************************************
2023-04-18 21:24:19,633 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:19,652 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *******************************************************************
2023-04-18 21:24:20,106 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpbec0l4c1/redirect-ssl.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,14 @@[0m
[0;36m[0m[0;32m+server {[0m
[0;32m[0m[0;32m+	listen 80 default_server;[0m
[0;32m[0m[0;32m+	listen [::]:80 default_server;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	server_name "gat-20.eu.galaxy.training";[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location /.well-known/ {[0m
[0;32m[0m[0;32m+		root /srv/nginx/_well-known_root;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location / {[0m
[0;32m[0m[0;32m+		return 302 https://$host$request_uri;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m

2023-04-18 21:24:20,108 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-18 21:24:20,129 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] ***************************************************************************
2023-04-18 21:24:20,311 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/sites-enabled/redirect-ssl
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: link[0m
[0;32m[0m

2023-04-18 21:24:20,313 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-18 21:24:20,334 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] **************************************************************
2023-04-18 21:24:20,513 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:20,532 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *********************************************************
2023-04-18 21:24:20,610 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:20,642 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] **************************************************
2023-04-18 21:24:20,675 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy mule restart] *********************************************************
2023-04-18 21:24:20,690 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:20,709 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-18 21:24:20,725 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:20,744 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-18 21:24:20,760 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:20,780 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxyctl update] ************************************************************
2023-04-18 21:24:21,779 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:21,797 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.galaxy : galaxy gravity restart] ******************************************************
2023-04-18 21:24:22,489 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:22,524 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-18 21:24:23,000 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:23,027 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : restart nginx] ****************************************************************
2023-04-18 21:24:23,454 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:23,473 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-18 21:24:23,498 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:23,524 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl restart nginx] **************************************************
2023-04-18 21:24:23,555 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:23,580 p=99975 u=ubuntu n=ansible | TASK [Include SSL role] **********************************************************************************************
2023-04-18 21:24:23,785 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] **************************************************
2023-04-18 21:24:23,841 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:23,879 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ********************************************************
2023-04-18 21:24:31,633 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,652 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] ***********************************************************
2023-04-18 21:24:31,687 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,709 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] ***********************************************************
2023-04-18 21:24:31,738 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,760 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ******************************************************
2023-04-18 21:24:31,776 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,798 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] *****************************************************
2023-04-18 21:24:31,836 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:31,859 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] *************************************************************
2023-04-18 21:24:31,909 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:31,970 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] *************************************************************
2023-04-18 21:24:32,203 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /srv/nginx/_well-known_root
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 21:24:32,203 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:32,223 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] ***********************************************
2023-04-18 21:24:32,247 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:32,267 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ********************************************************
2023-04-18 21:24:32,290 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:32,311 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ********************************************************************
2023-04-18 21:24:37,116 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:37,137 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] **********************************************************
2023-04-18 21:24:37,166 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: true
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: '0:00:04.572381'
    end: '2023-04-18 21:24:37.089788'
    failed: false
    msg: ''
    rc: 0
    start: '2023-04-18 21:24:32.517407'
    stderr: Saving debug log to /var/log/letsencrypt/letsencrypt.log
    stderr_lines:
    - Saving debug log to /var/log/letsencrypt/letsencrypt.log
    stdout: |-
      Account registered.
      Requesting a certificate for gat-20.eu.galaxy.training
  
      Successfully received certificate.
      Certificate is saved at: /etc/letsencrypt/live/gat-20.eu.galaxy.training/fullchain.pem
      Key is saved at:         /etc/letsencrypt/live/gat-20.eu.galaxy.training/privkey.pem
      This certificate expires on 2023-07-17.
      These files will be updated when the certificate renews.
      NEXT STEPS:
      - The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.
    stdout_lines:
    - Account registered.
    - Requesting a certificate for gat-20.eu.galaxy.training
    - ''
    - Successfully received certificate.
    - 'Certificate is saved at: /etc/letsencrypt/live/gat-20.eu.galaxy.training/fullchain.pem'
    - 'Key is saved at:         /etc/letsencrypt/live/gat-20.eu.galaxy.training/privkey.pem'
    - This certificate expires on 2023-07-17.
    - These files will be updated when the certificate renews.
    - 'NEXT STEPS:'
    - '- The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.'
2023-04-18 21:24:37,188 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] ************************************************
2023-04-18 21:24:37,231 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:37,272 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ******************************************
2023-04-18 21:24:37,294 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:24:37,313 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] *****************************************
2023-04-18 21:24:37,873 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpjdv807b7[0m
[0;32m[0m[0;36m@@ -0,0 +1,22 @@[0m
[0;36m[0m[0;32m+#!/bin/bash[0m
[0;32m[0m[0;32m+mkdir -p  /etc/ssl/private/[0m
[0;32m[0m[0;32m+# Chai[0m
[0;32m[0m[0;32m+cp /etc/letsencrypt/live/gat-20.eu.galaxy.training/fullchain.pem /etc/ssl/certs/fullchain.pem[0m
[0;32m[0m[0;32m+chmod 644           /etc/ssl/certs/fullchain.pem[0m
[0;32m[0m[0;32m+chown root: /etc/ssl/certs/fullchain.pem[0m
[0;32m[0m[0;32m+# Cert[0m
[0;32m[0m[0;32m+cp /etc/letsencrypt/live/gat-20.eu.galaxy.training/cert.pem      /etc/ssl/certs/cert.pem[0m
[0;32m[0m[0;32m+chmod 644           /etc/ssl/certs/cert.pem[0m
[0;32m[0m[0;32m+chown root: /etc/ssl/certs/cert.pem[0m
[0;32m[0m[0;32m+# Privkey[0m
[0;32m[0m[0;32m+cp /etc/letsencrypt/live/gat-20.eu.galaxy.training/privkey.pem   /etc/ssl/private/privkey.pem[0m
[0;32m[0m[0;32m+chmod 640           /etc/ssl/private/privkey.pem[0m
[0;32m[0m[0;32m+chown root: /etc/ssl/private/privkey.pem[0m
[0;32m[0m[0;32m+# For each user, create custom version[0m
[0;32m[0m[0;32m+mkdir -p /etc/ssl/user[0m
[0;32m[0m[0;32m+chmod 755 /etc/ssl/user[0m
[0;32m[0m[0;32m+chown root:root /etc/ssl/user[0m
[0;32m[0m[0;32m+cp /etc/ssl/private/privkey.pem /etc/ssl/user/privkey-www-data.pem[0m
[0;32m[0m[0;32m+chown www-data: /etc/ssl/user/privkey-www-data.pem[0m
[0;32m[0m[0;32m+# Other[0m
[0;32m[0m[0;32m+systemctl restart nginx || true[0m
[0;32m[0m

2023-04-18 21:24:37,873 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:37,892 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] *************************************************************************
2023-04-18 21:24:37,926 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [usegalaxy_eu.certbot : Execute the certificate post-renewal script] *********************************
2023-04-18 21:24:38,190 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:38,209 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] ***************************************************************
2023-04-18 21:24:38,249 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-18 21:24:38,292 p=99975 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] **************************************
2023-04-18 21:24:38,542 p=99975 u=ubuntu n=ansible | [0;31m--- before: crontab for user "root"[0m
[0;31m[0m[0;32m+++ after: crontab for user "root"[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+#Ansible: Certbot automatic renewal.[0m
[0;32m[0m[0;32m+10 5 * * * /opt/certbot/bin/certbot renew --quiet --no-self-upgrade [0m
[0;32m[0m

2023-04-18 21:24:38,543 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:38,581 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] **********************************
2023-04-18 21:24:38,801 p=99975 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/nginx.conf (content)[0m
[0;31m[0m[0;32m+++ after: /etc/nginx/nginx.conf (content)[0m
[0;32m[0m[0;36m@@ -30,7 +30,7 @@[0m
[0;36m[0m 	##
 
 	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE
[0;31m-	ssl_prefer_server_ciphers on;[0m
[0;31m[0m[0;32m+#	ssl_prefer_server_ciphers on; # commented by Ansible[0m
[0;32m[0m 
 	##
 	# Logging Settings


2023-04-18 21:24:38,801 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:38,823 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] ***************************************************************
2023-04-18 21:24:39,348 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp0m_l6p7s/ssl.conf.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,20 @@[0m
[0;36m[0m[0;32m+##[0m
[0;32m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+##[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Allowable SSL protocols[0m
[0;32m[0m[0;32m+ssl_protocols TLSv1.2 TLSv1.3;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Use secure ciphers[0m
[0;32m[0m[0;32m+ssl_ciphers ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES128-SHA:ECDHE-ECDSA-AES256-SHA:ECDHE-ECDSA-AES128-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-SHA:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA256;[0m
[0;32m[0m[0;32m+ssl_dhparam /etc/nginx/ssl/dhparams.pem;[0m
[0;32m[0m[0;32m+ssl_prefer_server_ciphers on;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Enable session reuse[0m
[0;32m[0m[0;32m+ssl_session_cache shared:SSL:8m;[0m
[0;32m[0m[0;32m+ssl_session_timeout 5m;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+# Cert/Key[0m
[0;32m[0m[0;32m+ssl_certificate /etc/ssl/certs/fullchain.pem;[0m
[0;32m[0m[0;32m+ssl_certificate_key /etc/ssl/user/privkey-www-data.pem;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2023-04-18 21:24:39,348 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:39,370 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *******************************************************
2023-04-18 21:24:39,614 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/ssl
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 21:24:39,614 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:24:39,634 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] ****************************************************
2023-04-18 21:25:09,084 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:09,105 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ********************************************************
2023-04-18 21:25:09,152 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:09,186 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] ***************************************************************
2023-04-18 21:25:09,768 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpdz536c2_/galaxy.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,88 @@[0m
[0;36m[0m[0;32m+upstream galaxy {[0m
[0;32m[0m[0;32m+	server unix:/srv/galaxy/var/config/gunicorn.sock;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Or if you serve galaxy at a path like http(s)://fqdn/galaxy[0m
[0;32m[0m[0;32m+	# Remember to set galaxy_url_prefix in the galaxy.yml file.[0m
[0;32m[0m[0;32m+	# server unix:/srv/galaxy/var/config/gunicorn.sock:/galaxy;[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+server {[0m
[0;32m[0m[0;32m+	# Listen on port 443[0m
[0;32m[0m[0;32m+	listen        *:443 ssl default_server;[0m
[0;32m[0m[0;32m+	# The virtualhost is our domain name[0m
[0;32m[0m[0;32m+	server_name   "gat-20.eu.galaxy.training";[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Our log files will go to journalctl[0m
[0;32m[0m[0;32m+	access_log  syslog:server=unix:/dev/log;[0m
[0;32m[0m[0;32m+	error_log   syslog:server=unix:/dev/log;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# The most important location block, by default all requests are sent to gunicorn[0m
[0;32m[0m[0;32m+	# If you serve galaxy at a path like /galaxy, change that below (and all other locations!)[0m
[0;32m[0m[0;32m+	location / {[0m
[0;32m[0m[0;32m+		# This is the backend to send the requests to.[0m
[0;32m[0m[0;32m+		proxy_pass http://galaxy;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+		proxy_set_header Host $http_host;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-Proto $scheme;[0m
[0;32m[0m[0;32m+		proxy_set_header Upgrade $http_upgrade;[0m
[0;32m[0m[0;32m+   [0m
[0;32m[0m[0;32m+	location /api/upload/resumable_upload {[0m
[0;32m[0m[0;32m+		# Disable request and response buffering[0m
[0;32m[0m[0;32m+		proxy_request_buffering     off;[0m
[0;32m[0m[0;32m+		proxy_buffering             off;[0m
[0;32m[0m[0;32m+		proxy_http_version          1.1;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+		# Add X-Forwarded-* headers[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-Host   $host;[0m
[0;32m[0m[0;32m+		proxy_set_header X-Forwarded-Proto  $scheme;[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+		proxy_set_header Upgrade            $http_upgrade;[0m
[0;32m[0m[0;32m+		proxy_set_header Connection         "upgrade";[0m
[0;32m[0m[0;32m+		client_max_body_size        0;[0m
[0;32m[0m[0;32m+		proxy_pass http://localhost:1080/files;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Static files can be more efficiently served by Nginx. Why send the[0m
[0;32m[0m[0;32m+	# request to Gunicorn which should be spending its time doing more useful[0m
[0;32m[0m[0;32m+	# things like serving Galaxy![0m
[0;32m[0m[0;32m+	location /static {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/server/static;[0m
[0;32m[0m[0;32m+		expires 24h;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# In Galaxy instances started with run.sh, many config files are[0m
[0;32m[0m[0;32m+	# automatically copied around. The welcome page is one of them. In[0m
[0;32m[0m[0;32m+	# production, this step is skipped, so we will manually alias that.[0m
[0;32m[0m[0;32m+	location /static/welcome.html {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/var/config/welcome.html;		[0m
[0;32m[0m[0;32m+		expires 24h;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# serve visualization and interactive environment plugin static content[0m
[0;32m[0m[0;32m+	location ~ ^/plugins/(?<plug_type>[^/]+?)/((?<vis_d>[^/_]*)_?)?(?<vis_name>[^/]*?)/static/(?<static_file>.*?)$ {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/server/config/plugins/$plug_type/;[0m
[0;32m[0m[0;32m+		try_files $vis_d/${vis_d}_${vis_name}/static/$static_file[0m
[0;32m[0m[0;32m+		          $vis_d/static/$static_file =404;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location /robots.txt {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/server/static/robots.txt;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location /favicon.ico {[0m
[0;32m[0m[0;32m+		alias /srv/galaxy/server/static/favicon.ico;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	location /_x_accel_redirect {[0m
[0;32m[0m[0;32m+		internal;[0m
[0;32m[0m[0;32m+		alias /;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	# Support click-to-run in the GTN-in-Galaxy Webhook[0m
[0;32m[0m[0;32m+	location /training-material/ {[0m
[0;32m[0m[0;32m+		proxy_pass https://training.galaxyproject.org/training-material/;[0m
[0;32m[0m[0;32m+	}[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m

2023-04-18 21:25:09,771 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 21:25:09,795 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] ***********************************************************************
2023-04-18 21:25:10,004 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/nginx/sites-enabled/galaxy
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: link[0m
[0;32m[0m

2023-04-18 21:25:10,006 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-18 21:25:10,035 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ******************************************************************
2023-04-18 21:25:10,473 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:10,492 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] ***************************************************************
2023-04-18 21:25:10,514 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:10,538 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ******************************************************************
2023-04-18 21:25:10,864 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:10,900 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] **************************************************************
2023-04-18 21:25:13,387 p=99975 u=ubuntu n=ansible | >> Newly checked out 8059b3819fe0c947968f8394386b412bafb8cf9c
2023-04-18 21:25:13,388 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:13,408 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] ************************************************************
2023-04-18 21:25:13,594 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:13,619 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] ************************************************
2023-04-18 21:25:13,861 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:13,886 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ******************************************************************
2023-04-18 21:25:14,155 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:14,175 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] ****************************************************************
2023-04-18 21:25:14,411 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /usr/local/bin/gxadmin
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: link[0m
[0;32m[0m

2023-04-18 21:25:14,411 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:14,431 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] ***************************************************************
2023-04-18 21:25:14,627 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /root/.config
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 21:25:14,628 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:14,647 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ************************************
2023-04-18 21:25:15,169 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpyvjmqnax[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+# Gxadmin local function[0m
[0;32m\ No newline at end of file[0m
[0;32m[0m

2023-04-18 21:25:15,169 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,188 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] ***********************************************
2023-04-18 21:25:15,526 p=99975 u=ubuntu n=ansible | [0;31m--- before: /root/.config/gxadmin-local.sh (content)[0m
[0;31m[0m[0;32m+++ after: /root/.config/gxadmin-local.sh (content)[0m
[0;32m[0m[0;36m@@ -1 +1,10 @@[0m
[0;36m[0m[0;31m-# Gxadmin local function[0m
[0;31m\ No newline at end of file[0m
[0;31m[0m[0;32m+# Gxadmin local function[0m
[0;32m[0m[0;32m+# BEGIN ANSIBLE MANAGED BLOCK[0m
[0;32m[0m[0;32m+local_cats() { ## : Makes cat noises[0m
[0;32m[0m[0;32m+	handle_help "$@" <<-EOF[0m
[0;32m[0m[0;32m+		Here is some documentation on this function[0m
[0;32m[0m[0;32m+	EOF[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+	echo "Meow"[0m
[0;32m[0m[0;32m+}[0m
[0;32m[0m[0;32m+# END ANSIBLE MANAGED BLOCK[0m
[0;32m[0m

2023-04-18 21:25:15,526 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,566 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] ***************************************************************
2023-04-18 21:25:15,604 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,626 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ********************************
2023-04-18 21:25:15,668 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,691 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ******************************
2023-04-18 21:25:15,708 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,730 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***************************************
2023-04-18 21:25:15,768 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:15,790 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ********************************************************************
2023-04-18 21:25:15,884 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:15,942 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *******************************************************
2023-04-18 21:25:16,021 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:16,063 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] ****************************************************************
2023-04-18 21:25:21,427 p=99975 u=ubuntu n=ansible | The following NEW packages will be installed:
  apt-transport-https
0 upgraded, 1 newly installed, 0 to remove and 8 not upgraded.
2023-04-18 21:25:21,427 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:21,449 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ******************************************************************
2023-04-18 21:25:22,495 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:22,524 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-18 21:25:22,547 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:22,572 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-18 21:25:28,608 p=99975 u=ubuntu n=ansible | [0;31m--- before: /dev/null[0m
[0;31m[0m[0;32m+++ after: /etc/apt/sources.list.d/cernvm.list.list[0m
[0;32m[0m[0;36m@@ -0,0 +1 @@[0m
[0;36m[0m[0;32m+deb [allow-insecure=true] https://cvmrepo.web.cern.ch/cvmrepo/apt/ jammy-prod main[0m
[0;32m[0m

2023-04-18 21:25:28,608 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:28,628 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *********************************************************
2023-04-18 21:25:28,646 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:28,669 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***************************************
2023-04-18 21:25:42,799 p=99975 u=ubuntu n=ansible | The following additional packages will be installed:
  attr autofs cvmfs-config-default cvmfs-fuse3 gdb keyutils libbabeltrace1
  libboost-regex1.74.0 libc6-dbg libdebuginfod-common libdebuginfod1 libipt2
  libnfsidmap1 libossp-uuid16 libsource-highlight-common
  libsource-highlight4v5 nfs-common rpcbind uuid uuid-dev
Suggested packages:
  gdb-doc gdbserver watchdog
The following NEW packages will be installed:
  attr autofs cvmfs cvmfs-config-default cvmfs-fuse3 gdb keyutils
  libbabeltrace1 libboost-regex1.74.0 libc6-dbg libdebuginfod-common
  libdebuginfod1 libipt2 libnfsidmap1 libossp-uuid16
  libsource-highlight-common libsource-highlight4v5 nfs-common rpcbind uuid
  uuid-dev
0 upgraded, 21 newly installed, 0 to remove and 8 not upgraded.
2023-04-18 21:25:42,800 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:42,825 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] *****************************************************************
2023-04-18 21:25:42,866 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:42,900 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] **********************************************************
2023-04-18 21:25:43,154 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,2 +1,2 @@[0m
[0;36m[0m path: /etc/cvmfs/keys/galaxyproject.org
[0;31m-state: absent[0m
[0;31m[0m[0;32m+state: directory[0m
[0;32m[0m

2023-04-18 21:25:43,157 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-18 21:25:43,178 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ******************************************************************
2023-04-18 21:25:43,709 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp6h0zp3lt[0m
[0;32m[0m[0;36m@@ -0,0 +1,9 @@[0m
[0;36m[0m[0;32m+-----BEGIN PUBLIC KEY-----[0m
[0;32m[0m[0;32m+MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuJZTWTY3/dBfspFKifv8[0m
[0;32m[0m[0;32m+TWuuT2Zzoo1cAskKpKu5gsUAyDFbZfYBEy91qbLPC3TuUm2zdPNsjCQbbq1Liufk[0m
[0;32m[0m[0;32m+uNPZJ8Ubn5PR6kndwrdD13NVHZpXVml1+ooTSF5CL3x/KUkYiyRz94sAr9trVoSx[0m
[0;32m[0m[0;32m+THW2buV7ADUYivX7ofCvBu5T6YngbPZNIxDB4mh7cEal/UDtxV683A/5RL4wIYvt[0m
[0;32m[0m[0;32m+S5SVemmu6Yb8GkGwLGmMVLYXutuaHdMFyKzWm+qFlG5JRz4okUWERvtJ2QAJPOzL[0m
[0;32m[0m[0;32m+mAG1ceyBFowj/r3iJTa+Jcif2uAmZxg+cHkZG5KzATykF82UH1ojUzREMMDcPJi2[0m
[0;32m[0m[0;32m+dQIDAQAB[0m
[0;32m[0m[0;32m+-----END PUBLIC KEY-----[0m
[0;32m[0m

2023-04-18 21:25:43,714 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-18 21:25:43,735 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] ***************************************************************
2023-04-18 21:25:44,024 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:44,050 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ******************************************************
2023-04-18 21:25:44,393 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:44,415 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] *************************************
2023-04-18 21:25:45,353 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:45,373 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] ***************************************************************
2023-04-18 21:25:45,871 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp09ce6pmm[0m
[0;32m[0m[0;36m@@ -0,0 +1,3 @@[0m
[0;36m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+CVMFS_SERVER_URL="http://cvmfs1-psu0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-iu0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-tacc0.galaxyproject.org/cvmfs/@fqrn@;http://cvmfs1-ufr0.galaxyproject.eu/cvmfs/@fqrn@;http://cvmfs1-mel0.gvl.org.au/cvmfs/@fqrn@"[0m
[0;32m[0m[0;32m+CVMFS_PUBLIC_KEY="/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub"[0m
[0;32m[0m

2023-04-18 21:25:45,871 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:45,891 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] ****************************************************************
2023-04-18 21:25:46,385 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmpt261lci6[0m
[0;32m[0m[0;36m@@ -0,0 +1,4 @@[0m
[0;36m[0m[0;32m+## This file is maintained by Ansible - CHANGES WILL BE OVERWRITTEN[0m
[0;32m[0m[0;32m+CVMFS_CONFIG_REPOSITORY="cvmfs-config.galaxyproject.org"[0m
[0;32m[0m[0;32m+CVMFS_DEFAULT_DOMAIN="galaxyproject.org"[0m
[0;32m[0m[0;32m+CVMFS_USE_GEOAPI="no"[0m
[0;32m[0m

2023-04-18 21:25:46,385 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:46,408 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] *************************************************************
2023-04-18 21:25:46,574 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:46,595 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] **************************************************************
2023-04-18 21:25:46,609 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:46,629 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] **********************************************
2023-04-18 21:25:47,081 p=99975 u=ubuntu n=ansible | [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-99975f68t72lu/tmp4a7fwzw8[0m
[0;32m[0m[0;36m@@ -0,0 +1,4 @@[0m
[0;36m[0m[0;32m+CVMFS_REPOSITORIES=""[0m
[0;32m[0m[0;32m+CVMFS_HTTP_PROXY="DIRECT"[0m
[0;32m[0m[0;32m+CVMFS_QUOTA_LIMIT="500"[0m
[0;32m[0m[0;32m+CVMFS_CACHE_BASE="/var/lib/cvmfs"[0m
[0;32m[0m

2023-04-18 21:25:47,081 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,101 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] *************************************************
2023-04-18 21:25:47,144 p=99975 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-18 21:25:47,179 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-18 21:25:47,199 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,218 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *******************************************************
2023-04-18 21:25:47,245 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,264 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] ***************************************************
2023-04-18 21:25:47,294 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,313 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] ****************************************************
2023-04-18 21:25:47,519 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,540 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] ************************************************
2023-04-18 21:25:47,576 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,596 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] *************************************************
2023-04-18 21:25:47,779 p=99975 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,798 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *********************************************
2023-04-18 21:25:47,825 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,847 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ******************************************************************
2023-04-18 21:25:47,863 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,884 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ******************************************************************
2023-04-18 21:25:47,898 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:47,918 p=99975 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] ****************************************************************
2023-04-18 21:25:47,933 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,005 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] *****************************************************************
2023-04-18 21:25:48,341 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,400 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : restart nginx] ****************************************************************
2023-04-18 21:25:48,750 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,771 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] ***************************************************
2023-04-18 21:25:48,795 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,814 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl restart nginx] **************************************************
2023-04-18 21:25:48,835 p=99975 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-18 21:25:48,854 p=99975 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.cvmfs : Reload autofs] ****************************************************************
2023-04-18 21:25:49,154 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:49,173 p=99975 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] ************************************************************************************
2023-04-18 21:25:49,379 p=99975 u=ubuntu n=ansible | [0;31m--- before: crontab for user "galaxy"[0m
[0;31m[0m[0;32m+++ after: crontab for user "galaxy"[0m
[0;32m[0m[0;36m@@ -0,0 +1,2 @@[0m
[0;36m[0m[0;32m+#Ansible: Cleanup Old User Data[0m
[0;32m[0m[0;32m+0 0 * * * GALAXY_LOG_DIR=/tmp/gxadmin/ GALAXY_ROOT=/srv/galaxy/server /usr/local/bin/gxadmin galaxy cleanup 60[0m
[0;32m[0m

2023-04-18 21:25:49,379 p=99975 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-18 21:25:49,420 p=99975 u=ubuntu n=ansible | PLAY RECAP ***********************************************************************************************************
2023-04-18 21:25:49,420 p=99975 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=182  changed=62   unreachable=0    failed=0    skipped=91   rescued=0    ignored=0   
2023-04-19 06:38:39,463 p=171727 u=ubuntu n=ansible | [DEPRECATION WARNING]: community.general.system.make has been deprecated. You 
are using an internal name to access the community.general.make modules. This 
has never been supported or documented, and will stop working in 
community.general 9.0.0. This feature will be removed from community.general in
 version 9.0.0. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
2023-04-19 06:38:39,543 p=171727 u=ubuntu n=ansible | PLAY [dbservers] ***************************************************************
2023-04-19 06:38:39,557 p=171727 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 06:38:40,735 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:40,741 p=171727 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 06:38:41,611 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:41,627 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 06:38:41,651 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/debian.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:41,661 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : APT keyrings directory] ***********************
2023-04-19 06:38:41,682 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:41,688 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg package signing key (Debian/pgdg)] ***
2023-04-19 06:38:41,710 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:41,716 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pgdg repository (Debian/pgdg)] ********
2023-04-19 06:38:41,737 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:41,743 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install PostgreSQL (Debian)] ******************
2023-04-19 06:38:42,436 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:42,442 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Get installed version] ************************
2023-04-19 06:38:42,701 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:42,708 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 06:38:42,747 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:42,754 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install psycopg2] *****************************
2023-04-19 06:38:43,509 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,516 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set version fact] *****************************
2023-04-19 06:38:43,538 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,545 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set OS-specific variables] ********************
2023-04-19 06:38:43,575 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,581 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set pgdata fact] ******************************
2023-04-19 06:38:43,605 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,611 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf dir fact] ****************************
2023-04-19 06:38:43,635 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,641 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 06:38:43,653 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,660 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create conf.d] ********************************
2023-04-19 06:38:43,920 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:43,926 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Check for conf.d include in postgresql.conf] ***
2023-04-19 06:38:44,184 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:44,190 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set conf.d include in postgresql.conf] ********
2023-04-19 06:38:44,211 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:44,217 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Include 25ansible_postgresql.conf in postgresql.conf] ***
2023-04-19 06:38:44,391 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:44,397 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set config options] ***************************
2023-04-19 06:38:44,824 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:44,830 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install pg_hba.conf] **************************
2023-04-19 06:38:45,173 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:45,178 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : include_tasks] ********************************
2023-04-19 06:38:45,208 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.postgresql/tasks/backup.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:45,219 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup directories] ********************
2023-04-19 06:38:45,403 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups)
2023-04-19 06:38:45,547 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/var/lib/postgresql/backups/bin)
2023-04-19 06:38:45,555 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Create backup output directory] ***************
2023-04-19 06:38:45,722 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:45,728 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script templates] **************
2023-04-19 06:38:46,044 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=archive_wal.sh)
2023-04-19 06:38:46,053 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Install backup script files] ******************
2023-04-19 06:38:46,376 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=backup.py)
2023-04-19 06:38:46,384 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Set WAL archive config options] ***************
2023-04-19 06:38:46,720 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:46,727 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Schedule backups] *****************************
2023-04-19 06:38:47,036 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,042 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Remove PostgreSQL working WAL backup cron job] ***
2023-04-19 06:38:47,199 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,205 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql : Ensure PostgreSQL is running] *****************
2023-04-19 06:38:47,709 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,721 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Warn if deprecated user priv param is set] ***
2023-04-19 06:38:47,743 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=galaxy) 
2023-04-19 06:38:47,745 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,752 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Revoke extra privileges] **************
2023-04-19 06:38:47,762 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,768 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop databases] ***********************
2023-04-19 06:38:47,802 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item={'name': 'galaxy', 'owner': 'galaxy'}) 
2023-04-19 06:38:47,804 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:47,810 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create and drop users] ****************
2023-04-19 06:38:48,165 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:38:48,173 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create groups] ************************
2023-04-19 06:38:48,184 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:48,190 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Add or remove users from groups] ******
2023-04-19 06:38:48,211 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:48,217 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Drop groups] **************************
2023-04-19 06:38:48,228 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:48,233 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Create databases] *********************
2023-04-19 06:38:48,638 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:38:48,646 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.postgresql_objects : Grant extra privileges] ***************
2023-04-19 06:38:48,657 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:48,724 p=171727 u=ubuntu n=ansible | PLAY [galaxyservers] ***********************************************************
2023-04-19 06:38:48,769 p=171727 u=ubuntu n=ansible | TASK [Gathering Facts] *********************************************************
2023-04-19 06:38:49,542 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:49,559 p=171727 u=ubuntu n=ansible | TASK [Install Dependencies] ****************************************************
2023-04-19 06:38:50,268 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:50,288 p=171727 u=ubuntu n=ansible | TASK [Install RHEL/CentOS/Rocky specific dependencies] *************************
2023-04-19 06:38:50,301 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:50,329 p=171727 u=ubuntu n=ansible | TASK [Install Debian/Ubuntu specific dependencies] *****************************
2023-04-19 06:38:51,028 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:51,080 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Fetch latest tusd release information] **************
2023-04-19 06:38:51,662 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:51,681 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set latest tusd release number] *********************
2023-04-19 06:38:51,700 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:51,720 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Check for tusd existence] ***************************
2023-04-19 06:38:51,936 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:51,957 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Get current tusd version] ***************************
2023-04-19 06:38:52,138 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,156 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Set current tusd version fact] **********************
2023-04-19 06:38:52,206 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,225 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Report why tusd is being installed] *****************
2023-04-19 06:38:52,238 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,257 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Create tempdir for unarchive] ***********************
2023-04-19 06:38:52,271 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,291 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Extract tusd binary] ********************************
2023-04-19 06:38:52,306 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,329 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd binary] ********************************
2023-04-19 06:38:52,349 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,370 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Clean tempdir] **************************************
2023-04-19 06:38:52,385 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,403 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Include systemd tasks] ******************************
2023-04-19 06:38:52,436 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.tusd/tasks/systemd.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:52,469 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Install tusd service unit] **************************
2023-04-19 06:38:52,481 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,501 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Flush handlers] *************************************
2023-04-19 06:38:52,535 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.tusd : Ensure configured tusd instances are enabled and running] ***
2023-04-19 06:38:52,546 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,581 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Add apptainer ppa (Ubuntu)] *********************
2023-04-19 06:38:52,973 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:52,991 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.apptainer : Install apptainer] ******************************
2023-04-19 06:38:53,736 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:53,772 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure that mutually exclusive options are not set] ***
2023-04-19 06:38:53,789 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => changed=false 
  msg: All assertions passed
2023-04-19 06:38:53,807 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set privilege separation default variables] *******
2023-04-19 06:38:53,849 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:53,868 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include layout vars] ******************************
2023-04-19 06:38:53,901 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:53,920 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables from layout defaults] *****
2023-04-19 06:38:53,956 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_venv_dir)
2023-04-19 06:38:53,970 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_server_dir)
2023-04-19 06:38:53,980 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_config_dir)
2023-04-19 06:38:53,984 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_data_dir)
2023-04-19 06:38:53,988 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_mutable_config_dir)
2023-04-19 06:38:53,995 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_shed_tools_dir)
2023-04-19 06:38:54,002 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_cache_dir)
2023-04-19 06:38:54,005 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_local_tools_dir)
2023-04-19 06:38:54,009 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy_tool_data_path)
2023-04-19 06:38:54,029 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check that any explicitly set Galaxy config options match the values of explicitly set variables] ***
2023-04-19 06:38:54,091 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir) 
2023-04-19 06:38:54,121 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=file_path) 
2023-04-19 06:38:54,152 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=job_working_directory) 
2023-04-19 06:38:54,179 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training] => (item=shed_tool_config_file) 
2023-04-19 06:38:54,181 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:54,200 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set any unset variables corresponding to Galaxy config options from galaxy_config or layout defaults] ***
2023-04-19 06:38:54,281 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=tool_dependency_dir)
2023-04-19 06:38:54,316 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=file_path)
2023-04-19 06:38:54,360 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=job_working_directory)
2023-04-19 06:38:54,385 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include user creation tasks] **********************
2023-04-19 06:38:54,436 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/user.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:54,472 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy group] ******************************
2023-04-19 06:38:54,572 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:54,590 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy user] *******************************
2023-04-19 06:38:55,154 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:55,173 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy privilege separation user] **********
2023-04-19 06:38:55,282 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:38:55,301 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group IDs for Galaxy users] *******************
2023-04-19 06:38:55,623 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:38:55,773 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 06:38:55,795 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get group names for Galaxy users] *****************
2023-04-19 06:38:55,970 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:38:56,118 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=root)
2023-04-19 06:38:56,139 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set Galaxy user facts] ****************************
2023-04-19 06:38:56,219 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:56,237 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine whether to restrict to group permissions] ***
2023-04-19 06:38:56,255 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:56,273 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include path management tasks] ********************
2023-04-19 06:38:56,306 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/paths.yml for gat-20.eu.galaxy.training
2023-04-19 06:38:56,343 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create galaxy_root] *******************************
2023-04-19 06:38:56,675 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:38:56,693 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional privilege separated directories] ***
2023-04-19 06:38:57,031 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/venv)
2023-04-19 06:38:57,326 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/server)
2023-04-19 06:38:57,640 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/config)
2023-04-19 06:38:57,958 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/local_tools)
2023-04-19 06:38:57,981 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create additional directories] ********************
2023-04-19 06:38:58,311 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var)
2023-04-19 06:38:58,618 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 06:38:58,934 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/cache)
2023-04-19 06:38:59,235 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/shed_tools)
2023-04-19 06:38:59,541 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/dependencies)
2023-04-19 06:38:59,833 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/datasets)
2023-04-19 06:39:00,127 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data/jobs)
2023-04-19 06:39:00,434 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/tool_data)
2023-04-19 06:39:00,735 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/log)
2023-04-19 06:39:01,029 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/data)
2023-04-19 06:39:01,050 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include clone tasks] ******************************
2023-04-19 06:39:01,111 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/clone.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:01,150 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Update Galaxy to specified ref] *******************
2023-04-19 06:39:02,546 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:02,564 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report Galaxy version change] *********************
2023-04-19 06:39:02,660 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:02,678 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 06:39:04,369 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:04,388 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 06:39:06,088 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,107 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove orphaned .pyc files and compile bytecode] ***
2023-04-19 06:39:06,205 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,223 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include download tasks] ***************************
2023-04-19 06:39:06,236 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,254 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include manage existing galaxy tasks] *************
2023-04-19 06:39:06,266 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,284 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include static config setup tasks] ****************
2023-04-19 06:39:06,337 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/static_setup.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:06,383 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 06:39:06,505 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/_inc_galaxy_version.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:06,546 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy version file] **********************
2023-04-19 06:39:06,957 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:06,975 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Determine Galaxy version] *************************
2023-04-19 06:39:07,174 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:07,192 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static)] ***
2023-04-19 06:39:07,668 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/themes.yml', 'dest': '/srv/galaxy/config/themes.yml'})
2023-04-19 06:39:07,688 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (static, public)] ***
2023-04-19 06:39:08,155 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'files/galaxy/welcome.html', 'dest': '/srv/galaxy/var/config/welcome.html'})
2023-04-19 06:39:08,175 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional Galaxy config files (template)] ***
2023-04-19 06:39:08,673 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/container_resolvers_conf.yml.j2', 'dest': '/srv/galaxy/config/container_resolvers_conf.yml'})
2023-04-19 06:39:09,119 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'templates/galaxy/config/dependency_resolvers_conf.xml', 'dest': '/srv/galaxy/config/dependency_resolvers_conf.xml'})
2023-04-19 06:39:09,140 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local tools] ******************************
2023-04-19 06:39:09,168 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,186 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install local_tool_conf.xml] **********************
2023-04-19 06:39:09,285 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,303 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append local_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 06:39:09,405 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,424 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Append shed_tool_conf.xml to tool_config_file Galaxy config option] ***
2023-04-19 06:39:09,522 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,542 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic job rules paths exists] ************
2023-04-19 06:39:09,557 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,576 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (static)] ***************
2023-04-19 06:39:09,590 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,609 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install dynamic job rules (template)] *************
2023-04-19 06:39:09,622 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,640 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure dynamic rule __init__.py's exist] **********
2023-04-19 06:39:09,653 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,673 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy job metrics configuration file] *****
2023-04-19 06:39:09,772 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,790 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy dependency resolvers configuration file] ***
2023-04-19 06:39:09,891 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:09,910 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy container resolvers configuration file] ***
2023-04-19 06:39:10,008 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:10,027 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy configuration file] *****************
2023-04-19 06:39:10,604 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:10,622 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include dependency setup tasks] *******************
2023-04-19 06:39:10,673 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/dependencies.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:10,720 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create Galaxy virtualenv] *************************
2023-04-19 06:39:12,297 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:12,316 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure pip is the desired release] ****************
2023-04-19 06:39:14,007 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:14,026 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy base dependencies] *****************
2023-04-19 06:39:18,920 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:18,939 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect Galaxy conditional dependency requirement strings] ***
2023-04-19 06:39:19,506 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:19,525 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install Galaxy conditional dependencies] **********
2023-04-19 06:39:21,106 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:21,127 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install additional packages into galaxy's virtual environment] ***
2023-04-19 06:39:21,225 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:21,243 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include mutable config setup tasks] ***************
2023-04-19 06:39:21,291 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/mutable_setup.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:21,343 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure Galaxy version is set] *********************
2023-04-19 06:39:21,440 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:21,459 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Create directories for config files] **************
2023-04-19 06:39:21,957 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/srv/galaxy/var/config)
2023-04-19 06:39:21,976 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration files] **********
2023-04-19 06:39:22,405 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_data_manager_conf.xml', 'dest': '/srv/galaxy/var/config/shed_data_manager_conf.xml'})
2023-04-19 06:39:22,704 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_data_table_conf.xml', 'dest': '/srv/galaxy/var/config/shed_tool_data_table_conf.xml'})
2023-04-19 06:39:22,726 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Instantiate mutable configuration templates] ******
2023-04-19 06:39:23,108 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/migrated_tools_conf.xml'})
2023-04-19 06:39:23,408 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item={'src': 'shed_tool_conf.xml.j2', 'dest': '/srv/galaxy/var/config/shed_tool_conf.xml'})
2023-04-19 06:39:23,429 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include database management tasks] ****************
2023-04-19 06:39:23,464 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/database.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:23,516 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy DB version] ********************
2023-04-19 06:39:24,898 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:24,917 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get maximum Galaxy DB version] ********************
2023-04-19 06:39:26,195 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:26,214 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report current and max Galaxy database] ***********
2023-04-19 06:39:26,314 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:26,333 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Upgrade Galaxy DB] ********************************
2023-04-19 06:39:26,430 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:26,449 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build tasks] ***********************
2023-04-19 06:39:26,517 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:26,575 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure client_build_hash.txt exists] **************
2023-04-19 06:39:26,912 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:26,931 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current client commit id] *********************
2023-04-19 06:39:27,252 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:27,271 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if Galaxy was checked out from git] *********
2023-04-19 06:39:27,606 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:27,625 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Get current Galaxy commit id] *********************
2023-04-19 06:39:27,977 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:27,996 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 06:39:28,173 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,192 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Set client build version fact] ********************
2023-04-19 06:39:28,367 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,385 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Report client version mismatch] *******************
2023-04-19 06:39:28,483 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,502 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Ensure galaxy_node_version is set] ****************
2023-04-19 06:39:28,601 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,620 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Check if node is installed] ***********************
2023-04-19 06:39:28,722 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,740 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Collect installed node version] *******************
2023-04-19 06:39:28,841 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,860 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Remove node_modules directory when upgrading node] ***
2023-04-19 06:39:28,963 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:28,982 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install or upgrade node] **************************
2023-04-19 06:39:29,085 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,104 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Install yarn] *************************************
2023-04-19 06:39:29,207 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,227 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include client build process] *********************
2023-04-19 06:39:29,325 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,344 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include error document setup tasks] ***************
2023-04-19 06:39:29,358 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,376 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include Gravity setup tasks] **********************
2023-04-19 06:39:29,414 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/gravity.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:29,485 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Register Galaxy config with Gravity (Gravity < 1)] ***
2023-04-19 06:39:29,586 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:29,607 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Deploy galaxyctl wrapper script] ******************
2023-04-19 06:39:30,214 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,234 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Galaxy)] ********
2023-04-19 06:39:30,251 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,270 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include systemd unit setup tasks (Reports)] *******
2023-04-19 06:39:30,282 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,303 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Include cleanup scheduling tasks] *****************
2023-04-19 06:39:30,336 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.galaxy/tasks/cleanup.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:30,395 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (root)] ****************
2023-04-19 06:39:30,789 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,814 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.galaxy : Schedule tmpclean cron job (user)] ****************
2023-04-19 06:39:30,925 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:30,960 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Check for miniconda existence] *****************
2023-04-19 06:39:31,121 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,139 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Include install tasks] *************************
2023-04-19 06:39:31,154 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,172 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Collect miniconda version] *********************
2023-04-19 06:39:31,525 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,543 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (exact)] **************
2023-04-19 06:39:31,576 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,594 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update miniconda version (latest)] *************
2023-04-19 06:39:31,609 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,627 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Install packages to conda base environment] ****
2023-04-19 06:39:31,640 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,661 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create conda envs] *****************************
2023-04-19 06:39:31,684 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,703 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Update conda envs] *****************************
2023-04-19 06:39:31,725 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,743 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.miniconda : Create Galaxy conda env] ***********************
2023-04-19 06:39:31,757 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:31,795 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 06:39:31,833 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/apt.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:31,863 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install nginx (APT)] *******************************
2023-04-19 06:39:32,568 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:32,588 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable default vhost] *****************************
2023-04-19 06:39:32,758 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:32,777 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 06:39:32,790 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:32,808 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 06:39:32,822 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:32,841 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Collect nginx -V output] ***************************
2023-04-19 06:39:32,996 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,015 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Make nginx -V output a single line] ****************
2023-04-19 06:39:33,042 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,060 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register nginx-reported facts] *********************
2023-04-19 06:39:33,088 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,109 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Register fake news nginx facts] ********************
2023-04-19 06:39:33,122 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,141 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Admit to fake news nginx facts] ********************
2023-04-19 06:39:33,154 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,172 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : include_tasks] *************************************
2023-04-19 06:39:33,185 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,204 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Create supervisor config] **************************
2023-04-19 06:39:33,227 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,246 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Set additional config options] *********************
2023-04-19 06:39:33,568 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,586 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Copy additional configs] ***************************
2023-04-19 06:39:33,615 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:33,634 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install vhost configs] *****************************
2023-04-19 06:39:33,970 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 06:39:33,991 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable vhosts] *************************************
2023-04-19 06:39:34,178 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=redirect-ssl)
2023-04-19 06:39:34,198 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check non-SSL nginx config] ************************
2023-04-19 06:39:34,612 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:34,630 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL configuration tasks] *******************
2023-04-19 06:39:34,709 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-external.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:34,745 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Flush handlers before running SSL role] ************
2023-04-19 06:39:34,778 p=171727 u=ubuntu n=ansible | TASK [Include SSL role] ********************************************************
2023-04-19 06:39:34,969 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include virtualenv installation tasks] ************
2023-04-19 06:39:35,005 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/install-with-venv.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:35,038 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot into virtualenv] ******************
2023-04-19 06:39:35,820 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,839 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Install certbot DNS provider] *********************
2023-04-19 06:39:35,860 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,878 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Set Certbot script variable.] *********************
2023-04-19 06:39:35,895 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,914 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include source installation tasks] ****************
2023-04-19 06:39:35,927 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,945 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include package installation tasks] ***************
2023-04-19 06:39:35,958 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:35,977 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cert request tasks] ***********************
2023-04-19 06:39:36,013 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/request-cert.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:36,073 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create webroot directories] ***********************
2023-04-19 06:39:36,253 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,271 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credential directory] *********
2023-04-19 06:39:36,293 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,311 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create DNS provider credentials] ******************
2023-04-19 06:39:36,333 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,352 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Request certificate] ******************************
2023-04-19 06:39:36,552 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,572 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Log output of certbot command] ********************
2023-04-19 06:39:36,594 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => 
  request:
    changed: false
    cmd:
    - /opt/certbot/bin/certbot
    - certonly
    - --test-cert
    - --non-interactive
    - --webroot
    - --register-unsafely-without-email
    - --agree-tos
    - -w
    - /srv/nginx/_well-known_root
    - -d
    - gat-20.eu.galaxy.training
    delta: null
    end: null
    failed: false
    msg: Did not run command since '/etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf' exists
    rc: 0
    start: null
    stderr: ''
    stderr_lines: []
    stdout: skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
    stdout_lines:
    - skipped, since /etc/letsencrypt/renewal/gat-20.eu.galaxy.training.conf exists
2023-04-19 06:39:36,613 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include post-renewal script setup tasks] **********
2023-04-19 06:39:36,655 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/post-renewal.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:36,697 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Create the ssl-cert group if it doesn't exist] ****
2023-04-19 06:39:36,715 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:36,735 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Write the certificate post-renewal hook script] ***
2023-04-19 06:39:37,091 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:37,110 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Flush handlers] ***********************************
2023-04-19 06:39:37,144 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Include cron setup tasks] *************************
2023-04-19 06:39:37,178 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/usegalaxy_eu.certbot/tasks/renew-cron.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:37,219 p=171727 u=ubuntu n=ansible | TASK [usegalaxy_eu.certbot : Add cron job for certbot renewal (if configured).] ***
2023-04-19 06:39:37,399 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:37,435 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Disable ssl_prefer_server_ciphers in nginx.conf if set] ***
2023-04-19 06:39:37,591 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:37,609 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Configure server-wide SSL] *************************
2023-04-19 06:39:37,958 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:37,977 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Ensure nginx SSL directory exists] *****************
2023-04-19 06:39:38,143 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:38,163 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Generate strong Diffie-Hellman group] **************
2023-04-19 06:39:38,317 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:38,337 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Include SSL server (vhost) tasks] ******************
2023-04-19 06:39:38,374 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.nginx/tasks/ssl-server.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:38,408 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Install SSL vhost configs] *************************
2023-04-19 06:39:39,109 p=171727 u=ubuntu n=ansible | [0;31m--- before: /etc/nginx/sites-available/galaxy[0m
[0;31m[0m[0;32m+++ after: /home/ubuntu/.ansible/tmp/ansible-local-171727w2nzu3wo/tmpkhcr35lb/galaxy.j2[0m
[0;32m[0m[0;36m@@ -26,7 +26,7 @@[0m
[0;36m[0m 		proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 		proxy_set_header X-Forwarded-Proto $scheme;
 		proxy_set_header Upgrade $http_upgrade;
[0;31m-   [0m
[0;31m[0m[0;32m+	}   [0m
[0;32m[0m 	location /api/upload/resumable_upload {
 		# Disable request and response buffering
 		proxy_request_buffering     off;
[0;36m@@ -41,7 +41,6 @@[0m
[0;36m[0m 		proxy_set_header Connection         "upgrade";
 		client_max_body_size        0;
 		proxy_pass http://localhost:1080/files;
[0;31m-	}[0m
[0;31m[0m 	}
 
 	# Static files can be more efficiently served by Nginx. Why send the


2023-04-19 06:39:39,111 p=171727 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:39:39,131 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable SSL vhosts] *********************************
2023-04-19 06:39:39,316 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=galaxy)
2023-04-19 06:39:39,336 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Check SSL nginx config] ****************************
2023-04-19 06:39:39,507 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:39,525 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (supervisor)] *************************
2023-04-19 06:39:39,542 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:39,560 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.nginx : Enable nginx (service)] ****************************
2023-04-19 06:39:39,840 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:39,875 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Clone gxadmin repository] ************************
2023-04-19 06:39:40,496 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:40,515 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Check if executable exists] **********************
2023-04-19 06:39:40,675 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:40,693 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Compile gxadmin when there are updates] **********
2023-04-19 06:39:40,707 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:40,725 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create bin directory] ****************************
2023-04-19 06:39:40,885 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:40,907 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Add gxadmin to bin dir] **************************
2023-04-19 06:39:41,080 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,098 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Create config directory] *************************
2023-04-19 06:39:41,256 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,276 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Copy local file if the destination does not exist.] ***
2023-04-19 06:39:41,440 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,458 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.gxadmin : Insert configuration using a local file] *********
2023-04-19 06:39:41,713 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,748 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set OS-specific variables] *************************
2023-04-19 06:39:41,785 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,803 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS config repository, if enabled] ***
2023-04-19 06:39:41,838 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,857 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for Galaxy CVMFS static repositories, if enabled] ***
2023-04-19 06:39:41,869 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,887 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set facts for CVMFS config repository, if enabled] ***
2023-04-19 06:39:41,924 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:41,942 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Client Tasks] ******************************
2023-04-19 06:39:42,022 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/client.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:42,082 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include initial OS-specific tasks] *****************
2023-04-19 06:39:42,138 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/init_debian.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:42,170 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install apt dependencies] **************************
2023-04-19 06:39:42,875 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:42,894 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM apt key] ****************************
2023-04-19 06:39:43,513 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:43,532 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 06:39:43,546 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:43,565 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 06:39:43,856 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:43,874 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM apt repository] *******************
2023-04-19 06:39:43,889 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:43,908 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS packages and dependencies (apt)] ***
2023-04-19 06:39:44,651 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:44,669 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include key setup tasks] ***************************
2023-04-19 06:39:44,700 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/keys.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:44,735 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Make CernVM-FS key directories] ********************
2023-04-19 06:39:44,929 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org)
2023-04-19 06:39:44,951 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install CernVM-FS keys] ****************************
2023-04-19 06:39:45,290 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training] => (item=/etc/cvmfs/keys/galaxyproject.org/cvmfs-config.galaxyproject.org.pub)
2023-04-19 06:39:45,313 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Check CernVM-FS for setup] *************************
2023-04-19 06:39:45,545 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:45,564 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure AutoFS is enabled + running] ****************
2023-04-19 06:39:45,834 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:45,853 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Perform AutoFS and FUSE configuration for CernVM-FS] ***
2023-04-19 06:39:45,867 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:45,886 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Create config repo config] *************************
2023-04-19 06:39:46,213 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:46,232 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set config repo defaults] **************************
2023-04-19 06:39:46,549 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:46,568 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove domain configuration] ***********************
2023-04-19 06:39:46,741 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:46,760 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS domain] ************************
2023-04-19 06:39:46,773 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:46,791 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Configure CernVM-FS global client settings] ********
2023-04-19 06:39:47,113 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,131 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include repository client options tasks] ***********
2023-04-19 06:39:47,163 p=171727 u=ubuntu n=ansible | included: /home/ubuntu/galaxy/roles/galaxyproject.cvmfs/tasks/options.yml for gat-20.eu.galaxy.training
2023-04-19 06:39:47,195 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Ensure per-repository directories exist for repositories with options defined for client] ***
2023-04-19 06:39:47,208 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,227 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Set repository options for client] *****************
2023-04-19 06:39:47,250 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,269 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_wipecache setuid binary] *************
2023-04-19 06:39:47,293 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,312 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_wipecache setuid binary] **************
2023-04-19 06:39:47,483 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,501 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Install cvmfs_remount_sync setuid binary] **********
2023-04-19 06:39:47,525 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,543 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Remove cvmfs_remount_sync setuid binary] ***********
2023-04-19 06:39:47,713 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,732 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Download cvmfs_preload utility when desired] *******
2023-04-19 06:39:47,755 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,773 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum1 Tasks] ****************************
2023-04-19 06:39:47,786 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,805 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include Stratum0 Tasks] ****************************
2023-04-19 06:39:47,818 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,837 p=171727 u=ubuntu n=ansible | TASK [galaxyproject.cvmfs : Include localproxy Tasks] **************************
2023-04-19 06:39:47,850 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:47,919 p=171727 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : reload nginx] ***************************
2023-04-19 06:39:48,220 p=171727 u=ubuntu n=ansible | changed: [gat-20.eu.galaxy.training]
2023-04-19 06:39:48,238 p=171727 u=ubuntu n=ansible | RUNNING HANDLER [galaxyproject.nginx : supervisorctl reload nginx] *************
2023-04-19 06:39:48,255 p=171727 u=ubuntu n=ansible | skipping: [gat-20.eu.galaxy.training]
2023-04-19 06:39:48,274 p=171727 u=ubuntu n=ansible | TASK [Setup gxadmin cleanup task] **********************************************
2023-04-19 06:39:48,457 p=171727 u=ubuntu n=ansible | ok: [gat-20.eu.galaxy.training]
2023-04-19 06:39:48,493 p=171727 u=ubuntu n=ansible | PLAY RECAP *********************************************************************
2023-04-19 06:39:48,493 p=171727 u=ubuntu n=ansible | gat-20.eu.galaxy.training  : ok=151  changed=2    unreachable=0    failed=0    skipped=92   rescued=0    ignored=0   
